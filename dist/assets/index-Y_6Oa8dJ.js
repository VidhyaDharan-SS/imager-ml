function rC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const u=Object.getOwnPropertyDescriptor(i,r);u&&Object.defineProperty(t,r,u.get?u:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(r){if(r.ep)return;r.ep=!0;const u=n(r);fetch(r.href,u)}})();var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var q0={exports:{}},ec={},Q0={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),aC=Symbol.for("react.portal"),oC=Symbol.for("react.fragment"),lC=Symbol.for("react.strict_mode"),cC=Symbol.for("react.profiler"),uC=Symbol.for("react.provider"),fC=Symbol.for("react.context"),hC=Symbol.for("react.forward_ref"),dC=Symbol.for("react.suspense"),pC=Symbol.for("react.memo"),mC=Symbol.for("react.lazy"),im=Symbol.iterator;function gC(t){return t===null||typeof t!="object"?null:(t=im&&t[im]||t["@@iterator"],typeof t=="function"?t:null)}var J0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z0=Object.assign,ey={};function gs(t,e,n){this.props=t,this.context=e,this.refs=ey,this.updater=n||J0}gs.prototype.isReactComponent={};gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ty(){}ty.prototype=gs.prototype;function Jh(t,e,n){this.props=t,this.context=e,this.refs=ey,this.updater=n||J0}var Zh=Jh.prototype=new ty;Zh.constructor=Jh;Z0(Zh,gs.prototype);Zh.isPureReactComponent=!0;var rm=Array.isArray,ny=Object.prototype.hasOwnProperty,ed={current:null},iy={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var i,r={},u=null,m=null;if(e!=null)for(i in e.ref!==void 0&&(m=e.ref),e.key!==void 0&&(u=""+e.key),e)ny.call(e,i)&&!iy.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var s=Array(l),h=0;h<l;h++)s[h]=arguments[h+2];r.children=s}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:za,type:t,key:u,ref:m,props:r,_owner:ed.current}}function vC(t,e){return{$$typeof:za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function td(t){return typeof t=="object"&&t!==null&&t.$$typeof===za}function yC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sm=/\/+/g;function Qc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yC(""+t.key):e.toString(36)}function Do(t,e,n,i,r){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var m=!1;if(t===null)m=!0;else switch(u){case"string":case"number":m=!0;break;case"object":switch(t.$$typeof){case za:case aC:m=!0}}if(m)return m=t,r=r(m),t=i===""?"."+Qc(m,0):i,rm(r)?(n="",t!=null&&(n=t.replace(sm,"$&/")+"/"),Do(r,e,n,"",function(h){return h})):r!=null&&(td(r)&&(r=vC(r,n+(!r.key||m&&m.key===r.key?"":(""+r.key).replace(sm,"$&/")+"/")+t)),e.push(r)),1;if(m=0,i=i===""?".":i+":",rm(t))for(var l=0;l<t.length;l++){u=t[l];var s=i+Qc(u,l);m+=Do(u,e,n,s,r)}else if(s=gC(t),typeof s=="function")for(t=s.call(t),l=0;!(u=t.next()).done;)u=u.value,s=i+Qc(u,l++),m+=Do(u,e,n,s,r);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return m}function Qa(t,e,n){if(t==null)return t;var i=[],r=0;return Do(t,i,"","",function(u){return e.call(n,u,r++)}),i}function xC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Io={transition:null},wC={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Io,ReactCurrentOwner:ed};function sy(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Qa,forEach:function(t,e,n){Qa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qa(t,function(){e++}),e},toArray:function(t){return Qa(t,function(e){return e})||[]},only:function(t){if(!td(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=gs;Se.Fragment=oC;Se.Profiler=cC;Se.PureComponent=Jh;Se.StrictMode=lC;Se.Suspense=dC;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wC;Se.act=sy;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Z0({},t.props),r=t.key,u=t.ref,m=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,m=ed.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(s in e)ny.call(e,s)&&!iy.hasOwnProperty(s)&&(i[s]=e[s]===void 0&&l!==void 0?l[s]:e[s])}var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){l=Array(s);for(var h=0;h<s;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:za,type:t.type,key:r,ref:u,props:i,_owner:m}};Se.createContext=function(t){return t={$$typeof:fC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:uC,_context:t},t.Consumer=t};Se.createElement=ry;Se.createFactory=function(t){var e=ry.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:hC,render:t}};Se.isValidElement=td;Se.lazy=function(t){return{$$typeof:mC,_payload:{_status:-1,_result:t},_init:xC}};Se.memo=function(t,e){return{$$typeof:pC,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Io.transition;Io.transition={};try{t()}finally{Io.transition=e}};Se.unstable_act=sy;Se.useCallback=function(t,e){return Mt.current.useCallback(t,e)};Se.useContext=function(t){return Mt.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};Se.useEffect=function(t,e){return Mt.current.useEffect(t,e)};Se.useId=function(){return Mt.current.useId()};Se.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return Mt.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};Se.useRef=function(t){return Mt.current.useRef(t)};Se.useState=function(t){return Mt.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return Mt.current.useTransition()};Se.version="18.3.1";Q0.exports=Se;var B=Q0.exports;const we=Qh(B),am=rC({__proto__:null,default:we},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC=B,SC=Symbol.for("react.element"),CC=Symbol.for("react.fragment"),_C=Object.prototype.hasOwnProperty,TC=bC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kC={key:!0,ref:!0,__self:!0,__source:!0};function ay(t,e,n){var i,r={},u=null,m=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(m=e.ref);for(i in e)_C.call(e,i)&&!kC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:SC,type:t,key:u,ref:m,props:r,_owner:TC.current}}ec.Fragment=CC;ec.jsx=ay;ec.jsxs=ay;q0.exports=ec;var N=q0.exports,oy={exports:{}},Kt={},ly={exports:{}},cy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,k){var E=U.length;U.push(k);e:for(;0<E;){var R=E-1>>>1,D=U[R];if(0<r(D,k))U[R]=k,U[E]=D,E=R;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var k=U[0],E=U.pop();if(E!==k){U[0]=E;e:for(var R=0,D=U.length,W=D>>>1;R<W;){var M=2*(R+1)-1,P=U[M],z=M+1,$=U[z];if(0>r(P,E))z<D&&0>r($,P)?(U[R]=$,U[z]=E,R=z):(U[R]=P,U[M]=E,R=M);else if(z<D&&0>r($,E))U[R]=$,U[z]=E,R=z;else break e}}return k}function r(U,k){var E=U.sortIndex-k.sortIndex;return E!==0?E:U.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var m=Date,l=m.now();t.unstable_now=function(){return m.now()-l}}var s=[],h=[],f=1,a=null,o=3,c=!1,d=!1,v=!1,p=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var k=n(h);k!==null;){if(k.callback===null)i(h);else if(k.startTime<=U)i(h),k.sortIndex=k.expirationTime,e(s,k);else break;k=n(h)}}function w(U){if(v=!1,x(U),!d)if(n(s)!==null)d=!0,I(b);else{var k=n(h);k!==null&&A(w,k.startTime-U)}}function b(U,k){d=!1,v&&(v=!1,g(C),C=-1),c=!0;var E=o;try{for(x(k),a=n(s);a!==null&&(!(a.expirationTime>k)||U&&!L());){var R=a.callback;if(typeof R=="function"){a.callback=null,o=a.priorityLevel;var D=R(a.expirationTime<=k);k=t.unstable_now(),typeof D=="function"?a.callback=D:a===n(s)&&i(s),x(k)}else i(s);a=n(s)}if(a!==null)var W=!0;else{var M=n(h);M!==null&&A(w,M.startTime-k),W=!1}return W}finally{a=null,o=E,c=!1}}var S=!1,_=null,C=-1,T=5,O=-1;function L(){return!(t.unstable_now()-O<T)}function j(){if(_!==null){var U=t.unstable_now();O=U;var k=!0;try{k=_(!0,U)}finally{k?H():(S=!1,_=null)}}else S=!1}var H;if(typeof y=="function")H=function(){y(j)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,V=F.port2;F.port1.onmessage=j,H=function(){V.postMessage(null)}}else H=function(){p(j,0)};function I(U){_=U,S||(S=!0,H())}function A(U,k){C=p(function(){U(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){d||c||(d=!0,I(b))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return o},t.unstable_getFirstCallbackNode=function(){return n(s)},t.unstable_next=function(U){switch(o){case 1:case 2:case 3:var k=3;break;default:k=o}var E=o;o=k;try{return U()}finally{o=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,k){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var E=o;o=U;try{return k()}finally{o=E}},t.unstable_scheduleCallback=function(U,k,E){var R=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?R+E:R):E=R,U){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=E+D,U={id:f++,callback:k,priorityLevel:U,startTime:E,expirationTime:D,sortIndex:-1},E>R?(U.sortIndex=E,e(h,U),n(s)===null&&U===n(h)&&(v?(g(C),C=-1):v=!0,A(w,E-R))):(U.sortIndex=D,e(s,U),d||c||(d=!0,I(b))),U},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(U){var k=o;return function(){var E=o;o=k;try{return U.apply(this,arguments)}finally{o=E}}}})(cy);ly.exports=cy;var PC=ly.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OC=B,Yt=PC;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uy=new Set,fa={};function br(t,e){is(t,e),is(t+"Capture",e)}function is(t,e){for(fa[t]=e,t=0;t<e.length;t++)uy.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cf=Object.prototype.hasOwnProperty,EC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,om={},lm={};function AC(t){return cf.call(lm,t)?!0:cf.call(om,t)?!1:EC.test(t)?lm[t]=!0:(om[t]=!0,!1)}function MC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DC(t,e,n,i){if(e===null||typeof e>"u"||MC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,i,r,u,m){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=m}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gt[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gt[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gt[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gt[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gt[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gt[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gt[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gt[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gt[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nd=/[\-:]([a-z])/g;function id(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nd,id);gt[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nd,id);gt[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nd,id);gt[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gt[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});gt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gt[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function rd(t,e,n,i){var r=gt.hasOwnProperty(e)?gt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DC(e,n,r,i)&&(n=null),i||r===null?AC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ti=OC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ja=Symbol.for("react.element"),Mr=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),sd=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),fy=Symbol.for("react.provider"),hy=Symbol.for("react.context"),ad=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),hf=Symbol.for("react.suspense_list"),od=Symbol.for("react.memo"),li=Symbol.for("react.lazy"),dy=Symbol.for("react.offscreen"),cm=Symbol.iterator;function Os(t){return t===null||typeof t!="object"?null:(t=cm&&t[cm]||t["@@iterator"],typeof t=="function"?t:null)}var We=Object.assign,Jc;function Hs(t){if(Jc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jc=e&&e[1]||""}return`
`+Jc+t}var Zc=!1;function eu(t,e){if(!t||Zc)return"";Zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),u=i.stack.split(`
`),m=r.length-1,l=u.length-1;1<=m&&0<=l&&r[m]!==u[l];)l--;for(;1<=m&&0<=l;m--,l--)if(r[m]!==u[l]){if(m!==1||l!==1)do if(m--,l--,0>l||r[m]!==u[l]){var s=`
`+r[m].replace(" at new "," at ");return t.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",t.displayName)),s}while(1<=m&&0<=l);break}}}finally{Zc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Hs(t):""}function IC(t){switch(t.tag){case 5:return Hs(t.type);case 16:return Hs("Lazy");case 13:return Hs("Suspense");case 19:return Hs("SuspenseList");case 0:case 2:case 15:return t=eu(t.type,!1),t;case 11:return t=eu(t.type.render,!1),t;case 1:return t=eu(t.type,!0),t;default:return""}}function df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dr:return"Fragment";case Mr:return"Portal";case uf:return"Profiler";case sd:return"StrictMode";case ff:return"Suspense";case hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case hy:return(t.displayName||"Context")+".Consumer";case fy:return(t._context.displayName||"Context")+".Provider";case ad:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case od:return e=t.displayName||null,e!==null?e:df(t.type)||"Memo";case li:e=t._payload,t=t._init;try{return df(t(e))}catch{}}return null}function LC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(e);case 8:return e===sd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ai(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function py(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FC(t){var e=py(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(m){i=""+m,u.call(this,m)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Za(t){t._valueTracker||(t._valueTracker=FC(t))}function my(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=py(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function el(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pf(t,e){var n=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function um(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Ai(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gy(t,e){e=e.checked,e!=null&&rd(t,"checked",e,!1)}function mf(t,e){gy(t,e);var n=Ai(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gf(t,e.type,n):e.hasOwnProperty("defaultValue")&&gf(t,e.type,Ai(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gf(t,e,n){(e!=="number"||el(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ws=Array.isArray;function Kr(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Ai(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Ws(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ai(n)}}function vy(t,e){var n=Ai(e.value),i=Ai(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function dm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function yy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?yy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eo,xy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RC=["Webkit","ms","Moz","O"];Object.keys(qs).forEach(function(t){RC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qs[e]=qs[t]})});function wy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qs.hasOwnProperty(t)&&qs[t]?(""+e).trim():e+"px"}function by(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=wy(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var jC=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xf(t,e){if(e){if(jC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function wf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=null;function ld(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sf=null,qr=null,Qr=null;function pm(t){if(t=Wa(t)){if(typeof Sf!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=sc(e),Sf(t.stateNode,t.type,e))}}function Sy(t){qr?Qr?Qr.push(t):Qr=[t]:qr=t}function Cy(){if(qr){var t=qr,e=Qr;if(Qr=qr=null,pm(t),e)for(t=0;t<e.length;t++)pm(e[t])}}function _y(t,e){return t(e)}function Ty(){}var tu=!1;function ky(t,e,n){if(tu)return t(e,n);tu=!0;try{return _y(t,e,n)}finally{tu=!1,(qr!==null||Qr!==null)&&(Ty(),Cy())}}function da(t,e){var n=t.stateNode;if(n===null)return null;var i=sc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Cf=!1;if(Xn)try{var Es={};Object.defineProperty(Es,"passive",{get:function(){Cf=!0}}),window.addEventListener("test",Es,Es),window.removeEventListener("test",Es,Es)}catch{Cf=!1}function NC(t,e,n,i,r,u,m,l,s){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(f){this.onError(f)}}var Qs=!1,tl=null,nl=!1,_f=null,BC={onError:function(t){Qs=!0,tl=t}};function VC(t,e,n,i,r,u,m,l,s){Qs=!1,tl=null,NC.apply(BC,arguments)}function zC(t,e,n,i,r,u,m,l,s){if(VC.apply(this,arguments),Qs){if(Qs){var h=tl;Qs=!1,tl=null}else throw Error(oe(198));nl||(nl=!0,_f=h)}}function Sr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Py(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mm(t){if(Sr(t)!==t)throw Error(oe(188))}function UC(t){var e=t.alternate;if(!e){if(e=Sr(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var u=r.alternate;if(u===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===u.child){for(u=r.child;u;){if(u===n)return mm(r),t;if(u===i)return mm(r),e;u=u.sibling}throw Error(oe(188))}if(n.return!==i.return)n=r,i=u;else{for(var m=!1,l=r.child;l;){if(l===n){m=!0,n=r,i=u;break}if(l===i){m=!0,i=r,n=u;break}l=l.sibling}if(!m){for(l=u.child;l;){if(l===n){m=!0,n=u,i=r;break}if(l===i){m=!0,i=u,n=r;break}l=l.sibling}if(!m)throw Error(oe(189))}}if(n.alternate!==i)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function Oy(t){return t=UC(t),t!==null?Ey(t):null}function Ey(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ey(t);if(e!==null)return e;t=t.sibling}return null}var Ay=Yt.unstable_scheduleCallback,gm=Yt.unstable_cancelCallback,HC=Yt.unstable_shouldYield,WC=Yt.unstable_requestPaint,Qe=Yt.unstable_now,$C=Yt.unstable_getCurrentPriorityLevel,cd=Yt.unstable_ImmediatePriority,My=Yt.unstable_UserBlockingPriority,il=Yt.unstable_NormalPriority,GC=Yt.unstable_LowPriority,Dy=Yt.unstable_IdlePriority,tc=null,On=null;function YC(t){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(tc,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:qC,XC=Math.log,KC=Math.LN2;function qC(t){return t>>>=0,t===0?32:31-(XC(t)/KC|0)|0}var to=64,no=4194304;function $s(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,u=t.pingedLanes,m=n&268435455;if(m!==0){var l=m&~r;l!==0?i=$s(l):(u&=m,u!==0&&(i=$s(u)))}else m=n&~r,m!==0?i=$s(m):u!==0&&(i=$s(u));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,u=e&-e,r>=u||r===16&&(u&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-dn(e),r=1<<n,i|=t[n],e&=~r;return i}function QC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,u=t.pendingLanes;0<u;){var m=31-dn(u),l=1<<m,s=r[m];s===-1?(!(l&n)||l&i)&&(r[m]=QC(l,e)):s<=e&&(t.expiredLanes|=l),u&=~l}}function Tf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Iy(){var t=to;return to<<=1,!(to&4194240)&&(to=64),t}function nu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ua(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function ZC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-dn(n),u=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~u}}function ud(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-dn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Me=0;function Ly(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fy,fd,Ry,jy,Ny,kf=!1,io=[],bi=null,Si=null,Ci=null,pa=new Map,ma=new Map,ui=[],e2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vm(t,e){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ci=null;break;case"pointerover":case"pointerout":pa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function As(t,e,n,i,r,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:u,targetContainers:[r]},e!==null&&(e=Wa(e),e!==null&&fd(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function t2(t,e,n,i,r){switch(e){case"focusin":return bi=As(bi,t,e,n,i,r),!0;case"dragenter":return Si=As(Si,t,e,n,i,r),!0;case"mouseover":return Ci=As(Ci,t,e,n,i,r),!0;case"pointerover":var u=r.pointerId;return pa.set(u,As(pa.get(u)||null,t,e,n,i,r)),!0;case"gotpointercapture":return u=r.pointerId,ma.set(u,As(ma.get(u)||null,t,e,n,i,r)),!0}return!1}function By(t){var e=Ji(t.target);if(e!==null){var n=Sr(e);if(n!==null){if(e=n.tag,e===13){if(e=Py(n),e!==null){t.blockedOn=e,Ny(t.priority,function(){Ry(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bf=i,n.target.dispatchEvent(i),bf=null}else return e=Wa(n),e!==null&&fd(e),t.blockedOn=n,!1;e.shift()}return!0}function ym(t,e,n){Lo(t)&&n.delete(e)}function n2(){kf=!1,bi!==null&&Lo(bi)&&(bi=null),Si!==null&&Lo(Si)&&(Si=null),Ci!==null&&Lo(Ci)&&(Ci=null),pa.forEach(ym),ma.forEach(ym)}function Ms(t,e){t.blockedOn===e&&(t.blockedOn=null,kf||(kf=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,n2)))}function ga(t){function e(r){return Ms(r,t)}if(0<io.length){Ms(io[0],t);for(var n=1;n<io.length;n++){var i=io[n];i.blockedOn===t&&(i.blockedOn=null)}}for(bi!==null&&Ms(bi,t),Si!==null&&Ms(Si,t),Ci!==null&&Ms(Ci,t),pa.forEach(e),ma.forEach(e),n=0;n<ui.length;n++)i=ui[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ui.length&&(n=ui[0],n.blockedOn===null);)By(n),n.blockedOn===null&&ui.shift()}var Jr=ti.ReactCurrentBatchConfig,sl=!0;function i2(t,e,n,i){var r=Me,u=Jr.transition;Jr.transition=null;try{Me=1,hd(t,e,n,i)}finally{Me=r,Jr.transition=u}}function r2(t,e,n,i){var r=Me,u=Jr.transition;Jr.transition=null;try{Me=4,hd(t,e,n,i)}finally{Me=r,Jr.transition=u}}function hd(t,e,n,i){if(sl){var r=Pf(t,e,n,i);if(r===null)hu(t,e,i,al,n),vm(t,i);else if(t2(r,t,e,n,i))i.stopPropagation();else if(vm(t,i),e&4&&-1<e2.indexOf(t)){for(;r!==null;){var u=Wa(r);if(u!==null&&Fy(u),u=Pf(t,e,n,i),u===null&&hu(t,e,i,al,n),u===r)break;r=u}r!==null&&i.stopPropagation()}else hu(t,e,i,null,n)}}var al=null;function Pf(t,e,n,i){if(al=null,t=ld(i),t=Ji(t),t!==null)if(e=Sr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Py(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return al=t,null}function Vy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($C()){case cd:return 1;case My:return 4;case il:case GC:return 16;case Dy:return 536870912;default:return 16}default:return 16}}var hi=null,dd=null,Fo=null;function zy(){if(Fo)return Fo;var t,e=dd,n=e.length,i,r="value"in hi?hi.value:hi.textContent,u=r.length;for(t=0;t<n&&e[t]===r[t];t++);var m=n-t;for(i=1;i<=m&&e[n-i]===r[u-i];i++);return Fo=r.slice(t,1<i?1-i:void 0)}function Ro(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ro(){return!0}function xm(){return!1}function qt(t){function e(n,i,r,u,m){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(u):u[l]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ro:xm,this.isPropagationStopped=xm,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),e}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=qt(vs),Ha=We({},vs,{view:0,detail:0}),s2=qt(Ha),iu,ru,Ds,nc=We({},Ha,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:md,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ds&&(Ds&&t.type==="mousemove"?(iu=t.screenX-Ds.screenX,ru=t.screenY-Ds.screenY):ru=iu=0,Ds=t),iu)},movementY:function(t){return"movementY"in t?t.movementY:ru}}),wm=qt(nc),a2=We({},nc,{dataTransfer:0}),o2=qt(a2),l2=We({},Ha,{relatedTarget:0}),su=qt(l2),c2=We({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),u2=qt(c2),f2=We({},vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),h2=qt(f2),d2=We({},vs,{data:0}),bm=qt(d2),p2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=g2[t])?!!e[t]:!1}function md(){return v2}var y2=We({},Ha,{key:function(t){if(t.key){var e=p2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ro(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:md,charCode:function(t){return t.type==="keypress"?Ro(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ro(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),x2=qt(y2),w2=We({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sm=qt(w2),b2=We({},Ha,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:md}),S2=qt(b2),C2=We({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),_2=qt(C2),T2=We({},nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),k2=qt(T2),P2=[9,13,27,32],gd=Xn&&"CompositionEvent"in window,Js=null;Xn&&"documentMode"in document&&(Js=document.documentMode);var O2=Xn&&"TextEvent"in window&&!Js,Uy=Xn&&(!gd||Js&&8<Js&&11>=Js),Cm=" ",_m=!1;function Hy(t,e){switch(t){case"keyup":return P2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ir=!1;function E2(t,e){switch(t){case"compositionend":return Wy(e);case"keypress":return e.which!==32?null:(_m=!0,Cm);case"textInput":return t=e.data,t===Cm&&_m?null:t;default:return null}}function A2(t,e){if(Ir)return t==="compositionend"||!gd&&Hy(t,e)?(t=zy(),Fo=dd=hi=null,Ir=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uy&&e.locale!=="ko"?null:e.data;default:return null}}var M2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M2[t.type]:e==="textarea"}function $y(t,e,n,i){Sy(i),e=ol(e,"onChange"),0<e.length&&(n=new pd("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Zs=null,va=null;function D2(t){n1(t,0)}function ic(t){var e=Rr(t);if(my(e))return t}function I2(t,e){if(t==="change")return e}var Gy=!1;if(Xn){var au;if(Xn){var ou="oninput"in document;if(!ou){var km=document.createElement("div");km.setAttribute("oninput","return;"),ou=typeof km.oninput=="function"}au=ou}else au=!1;Gy=au&&(!document.documentMode||9<document.documentMode)}function Pm(){Zs&&(Zs.detachEvent("onpropertychange",Yy),va=Zs=null)}function Yy(t){if(t.propertyName==="value"&&ic(va)){var e=[];$y(e,va,t,ld(t)),ky(D2,e)}}function L2(t,e,n){t==="focusin"?(Pm(),Zs=e,va=n,Zs.attachEvent("onpropertychange",Yy)):t==="focusout"&&Pm()}function F2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ic(va)}function R2(t,e){if(t==="click")return ic(e)}function j2(t,e){if(t==="input"||t==="change")return ic(e)}function N2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:N2;function ya(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!cf.call(e,r)||!mn(t[r],e[r]))return!1}return!0}function Om(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Em(t,e){var n=Om(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Om(n)}}function Xy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ky(){for(var t=window,e=el();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=el(t.document)}return e}function vd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function B2(t){var e=Ky(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xy(n.ownerDocument.documentElement,n)){if(i!==null&&vd(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,u=Math.min(i.start,r);i=i.end===void 0?u:Math.min(i.end,r),!t.extend&&u>i&&(r=i,i=u,u=r),r=Em(n,u);var m=Em(n,i);r&&m&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==m.node||t.focusOffset!==m.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),u>i?(t.addRange(e),t.extend(m.node,m.offset)):(e.setEnd(m.node,m.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var V2=Xn&&"documentMode"in document&&11>=document.documentMode,Lr=null,Of=null,ea=null,Ef=!1;function Am(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ef||Lr==null||Lr!==el(i)||(i=Lr,"selectionStart"in i&&vd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ea&&ya(ea,i)||(ea=i,i=ol(Of,"onSelect"),0<i.length&&(e=new pd("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Lr)))}function so(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fr={animationend:so("Animation","AnimationEnd"),animationiteration:so("Animation","AnimationIteration"),animationstart:so("Animation","AnimationStart"),transitionend:so("Transition","TransitionEnd")},lu={},qy={};Xn&&(qy=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function rc(t){if(lu[t])return lu[t];if(!Fr[t])return t;var e=Fr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qy)return lu[t]=e[n];return t}var Qy=rc("animationend"),Jy=rc("animationiteration"),Zy=rc("animationstart"),e1=rc("transitionend"),t1=new Map,Mm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(t,e){t1.set(t,e),br(e,[t])}for(var cu=0;cu<Mm.length;cu++){var uu=Mm[cu],z2=uu.toLowerCase(),U2=uu[0].toUpperCase()+uu.slice(1);Fi(z2,"on"+U2)}Fi(Qy,"onAnimationEnd");Fi(Jy,"onAnimationIteration");Fi(Zy,"onAnimationStart");Fi("dblclick","onDoubleClick");Fi("focusin","onFocus");Fi("focusout","onBlur");Fi(e1,"onTransitionEnd");is("onMouseEnter",["mouseout","mouseover"]);is("onMouseLeave",["mouseout","mouseover"]);is("onPointerEnter",["pointerout","pointerover"]);is("onPointerLeave",["pointerout","pointerover"]);br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));br("onBeforeInput",["compositionend","keypress","textInput","paste"]);br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function Dm(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,zC(i,e,void 0,t),t.currentTarget=null}function n1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var u=void 0;if(e)for(var m=i.length-1;0<=m;m--){var l=i[m],s=l.instance,h=l.currentTarget;if(l=l.listener,s!==u&&r.isPropagationStopped())break e;Dm(r,l,h),u=s}else for(m=0;m<i.length;m++){if(l=i[m],s=l.instance,h=l.currentTarget,l=l.listener,s!==u&&r.isPropagationStopped())break e;Dm(r,l,h),u=s}}}if(nl)throw t=_f,nl=!1,_f=null,t}function je(t,e){var n=e[Lf];n===void 0&&(n=e[Lf]=new Set);var i=t+"__bubble";n.has(i)||(i1(e,t,2,!1),n.add(i))}function fu(t,e,n){var i=0;e&&(i|=4),i1(n,t,i,e)}var ao="_reactListening"+Math.random().toString(36).slice(2);function xa(t){if(!t[ao]){t[ao]=!0,uy.forEach(function(n){n!=="selectionchange"&&(H2.has(n)||fu(n,!1,t),fu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ao]||(e[ao]=!0,fu("selectionchange",!1,e))}}function i1(t,e,n,i){switch(Vy(e)){case 1:var r=i2;break;case 4:r=r2;break;default:r=hd}n=r.bind(null,e,n,t),r=void 0,!Cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function hu(t,e,n,i,r){var u=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(m===4)for(m=i.return;m!==null;){var s=m.tag;if((s===3||s===4)&&(s=m.stateNode.containerInfo,s===r||s.nodeType===8&&s.parentNode===r))return;m=m.return}for(;l!==null;){if(m=Ji(l),m===null)return;if(s=m.tag,s===5||s===6){i=u=m;continue e}l=l.parentNode}}i=i.return}ky(function(){var h=u,f=ld(n),a=[];e:{var o=t1.get(t);if(o!==void 0){var c=pd,d=t;switch(t){case"keypress":if(Ro(n)===0)break e;case"keydown":case"keyup":c=x2;break;case"focusin":d="focus",c=su;break;case"focusout":d="blur",c=su;break;case"beforeblur":case"afterblur":c=su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=wm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=o2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=S2;break;case Qy:case Jy:case Zy:c=u2;break;case e1:c=_2;break;case"scroll":c=s2;break;case"wheel":c=k2;break;case"copy":case"cut":case"paste":c=h2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Sm}var v=(e&4)!==0,p=!v&&t==="scroll",g=v?o!==null?o+"Capture":null:o;v=[];for(var y=h,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=da(y,g),w!=null&&v.push(wa(y,w,x)))),p)break;y=y.return}0<v.length&&(o=new c(o,d,null,n,f),a.push({event:o,listeners:v}))}}if(!(e&7)){e:{if(o=t==="mouseover"||t==="pointerover",c=t==="mouseout"||t==="pointerout",o&&n!==bf&&(d=n.relatedTarget||n.fromElement)&&(Ji(d)||d[Kn]))break e;if((c||o)&&(o=f.window===f?f:(o=f.ownerDocument)?o.defaultView||o.parentWindow:window,c?(d=n.relatedTarget||n.toElement,c=h,d=d?Ji(d):null,d!==null&&(p=Sr(d),d!==p||d.tag!==5&&d.tag!==6)&&(d=null)):(c=null,d=h),c!==d)){if(v=wm,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=Sm,w="onPointerLeave",g="onPointerEnter",y="pointer"),p=c==null?o:Rr(c),x=d==null?o:Rr(d),o=new v(w,y+"leave",c,n,f),o.target=p,o.relatedTarget=x,w=null,Ji(f)===h&&(v=new v(g,y+"enter",d,n,f),v.target=x,v.relatedTarget=p,w=v),p=w,c&&d)t:{for(v=c,g=d,y=0,x=v;x;x=Pr(x))y++;for(x=0,w=g;w;w=Pr(w))x++;for(;0<y-x;)v=Pr(v),y--;for(;0<x-y;)g=Pr(g),x--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Pr(v),g=Pr(g)}v=null}else v=null;c!==null&&Im(a,o,c,v,!1),d!==null&&p!==null&&Im(a,p,d,v,!0)}}e:{if(o=h?Rr(h):window,c=o.nodeName&&o.nodeName.toLowerCase(),c==="select"||c==="input"&&o.type==="file")var b=I2;else if(Tm(o))if(Gy)b=j2;else{b=F2;var S=L2}else(c=o.nodeName)&&c.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(b=R2);if(b&&(b=b(t,h))){$y(a,b,n,f);break e}S&&S(t,o,h),t==="focusout"&&(S=o._wrapperState)&&S.controlled&&o.type==="number"&&gf(o,"number",o.value)}switch(S=h?Rr(h):window,t){case"focusin":(Tm(S)||S.contentEditable==="true")&&(Lr=S,Of=h,ea=null);break;case"focusout":ea=Of=Lr=null;break;case"mousedown":Ef=!0;break;case"contextmenu":case"mouseup":case"dragend":Ef=!1,Am(a,n,f);break;case"selectionchange":if(V2)break;case"keydown":case"keyup":Am(a,n,f)}var _;if(gd)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ir?Hy(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Uy&&n.locale!=="ko"&&(Ir||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ir&&(_=zy()):(hi=f,dd="value"in hi?hi.value:hi.textContent,Ir=!0)),S=ol(h,C),0<S.length&&(C=new bm(C,t,null,n,f),a.push({event:C,listeners:S}),_?C.data=_:(_=Wy(n),_!==null&&(C.data=_)))),(_=O2?E2(t,n):A2(t,n))&&(h=ol(h,"onBeforeInput"),0<h.length&&(f=new bm("onBeforeInput","beforeinput",null,n,f),a.push({event:f,listeners:h}),f.data=_))}n1(a,e)})}function wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ol(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,u=r.stateNode;r.tag===5&&u!==null&&(r=u,u=da(t,n),u!=null&&i.unshift(wa(t,u,r)),u=da(t,e),u!=null&&i.push(wa(t,u,r))),t=t.return}return i}function Pr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Im(t,e,n,i,r){for(var u=e._reactName,m=[];n!==null&&n!==i;){var l=n,s=l.alternate,h=l.stateNode;if(s!==null&&s===i)break;l.tag===5&&h!==null&&(l=h,r?(s=da(n,u),s!=null&&m.unshift(wa(n,s,l))):r||(s=da(n,u),s!=null&&m.push(wa(n,s,l)))),n=n.return}m.length!==0&&t.push({event:e,listeners:m})}var W2=/\r\n?/g,$2=/\u0000|\uFFFD/g;function Lm(t){return(typeof t=="string"?t:""+t).replace(W2,`
`).replace($2,"")}function oo(t,e,n){if(e=Lm(e),Lm(t)!==e&&n)throw Error(oe(425))}function ll(){}var Af=null,Mf=null;function Df(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var If=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,Fm=typeof Promise=="function"?Promise:void 0,Y2=typeof queueMicrotask=="function"?queueMicrotask:typeof Fm<"u"?function(t){return Fm.resolve(null).then(t).catch(X2)}:If;function X2(t){setTimeout(function(){throw t})}function du(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ga(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ga(e)}function _i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ys=Math.random().toString(36).slice(2),kn="__reactFiber$"+ys,ba="__reactProps$"+ys,Kn="__reactContainer$"+ys,Lf="__reactEvents$"+ys,K2="__reactListeners$"+ys,q2="__reactHandles$"+ys;function Ji(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kn]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rm(t);t!==null;){if(n=t[kn])return n;t=Rm(t)}return e}t=n,n=t.parentNode}return null}function Wa(t){return t=t[kn]||t[Kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function sc(t){return t[ba]||null}var Ff=[],jr=-1;function Ri(t){return{current:t}}function Ne(t){0>jr||(t.current=Ff[jr],Ff[jr]=null,jr--)}function Re(t,e){jr++,Ff[jr]=t.current,t.current=e}var Mi={},Tt=Ri(Mi),Rt=Ri(!1),ur=Mi;function rs(t,e){var n=t.type.contextTypes;if(!n)return Mi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},u;for(u in n)r[u]=e[u];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function jt(t){return t=t.childContextTypes,t!=null}function cl(){Ne(Rt),Ne(Tt)}function jm(t,e,n){if(Tt.current!==Mi)throw Error(oe(168));Re(Tt,e),Re(Rt,n)}function r1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(oe(108,LC(t)||"Unknown",r));return We({},n,i)}function ul(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,ur=Tt.current,Re(Tt,t),Re(Rt,Rt.current),!0}function Nm(t,e,n){var i=t.stateNode;if(!i)throw Error(oe(169));n?(t=r1(t,e,ur),i.__reactInternalMemoizedMergedChildContext=t,Ne(Rt),Ne(Tt),Re(Tt,t)):Ne(Rt),Re(Rt,n)}var Nn=null,ac=!1,pu=!1;function s1(t){Nn===null?Nn=[t]:Nn.push(t)}function Q2(t){ac=!0,s1(t)}function ji(){if(!pu&&Nn!==null){pu=!0;var t=0,e=Me;try{var n=Nn;for(Me=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Nn=null,ac=!1}catch(r){throw Nn!==null&&(Nn=Nn.slice(t+1)),Ay(cd,ji),r}finally{Me=e,pu=!1}}return null}var Nr=[],Br=0,fl=null,hl=0,en=[],tn=0,fr=null,Bn=1,Vn="";function $i(t,e){Nr[Br++]=hl,Nr[Br++]=fl,fl=t,hl=e}function a1(t,e,n){en[tn++]=Bn,en[tn++]=Vn,en[tn++]=fr,fr=t;var i=Bn;t=Vn;var r=32-dn(i)-1;i&=~(1<<r),n+=1;var u=32-dn(e)+r;if(30<u){var m=r-r%5;u=(i&(1<<m)-1).toString(32),i>>=m,r-=m,Bn=1<<32-dn(e)+r|n<<r|i,Vn=u+t}else Bn=1<<u|n<<r|i,Vn=t}function yd(t){t.return!==null&&($i(t,1),a1(t,1,0))}function xd(t){for(;t===fl;)fl=Nr[--Br],Nr[Br]=null,hl=Nr[--Br],Nr[Br]=null;for(;t===fr;)fr=en[--tn],en[tn]=null,Vn=en[--tn],en[tn]=null,Bn=en[--tn],en[tn]=null}var $t=null,Ht=null,Be=!1,fn=null;function o1(t,e){var n=nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Ht=_i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fr!==null?{id:Bn,overflow:Vn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Ht=null,!0):!1;default:return!1}}function Rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jf(t){if(Be){var e=Ht;if(e){var n=e;if(!Bm(t,e)){if(Rf(t))throw Error(oe(418));e=_i(n.nextSibling);var i=$t;e&&Bm(t,e)?o1(i,n):(t.flags=t.flags&-4097|2,Be=!1,$t=t)}}else{if(Rf(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Be=!1,$t=t}}}function Vm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function lo(t){if(t!==$t)return!1;if(!Be)return Vm(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Df(t.type,t.memoizedProps)),e&&(e=Ht)){if(Rf(t))throw l1(),Error(oe(418));for(;e;)o1(t,e),e=_i(e.nextSibling)}if(Vm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=_i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=$t?_i(t.stateNode.nextSibling):null;return!0}function l1(){for(var t=Ht;t;)t=_i(t.nextSibling)}function ss(){Ht=$t=null,Be=!1}function wd(t){fn===null?fn=[t]:fn.push(t)}var J2=ti.ReactCurrentBatchConfig;function Is(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var i=n.stateNode}if(!i)throw Error(oe(147,t));var r=i,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(m){var l=r.refs;m===null?delete l[u]:l[u]=m},e._stringRef=u,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function co(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zm(t){var e=t._init;return e(t._payload)}function c1(t){function e(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=Oi(g,y),g.index=0,g.sibling=null,g}function u(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function m(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,y,x,w){return y===null||y.tag!==6?(y=bu(x,g.mode,w),y.return=g,y):(y=r(y,x),y.return=g,y)}function s(g,y,x,w){var b=x.type;return b===Dr?f(g,y,x.props.children,w,x.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===li&&zm(b)===y.type)?(w=r(y,x.props),w.ref=Is(g,y,x),w.return=g,w):(w=Ho(x.type,x.key,x.props,null,g.mode,w),w.ref=Is(g,y,x),w.return=g,w)}function h(g,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Su(x,g.mode,w),y.return=g,y):(y=r(y,x.children||[]),y.return=g,y)}function f(g,y,x,w,b){return y===null||y.tag!==7?(y=or(x,g.mode,w,b),y.return=g,y):(y=r(y,x),y.return=g,y)}function a(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=bu(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ja:return x=Ho(y.type,y.key,y.props,null,g.mode,x),x.ref=Is(g,null,y),x.return=g,x;case Mr:return y=Su(y,g.mode,x),y.return=g,y;case li:var w=y._init;return a(g,w(y._payload),x)}if(Ws(y)||Os(y))return y=or(y,g.mode,x,null),y.return=g,y;co(g,y)}return null}function o(g,y,x,w){var b=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:l(g,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ja:return x.key===b?s(g,y,x,w):null;case Mr:return x.key===b?h(g,y,x,w):null;case li:return b=x._init,o(g,y,b(x._payload),w)}if(Ws(x)||Os(x))return b!==null?null:f(g,y,x,w,null);co(g,x)}return null}function c(g,y,x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,l(y,g,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ja:return g=g.get(w.key===null?x:w.key)||null,s(y,g,w,b);case Mr:return g=g.get(w.key===null?x:w.key)||null,h(y,g,w,b);case li:var S=w._init;return c(g,y,x,S(w._payload),b)}if(Ws(w)||Os(w))return g=g.get(x)||null,f(y,g,w,b,null);co(y,w)}return null}function d(g,y,x,w){for(var b=null,S=null,_=y,C=y=0,T=null;_!==null&&C<x.length;C++){_.index>C?(T=_,_=null):T=_.sibling;var O=o(g,_,x[C],w);if(O===null){_===null&&(_=T);break}t&&_&&O.alternate===null&&e(g,_),y=u(O,y,C),S===null?b=O:S.sibling=O,S=O,_=T}if(C===x.length)return n(g,_),Be&&$i(g,C),b;if(_===null){for(;C<x.length;C++)_=a(g,x[C],w),_!==null&&(y=u(_,y,C),S===null?b=_:S.sibling=_,S=_);return Be&&$i(g,C),b}for(_=i(g,_);C<x.length;C++)T=c(_,g,C,x[C],w),T!==null&&(t&&T.alternate!==null&&_.delete(T.key===null?C:T.key),y=u(T,y,C),S===null?b=T:S.sibling=T,S=T);return t&&_.forEach(function(L){return e(g,L)}),Be&&$i(g,C),b}function v(g,y,x,w){var b=Os(x);if(typeof b!="function")throw Error(oe(150));if(x=b.call(x),x==null)throw Error(oe(151));for(var S=b=null,_=y,C=y=0,T=null,O=x.next();_!==null&&!O.done;C++,O=x.next()){_.index>C?(T=_,_=null):T=_.sibling;var L=o(g,_,O.value,w);if(L===null){_===null&&(_=T);break}t&&_&&L.alternate===null&&e(g,_),y=u(L,y,C),S===null?b=L:S.sibling=L,S=L,_=T}if(O.done)return n(g,_),Be&&$i(g,C),b;if(_===null){for(;!O.done;C++,O=x.next())O=a(g,O.value,w),O!==null&&(y=u(O,y,C),S===null?b=O:S.sibling=O,S=O);return Be&&$i(g,C),b}for(_=i(g,_);!O.done;C++,O=x.next())O=c(_,g,C,O.value,w),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?C:O.key),y=u(O,y,C),S===null?b=O:S.sibling=O,S=O);return t&&_.forEach(function(j){return e(g,j)}),Be&&$i(g,C),b}function p(g,y,x,w){if(typeof x=="object"&&x!==null&&x.type===Dr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ja:e:{for(var b=x.key,S=y;S!==null;){if(S.key===b){if(b=x.type,b===Dr){if(S.tag===7){n(g,S.sibling),y=r(S,x.props.children),y.return=g,g=y;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===li&&zm(b)===S.type){n(g,S.sibling),y=r(S,x.props),y.ref=Is(g,S,x),y.return=g,g=y;break e}n(g,S);break}else e(g,S);S=S.sibling}x.type===Dr?(y=or(x.props.children,g.mode,w,x.key),y.return=g,g=y):(w=Ho(x.type,x.key,x.props,null,g.mode,w),w.ref=Is(g,y,x),w.return=g,g=w)}return m(g);case Mr:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(g,y.sibling),y=r(y,x.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=Su(x,g.mode,w),y.return=g,g=y}return m(g);case li:return S=x._init,p(g,y,S(x._payload),w)}if(Ws(x))return d(g,y,x,w);if(Os(x))return v(g,y,x,w);co(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(g,y.sibling),y=r(y,x),y.return=g,g=y):(n(g,y),y=bu(x,g.mode,w),y.return=g,g=y),m(g)):n(g,y)}return p}var as=c1(!0),u1=c1(!1),dl=Ri(null),pl=null,Vr=null,bd=null;function Sd(){bd=Vr=pl=null}function Cd(t){var e=dl.current;Ne(dl),t._currentValue=e}function Nf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Zr(t,e){pl=t,bd=Vr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if(bd!==t)if(t={context:t,memoizedValue:e,next:null},Vr===null){if(pl===null)throw Error(oe(308));Vr=t,pl.dependencies={lanes:0,firstContext:t}}else Vr=Vr.next=t;return e}var Zi=null;function _d(t){Zi===null?Zi=[t]:Zi.push(t)}function f1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,_d(e)):(n.next=r.next,r.next=n),e.interleaved=n,qn(t,i)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ci=!1;function Td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Te&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,qn(t,n)}return r=i.interleaved,r===null?(e.next=e,_d(i)):(e.next=r.next,r.next=e),i.interleaved=e,qn(t,n)}function jo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ud(t,n)}}function Um(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var m={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?r=u=m:u=u.next=m,n=n.next}while(n!==null);u===null?r=u=e:u=u.next=e}else r=u=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:u,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ml(t,e,n,i){var r=t.updateQueue;ci=!1;var u=r.firstBaseUpdate,m=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var s=l,h=s.next;s.next=null,m===null?u=h:m.next=h,m=s;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==m&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=s))}if(u!==null){var a=r.baseState;m=0,f=h=s=null,l=u;do{var o=l.lane,c=l.eventTime;if((i&o)===o){f!==null&&(f=f.next={eventTime:c,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var d=t,v=l;switch(o=e,c=n,v.tag){case 1:if(d=v.payload,typeof d=="function"){a=d.call(c,a,o);break e}a=d;break e;case 3:d.flags=d.flags&-65537|128;case 0:if(d=v.payload,o=typeof d=="function"?d.call(c,a,o):d,o==null)break e;a=We({},a,o);break e;case 2:ci=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,o=r.effects,o===null?r.effects=[l]:o.push(l))}else c={eventTime:c,lane:o,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=c,s=a):f=f.next=c,m|=o;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;o=l,l=o.next,o.next=null,r.lastBaseUpdate=o,r.shared.pending=null}}while(!0);if(f===null&&(s=a),r.baseState=s,r.firstBaseUpdate=h,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do m|=r.lane,r=r.next;while(r!==e)}else u===null&&(r.shared.lanes=0);dr|=m,t.lanes=m,t.memoizedState=a}}function Hm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(oe(191,r));r.call(i)}}}var $a={},En=Ri($a),Sa=Ri($a),Ca=Ri($a);function er(t){if(t===$a)throw Error(oe(174));return t}function kd(t,e){switch(Re(Ca,e),Re(Sa,t),Re(En,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yf(e,t)}Ne(En),Re(En,e)}function os(){Ne(En),Ne(Sa),Ne(Ca)}function d1(t){er(Ca.current);var e=er(En.current),n=yf(e,t.type);e!==n&&(Re(Sa,t),Re(En,n))}function Pd(t){Sa.current===t&&(Ne(En),Ne(Sa))}var ze=Ri(0);function gl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mu=[];function Od(){for(var t=0;t<mu.length;t++)mu[t]._workInProgressVersionPrimary=null;mu.length=0}var No=ti.ReactCurrentDispatcher,gu=ti.ReactCurrentBatchConfig,hr=0,He=null,rt=null,ot=null,vl=!1,ta=!1,_a=0,Z2=0;function vt(){throw Error(oe(321))}function Ed(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function Ad(t,e,n,i,r,u){if(hr=u,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,No.current=t===null||t.memoizedState===null?i_:r_,t=n(i,r),ta){u=0;do{if(ta=!1,_a=0,25<=u)throw Error(oe(301));u+=1,ot=rt=null,e.updateQueue=null,No.current=s_,t=n(i,r)}while(ta)}if(No.current=yl,e=rt!==null&&rt.next!==null,hr=0,ot=rt=He=null,vl=!1,e)throw Error(oe(300));return t}function Md(){var t=_a!==0;return _a=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?He.memoizedState=ot=t:ot=ot.next=t,ot}function an(){if(rt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=ot===null?He.memoizedState:ot.next;if(e!==null)ot=e,rt=t;else{if(t===null)throw Error(oe(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ot===null?He.memoizedState=ot=t:ot=ot.next=t}return ot}function Ta(t,e){return typeof e=="function"?e(t):e}function vu(t){var e=an(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=rt,r=i.baseQueue,u=n.pending;if(u!==null){if(r!==null){var m=r.next;r.next=u.next,u.next=m}i.baseQueue=r=u,n.pending=null}if(r!==null){u=r.next,i=i.baseState;var l=m=null,s=null,h=u;do{var f=h.lane;if((hr&f)===f)s!==null&&(s=s.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var a={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};s===null?(l=s=a,m=i):s=s.next=a,He.lanes|=f,dr|=f}h=h.next}while(h!==null&&h!==u);s===null?m=i:s.next=l,mn(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseState=m,e.baseQueue=s,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do u=r.lane,He.lanes|=u,dr|=u,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yu(t){var e=an(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,u=e.memoizedState;if(r!==null){n.pending=null;var m=r=r.next;do u=t(u,m.action),m=m.next;while(m!==r);mn(u,e.memoizedState)||(Ft=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,i]}function p1(){}function m1(t,e){var n=He,i=an(),r=e(),u=!mn(i.memoizedState,r);if(u&&(i.memoizedState=r,Ft=!0),i=i.queue,Dd(y1.bind(null,n,i,t),[t]),i.getSnapshot!==e||u||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,ka(9,v1.bind(null,n,i,r,e),void 0,null),lt===null)throw Error(oe(349));hr&30||g1(n,e,r)}return r}function g1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v1(t,e,n,i){e.value=n,e.getSnapshot=i,x1(e)&&w1(t)}function y1(t,e,n){return n(function(){x1(e)&&w1(t)})}function x1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function w1(t){var e=qn(t,1);e!==null&&pn(e,t,1,-1)}function Wm(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e.queue=t,t=t.dispatch=n_.bind(null,He,t),[e.memoizedState,t]}function ka(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function b1(){return an().memoizedState}function Bo(t,e,n,i){var r=Sn();He.flags|=t,r.memoizedState=ka(1|e,n,void 0,i===void 0?null:i)}function oc(t,e,n,i){var r=an();i=i===void 0?null:i;var u=void 0;if(rt!==null){var m=rt.memoizedState;if(u=m.destroy,i!==null&&Ed(i,m.deps)){r.memoizedState=ka(e,n,u,i);return}}He.flags|=t,r.memoizedState=ka(1|e,n,u,i)}function $m(t,e){return Bo(8390656,8,t,e)}function Dd(t,e){return oc(2048,8,t,e)}function S1(t,e){return oc(4,2,t,e)}function C1(t,e){return oc(4,4,t,e)}function _1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T1(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,_1.bind(null,e,t),n)}function Id(){}function k1(t,e){var n=an();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ed(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function P1(t,e){var n=an();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ed(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function O1(t,e,n){return hr&21?(mn(n,e)||(n=Iy(),He.lanes|=n,dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function e_(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var i=gu.transition;gu.transition={};try{t(!1),e()}finally{Me=n,gu.transition=i}}function E1(){return an().memoizedState}function t_(t,e,n){var i=Pi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},A1(t))M1(e,n);else if(n=f1(t,e,n,i),n!==null){var r=At();pn(n,t,i,r),D1(n,e,i)}}function n_(t,e,n){var i=Pi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(A1(t))M1(e,r);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var m=e.lastRenderedState,l=u(m,n);if(r.hasEagerState=!0,r.eagerState=l,mn(l,m)){var s=e.interleaved;s===null?(r.next=r,_d(e)):(r.next=s.next,s.next=r),e.interleaved=r;return}}catch{}finally{}n=f1(t,e,r,i),n!==null&&(r=At(),pn(n,t,i,r),D1(n,e,i))}}function A1(t){var e=t.alternate;return t===He||e!==null&&e===He}function M1(t,e){ta=vl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function D1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ud(t,n)}}var yl={readContext:sn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},i_={readContext:sn,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:$m,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bo(4194308,4,_1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bo(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Sn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=t_.bind(null,He,t),[i.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:Wm,useDebugValue:Id,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=Wm(!1),e=t[0];return t=e_.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=He,r=Sn();if(Be){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),lt===null)throw Error(oe(349));hr&30||g1(i,e,n)}r.memoizedState=n;var u={value:n,getSnapshot:e};return r.queue=u,$m(y1.bind(null,i,u,t),[t]),i.flags|=2048,ka(9,v1.bind(null,i,u,n,e),void 0,null),n},useId:function(){var t=Sn(),e=lt.identifierPrefix;if(Be){var n=Vn,i=Bn;n=(i&~(1<<32-dn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=_a++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Z2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r_={readContext:sn,useCallback:k1,useContext:sn,useEffect:Dd,useImperativeHandle:T1,useInsertionEffect:S1,useLayoutEffect:C1,useMemo:P1,useReducer:vu,useRef:b1,useState:function(){return vu(Ta)},useDebugValue:Id,useDeferredValue:function(t){var e=an();return O1(e,rt.memoizedState,t)},useTransition:function(){var t=vu(Ta)[0],e=an().memoizedState;return[t,e]},useMutableSource:p1,useSyncExternalStore:m1,useId:E1,unstable_isNewReconciler:!1},s_={readContext:sn,useCallback:k1,useContext:sn,useEffect:Dd,useImperativeHandle:T1,useInsertionEffect:S1,useLayoutEffect:C1,useMemo:P1,useReducer:yu,useRef:b1,useState:function(){return yu(Ta)},useDebugValue:Id,useDeferredValue:function(t){var e=an();return rt===null?e.memoizedState=t:O1(e,rt.memoizedState,t)},useTransition:function(){var t=yu(Ta)[0],e=an().memoizedState;return[t,e]},useMutableSource:p1,useSyncExternalStore:m1,useId:E1,unstable_isNewReconciler:!1};function cn(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lc={isMounted:function(t){return(t=t._reactInternals)?Sr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=At(),r=Pi(t),u=Un(i,r);u.payload=e,n!=null&&(u.callback=n),e=Ti(t,u,r),e!==null&&(pn(e,t,r,i),jo(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=At(),r=Pi(t),u=Un(i,r);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=Ti(t,u,r),e!==null&&(pn(e,t,r,i),jo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=At(),i=Pi(t),r=Un(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ti(t,r,i),e!==null&&(pn(e,t,i,n),jo(e,t,i))}};function Gm(t,e,n,i,r,u,m){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,u,m):e.prototype&&e.prototype.isPureReactComponent?!ya(n,i)||!ya(r,u):!0}function I1(t,e,n){var i=!1,r=Mi,u=e.contextType;return typeof u=="object"&&u!==null?u=sn(u):(r=jt(e)?ur:Tt.current,i=e.contextTypes,u=(i=i!=null)?rs(t,r):Mi),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=u),e}function Ym(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&lc.enqueueReplaceState(e,e.state,null)}function Vf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Td(t);var u=e.contextType;typeof u=="object"&&u!==null?r.context=sn(u):(u=jt(e)?ur:Tt.current,r.context=rs(t,u)),r.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(Bf(t,e,u,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&lc.enqueueReplaceState(r,r.state,null),ml(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ls(t,e){try{var n="",i=e;do n+=IC(i),i=i.return;while(i);var r=n}catch(u){r=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:r,digest:null}}function xu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var a_=typeof WeakMap=="function"?WeakMap:Map;function L1(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){wl||(wl=!0,Qf=i),zf(t,e)},n}function F1(t,e,n){n=Un(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){zf(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){zf(t,e),typeof i!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var m=e.stack;this.componentDidCatch(e.value,{componentStack:m!==null?m:""})}),n}function Xm(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new a_;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=w_.bind(null,t,e,n),e.then(t,t))}function Km(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qm(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var o_=ti.ReactCurrentOwner,Ft=!1;function Ot(t,e,n,i){e.child=t===null?u1(e,null,n,i):as(e,t.child,n,i)}function Qm(t,e,n,i,r){n=n.render;var u=e.ref;return Zr(e,r),i=Ad(t,e,n,i,u,r),n=Md(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Qn(t,e,r)):(Be&&n&&yd(e),e.flags|=1,Ot(t,e,i,r),e.child)}function Jm(t,e,n,i,r){if(t===null){var u=n.type;return typeof u=="function"&&!zd(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,R1(t,e,u,i,r)):(t=Ho(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&r)){var m=u.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(m,i)&&t.ref===e.ref)return Qn(t,e,r)}return e.flags|=1,t=Oi(u,i),t.ref=e.ref,t.return=e,e.child=t}function R1(t,e,n,i,r){if(t!==null){var u=t.memoizedProps;if(ya(u,i)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=i=u,(t.lanes&r)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,Qn(t,e,r)}return Uf(t,e,n,i,r)}function j1(t,e,n){var i=e.pendingProps,r=i.children,u=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(Ur,zt),zt|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Re(Ur,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:n,Re(Ur,zt),zt|=i}else u!==null?(i=u.baseLanes|n,e.memoizedState=null):i=n,Re(Ur,zt),zt|=i;return Ot(t,e,r,n),e.child}function N1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uf(t,e,n,i,r){var u=jt(n)?ur:Tt.current;return u=rs(e,u),Zr(e,r),n=Ad(t,e,n,i,u,r),i=Md(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Qn(t,e,r)):(Be&&i&&yd(e),e.flags|=1,Ot(t,e,n,r),e.child)}function Zm(t,e,n,i,r){if(jt(n)){var u=!0;ul(e)}else u=!1;if(Zr(e,r),e.stateNode===null)Vo(t,e),I1(e,n,i),Vf(e,n,i,r),i=!0;else if(t===null){var m=e.stateNode,l=e.memoizedProps;m.props=l;var s=m.context,h=n.contextType;typeof h=="object"&&h!==null?h=sn(h):(h=jt(n)?ur:Tt.current,h=rs(e,h));var f=n.getDerivedStateFromProps,a=typeof f=="function"||typeof m.getSnapshotBeforeUpdate=="function";a||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==i||s!==h)&&Ym(e,m,i,h),ci=!1;var o=e.memoizedState;m.state=o,ml(e,i,m,r),s=e.memoizedState,l!==i||o!==s||Rt.current||ci?(typeof f=="function"&&(Bf(e,n,f,i),s=e.memoizedState),(l=ci||Gm(e,n,l,i,o,s,h))?(a||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(e.flags|=4194308)):(typeof m.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=s),m.props=i,m.state=s,m.context=h,i=l):(typeof m.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{m=e.stateNode,h1(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:cn(e.type,l),m.props=h,a=e.pendingProps,o=m.context,s=n.contextType,typeof s=="object"&&s!==null?s=sn(s):(s=jt(n)?ur:Tt.current,s=rs(e,s));var c=n.getDerivedStateFromProps;(f=typeof c=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==a||o!==s)&&Ym(e,m,i,s),ci=!1,o=e.memoizedState,m.state=o,ml(e,i,m,r);var d=e.memoizedState;l!==a||o!==d||Rt.current||ci?(typeof c=="function"&&(Bf(e,n,c,i),d=e.memoizedState),(h=ci||Gm(e,n,h,i,o,d,s)||!1)?(f||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,d,s),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,d,s)),typeof m.componentDidUpdate=="function"&&(e.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof m.componentDidUpdate!="function"||l===t.memoizedProps&&o===t.memoizedState||(e.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&o===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=d),m.props=i,m.state=d,m.context=s,i=h):(typeof m.componentDidUpdate!="function"||l===t.memoizedProps&&o===t.memoizedState||(e.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&o===t.memoizedState||(e.flags|=1024),i=!1)}return Hf(t,e,n,i,u,r)}function Hf(t,e,n,i,r,u){N1(t,e);var m=(e.flags&128)!==0;if(!i&&!m)return r&&Nm(e,n,!1),Qn(t,e,u);i=e.stateNode,o_.current=e;var l=m&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&m?(e.child=as(e,t.child,null,u),e.child=as(e,null,l,u)):Ot(t,e,l,u),e.memoizedState=i.state,r&&Nm(e,n,!0),e.child}function B1(t){var e=t.stateNode;e.pendingContext?jm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jm(t,e.context,!1),kd(t,e.containerInfo)}function eg(t,e,n,i,r){return ss(),wd(r),e.flags|=256,Ot(t,e,n,i),e.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function $f(t){return{baseLanes:t,cachePool:null,transitions:null}}function V1(t,e,n){var i=e.pendingProps,r=ze.current,u=!1,m=(e.flags&128)!==0,l;if((l=m)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Re(ze,r&1),t===null)return jf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(m=i.children,t=i.fallback,u?(i=e.mode,u=e.child,m={mode:"hidden",children:m},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=m):u=fc(m,i,0,null),t=or(t,i,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=$f(n),e.memoizedState=Wf,t):Ld(e,m));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return l_(t,e,m,i,l,r,n);if(u){u=i.fallback,m=e.mode,r=t.child,l=r.sibling;var s={mode:"hidden",children:i.children};return!(m&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=s,e.deletions=null):(i=Oi(r,s),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?u=Oi(l,u):(u=or(u,m,n,null),u.flags|=2),u.return=e,i.return=e,i.sibling=u,e.child=i,i=u,u=e.child,m=t.child.memoizedState,m=m===null?$f(n):{baseLanes:m.baseLanes|n,cachePool:null,transitions:m.transitions},u.memoizedState=m,u.childLanes=t.childLanes&~n,e.memoizedState=Wf,i}return u=t.child,t=u.sibling,i=Oi(u,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ld(t,e){return e=fc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uo(t,e,n,i){return i!==null&&wd(i),as(e,t.child,null,n),t=Ld(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function l_(t,e,n,i,r,u,m){if(n)return e.flags&256?(e.flags&=-257,i=xu(Error(oe(422))),uo(t,e,m,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=i.fallback,r=e.mode,i=fc({mode:"visible",children:i.children},r,0,null),u=or(u,r,m,null),u.flags|=2,i.return=e,u.return=e,i.sibling=u,e.child=i,e.mode&1&&as(e,t.child,null,m),e.child.memoizedState=$f(m),e.memoizedState=Wf,u);if(!(e.mode&1))return uo(t,e,m,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,u=Error(oe(419)),i=xu(u,i,void 0),uo(t,e,m,i)}if(l=(m&t.childLanes)!==0,Ft||l){if(i=lt,i!==null){switch(m&-m){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|m)?0:r,r!==0&&r!==u.retryLane&&(u.retryLane=r,qn(t,r),pn(i,t,r,-1))}return Vd(),i=xu(Error(oe(421))),uo(t,e,m,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=b_.bind(null,t),r._reactRetry=e,null):(t=u.treeContext,Ht=_i(r.nextSibling),$t=e,Be=!0,fn=null,t!==null&&(en[tn++]=Bn,en[tn++]=Vn,en[tn++]=fr,Bn=t.id,Vn=t.overflow,fr=e),e=Ld(e,i.children),e.flags|=4096,e)}function tg(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Nf(t.return,e,n)}function wu(t,e,n,i,r){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=n,u.tailMode=r)}function z1(t,e,n){var i=e.pendingProps,r=i.revealOrder,u=i.tail;if(Ot(t,e,i.children,n),i=ze.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tg(t,n,e);else if(t.tag===19)tg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Re(ze,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&gl(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),wu(e,!1,r,n,u);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&gl(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}wu(e,!0,n,null,u);break;case"together":wu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function c_(t,e,n){switch(e.tag){case 3:B1(e),ss();break;case 5:d1(e);break;case 1:jt(e.type)&&ul(e);break;case 4:kd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Re(dl,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Re(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?V1(t,e,n):(Re(ze,ze.current&1),t=Qn(t,e,n),t!==null?t.sibling:null);Re(ze,ze.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return z1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Re(ze,ze.current),i)break;return null;case 22:case 23:return e.lanes=0,j1(t,e,n)}return Qn(t,e,n)}var U1,Gf,H1,W1;U1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gf=function(){};H1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,er(En.current);var u=null;switch(n){case"input":r=pf(t,r),i=pf(t,i),u=[];break;case"select":r=We({},r,{value:void 0}),i=We({},i,{value:void 0}),u=[];break;case"textarea":r=vf(t,r),i=vf(t,i),u=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ll)}xf(n,i);var m;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var l=r[h];for(m in l)l.hasOwnProperty(m)&&(n||(n={}),n[m]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(fa.hasOwnProperty(h)?u||(u=[]):(u=u||[]).push(h,null));for(h in i){var s=i[h];if(l=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&s!==l&&(s!=null||l!=null))if(h==="style")if(l){for(m in l)!l.hasOwnProperty(m)||s&&s.hasOwnProperty(m)||(n||(n={}),n[m]="");for(m in s)s.hasOwnProperty(m)&&l[m]!==s[m]&&(n||(n={}),n[m]=s[m])}else n||(u||(u=[]),u.push(h,n)),n=s;else h==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,l=l?l.__html:void 0,s!=null&&l!==s&&(u=u||[]).push(h,s)):h==="children"?typeof s!="string"&&typeof s!="number"||(u=u||[]).push(h,""+s):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(fa.hasOwnProperty(h)?(s!=null&&h==="onScroll"&&je("scroll",t),u||l===s||(u=[])):(u=u||[]).push(h,s))}n&&(u=u||[]).push("style",n);var h=u;(e.updateQueue=h)&&(e.flags|=4)}};W1=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ls(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function u_(t,e,n){var i=e.pendingProps;switch(xd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return jt(e.type)&&cl(),yt(e),null;case 3:return i=e.stateNode,os(),Ne(Rt),Ne(Tt),Od(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(lo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(eh(fn),fn=null))),Gf(t,e),yt(e),null;case 5:Pd(e);var r=er(Ca.current);if(n=e.type,t!==null&&e.stateNode!=null)H1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(oe(166));return yt(e),null}if(t=er(En.current),lo(e)){i=e.stateNode,n=e.type;var u=e.memoizedProps;switch(i[kn]=e,i[ba]=u,t=(e.mode&1)!==0,n){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(r=0;r<Gs.length;r++)je(Gs[r],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":um(i,u),je("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},je("invalid",i);break;case"textarea":hm(i,u),je("invalid",i)}xf(n,u),r=null;for(var m in u)if(u.hasOwnProperty(m)){var l=u[m];m==="children"?typeof l=="string"?i.textContent!==l&&(u.suppressHydrationWarning!==!0&&oo(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(u.suppressHydrationWarning!==!0&&oo(i.textContent,l,t),r=["children",""+l]):fa.hasOwnProperty(m)&&l!=null&&m==="onScroll"&&je("scroll",i)}switch(n){case"input":Za(i),fm(i,u,!0);break;case"textarea":Za(i),dm(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=ll)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{m=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=yy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=m.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=m.createElement(n,{is:i.is}):(t=m.createElement(n),n==="select"&&(m=t,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):t=m.createElementNS(t,n),t[kn]=e,t[ba]=i,U1(t,e,!1,!1),e.stateNode=t;e:{switch(m=wf(n,i),n){case"dialog":je("cancel",t),je("close",t),r=i;break;case"iframe":case"object":case"embed":je("load",t),r=i;break;case"video":case"audio":for(r=0;r<Gs.length;r++)je(Gs[r],t);r=i;break;case"source":je("error",t),r=i;break;case"img":case"image":case"link":je("error",t),je("load",t),r=i;break;case"details":je("toggle",t),r=i;break;case"input":um(t,i),r=pf(t,i),je("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=We({},i,{value:void 0}),je("invalid",t);break;case"textarea":hm(t,i),r=vf(t,i),je("invalid",t);break;default:r=i}xf(n,r),l=r;for(u in l)if(l.hasOwnProperty(u)){var s=l[u];u==="style"?by(t,s):u==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&xy(t,s)):u==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&ha(t,s):typeof s=="number"&&ha(t,""+s):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fa.hasOwnProperty(u)?s!=null&&u==="onScroll"&&je("scroll",t):s!=null&&rd(t,u,s,m))}switch(n){case"input":Za(t),fm(t,i,!1);break;case"textarea":Za(t),dm(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ai(i.value));break;case"select":t.multiple=!!i.multiple,u=i.value,u!=null?Kr(t,!!i.multiple,u,!1):i.defaultValue!=null&&Kr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ll)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)W1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(oe(166));if(n=er(Ca.current),er(En.current),lo(e)){if(i=e.stateNode,n=e.memoizedProps,i[kn]=e,(u=i.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:oo(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&oo(i.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[kn]=e,e.stateNode=i}return yt(e),null;case 13:if(Ne(ze),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&Ht!==null&&e.mode&1&&!(e.flags&128))l1(),ss(),e.flags|=98560,u=!1;else if(u=lo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!u)throw Error(oe(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(oe(317));u[kn]=e}else ss(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),u=!1}else fn!==null&&(eh(fn),fn=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?st===0&&(st=3):Vd())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return os(),Gf(t,e),t===null&&xa(e.stateNode.containerInfo),yt(e),null;case 10:return Cd(e.type._context),yt(e),null;case 17:return jt(e.type)&&cl(),yt(e),null;case 19:if(Ne(ze),u=e.memoizedState,u===null)return yt(e),null;if(i=(e.flags&128)!==0,m=u.rendering,m===null)if(i)Ls(u,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(m=gl(t),m!==null){for(e.flags|=128,Ls(u,!1),i=m.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)u=n,t=i,u.flags&=14680066,m=u.alternate,m===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,t=m.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Re(ze,ze.current&1|2),e.child}t=t.sibling}u.tail!==null&&Qe()>cs&&(e.flags|=128,i=!0,Ls(u,!1),e.lanes=4194304)}else{if(!i)if(t=gl(m),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ls(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Be)return yt(e),null}else 2*Qe()-u.renderingStartTime>cs&&n!==1073741824&&(e.flags|=128,i=!0,Ls(u,!1),e.lanes=4194304);u.isBackwards?(m.sibling=e.child,e.child=m):(n=u.last,n!==null?n.sibling=m:e.child=m,u.last=m)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Qe(),e.sibling=null,n=ze.current,Re(ze,i?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return Bd(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?zt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function f_(t,e){switch(xd(e),e.tag){case 1:return jt(e.type)&&cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return os(),Ne(Rt),Ne(Tt),Od(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pd(e),null;case 13:if(Ne(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));ss()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(ze),null;case 4:return os(),null;case 10:return Cd(e.type._context),null;case 22:case 23:return Bd(),null;case 24:return null;default:return null}}var fo=!1,St=!1,h_=typeof WeakSet=="function"?WeakSet:Set,ue=null;function zr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ye(t,e,i)}else n.current=null}function Yf(t,e,n){try{n()}catch(i){Ye(t,e,i)}}var ng=!1;function d_(t,e){if(Af=sl,t=Ky(),vd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var m=0,l=-1,s=-1,h=0,f=0,a=t,o=null;t:for(;;){for(var c;a!==n||r!==0&&a.nodeType!==3||(l=m+r),a!==u||i!==0&&a.nodeType!==3||(s=m+i),a.nodeType===3&&(m+=a.nodeValue.length),(c=a.firstChild)!==null;)o=a,a=c;for(;;){if(a===t)break t;if(o===n&&++h===r&&(l=m),o===u&&++f===i&&(s=m),(c=a.nextSibling)!==null)break;a=o,o=a.parentNode}a=c}n=l===-1||s===-1?null:{start:l,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mf={focusedElem:t,selectionRange:n},sl=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var d=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(d!==null){var v=d.memoizedProps,p=d.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:cn(e.type,v),p);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(w){Ye(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return d=ng,ng=!1,d}function na(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var u=r.destroy;r.destroy=void 0,u!==void 0&&Yf(e,n,u)}r=r.next}while(r!==i)}}function cc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Xf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $1(t){var e=t.alternate;e!==null&&(t.alternate=null,$1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[ba],delete e[Lf],delete e[K2],delete e[q2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function G1(t){return t.tag===5||t.tag===3||t.tag===4}function ig(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||G1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ll));else if(i!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}function qf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(qf(t,e,n),t=t.sibling;t!==null;)qf(t,e,n),t=t.sibling}var ft=null,un=!1;function si(t,e,n){for(n=n.child;n!==null;)Y1(t,e,n),n=n.sibling}function Y1(t,e,n){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(tc,n)}catch{}switch(n.tag){case 5:St||zr(n,e);case 6:var i=ft,r=un;ft=null,si(t,e,n),ft=i,un=r,ft!==null&&(un?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(un?(t=ft,n=n.stateNode,t.nodeType===8?du(t.parentNode,n):t.nodeType===1&&du(t,n),ga(t)):du(ft,n.stateNode));break;case 4:i=ft,r=un,ft=n.stateNode.containerInfo,un=!0,si(t,e,n),ft=i,un=r;break;case 0:case 11:case 14:case 15:if(!St&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var u=r,m=u.destroy;u=u.tag,m!==void 0&&(u&2||u&4)&&Yf(n,e,m),r=r.next}while(r!==i)}si(t,e,n);break;case 1:if(!St&&(zr(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){Ye(n,e,l)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(St=(i=St)||n.memoizedState!==null,si(t,e,n),St=i):si(t,e,n);break;default:si(t,e,n)}}function rg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new h_),e.forEach(function(i){var r=S_.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var u=t,m=e,l=m;e:for(;l!==null;){switch(l.tag){case 5:ft=l.stateNode,un=!1;break e;case 3:ft=l.stateNode.containerInfo,un=!0;break e;case 4:ft=l.stateNode.containerInfo,un=!0;break e}l=l.return}if(ft===null)throw Error(oe(160));Y1(u,m,r),ft=null,un=!1;var s=r.alternate;s!==null&&(s.return=null),r.return=null}catch(h){Ye(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)X1(e,t),e=e.sibling}function X1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),wn(t),i&4){try{na(3,t,t.return),cc(3,t)}catch(v){Ye(t,t.return,v)}try{na(5,t,t.return)}catch(v){Ye(t,t.return,v)}}break;case 1:on(e,t),wn(t),i&512&&n!==null&&zr(n,n.return);break;case 5:if(on(e,t),wn(t),i&512&&n!==null&&zr(n,n.return),t.flags&32){var r=t.stateNode;try{ha(r,"")}catch(v){Ye(t,t.return,v)}}if(i&4&&(r=t.stateNode,r!=null)){var u=t.memoizedProps,m=n!==null?n.memoizedProps:u,l=t.type,s=t.updateQueue;if(t.updateQueue=null,s!==null)try{l==="input"&&u.type==="radio"&&u.name!=null&&gy(r,u),wf(l,m);var h=wf(l,u);for(m=0;m<s.length;m+=2){var f=s[m],a=s[m+1];f==="style"?by(r,a):f==="dangerouslySetInnerHTML"?xy(r,a):f==="children"?ha(r,a):rd(r,f,a,h)}switch(l){case"input":mf(r,u);break;case"textarea":vy(r,u);break;case"select":var o=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!u.multiple;var c=u.value;c!=null?Kr(r,!!u.multiple,c,!1):o!==!!u.multiple&&(u.defaultValue!=null?Kr(r,!!u.multiple,u.defaultValue,!0):Kr(r,!!u.multiple,u.multiple?[]:"",!1))}r[ba]=u}catch(v){Ye(t,t.return,v)}}break;case 6:if(on(e,t),wn(t),i&4){if(t.stateNode===null)throw Error(oe(162));r=t.stateNode,u=t.memoizedProps;try{r.nodeValue=u}catch(v){Ye(t,t.return,v)}}break;case 3:if(on(e,t),wn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ga(e.containerInfo)}catch(v){Ye(t,t.return,v)}break;case 4:on(e,t),wn(t);break;case 13:on(e,t),wn(t),r=t.child,r.flags&8192&&(u=r.memoizedState!==null,r.stateNode.isHidden=u,!u||r.alternate!==null&&r.alternate.memoizedState!==null||(jd=Qe())),i&4&&rg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(St=(h=St)||f,on(e,t),St=h):on(e,t),wn(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(ue=t,f=t.child;f!==null;){for(a=ue=f;ue!==null;){switch(o=ue,c=o.child,o.tag){case 0:case 11:case 14:case 15:na(4,o,o.return);break;case 1:zr(o,o.return);var d=o.stateNode;if(typeof d.componentWillUnmount=="function"){i=o,n=o.return;try{e=i,d.props=e.memoizedProps,d.state=e.memoizedState,d.componentWillUnmount()}catch(v){Ye(i,n,v)}}break;case 5:zr(o,o.return);break;case 22:if(o.memoizedState!==null){ag(a);continue}}c!==null?(c.return=o,ue=c):ag(a)}f=f.sibling}e:for(f=null,a=t;;){if(a.tag===5){if(f===null){f=a;try{r=a.stateNode,h?(u=r.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(l=a.stateNode,s=a.memoizedProps.style,m=s!=null&&s.hasOwnProperty("display")?s.display:null,l.style.display=wy("display",m))}catch(v){Ye(t,t.return,v)}}}else if(a.tag===6){if(f===null)try{a.stateNode.nodeValue=h?"":a.memoizedProps}catch(v){Ye(t,t.return,v)}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}}break;case 19:on(e,t),wn(t),i&4&&rg(t);break;case 21:break;default:on(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(G1(n)){var i=n;break e}n=n.return}throw Error(oe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ha(r,""),i.flags&=-33);var u=ig(t);qf(t,u,r);break;case 3:case 4:var m=i.stateNode.containerInfo,l=ig(t);Kf(t,l,m);break;default:throw Error(oe(161))}}catch(s){Ye(t,t.return,s)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function p_(t,e,n){ue=t,K1(t)}function K1(t,e,n){for(var i=(t.mode&1)!==0;ue!==null;){var r=ue,u=r.child;if(r.tag===22&&i){var m=r.memoizedState!==null||fo;if(!m){var l=r.alternate,s=l!==null&&l.memoizedState!==null||St;l=fo;var h=St;if(fo=m,(St=s)&&!h)for(ue=r;ue!==null;)m=ue,s=m.child,m.tag===22&&m.memoizedState!==null?og(r):s!==null?(s.return=m,ue=s):og(r);for(;u!==null;)ue=u,K1(u),u=u.sibling;ue=r,fo=l,St=h}sg(t)}else r.subtreeFlags&8772&&u!==null?(u.return=r,ue=u):sg(t)}}function sg(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||cc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!St)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:cn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&Hm(e,u,i);break;case 3:var m=e.updateQueue;if(m!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hm(e,m,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var s=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var a=f.dehydrated;a!==null&&ga(a)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}St||e.flags&512&&Xf(e)}catch(o){Ye(e,e.return,o)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function ag(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function og(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{cc(4,e)}catch(s){Ye(e,n,s)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(s){Ye(e,r,s)}}var u=e.return;try{Xf(e)}catch(s){Ye(e,u,s)}break;case 5:var m=e.return;try{Xf(e)}catch(s){Ye(e,m,s)}}}catch(s){Ye(e,e.return,s)}if(e===t){ue=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ue=l;break}ue=e.return}}var m_=Math.ceil,xl=ti.ReactCurrentDispatcher,Fd=ti.ReactCurrentOwner,rn=ti.ReactCurrentBatchConfig,Te=0,lt=null,tt=null,mt=0,zt=0,Ur=Ri(0),st=0,Pa=null,dr=0,uc=0,Rd=0,ia=null,It=null,jd=0,cs=1/0,jn=null,wl=!1,Qf=null,ki=null,ho=!1,di=null,bl=0,ra=0,Jf=null,zo=-1,Uo=0;function At(){return Te&6?Qe():zo!==-1?zo:zo=Qe()}function Pi(t){return t.mode&1?Te&2&&mt!==0?mt&-mt:J2.transition!==null?(Uo===0&&(Uo=Iy()),Uo):(t=Me,t!==0||(t=window.event,t=t===void 0?16:Vy(t.type)),t):1}function pn(t,e,n,i){if(50<ra)throw ra=0,Jf=null,Error(oe(185));Ua(t,n,i),(!(Te&2)||t!==lt)&&(t===lt&&(!(Te&2)&&(uc|=n),st===4&&fi(t,mt)),Nt(t,i),n===1&&Te===0&&!(e.mode&1)&&(cs=Qe()+500,ac&&ji()))}function Nt(t,e){var n=t.callbackNode;JC(t,e);var i=rl(t,t===lt?mt:0);if(i===0)n!==null&&gm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&gm(n),e===1)t.tag===0?Q2(lg.bind(null,t)):s1(lg.bind(null,t)),Y2(function(){!(Te&6)&&ji()}),n=null;else{switch(Ly(i)){case 1:n=cd;break;case 4:n=My;break;case 16:n=il;break;case 536870912:n=Dy;break;default:n=il}n=ix(n,q1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function q1(t,e){if(zo=-1,Uo=0,Te&6)throw Error(oe(327));var n=t.callbackNode;if(es()&&t.callbackNode!==n)return null;var i=rl(t,t===lt?mt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Sl(t,i);else{e=i;var r=Te;Te|=2;var u=J1();(lt!==t||mt!==e)&&(jn=null,cs=Qe()+500,ar(t,e));do try{y_();break}catch(l){Q1(t,l)}while(!0);Sd(),xl.current=u,Te=r,tt!==null?e=0:(lt=null,mt=0,e=st)}if(e!==0){if(e===2&&(r=Tf(t),r!==0&&(i=r,e=Zf(t,r))),e===1)throw n=Pa,ar(t,0),fi(t,i),Nt(t,Qe()),n;if(e===6)fi(t,i);else{if(r=t.current.alternate,!(i&30)&&!g_(r)&&(e=Sl(t,i),e===2&&(u=Tf(t),u!==0&&(i=u,e=Zf(t,u))),e===1))throw n=Pa,ar(t,0),fi(t,i),Nt(t,Qe()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(oe(345));case 2:Gi(t,It,jn);break;case 3:if(fi(t,i),(i&130023424)===i&&(e=jd+500-Qe(),10<e)){if(rl(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){At(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=If(Gi.bind(null,t,It,jn),e);break}Gi(t,It,jn);break;case 4:if(fi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var m=31-dn(i);u=1<<m,m=e[m],m>r&&(r=m),i&=~u}if(i=r,i=Qe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*m_(i/1960))-i,10<i){t.timeoutHandle=If(Gi.bind(null,t,It,jn),i);break}Gi(t,It,jn);break;case 5:Gi(t,It,jn);break;default:throw Error(oe(329))}}}return Nt(t,Qe()),t.callbackNode===n?q1.bind(null,t):null}function Zf(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(ar(t,e).flags|=256),t=Sl(t,e),t!==2&&(e=It,It=n,e!==null&&eh(e)),t}function eh(t){It===null?It=t:It.push.apply(It,t)}function g_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],u=r.getSnapshot;r=r.value;try{if(!mn(u(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fi(t,e){for(e&=~Rd,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),i=1<<n;t[n]=-1,e&=~i}}function lg(t){if(Te&6)throw Error(oe(327));es();var e=rl(t,0);if(!(e&1))return Nt(t,Qe()),null;var n=Sl(t,e);if(t.tag!==0&&n===2){var i=Tf(t);i!==0&&(e=i,n=Zf(t,i))}if(n===1)throw n=Pa,ar(t,0),fi(t,e),Nt(t,Qe()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gi(t,It,jn),Nt(t,Qe()),null}function Nd(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(cs=Qe()+500,ac&&ji())}}function pr(t){di!==null&&di.tag===0&&!(Te&6)&&es();var e=Te;Te|=1;var n=rn.transition,i=Me;try{if(rn.transition=null,Me=1,t)return t()}finally{Me=i,rn.transition=n,Te=e,!(Te&6)&&ji()}}function Bd(){zt=Ur.current,Ne(Ur)}function ar(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,G2(n)),tt!==null)for(n=tt.return;n!==null;){var i=n;switch(xd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&cl();break;case 3:os(),Ne(Rt),Ne(Tt),Od();break;case 5:Pd(i);break;case 4:os();break;case 13:Ne(ze);break;case 19:Ne(ze);break;case 10:Cd(i.type._context);break;case 22:case 23:Bd()}n=n.return}if(lt=t,tt=t=Oi(t.current,null),mt=zt=e,st=0,Pa=null,Rd=uc=dr=0,It=ia=null,Zi!==null){for(e=0;e<Zi.length;e++)if(n=Zi[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,u=n.pending;if(u!==null){var m=u.next;u.next=r,i.next=m}n.pending=i}Zi=null}return t}function Q1(t,e){do{var n=tt;try{if(Sd(),No.current=yl,vl){for(var i=He.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}vl=!1}if(hr=0,ot=rt=He=null,ta=!1,_a=0,Fd.current=null,n===null||n.return===null){st=1,Pa=e,tt=null;break}e:{var u=t,m=n.return,l=n,s=e;if(e=mt,l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var h=s,f=l,a=f.tag;if(!(f.mode&1)&&(a===0||a===11||a===15)){var o=f.alternate;o?(f.updateQueue=o.updateQueue,f.memoizedState=o.memoizedState,f.lanes=o.lanes):(f.updateQueue=null,f.memoizedState=null)}var c=Km(m);if(c!==null){c.flags&=-257,qm(c,m,l,u,e),c.mode&1&&Xm(u,h,e),e=c,s=h;var d=e.updateQueue;if(d===null){var v=new Set;v.add(s),e.updateQueue=v}else d.add(s);break e}else{if(!(e&1)){Xm(u,h,e),Vd();break e}s=Error(oe(426))}}else if(Be&&l.mode&1){var p=Km(m);if(p!==null){!(p.flags&65536)&&(p.flags|=256),qm(p,m,l,u,e),wd(ls(s,l));break e}}u=s=ls(s,l),st!==4&&(st=2),ia===null?ia=[u]:ia.push(u),u=m;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var g=L1(u,s,e);Um(u,g);break e;case 1:l=s;var y=u.type,x=u.stateNode;if(!(u.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ki===null||!ki.has(x)))){u.flags|=65536,e&=-e,u.lanes|=e;var w=F1(u,l,e);Um(u,w);break e}}u=u.return}while(u!==null)}ex(n)}catch(b){e=b,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function J1(){var t=xl.current;return xl.current=yl,t===null?yl:t}function Vd(){(st===0||st===3||st===2)&&(st=4),lt===null||!(dr&268435455)&&!(uc&268435455)||fi(lt,mt)}function Sl(t,e){var n=Te;Te|=2;var i=J1();(lt!==t||mt!==e)&&(jn=null,ar(t,e));do try{v_();break}catch(r){Q1(t,r)}while(!0);if(Sd(),Te=n,xl.current=i,tt!==null)throw Error(oe(261));return lt=null,mt=0,st}function v_(){for(;tt!==null;)Z1(tt)}function y_(){for(;tt!==null&&!HC();)Z1(tt)}function Z1(t){var e=nx(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?ex(t):tt=e,Fd.current=null}function ex(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=f_(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,tt=null;return}}else if(n=u_(n,e,zt),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);st===0&&(st=5)}function Gi(t,e,n){var i=Me,r=rn.transition;try{rn.transition=null,Me=1,x_(t,e,n,i)}finally{rn.transition=r,Me=i}return null}function x_(t,e,n,i){do es();while(di!==null);if(Te&6)throw Error(oe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(ZC(t,u),t===lt&&(tt=lt=null,mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ho||(ho=!0,ix(il,function(){return es(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=rn.transition,rn.transition=null;var m=Me;Me=1;var l=Te;Te|=4,Fd.current=null,d_(t,n),X1(n,t),B2(Mf),sl=!!Af,Mf=Af=null,t.current=n,p_(n),WC(),Te=l,Me=m,rn.transition=u}else t.current=n;if(ho&&(ho=!1,di=t,bl=r),u=t.pendingLanes,u===0&&(ki=null),YC(n.stateNode),Nt(t,Qe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(wl)throw wl=!1,t=Qf,Qf=null,t;return bl&1&&t.tag!==0&&es(),u=t.pendingLanes,u&1?t===Jf?ra++:(ra=0,Jf=t):ra=0,ji(),null}function es(){if(di!==null){var t=Ly(bl),e=rn.transition,n=Me;try{if(rn.transition=null,Me=16>t?16:t,di===null)var i=!1;else{if(t=di,di=null,bl=0,Te&6)throw Error(oe(331));var r=Te;for(Te|=4,ue=t.current;ue!==null;){var u=ue,m=u.child;if(ue.flags&16){var l=u.deletions;if(l!==null){for(var s=0;s<l.length;s++){var h=l[s];for(ue=h;ue!==null;){var f=ue;switch(f.tag){case 0:case 11:case 15:na(8,f,u)}var a=f.child;if(a!==null)a.return=f,ue=a;else for(;ue!==null;){f=ue;var o=f.sibling,c=f.return;if($1(f),f===h){ue=null;break}if(o!==null){o.return=c,ue=o;break}ue=c}}}var d=u.alternate;if(d!==null){var v=d.child;if(v!==null){d.child=null;do{var p=v.sibling;v.sibling=null,v=p}while(v!==null)}}ue=u}}if(u.subtreeFlags&2064&&m!==null)m.return=u,ue=m;else e:for(;ue!==null;){if(u=ue,u.flags&2048)switch(u.tag){case 0:case 11:case 15:na(9,u,u.return)}var g=u.sibling;if(g!==null){g.return=u.return,ue=g;break e}ue=u.return}}var y=t.current;for(ue=y;ue!==null;){m=ue;var x=m.child;if(m.subtreeFlags&2064&&x!==null)x.return=m,ue=x;else e:for(m=y;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cc(9,l)}}catch(b){Ye(l,l.return,b)}if(l===m){ue=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,ue=w;break e}ue=l.return}}if(Te=r,ji(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(tc,t)}catch{}i=!0}return i}finally{Me=n,rn.transition=e}}return!1}function cg(t,e,n){e=ls(n,e),e=L1(t,e,1),t=Ti(t,e,1),e=At(),t!==null&&(Ua(t,1,e),Nt(t,e))}function Ye(t,e,n){if(t.tag===3)cg(t,t,n);else for(;e!==null;){if(e.tag===3){cg(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ki===null||!ki.has(i))){t=ls(n,t),t=F1(e,t,1),e=Ti(e,t,1),t=At(),e!==null&&(Ua(e,1,t),Nt(e,t));break}}e=e.return}}function w_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(mt&n)===n&&(st===4||st===3&&(mt&130023424)===mt&&500>Qe()-jd?ar(t,0):Rd|=n),Nt(t,e)}function tx(t,e){e===0&&(t.mode&1?(e=no,no<<=1,!(no&130023424)&&(no=4194304)):e=1);var n=At();t=qn(t,e),t!==null&&(Ua(t,e,n),Nt(t,n))}function b_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tx(t,n)}function S_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(oe(314))}i!==null&&i.delete(e),tx(t,n)}var nx;nx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,c_(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,Be&&e.flags&1048576&&a1(e,hl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Vo(t,e),t=e.pendingProps;var r=rs(e,Tt.current);Zr(e,n),r=Ad(null,e,i,t,r,n);var u=Md();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(i)?(u=!0,ul(e)):u=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Td(e),r.updater=lc,e.stateNode=r,r._reactInternals=e,Vf(e,i,t,n),e=Hf(null,e,i,!0,u,n)):(e.tag=0,Be&&u&&yd(e),Ot(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Vo(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=__(i),t=cn(i,t),r){case 0:e=Uf(null,e,i,t,n);break e;case 1:e=Zm(null,e,i,t,n);break e;case 11:e=Qm(null,e,i,t,n);break e;case 14:e=Jm(null,e,i,cn(i.type,t),n);break e}throw Error(oe(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cn(i,r),Uf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cn(i,r),Zm(t,e,i,r,n);case 3:e:{if(B1(e),t===null)throw Error(oe(387));i=e.pendingProps,u=e.memoizedState,r=u.element,h1(t,e),ml(e,i,null,n);var m=e.memoizedState;if(i=m.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){r=ls(Error(oe(423)),e),e=eg(t,e,i,n,r);break e}else if(i!==r){r=ls(Error(oe(424)),e),e=eg(t,e,i,n,r);break e}else for(Ht=_i(e.stateNode.containerInfo.firstChild),$t=e,Be=!0,fn=null,n=u1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ss(),i===r){e=Qn(t,e,n);break e}Ot(t,e,i,n)}e=e.child}return e;case 5:return d1(e),t===null&&jf(e),i=e.type,r=e.pendingProps,u=t!==null?t.memoizedProps:null,m=r.children,Df(i,r)?m=null:u!==null&&Df(i,u)&&(e.flags|=32),N1(t,e),Ot(t,e,m,n),e.child;case 6:return t===null&&jf(e),null;case 13:return V1(t,e,n);case 4:return kd(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=as(e,null,i,n):Ot(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cn(i,r),Qm(t,e,i,r,n);case 7:return Ot(t,e,e.pendingProps,n),e.child;case 8:return Ot(t,e,e.pendingProps.children,n),e.child;case 12:return Ot(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,u=e.memoizedProps,m=r.value,Re(dl,i._currentValue),i._currentValue=m,u!==null)if(mn(u.value,m)){if(u.children===r.children&&!Rt.current){e=Qn(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var l=u.dependencies;if(l!==null){m=u.child;for(var s=l.firstContext;s!==null;){if(s.context===i){if(u.tag===1){s=Un(-1,n&-n),s.tag=2;var h=u.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s}}u.lanes|=n,s=u.alternate,s!==null&&(s.lanes|=n),Nf(u.return,n,e),l.lanes|=n;break}s=s.next}}else if(u.tag===10)m=u.type===e.type?null:u.child;else if(u.tag===18){if(m=u.return,m===null)throw Error(oe(341));m.lanes|=n,l=m.alternate,l!==null&&(l.lanes|=n),Nf(m,n,e),m=u.sibling}else m=u.child;if(m!==null)m.return=u;else for(m=u;m!==null;){if(m===e){m=null;break}if(u=m.sibling,u!==null){u.return=m.return,m=u;break}m=m.return}u=m}Ot(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Zr(e,n),r=sn(r),i=i(r),e.flags|=1,Ot(t,e,i,n),e.child;case 14:return i=e.type,r=cn(i,e.pendingProps),r=cn(i.type,r),Jm(t,e,i,r,n);case 15:return R1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:cn(i,r),Vo(t,e),e.tag=1,jt(i)?(t=!0,ul(e)):t=!1,Zr(e,n),I1(e,i,r),Vf(e,i,r,n),Hf(null,e,i,!0,t,n);case 19:return z1(t,e,n);case 22:return j1(t,e,n)}throw Error(oe(156,e.tag))};function ix(t,e){return Ay(t,e)}function C_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(t,e,n,i){return new C_(t,e,n,i)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function __(t){if(typeof t=="function")return zd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ad)return 11;if(t===od)return 14}return 2}function Oi(t,e){var n=t.alternate;return n===null?(n=nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ho(t,e,n,i,r,u){var m=2;if(i=t,typeof t=="function")zd(t)&&(m=1);else if(typeof t=="string")m=5;else e:switch(t){case Dr:return or(n.children,r,u,e);case sd:m=8,r|=8;break;case uf:return t=nn(12,n,e,r|2),t.elementType=uf,t.lanes=u,t;case ff:return t=nn(13,n,e,r),t.elementType=ff,t.lanes=u,t;case hf:return t=nn(19,n,e,r),t.elementType=hf,t.lanes=u,t;case dy:return fc(n,r,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case fy:m=10;break e;case hy:m=9;break e;case ad:m=11;break e;case od:m=14;break e;case li:m=16,i=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=nn(m,n,e,r),e.elementType=t,e.type=i,e.lanes=u,e}function or(t,e,n,i){return t=nn(7,t,i,e),t.lanes=n,t}function fc(t,e,n,i){return t=nn(22,t,i,e),t.elementType=dy,t.lanes=n,t.stateNode={isHidden:!1},t}function bu(t,e,n){return t=nn(6,t,null,e),t.lanes=n,t}function Su(t,e,n){return e=nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function T_(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ud(t,e,n,i,r,u,m,l,s){return t=new T_(t,e,n,l,s),e===1?(e=1,u===!0&&(e|=8)):e=0,u=nn(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Td(u),t}function k_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function rx(t){if(!t)return Mi;t=t._reactInternals;e:{if(Sr(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(jt(n))return r1(t,n,e)}return e}function sx(t,e,n,i,r,u,m,l,s){return t=Ud(n,i,!0,t,r,u,m,l,s),t.context=rx(null),n=t.current,i=At(),r=Pi(n),u=Un(i,r),u.callback=e??null,Ti(n,u,r),t.current.lanes=r,Ua(t,r,i),Nt(t,i),t}function hc(t,e,n,i){var r=e.current,u=At(),m=Pi(r);return n=rx(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(u,m),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ti(r,e,m),t!==null&&(pn(t,r,m,u),jo(t,r,m)),m}function Cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ug(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hd(t,e){ug(t,e),(t=t.alternate)&&ug(t,e)}function P_(){return null}var ax=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wd(t){this._internalRoot=t}dc.prototype.render=Wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));hc(t,e,null,null)};dc.prototype.unmount=Wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pr(function(){hc(null,t,null,null)}),e[Kn]=null}};function dc(t){this._internalRoot=t}dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=jy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ui.length&&e!==0&&e<ui[n].priority;n++);ui.splice(n,0,t),n===0&&By(t)}};function $d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fg(){}function O_(t,e,n,i,r){if(r){if(typeof i=="function"){var u=i;i=function(){var h=Cl(m);u.call(h)}}var m=sx(e,i,t,0,null,!1,!1,"",fg);return t._reactRootContainer=m,t[Kn]=m.current,xa(t.nodeType===8?t.parentNode:t),pr(),m}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var h=Cl(s);l.call(h)}}var s=Ud(t,0,!1,null,null,!1,!1,"",fg);return t._reactRootContainer=s,t[Kn]=s.current,xa(t.nodeType===8?t.parentNode:t),pr(function(){hc(e,s,n,i)}),s}function mc(t,e,n,i,r){var u=n._reactRootContainer;if(u){var m=u;if(typeof r=="function"){var l=r;r=function(){var s=Cl(m);l.call(s)}}hc(e,m,t,r)}else m=O_(n,e,t,r,i);return Cl(m)}Fy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$s(e.pendingLanes);n!==0&&(ud(e,n|1),Nt(e,Qe()),!(Te&6)&&(cs=Qe()+500,ji()))}break;case 13:pr(function(){var i=qn(t,1);if(i!==null){var r=At();pn(i,t,1,r)}}),Hd(t,1)}};fd=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=At();pn(e,t,134217728,n)}Hd(t,134217728)}};Ry=function(t){if(t.tag===13){var e=Pi(t),n=qn(t,e);if(n!==null){var i=At();pn(n,t,e,i)}Hd(t,e)}};jy=function(){return Me};Ny=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Sf=function(t,e,n){switch(e){case"input":if(mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=sc(i);if(!r)throw Error(oe(90));my(i),mf(i,r)}}}break;case"textarea":vy(t,n);break;case"select":e=n.value,e!=null&&Kr(t,!!n.multiple,e,!1)}};_y=Nd;Ty=pr;var E_={usingClientEntryPoint:!1,Events:[Wa,Rr,sc,Sy,Cy,Nd]},Fs={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A_={bundleType:Fs.bundleType,version:Fs.version,rendererPackageName:Fs.rendererPackageName,rendererConfig:Fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ti.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Oy(t),t===null?null:t.stateNode},findFiberByHostInstance:Fs.findFiberByHostInstance||P_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var po=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!po.isDisabled&&po.supportsFiber)try{tc=po.inject(A_),On=po}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$d(e))throw Error(oe(200));return k_(t,e,null,n)};Kt.createRoot=function(t,e){if(!$d(t))throw Error(oe(299));var n=!1,i="",r=ax;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Ud(t,1,!1,null,null,n,!1,i,r),t[Kn]=e.current,xa(t.nodeType===8?t.parentNode:t),new Wd(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=Oy(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return pr(t)};Kt.hydrate=function(t,e,n){if(!pc(e))throw Error(oe(200));return mc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!$d(t))throw Error(oe(405));var i=n!=null&&n.hydratedSources||null,r=!1,u="",m=ax;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(m=n.onRecoverableError)),e=sx(e,null,t,1,n??null,r,!1,u,m),t[Kn]=e.current,xa(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new dc(e)};Kt.render=function(t,e,n){if(!pc(e))throw Error(oe(200));return mc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!pc(t))throw Error(oe(40));return t._reactRootContainer?(pr(function(){mc(null,null,t,!1,function(){t._reactRootContainer=null,t[Kn]=null})}),!0):!1};Kt.unstable_batchedUpdates=Nd;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!pc(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return mc(t,e,n,!1,i)};Kt.version="18.3.1-next-f1338f8080-20240426";function ox(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ox)}catch(t){console.error(t)}}ox(),oy.exports=Kt;var lx=oy.exports,cx,hg=lx;cx=hg.createRoot,hg.hydrateRoot;function ux(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=ux(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function pi(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=ux(t))&&(i&&(i+=" "),i+=e);return i}const Oa=t=>typeof t=="number"&&!isNaN(t),lr=t=>typeof t=="string",Wt=t=>typeof t=="function",Wo=t=>lr(t)||Wt(t)?t:null,th=t=>B.isValidElement(t)||lr(t)||Wt(t)||Oa(t);function M_(t,e,n){n===void 0&&(n=300);const{scrollHeight:i,style:r}=t;requestAnimationFrame(()=>{r.minHeight="initial",r.height=i+"px",r.transition=`all ${n}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(e,n)})})}function gc(t){let{enter:e,exit:n,appendPosition:i=!1,collapse:r=!0,collapseDuration:u=300}=t;return function(m){let{children:l,position:s,preventExitTransition:h,done:f,nodeRef:a,isIn:o,playToast:c}=m;const d=i?`${e}--${s}`:e,v=i?`${n}--${s}`:n,p=B.useRef(0);return B.useLayoutEffect(()=>{const g=a.current,y=d.split(" "),x=w=>{w.target===a.current&&(c(),g.removeEventListener("animationend",x),g.removeEventListener("animationcancel",x),p.current===0&&w.type!=="animationcancel"&&g.classList.remove(...y))};g.classList.add(...y),g.addEventListener("animationend",x),g.addEventListener("animationcancel",x)},[]),B.useEffect(()=>{const g=a.current,y=()=>{g.removeEventListener("animationend",y),r?M_(g,f,u):f()};o||(h?y():(p.current=1,g.className+=` ${v}`,g.addEventListener("animationend",y)))},[o]),we.createElement(we.Fragment,null,l)}}function dg(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Et=new Map;let Ea=[];const nh=new Set,D_=t=>nh.forEach(e=>e(t)),fx=()=>Et.size>0;function hx(t,e){var n;if(e)return!((n=Et.get(e))==null||!n.isToastActive(t));let i=!1;return Et.forEach(r=>{r.isToastActive(t)&&(i=!0)}),i}function dx(t,e){th(t)&&(fx()||Ea.push({content:t,options:e}),Et.forEach(n=>{n.buildToast(t,e)}))}function pg(t,e){Et.forEach(n=>{e!=null&&e!=null&&e.containerId?(e==null?void 0:e.containerId)===n.id&&n.toggle(t,e==null?void 0:e.id):n.toggle(t,e==null?void 0:e.id)})}function I_(t){const{subscribe:e,getSnapshot:n,setProps:i}=B.useRef(function(u){const m=u.containerId||1;return{subscribe(l){const s=function(f,a,o){let c=1,d=0,v=[],p=[],g=[],y=a;const x=new Map,w=new Set,b=()=>{g=Array.from(x.values()),w.forEach(C=>C())},S=C=>{p=C==null?[]:p.filter(T=>T!==C),b()},_=C=>{const{toastId:T,onOpen:O,updateId:L,children:j}=C.props,H=L==null;C.staleId&&x.delete(C.staleId),x.set(T,C),p=[...p,C.props.toastId].filter(F=>F!==C.staleId),b(),o(dg(C,H?"added":"updated")),H&&Wt(O)&&O(B.isValidElement(j)&&j.props)};return{id:f,props:y,observe:C=>(w.add(C),()=>w.delete(C)),toggle:(C,T)=>{x.forEach(O=>{T!=null&&T!==O.props.toastId||Wt(O.toggle)&&O.toggle(C)})},removeToast:S,toasts:x,clearQueue:()=>{d-=v.length,v=[]},buildToast:(C,T)=>{if((D=>{let{containerId:W,toastId:M,updateId:P}=D;const z=W?W!==f:f!==1,$=x.has(M)&&P==null;return z||$})(T))return;const{toastId:O,updateId:L,data:j,staleId:H,delay:F}=T,V=()=>{S(O)},I=L==null;I&&d++;const A={...y,style:y.toastStyle,key:c++,...Object.fromEntries(Object.entries(T).filter(D=>{let[W,M]=D;return M!=null})),toastId:O,updateId:L,data:j,closeToast:V,isIn:!1,className:Wo(T.className||y.toastClassName),bodyClassName:Wo(T.bodyClassName||y.bodyClassName),progressClassName:Wo(T.progressClassName||y.progressClassName),autoClose:!T.isLoading&&(U=T.autoClose,k=y.autoClose,U===!1||Oa(U)&&U>0?U:k),deleteToast(){const D=x.get(O),{onClose:W,children:M}=D.props;Wt(W)&&W(B.isValidElement(M)&&M.props),o(dg(D,"removed")),x.delete(O),d--,d<0&&(d=0),v.length>0?_(v.shift()):b()}};var U,k;A.closeButton=y.closeButton,T.closeButton===!1||th(T.closeButton)?A.closeButton=T.closeButton:T.closeButton===!0&&(A.closeButton=!th(y.closeButton)||y.closeButton);let E=C;B.isValidElement(C)&&!lr(C.type)?E=B.cloneElement(C,{closeToast:V,toastProps:A,data:j}):Wt(C)&&(E=C({closeToast:V,toastProps:A,data:j}));const R={content:E,props:A,staleId:H};y.limit&&y.limit>0&&d>y.limit&&I?v.push(R):Oa(F)?setTimeout(()=>{_(R)},F):_(R)},setProps(C){y=C},setToggle:(C,T)=>{x.get(C).toggle=T},isToastActive:C=>p.some(T=>T===C),getSnapshot:()=>g}}(m,u,D_);Et.set(m,s);const h=s.observe(l);return Ea.forEach(f=>dx(f.content,f.options)),Ea=[],()=>{h(),Et.delete(m)}},setProps(l){var s;(s=Et.get(m))==null||s.setProps(l)},getSnapshot(){var l;return(l=Et.get(m))==null?void 0:l.getSnapshot()}}}(t)).current;i(t);const r=B.useSyncExternalStore(e,n,n);return{getToastToRender:function(u){if(!r)return[];const m=new Map;return t.newestOnTop&&r.reverse(),r.forEach(l=>{const{position:s}=l.props;m.has(s)||m.set(s,[]),m.get(s).push(l)}),Array.from(m,l=>u(l[0],l[1]))},isToastActive:hx,count:r==null?void 0:r.length}}function L_(t){const[e,n]=B.useState(!1),[i,r]=B.useState(!1),u=B.useRef(null),m=B.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:s,closeToast:h,onClick:f,closeOnClick:a}=t;var o,c;function d(){n(!0)}function v(){n(!1)}function p(x){const w=u.current;m.canDrag&&w&&(m.didMove=!0,e&&v(),m.delta=t.draggableDirection==="x"?x.clientX-m.start:x.clientY-m.start,m.start!==x.clientX&&(m.canCloseOnClick=!1),w.style.transform=`translate3d(${t.draggableDirection==="x"?`${m.delta}px, var(--y)`:`0, calc(${m.delta}px + var(--y))`},0)`,w.style.opacity=""+(1-Math.abs(m.delta/m.removalDistance)))}function g(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",g);const x=u.current;if(m.canDrag&&m.didMove&&x){if(m.canDrag=!1,Math.abs(m.delta)>m.removalDistance)return r(!0),t.closeToast(),void t.collapseAll();x.style.transition="transform 0.2s, opacity 0.2s",x.style.removeProperty("transform"),x.style.removeProperty("opacity")}}(c=Et.get((o={id:t.toastId,containerId:t.containerId,fn:n}).containerId||1))==null||c.setToggle(o.id,o.fn),B.useEffect(()=>{if(t.pauseOnFocusLoss)return document.hasFocus()||v(),window.addEventListener("focus",d),window.addEventListener("blur",v),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",v)}},[t.pauseOnFocusLoss]);const y={onPointerDown:function(x){if(t.draggable===!0||t.draggable===x.pointerType){m.didMove=!1,document.addEventListener("pointermove",p),document.addEventListener("pointerup",g);const w=u.current;m.canCloseOnClick=!0,m.canDrag=!0,w.style.transition="none",t.draggableDirection==="x"?(m.start=x.clientX,m.removalDistance=w.offsetWidth*(t.draggablePercent/100)):(m.start=x.clientY,m.removalDistance=w.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent)/100)}},onPointerUp:function(x){const{top:w,bottom:b,left:S,right:_}=u.current.getBoundingClientRect();x.nativeEvent.type!=="touchend"&&t.pauseOnHover&&x.clientX>=S&&x.clientX<=_&&x.clientY>=w&&x.clientY<=b?v():d()}};return l&&s&&(y.onMouseEnter=v,t.stacked||(y.onMouseLeave=d)),a&&(y.onClick=x=>{f&&f(x),m.canCloseOnClick&&h()}),{playToast:d,pauseToast:v,isRunning:e,preventExitTransition:i,toastRef:u,eventHandlers:y}}function F_(t){let{delay:e,isRunning:n,closeToast:i,type:r="default",hide:u,className:m,style:l,controlledProgress:s,progress:h,rtl:f,isIn:a,theme:o}=t;const c=u||s&&h===0,d={...l,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused"};s&&(d.transform=`scaleX(${h})`);const v=pi("Toastify__progress-bar",s?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${o}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":f}),p=Wt(m)?m({rtl:f,type:r,defaultClassName:v}):pi(v,m),g={[s&&h>=1?"onTransitionEnd":"onAnimationEnd"]:s&&h<1?null:()=>{a&&i()}};return we.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":c},we.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${o} Toastify__progress-bar--${r}`}),we.createElement("div",{role:"progressbar","aria-hidden":c?"true":"false","aria-label":"notification timer",className:p,style:d,...g}))}let R_=1;const px=()=>""+R_++;function j_(t){return t&&(lr(t.toastId)||Oa(t.toastId))?t.toastId:px()}function sa(t,e){return dx(t,e),e.toastId}function _l(t,e){return{...e,type:e&&e.type||t,toastId:j_(e)}}function mo(t){return(e,n)=>sa(e,_l(t,n))}function Ee(t,e){return sa(t,_l("default",e))}Ee.loading=(t,e)=>sa(t,_l("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Ee.promise=function(t,e,n){let i,{pending:r,error:u,success:m}=e;r&&(i=lr(r)?Ee.loading(r,n):Ee.loading(r.render,{...n,...r}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},s=(f,a,o)=>{if(a==null)return void Ee.dismiss(i);const c={type:f,...l,...n,data:o},d=lr(a)?{render:a}:a;return i?Ee.update(i,{...c,...d}):Ee(d.render,{...c,...d}),o},h=Wt(t)?t():t;return h.then(f=>s("success",m,f)).catch(f=>s("error",u,f)),h},Ee.success=mo("success"),Ee.info=mo("info"),Ee.error=mo("error"),Ee.warning=mo("warning"),Ee.warn=Ee.warning,Ee.dark=(t,e)=>sa(t,_l("default",{theme:"dark",...e})),Ee.dismiss=function(t){(function(e){var n;if(fx()){if(e==null||lr(n=e)||Oa(n))Et.forEach(i=>{i.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){const i=Et.get(e.containerId);i?i.removeToast(e.id):Et.forEach(r=>{r.removeToast(e.id)})}}else Ea=Ea.filter(i=>e!=null&&i.options.toastId!==e)})(t)},Ee.clearWaitingQueue=function(t){t===void 0&&(t={}),Et.forEach(e=>{!e.props.limit||t.containerId&&e.id!==t.containerId||e.clearQueue()})},Ee.isActive=hx,Ee.update=function(t,e){e===void 0&&(e={});const n=((i,r)=>{var u;let{containerId:m}=r;return(u=Et.get(m||1))==null?void 0:u.toasts.get(i)})(t,e);if(n){const{props:i,content:r}=n,u={delay:100,...i,...e,toastId:e.toastId||t,updateId:px()};u.toastId!==t&&(u.staleId=t);const m=u.render||r;delete u.render,sa(m,u)}},Ee.done=t=>{Ee.update(t,{progress:1})},Ee.onChange=function(t){return nh.add(t),()=>{nh.delete(t)}},Ee.play=t=>pg(!0,t),Ee.pause=t=>pg(!1,t);const N_=typeof window<"u"?B.useLayoutEffect:B.useEffect,go=t=>{let{theme:e,type:n,isLoading:i,...r}=t;return we.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},Cu={info:function(t){return we.createElement(go,{...t},we.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return we.createElement(go,{...t},we.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return we.createElement(go,{...t},we.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return we.createElement(go,{...t},we.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return we.createElement("div",{className:"Toastify__spinner"})}},B_=t=>{const{isRunning:e,preventExitTransition:n,toastRef:i,eventHandlers:r,playToast:u}=L_(t),{closeButton:m,children:l,autoClose:s,onClick:h,type:f,hideProgressBar:a,closeToast:o,transition:c,position:d,className:v,style:p,bodyClassName:g,bodyStyle:y,progressClassName:x,progressStyle:w,updateId:b,role:S,progress:_,rtl:C,toastId:T,deleteToast:O,isIn:L,isLoading:j,closeOnClick:H,theme:F}=t,V=pi("Toastify__toast",`Toastify__toast-theme--${F}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":H}),I=Wt(v)?v({rtl:C,position:d,type:f,defaultClassName:V}):pi(V,v),A=function(R){let{theme:D,type:W,isLoading:M,icon:P}=R,z=null;const $={theme:D,type:W};return P===!1||(Wt(P)?z=P({...$,isLoading:M}):B.isValidElement(P)?z=B.cloneElement(P,$):M?z=Cu.spinner():(X=>X in Cu)(W)&&(z=Cu[W]($))),z}(t),U=!!_||!s,k={closeToast:o,type:f,theme:F};let E=null;return m===!1||(E=Wt(m)?m(k):B.isValidElement(m)?B.cloneElement(m,k):function(R){let{closeToast:D,theme:W,ariaLabel:M="close"}=R;return we.createElement("button",{className:`Toastify__close-button Toastify__close-button--${W}`,type:"button",onClick:P=>{P.stopPropagation(),D(P)},"aria-label":M},we.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},we.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(k)),we.createElement(c,{isIn:L,done:O,position:d,preventExitTransition:n,nodeRef:i,playToast:u},we.createElement("div",{id:T,onClick:h,"data-in":L,className:I,...r,style:p,ref:i},we.createElement("div",{...L&&{role:S},className:Wt(g)?g({type:f}):pi("Toastify__toast-body",g),style:y},A!=null&&we.createElement("div",{className:pi("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!j})},A),we.createElement("div",null,l)),E,we.createElement(F_,{...b&&!U?{key:`pb-${b}`}:{},rtl:C,theme:F,delay:s,isRunning:e,isIn:L,closeToast:o,hide:a,type:f,style:w,className:x,controlledProgress:U,progress:_||0})))},vc=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},V_=gc(vc("bounce",!0));gc(vc("slide",!0));gc(vc("zoom"));gc(vc("flip"));const z_={position:"top-right",transition:V_,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};function U_(t){let e={...z_,...t};const n=t.stacked,[i,r]=B.useState(!0),u=B.useRef(null),{getToastToRender:m,isToastActive:l,count:s}=I_(e),{className:h,style:f,rtl:a,containerId:o}=e;function c(v){const p=pi("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":a});return Wt(h)?h({position:v,rtl:a,defaultClassName:p}):pi(p,Wo(h))}function d(){n&&(r(!0),Ee.play())}return N_(()=>{if(n){var v;const p=u.current.querySelectorAll('[data-in="true"]'),g=12,y=(v=e.position)==null?void 0:v.includes("top");let x=0,w=0;Array.from(p).reverse().forEach((b,S)=>{const _=b;_.classList.add("Toastify__toast--stacked"),S>0&&(_.dataset.collapsed=`${i}`),_.dataset.pos||(_.dataset.pos=y?"top":"bot");const C=x*(i?.2:1)+(i?0:g*S);_.style.setProperty("--y",`${y?C:-1*C}px`),_.style.setProperty("--g",`${g}`),_.style.setProperty("--s",""+(1-(i?w:0))),x+=_.offsetHeight,w+=.025})}},[i,s,n]),we.createElement("div",{ref:u,className:"Toastify",id:o,onMouseEnter:()=>{n&&(r(!1),Ee.pause())},onMouseLeave:d},m((v,p)=>{const g=p.length?{...f}:{...f,pointerEvents:"none"};return we.createElement("div",{className:c(v),style:g,key:`container-${v}`},p.map(y=>{let{content:x,props:w}=y;return we.createElement(B_,{...w,stacked:n,collapseAll:d,isIn:l(w.toastId,w.containerId),style:w.style,key:`toast-${w.key}`},x)}))}))}var mx={exports:{}},H_="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",W_=H_,$_=W_;function gx(){}function vx(){}vx.resetWarningCache=gx;var G_=function(){function t(i,r,u,m,l,s){if(s!==$_){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vx,resetWarningCache:gx};return n.PropTypes=n,n};mx.exports=G_();var Y_=mx.exports;const Fe=Qh(Y_);function Cr(t,e,n,i){function r(u){return u instanceof n?u:new n(function(m){m(u)})}return new(n||(n=Promise))(function(u,m){function l(f){try{h(i.next(f))}catch(a){m(a)}}function s(f){try{h(i.throw(f))}catch(a){m(a)}}function h(f){f.done?u(f.value):r(f.value).then(l,s)}h((i=i.apply(t,e||[])).next())})}const X_=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function us(t,e,n){const i=K_(t),{webkitRelativePath:r}=t,u=typeof e=="string"?e:typeof r=="string"&&r.length>0?r:`./${t.name}`;return typeof i.path!="string"&&mg(i,"path",u),mg(i,"relativePath",u),i}function K_(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const i=e.split(".").pop().toLowerCase(),r=X_.get(i);r&&Object.defineProperty(t,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return t}function mg(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const q_=[".DS_Store","Thumbs.db"];function Q_(t){return Cr(this,void 0,void 0,function*(){return Tl(t)&&J_(t.dataTransfer)?nT(t.dataTransfer,t.type):Z_(t)?eT(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?tT(t):[]})}function J_(t){return Tl(t)}function Z_(t){return Tl(t)&&Tl(t.target)}function Tl(t){return typeof t=="object"&&t!==null}function eT(t){return ih(t.target.files).map(e=>us(e))}function tT(t){return Cr(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>us(n))})}function nT(t,e){return Cr(this,void 0,void 0,function*(){if(t.items){const n=ih(t.items).filter(r=>r.kind==="file");if(e!=="drop")return n;const i=yield Promise.all(n.map(iT));return gg(yx(i))}return gg(ih(t.files).map(n=>us(n)))})}function gg(t){return t.filter(e=>q_.indexOf(e.name)===-1)}function ih(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const i=t[n];e.push(i)}return e}function iT(t){if(typeof t.webkitGetAsEntry!="function")return vg(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?xx(e):vg(t,e)}function yx(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?yx(n):[n]],[])}function vg(t,e){return Cr(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const u=yield t.getAsFileSystemHandle();if(u===null)throw new Error(`${t} is not a File`);if(u!==void 0){const m=yield u.getFile();return m.handle=u,us(m)}}const i=t.getAsFile();if(!i)throw new Error(`${t} is not a File`);return us(i,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function rT(t){return Cr(this,void 0,void 0,function*(){return t.isDirectory?xx(t):sT(t)})}function xx(t){const e=t.createReader();return new Promise((n,i)=>{const r=[];function u(){e.readEntries(m=>Cr(this,void 0,void 0,function*(){if(m.length){const l=Promise.all(m.map(rT));r.push(l),u()}else try{const l=yield Promise.all(r);n(l)}catch(l){i(l)}}),m=>{i(m)})}u()})}function sT(t){return Cr(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(i=>{const r=us(i,t.fullPath);e(r)},i=>{n(i)})})})}var _u=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var i=t.name||"",r=(t.type||"").toLowerCase(),u=r.replace(/\/.*$/,"");return n.some(function(m){var l=m.trim().toLowerCase();return l.charAt(0)==="."?i.toLowerCase().endsWith(l):l.endsWith("/*")?u===l.replace(/\/.*$/,""):r===l})}return!0};function yg(t){return lT(t)||oT(t)||bx(t)||aT()}function aT(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oT(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lT(t){if(Array.isArray(t))return rh(t)}function xg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function wg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xg(Object(n),!0).forEach(function(i){wx(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xg(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function wx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aa(t,e){return fT(t)||uT(t,e)||bx(t,e)||cT()}function cT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bx(t,e){if(t){if(typeof t=="string")return rh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rh(t,e)}}function rh(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function uT(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,u=!1,m,l;try{for(n=n.call(t);!(r=(m=n.next()).done)&&(i.push(m.value),!(e&&i.length===e));r=!0);}catch(s){u=!0,l=s}finally{try{!r&&n.return!=null&&n.return()}finally{if(u)throw l}}return i}}function fT(t){if(Array.isArray(t))return t}var hT=typeof _u=="function"?_u:_u.default,dT="file-invalid-type",pT="file-too-large",mT="file-too-small",gT="too-many-files",vT=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),i=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:dT,message:"File type must be ".concat(i)}},bg=function(e){return{code:pT,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Sg=function(e){return{code:mT,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},yT={code:gT,message:"Too many files"};function Sx(t,e){var n=t.type==="application/x-moz-file"||hT(t,e);return[n,n?null:vT(e)]}function Cx(t,e,n){if(qi(t.size))if(qi(e)&&qi(n)){if(t.size>n)return[!1,bg(n)];if(t.size<e)return[!1,Sg(e)]}else{if(qi(e)&&t.size<e)return[!1,Sg(e)];if(qi(n)&&t.size>n)return[!1,bg(n)]}return[!0,null]}function qi(t){return t!=null}function xT(t){var e=t.files,n=t.accept,i=t.minSize,r=t.maxSize,u=t.multiple,m=t.maxFiles,l=t.validator;return!u&&e.length>1||u&&m>=1&&e.length>m?!1:e.every(function(s){var h=Sx(s,n),f=Aa(h,1),a=f[0],o=Cx(s,i,r),c=Aa(o,1),d=c[0],v=l?l(s):null;return a&&d&&!v})}function kl(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function vo(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Cg(t){t.preventDefault()}function wT(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function bT(t){return t.indexOf("Edge/")!==-1}function ST(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return wT(t)||bT(t)}function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(i){for(var r=arguments.length,u=new Array(r>1?r-1:0),m=1;m<r;m++)u[m-1]=arguments[m];return e.some(function(l){return!kl(i)&&l&&l.apply(void 0,[i].concat(u)),kl(i)})}}function CT(){return"showOpenFilePicker"in window}function _T(t){if(qi(t)){var e=Object.entries(t).filter(function(n){var i=Aa(n,2),r=i[0],u=i[1],m=!0;return _x(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),m=!1),(!Array.isArray(u)||!u.every(Tx))&&(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),m=!1),m}).reduce(function(n,i){var r=Aa(i,2),u=r[0],m=r[1];return wg(wg({},n),{},wx({},u,m))},{});return[{description:"Files",accept:e}]}return t}function TT(t){if(qi(t))return Object.entries(t).reduce(function(e,n){var i=Aa(n,2),r=i[0],u=i[1];return[].concat(yg(e),[r],yg(u))},[]).filter(function(e){return _x(e)||Tx(e)}).join(",")}function kT(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function PT(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function _x(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function Tx(t){return/^.*\.[\w]+$/.test(t)}var OT=["children"],ET=["open"],AT=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],MT=["refKey","onChange","onClick"];function DT(t){return FT(t)||LT(t)||kx(t)||IT()}function IT(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LT(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function FT(t){if(Array.isArray(t))return sh(t)}function Tu(t,e){return NT(t)||jT(t,e)||kx(t,e)||RT()}function RT(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kx(t,e){if(t){if(typeof t=="string")return sh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sh(t,e)}}function sh(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function jT(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i=[],r=!0,u=!1,m,l;try{for(n=n.call(t);!(r=(m=n.next()).done)&&(i.push(m.value),!(e&&i.length===e));r=!0);}catch(s){u=!0,l=s}finally{try{!r&&n.return!=null&&n.return()}finally{if(u)throw l}}return i}}function NT(t){if(Array.isArray(t))return t}function _g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_g(Object(n),!0).forEach(function(i){ah(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_g(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ah(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pl(t,e){if(t==null)return{};var n=BT(t,e),i,r;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(r=0;r<u.length;r++)i=u[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function BT(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,u;for(u=0;u<i.length;u++)r=i[u],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Gd=B.forwardRef(function(t,e){var n=t.children,i=Pl(t,OT),r=Ox(i),u=r.open,m=Pl(r,ET);return B.useImperativeHandle(e,function(){return{open:u}},[u]),we.createElement(B.Fragment,null,n(Ve(Ve({},m),{},{open:u})))});Gd.displayName="Dropzone";var Px={disabled:!1,getFilesFromEvent:Q_,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Gd.defaultProps=Px;Gd.propTypes={children:Fe.func,accept:Fe.objectOf(Fe.arrayOf(Fe.string)),multiple:Fe.bool,preventDropOnDocument:Fe.bool,noClick:Fe.bool,noKeyboard:Fe.bool,noDrag:Fe.bool,noDragEventsBubbling:Fe.bool,minSize:Fe.number,maxSize:Fe.number,maxFiles:Fe.number,disabled:Fe.bool,getFilesFromEvent:Fe.func,onFileDialogCancel:Fe.func,onFileDialogOpen:Fe.func,useFsAccessApi:Fe.bool,autoFocus:Fe.bool,onDragEnter:Fe.func,onDragLeave:Fe.func,onDragOver:Fe.func,onDrop:Fe.func,onDropAccepted:Fe.func,onDropRejected:Fe.func,onError:Fe.func,validator:Fe.func};var oh={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Ox(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ve(Ve({},Px),t),n=e.accept,i=e.disabled,r=e.getFilesFromEvent,u=e.maxSize,m=e.minSize,l=e.multiple,s=e.maxFiles,h=e.onDragEnter,f=e.onDragLeave,a=e.onDragOver,o=e.onDrop,c=e.onDropAccepted,d=e.onDropRejected,v=e.onFileDialogCancel,p=e.onFileDialogOpen,g=e.useFsAccessApi,y=e.autoFocus,x=e.preventDropOnDocument,w=e.noClick,b=e.noKeyboard,S=e.noDrag,_=e.noDragEventsBubbling,C=e.onError,T=e.validator,O=B.useMemo(function(){return TT(n)},[n]),L=B.useMemo(function(){return _T(n)},[n]),j=B.useMemo(function(){return typeof p=="function"?p:Tg},[p]),H=B.useMemo(function(){return typeof v=="function"?v:Tg},[v]),F=B.useRef(null),V=B.useRef(null),I=B.useReducer(VT,oh),A=Tu(I,2),U=A[0],k=A[1],E=U.isFocused,R=U.isFileDialogActive,D=B.useRef(typeof window<"u"&&window.isSecureContext&&g&&CT()),W=function(){!D.current&&R&&setTimeout(function(){if(V.current){var ae=V.current.files;ae.length||(k({type:"closeDialog"}),H())}},300)};B.useEffect(function(){return window.addEventListener("focus",W,!1),function(){window.removeEventListener("focus",W,!1)}},[V,R,H,D]);var M=B.useRef([]),P=function(ae){F.current&&F.current.contains(ae.target)||(ae.preventDefault(),M.current=[])};B.useEffect(function(){return x&&(document.addEventListener("dragover",Cg,!1),document.addEventListener("drop",P,!1)),function(){x&&(document.removeEventListener("dragover",Cg),document.removeEventListener("drop",P))}},[F,x]),B.useEffect(function(){return!i&&y&&F.current&&F.current.focus(),function(){}},[F,y,i]);var z=B.useCallback(function(ee){C?C(ee):console.error(ee)},[C]),$=B.useCallback(function(ee){ee.preventDefault(),ee.persist(),fe(ee),M.current=[].concat(DT(M.current),[ee.target]),vo(ee)&&Promise.resolve(r(ee)).then(function(ae){if(!(kl(ee)&&!_)){var he=ae.length,de=he>0&&xT({files:ae,accept:O,minSize:m,maxSize:u,multiple:l,maxFiles:s,validator:T}),xe=he>0&&!de;k({isDragAccept:de,isDragReject:xe,isDragActive:!0,type:"setDraggedFiles"}),h&&h(ee)}}).catch(function(ae){return z(ae)})},[r,h,z,_,O,m,u,l,s,T]),X=B.useCallback(function(ee){ee.preventDefault(),ee.persist(),fe(ee);var ae=vo(ee);if(ae&&ee.dataTransfer)try{ee.dataTransfer.dropEffect="copy"}catch{}return ae&&a&&a(ee),!1},[a,_]),Y=B.useCallback(function(ee){ee.preventDefault(),ee.persist(),fe(ee);var ae=M.current.filter(function(de){return F.current&&F.current.contains(de)}),he=ae.indexOf(ee.target);he!==-1&&ae.splice(he,1),M.current=ae,!(ae.length>0)&&(k({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),vo(ee)&&f&&f(ee))},[F,f,_]),J=B.useCallback(function(ee,ae){var he=[],de=[];ee.forEach(function(xe){var _e=Sx(xe,O),Oe=Tu(_e,2),Ke=Oe[0],Le=Oe[1],kt=Cx(xe,m,u),at=Tu(kt,2),Vt=at[0],Fn=at[1],_s=T?T(xe):null;if(Ke&&Vt&&!_s)he.push(xe);else{var zi=[Le,Fn];_s&&(zi=zi.concat(_s)),de.push({file:xe,errors:zi.filter(function(qa){return qa})})}}),(!l&&he.length>1||l&&s>=1&&he.length>s)&&(he.forEach(function(xe){de.push({file:xe,errors:[yT]})}),he.splice(0)),k({acceptedFiles:he,fileRejections:de,isDragReject:de.length>0,type:"setFiles"}),o&&o(he,de,ae),de.length>0&&d&&d(de,ae),he.length>0&&c&&c(he,ae)},[k,l,O,m,u,s,o,c,d,T]),ie=B.useCallback(function(ee){ee.preventDefault(),ee.persist(),fe(ee),M.current=[],vo(ee)&&Promise.resolve(r(ee)).then(function(ae){kl(ee)&&!_||J(ae,ee)}).catch(function(ae){return z(ae)}),k({type:"reset"})},[r,J,z,_]),re=B.useCallback(function(){if(D.current){k({type:"openDialog"}),j();var ee={multiple:l,types:L};window.showOpenFilePicker(ee).then(function(ae){return r(ae)}).then(function(ae){J(ae,null),k({type:"closeDialog"})}).catch(function(ae){kT(ae)?(H(ae),k({type:"closeDialog"})):PT(ae)?(D.current=!1,V.current?(V.current.value=null,V.current.click()):z(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):z(ae)});return}V.current&&(k({type:"openDialog"}),j(),V.current.value=null,V.current.click())},[k,j,H,g,J,z,L,l]),q=B.useCallback(function(ee){!F.current||!F.current.isEqualNode(ee.target)||(ee.key===" "||ee.key==="Enter"||ee.keyCode===32||ee.keyCode===13)&&(ee.preventDefault(),re())},[F,re]),G=B.useCallback(function(){k({type:"focus"})},[]),Q=B.useCallback(function(){k({type:"blur"})},[]),te=B.useCallback(function(){w||(ST()?setTimeout(re,0):re())},[w,re]),K=function(ae){return i?null:ae},Z=function(ae){return b?null:K(ae)},se=function(ae){return S?null:K(ae)},fe=function(ae){_&&ae.stopPropagation()},le=B.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=ee.refKey,he=ae===void 0?"ref":ae,de=ee.role,xe=ee.onKeyDown,_e=ee.onFocus,Oe=ee.onBlur,Ke=ee.onClick,Le=ee.onDragEnter,kt=ee.onDragOver,at=ee.onDragLeave,Vt=ee.onDrop,Fn=Pl(ee,AT);return Ve(Ve(ah({onKeyDown:Z(bn(xe,q)),onFocus:Z(bn(_e,G)),onBlur:Z(bn(Oe,Q)),onClick:K(bn(Ke,te)),onDragEnter:se(bn(Le,$)),onDragOver:se(bn(kt,X)),onDragLeave:se(bn(at,Y)),onDrop:se(bn(Vt,ie)),role:typeof de=="string"&&de!==""?de:"presentation"},he,F),!i&&!b?{tabIndex:0}:{}),Fn)}},[F,q,G,Q,te,$,X,Y,ie,b,S,i]),ne=B.useCallback(function(ee){ee.stopPropagation()},[]),ce=B.useMemo(function(){return function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ae=ee.refKey,he=ae===void 0?"ref":ae,de=ee.onChange,xe=ee.onClick,_e=Pl(ee,MT),Oe=ah({accept:O,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:K(bn(de,ie)),onClick:K(bn(xe,ne)),tabIndex:-1},he,V);return Ve(Ve({},Oe),_e)}},[V,n,l,ie,i]);return Ve(Ve({},U),{},{isFocused:E&&!i,getRootProps:le,getInputProps:ce,rootRef:F,inputRef:V,open:K(re)})}function VT(t,e){switch(e.type){case"focus":return Ve(Ve({},t),{},{isFocused:!0});case"blur":return Ve(Ve({},t),{},{isFocused:!1});case"openDialog":return Ve(Ve({},oh),{},{isFileDialogActive:!0});case"closeDialog":return Ve(Ve({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ve(Ve({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Ve(Ve({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Ve({},oh);default:return t}}function Tg(){}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ce=(t,e)=>{const n=B.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:u=2,absoluteStrokeWidth:m,className:l="",children:s,...h},f)=>B.createElement("svg",{ref:f,...zT,width:r,height:r,stroke:i,strokeWidth:m?Number(u)*24/Number(r):u,className:["lucide",`lucide-${UT(t)}`,l].join(" "),...h},[...e.map(([a,o])=>B.createElement(a,o)),...Array.isArray(s)?s:[s]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=Ce("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=Ce("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=Ce("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=Ce("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=Ce("FlipHorizontal",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3",key:"1i73f7"}],["path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3",key:"saxlbk"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 14v2",key:"8jcxud"}],["path",{d:"M12 8v2",key:"1woqiv"}],["path",{d:"M12 2v2",key:"tus03m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=Ce("FlipVertical",[["path",{d:"M21 8V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v3",key:"14bfxa"}],["path",{d:"M21 16v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-3",key:"14rx03"}],["path",{d:"M4 12H2",key:"rhcxmi"}],["path",{d:"M10 12H8",key:"s88cx1"}],["path",{d:"M16 12h-2",key:"10asgb"}],["path",{d:"M22 12h-2",key:"14jgyd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=Ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=Ce("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=Ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=Ce("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=Ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=Ce("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=Ce("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=Ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Ce("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=Ce("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=Ce("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=Ce("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=Ce("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=Ce("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=Ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ck=Ce("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Ce("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=Ce("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hk={BASE_URL:"/imager-ml/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},kg=t=>{let e;const n=new Set,i=(f,a)=>{const o=typeof f=="function"?f(e):f;if(!Object.is(o,e)){const c=e;e=a??(typeof o!="object"||o===null)?o:Object.assign({},e,o),n.forEach(d=>d(e,c))}},r=()=>e,s={setState:i,getState:r,getInitialState:()=>h,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(hk?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=e=t(i,r,s);return s},dk=t=>t?kg(t):kg;var Nx={exports:{}},Bx={},Vx={exports:{}},zx={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=B;function pk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mk=typeof Object.is=="function"?Object.is:pk,gk=fs.useState,vk=fs.useEffect,yk=fs.useLayoutEffect,xk=fs.useDebugValue;function wk(t,e){var n=e(),i=gk({inst:{value:n,getSnapshot:e}}),r=i[0].inst,u=i[1];return yk(function(){r.value=n,r.getSnapshot=e,Pu(r)&&u({inst:r})},[t,n,e]),vk(function(){return Pu(r)&&u({inst:r}),t(function(){Pu(r)&&u({inst:r})})},[t]),xk(n),n}function Pu(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mk(t,n)}catch{return!0}}function bk(t,e){return e()}var Sk=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bk:wk;zx.useSyncExternalStore=fs.useSyncExternalStore!==void 0?fs.useSyncExternalStore:Sk;Vx.exports=zx;var Ck=Vx.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yc=B,_k=Ck;function Tk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kk=typeof Object.is=="function"?Object.is:Tk,Pk=_k.useSyncExternalStore,Ok=yc.useRef,Ek=yc.useEffect,Ak=yc.useMemo,Mk=yc.useDebugValue;Bx.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var u=Ok(null);if(u.current===null){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=Ak(function(){function s(c){if(!h){if(h=!0,f=c,c=i(c),r!==void 0&&m.hasValue){var d=m.value;if(r(d,c))return a=d}return a=c}if(d=a,kk(f,c))return d;var v=i(c);return r!==void 0&&r(d,v)?d:(f=c,a=v)}var h=!1,f,a,o=n===void 0?null:n;return[function(){return s(e())},o===null?void 0:function(){return s(o())}]},[e,n,i,r]);var l=Pk(t,u[0],u[1]);return Ek(function(){m.hasValue=!0,m.value=l},[l]),Mk(l),l};Nx.exports=Bx;var Dk=Nx.exports;const Ik=Qh(Dk),Ux={BASE_URL:"/imager-ml/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:Lk}=we,{useSyncExternalStoreWithSelector:Fk}=Ik;let Pg=!1;const Rk=t=>t;function jk(t,e=Rk,n){(Ux?"production":void 0)!=="production"&&n&&!Pg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Pg=!0);const i=Fk(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Lk(i),i}const Og=t=>{(Ux?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?dk(t):t,n=(i,r)=>jk(e,i,r);return Object.assign(n,e),n},Nk=t=>t?Og(t):Og;var it={};const Bk={},Vk=Object.freeze(Object.defineProperty({__proto__:null,default:Bk},Symbol.toStringTag,{value:"Module"})),Ou=sC(Vk);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.4.2"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Ou,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Ou.implForWrapper,e.nodeCanvas=Ou.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function l(c,d){if(this.__eventListeners[c]){var v=this.__eventListeners[c];d?v[v.indexOf(d)]=!1:e.util.array.fill(v,!1)}}function s(c,d){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var v in c)this.on(v,c[v]);else this.__eventListeners[c]||(this.__eventListeners[c]=[]),this.__eventListeners[c].push(d);return this}function h(c,d){var v=(function(){d.apply(this,arguments),this.off(c,v)}).bind(this);this.on(c,v)}function f(c,d){if(arguments.length===1)for(var v in c)h.call(this,v,c[v]);else h.call(this,c,d);return this}function a(c,d){if(!this.__eventListeners)return this;if(arguments.length===0)for(c in this.__eventListeners)l.call(this,c);else if(arguments.length===1&&typeof arguments[0]=="object")for(var v in c)l.call(this,v,c[v]);else l.call(this,c,d);return this}function o(c,d){if(!this.__eventListeners)return this;var v=this.__eventListeners[c];if(!v)return this;for(var p=0,g=v.length;p<g;p++)v[p]&&v[p].call(this,d||{});return this.__eventListeners[c]=v.filter(function(y){return y!==!1}),this}e.Observable={fire:o,on:s,once:f,off:a}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var l=0,s=arguments.length;l<s;l++)this._onObjectAdded(arguments[l]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(l,s,h){var f=this._objects;return h?f[s]=l:f.splice(s,0,l),this._onObjectAdded&&this._onObjectAdded(l),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var l=this._objects,s,h=!1,f=0,a=arguments.length;f<a;f++)s=l.indexOf(arguments[f]),s!==-1&&(h=!0,l.splice(s,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[f]));return this.renderOnAddRemove&&h&&this.requestRenderAll(),this},forEachObject:function(l,s){for(var h=this.getObjects(),f=0,a=h.length;f<a;f++)l.call(s,h[f],f,h);return this},getObjects:function(l){return typeof l>"u"?this._objects.concat():this._objects.filter(function(s){return s.type===l})},item:function(l){return this._objects[l]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(l,s){return this._objects.indexOf(l)>-1?!0:s?this._objects.some(function(h){return typeof h.contains=="function"&&h.contains(l,!0)}):!1},complexity:function(){return this._objects.reduce(function(l,s){return l+=s.complexity?s.complexity():0,l},0)}},e.CommonMethods={_setOptions:function(l){for(var s in l)this.set(s,l[s])},_initGradient:function(l,s){l&&l.colorStops&&!(l instanceof e.Gradient)&&this.set(s,new e.Gradient(l))},_initPattern:function(l,s,h){l&&l.source&&!(l instanceof e.Pattern)?this.set(s,new e.Pattern(l,h)):h&&h()},_setObject:function(l){for(var s in l)this._set(s,l[s])},set:function(l,s){return typeof l=="object"?this._setObject(l):this._set(l,s),this},_set:function(l,s){this[l]=s},toggle:function(l){var s=this.get(l);return typeof s=="boolean"&&this.set(l,!s),this},get:function(l){return this[l]}},function(l){var s=Math.sqrt,h=Math.atan2,f=Math.pow,a=Math.PI/180,o=Math.PI/2;e.util={cos:function(c){if(c===0)return 1;c<0&&(c=-c);var d=c/o;switch(d){case 1:case 3:return 0;case 2:return-1}return Math.cos(c)},sin:function(c){if(c===0)return 0;var d=c/o,v=1;switch(c<0&&(v=-1),d){case 1:return v;case 2:return 0;case 3:return-v}return Math.sin(c)},removeFromArray:function(c,d){var v=c.indexOf(d);return v!==-1&&c.splice(v,1),c},getRandomInt:function(c,d){return Math.floor(Math.random()*(d-c+1))+c},degreesToRadians:function(c){return c*a},radiansToDegrees:function(c){return c/a},rotatePoint:function(c,d,v){var p=new e.Point(c.x-d.x,c.y-d.y),g=e.util.rotateVector(p,v);return new e.Point(g.x,g.y).addEquals(d)},rotateVector:function(c,d){var v=e.util.sin(d),p=e.util.cos(d),g=c.x*p-c.y*v,y=c.x*v+c.y*p;return{x:g,y}},createVector:function(c,d){return new e.Point(d.x-c.x,d.y-c.y)},calcAngleBetweenVectors:function(c,d){return Math.acos((c.x*d.x+c.y*d.y)/(Math.hypot(c.x,c.y)*Math.hypot(d.x,d.y)))},getHatVector:function(c){return new e.Point(c.x,c.y).multiply(1/Math.hypot(c.x,c.y))},getBisector:function(c,d,v){var p=e.util.createVector(c,d),g=e.util.createVector(c,v),y=e.util.calcAngleBetweenVectors(p,g),x=e.util.calcAngleBetweenVectors(e.util.rotateVector(p,y),g),w=y*(x===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(p,w)),angle:y}},projectStrokeOnPoints:function(c,d,v){var p=[],g=d.strokeWidth/2,y=d.strokeUniform?new e.Point(1/d.scaleX,1/d.scaleY):new e.Point(1,1),x=function(w){var b=g/Math.hypot(w.x,w.y);return new e.Point(w.x*b*y.x,w.y*b*y.y)};return c.length<=1||c.forEach(function(w,b){var S=new e.Point(w.x,w.y),_,C;b===0?(C=c[b+1],_=v?x(e.util.createVector(C,S)).addEquals(S):c[c.length-1]):b===c.length-1?(_=c[b-1],C=v?x(e.util.createVector(_,S)).addEquals(S):c[0]):(_=c[b-1],C=c[b+1]);var T=e.util.getBisector(S,_,C),O=T.vector,L=T.angle,j,H;if(d.strokeLineJoin==="miter"&&(j=-g/Math.sin(L/2),H=new e.Point(O.x*j*y.x,O.y*j*y.y),Math.hypot(H.x,H.y)/g<=d.strokeMiterLimit)){p.push(S.add(H)),p.push(S.subtract(H));return}j=-g*Math.SQRT2,H=new e.Point(O.x*j*y.x,O.y*j*y.y),p.push(S.add(H)),p.push(S.subtract(H))}),p},transformPoint:function(c,d,v){return v?new e.Point(d[0]*c.x+d[2]*c.y,d[1]*c.x+d[3]*c.y):new e.Point(d[0]*c.x+d[2]*c.y+d[4],d[1]*c.x+d[3]*c.y+d[5])},makeBoundingBoxFromPoints:function(c,d){if(d)for(var v=0;v<c.length;v++)c[v]=e.util.transformPoint(c[v],d);var p=[c[0].x,c[1].x,c[2].x,c[3].x],g=e.util.array.min(p),y=e.util.array.max(p),x=y-g,w=[c[0].y,c[1].y,c[2].y,c[3].y],b=e.util.array.min(w),S=e.util.array.max(w),_=S-b;return{left:g,top:b,width:x,height:_}},invertTransform:function(c){var d=1/(c[0]*c[3]-c[1]*c[2]),v=[d*c[3],-d*c[1],-d*c[2],d*c[0]],p=e.util.transformPoint({x:c[4],y:c[5]},v,!0);return v[4]=-p.x,v[5]=-p.y,v},toFixed:function(c,d){return parseFloat(Number(c).toFixed(d))},parseUnit:function(c,d){var v=/\D{0,2}$/.exec(c),p=parseFloat(c);switch(d||(d=e.Text.DEFAULT_SVG_FONT_SIZE),v[0]){case"mm":return p*e.DPI/25.4;case"cm":return p*e.DPI/2.54;case"in":return p*e.DPI;case"pt":return p*e.DPI/72;case"pc":return p*e.DPI/72*12;case"em":return p*d;default:return p}},falseFunction:function(){return!1},getKlass:function(c,d){return c=e.util.string.camelize(c.charAt(0).toUpperCase()+c.slice(1)),e.util.resolveNamespace(d)[c]},getSvgAttributes:function(c){var d=["instantiated_by_use","style","id","class"];switch(c){case"linearGradient":d=d.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":d=d.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":d=d.concat(["offset","stop-color","stop-opacity"]);break}return d},resolveNamespace:function(c){if(!c)return e;var d=c.split("."),v=d.length,p,g=l||e.window;for(p=0;p<v;++p)g=g[d[p]];return g},loadImage:function(c,d,v,p){if(!c){d&&d.call(v,c);return}var g=e.util.createImage(),y=function(){d&&d.call(v,g,!1),g=g.onload=g.onerror=null};g.onload=y,g.onerror=function(){e.log("Error loading "+g.src),d&&d.call(v,null,!0),g=g.onload=g.onerror=null},c.indexOf("data")!==0&&p!==void 0&&p!==null&&(g.crossOrigin=p),c.substring(0,14)==="data:image/svg"&&(g.onload=null,e.util.loadImageInDom(g,y)),g.src=c},loadImageInDom:function(c,d){var v=e.document.createElement("div");v.style.width=v.style.height="1px",v.style.left=v.style.top="-100%",v.style.position="absolute",v.appendChild(c),e.document.querySelector("body").appendChild(v),c.onload=function(){d(),v.parentNode.removeChild(v),v=null}},enlivenObjects:function(c,d,v,p){c=c||[];var g=[],y=0,x=c.length;function w(){++y===x&&d&&d(g.filter(function(b){return b}))}if(!x){d&&d(g);return}c.forEach(function(b,S){if(!b||!b.type){w();return}var _=e.util.getKlass(b.type,v);_.fromObject(b,function(C,T){T||(g[S]=C),p&&p(b,C,T),w()})})},enlivenObjectEnlivables:function(c,d,v){var p=e.Object.ENLIVEN_PROPS.filter(function(g){return!!c[g]});e.util.enlivenObjects(p.map(function(g){return c[g]}),function(g){var y={};p.forEach(function(x,w){y[x]=g[w],d&&(d[x]=g[w])}),v&&v(y)})},enlivenPatterns:function(c,d){c=c||[];function v(){++g===y&&d&&d(p)}var p=[],g=0,y=c.length;if(!y){d&&d(p);return}c.forEach(function(x,w){x&&x.source?new e.Pattern(x,function(b){p[w]=b,v()}):(p[w]=x,v())})},groupSVGElements:function(c,d,v){var p;return c&&c.length===1?(typeof v<"u"&&(c[0].sourcePath=v),c[0]):(d&&(d.width&&d.height?d.centerPoint={x:d.width/2,y:d.height/2}:(delete d.width,delete d.height)),p=new e.Group(c,d),typeof v<"u"&&(p.sourcePath=v),p)},populateWithProperties:function(c,d,v){if(v&&Array.isArray(v))for(var p=0,g=v.length;p<g;p++)v[p]in c&&(d[v[p]]=c[v[p]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(c){var d=e.util.createCanvasElement();return d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0),d},toDataURL:function(c,d,v){return c.toDataURL("image/"+d,v)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(c,d,v){return[c[0]*d[0]+c[2]*d[1],c[1]*d[0]+c[3]*d[1],c[0]*d[2]+c[2]*d[3],c[1]*d[2]+c[3]*d[3],v?0:c[0]*d[4]+c[2]*d[5]+c[4],v?0:c[1]*d[4]+c[3]*d[5]+c[5]]},qrDecompose:function(c){var d=h(c[1],c[0]),v=f(c[0],2)+f(c[1],2),p=s(v),g=(c[0]*c[3]-c[2]*c[1])/p,y=h(c[0]*c[2]+c[1]*c[3],v);return{angle:d/a,scaleX:p,scaleY:g,skewX:y/a,skewY:0,translateX:c[4],translateY:c[5]}},calcRotateMatrix:function(c){if(!c.angle)return e.iMatrix.concat();var d=e.util.degreesToRadians(c.angle),v=e.util.cos(d),p=e.util.sin(d);return[v,p,-p,v,0,0]},calcDimensionsMatrix:function(c){var d=typeof c.scaleX>"u"?1:c.scaleX,v=typeof c.scaleY>"u"?1:c.scaleY,p=[c.flipX?-d:d,0,0,c.flipY?-v:v,0,0],g=e.util.multiplyTransformMatrices,y=e.util.degreesToRadians;return c.skewX&&(p=g(p,[1,0,Math.tan(y(c.skewX)),1],!0)),c.skewY&&(p=g(p,[1,Math.tan(y(c.skewY)),0,1],!0)),p},composeMatrix:function(c){var d=[1,0,0,1,c.translateX||0,c.translateY||0],v=e.util.multiplyTransformMatrices;return c.angle&&(d=v(d,e.util.calcRotateMatrix(c))),(c.scaleX!==1||c.scaleY!==1||c.skewX||c.skewY||c.flipX||c.flipY)&&(d=v(d,e.util.calcDimensionsMatrix(c))),d},resetObjectTransform:function(c){c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.flipX=!1,c.flipY=!1,c.rotate(0)},saveObjectTransform:function(c){return{scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,angle:c.angle,left:c.left,flipX:c.flipX,flipY:c.flipY,top:c.top}},isTransparent:function(c,d,v,p){p>0&&(d>p?d-=p:d=0,v>p?v-=p:v=0);var g=!0,y,x,w=c.getImageData(d,v,p*2||1,p*2||1),b=w.data.length;for(y=3;y<b&&(x=w.data[y],g=x<=0,g!==!1);y+=4);return w=null,g},parsePreserveAspectRatioAttribute:function(c){var d="meet",v="Mid",p="Mid",g=c.split(" "),y;return g&&g.length&&(d=g.pop(),d!=="meet"&&d!=="slice"?(y=d,d="meet"):g.length&&(y=g.pop())),v=y!=="none"?y.slice(1,4):"none",p=y!=="none"?y.slice(5,8):"none",{meetOrSlice:d,alignX:v,alignY:p}},clearFabricFontCache:function(c){c=(c||"").toLowerCase(),c?e.charWidthsCache[c]&&delete e.charWidthsCache[c]:e.charWidthsCache={}},limitDimsByArea:function(c,d){var v=Math.sqrt(d*c),p=Math.floor(d/v);return{x:Math.floor(v),y:p}},capValue:function(c,d,v){return Math.max(c,Math.min(d,v))},findScaleToFit:function(c,d){return Math.min(d.width/c.width,d.height/c.height)},findScaleToCover:function(c,d){return Math.max(d.width/c.width,d.height/c.height)},matrixToSVG:function(c){return"matrix("+c.map(function(d){return e.util.toFixed(d,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(c,d){var v=e.util.invertTransform(d),p=e.util.multiplyTransformMatrices(v,c.calcOwnMatrix());e.util.applyTransformToObject(c,p)},addTransformToObject:function(c,d){e.util.applyTransformToObject(c,e.util.multiplyTransformMatrices(d,c.calcOwnMatrix()))},applyTransformToObject:function(c,d){var v=e.util.qrDecompose(d),p=new e.Point(v.translateX,v.translateY);c.flipX=!1,c.flipY=!1,c.set("scaleX",v.scaleX),c.set("scaleY",v.scaleY),c.skewX=v.skewX,c.skewY=v.skewY,c.angle=v.angle,c.setPositionByOrigin(p,"center","center")},sizeAfterTransform:function(c,d,v){var p=c/2,g=d/2,y=[{x:-p,y:-g},{x:p,y:-g},{x:-p,y:g},{x:p,y:g}],x=e.util.calcDimensionsMatrix(v),w=e.util.makeBoundingBoxFromPoints(y,x);return{x:w.width,y:w.height}},mergeClipPaths:function(c,d){var v=c,p=d;v.inverted&&!p.inverted&&(v=d,p=c),e.util.applyTransformToObject(p,e.util.multiplyTransformMatrices(e.util.invertTransform(v.calcTransformMatrix()),p.calcTransformMatrix()));var g=v.inverted&&p.inverted;return g&&(v.inverted=p.inverted=!1),new e.Group([v],{clipPath:p,inverted:g})},hasStyleChanged:function(c,d,v){return v=v||!1,c.fill!==d.fill||c.stroke!==d.stroke||c.strokeWidth!==d.strokeWidth||c.fontSize!==d.fontSize||c.fontFamily!==d.fontFamily||c.fontWeight!==d.fontWeight||c.fontStyle!==d.fontStyle||c.textBackgroundColor!==d.textBackgroundColor||c.deltaY!==d.deltaY||v&&(c.overline!==d.overline||c.underline!==d.underline||c.linethrough!==d.linethrough)},stylesToArray:function(v,d){for(var v=e.util.object.clone(v,!0),p=d.split(`
`),g=-1,y={},x=[],w=0;w<p.length;w++){if(!v[w]){g+=p[w].length;continue}for(var b=0;b<p[w].length;b++){g++;var S=v[w][b];if(S&&Object.keys(S).length>0){var _=e.util.hasStyleChanged(y,S,!0);_?x.push({start:g,end:g+1,style:S}):x[x.length-1].end++}y=S||{}}}return x},stylesFromArray:function(c,d){if(!Array.isArray(c))return c;for(var v=d.split(`
`),p=-1,g=0,y={},x=0;x<v.length;x++)for(var w=0;w<v[x].length;w++)p++,c[g]&&c[g].start<=p&&p<c[g].end&&(y[x]=y[x]||{},y[x][w]=Object.assign({},c[g].style),p===c[g].end-1&&g++);return y}}}(t),function(){var l=Array.prototype.join,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};function f(k,E,R,D,W,M,P,z,$,X,Y){var J=e.util.cos(k),ie=e.util.sin(k),re=e.util.cos(E),q=e.util.sin(E),G=R*W*re-D*M*q+P,Q=D*W*re+R*M*q+z,te=X+$*(-R*W*ie-D*M*J),K=Y+$*(-D*W*ie+R*M*J),Z=G+$*(R*W*q+D*M*re),se=Q+$*(D*W*q-R*M*re);return["C",te,K,Z,se,G,Q]}function a(k,E,R,D,W,M,P){var z=Math.PI,$=P*z/180,X=e.util.sin($),Y=e.util.cos($),J=0,ie=0;R=Math.abs(R),D=Math.abs(D);var re=-Y*k*.5-X*E*.5,q=-Y*E*.5+X*k*.5,G=R*R,Q=D*D,te=q*q,K=re*re,Z=G*Q-G*te-Q*K,se=0;if(Z<0){var fe=Math.sqrt(1-Z/(G*Q));R*=fe,D*=fe}else se=(W===M?-1:1)*Math.sqrt(Z/(G*te+Q*K));var le=se*R*q/D,ne=-se*D*re/R,ce=Y*le-X*ne+k*.5,ee=X*le+Y*ne+E*.5,ae=o(1,0,(re-le)/R,(q-ne)/D),he=o((re-le)/R,(q-ne)/D,(-re-le)/R,(-q-ne)/D);M===0&&he>0?he-=2*z:M===1&&he<0&&(he+=2*z);for(var de=Math.ceil(Math.abs(he/z*2)),xe=[],_e=he/de,Oe=8/3*Math.sin(_e/4)*Math.sin(_e/4)/Math.sin(_e/2),Ke=ae+_e,Le=0;Le<de;Le++)xe[Le]=f(ae,Ke,Y,X,R,D,ce,ee,Oe,J,ie),J=xe[Le][5],ie=xe[Le][6],ae=Ke,Ke+=_e;return xe}function o(k,E,R,D){var W=Math.atan2(E,k),M=Math.atan2(D,R);return M>=W?M-W:2*Math.PI-(W-M)}function c(k,E,R,D,W,M,P,z){var $;if(e.cachesBoundsOfCurve&&($=l.call(arguments),e.boundsOfCurveCache[$]))return e.boundsOfCurveCache[$];var X=Math.sqrt,Y=Math.min,J=Math.max,ie=Math.abs,re=[],q=[[],[]],G,Q,te,K,Z,se,fe,le;Q=6*k-12*R+6*W,G=-3*k+9*R-9*W+3*P,te=3*R-3*k;for(var ne=0;ne<2;++ne){if(ne>0&&(Q=6*E-12*D+6*M,G=-3*E+9*D-9*M+3*z,te=3*D-3*E),ie(G)<1e-12){if(ie(Q)<1e-12)continue;K=-te/Q,0<K&&K<1&&re.push(K);continue}fe=Q*Q-4*te*G,!(fe<0)&&(le=X(fe),Z=(-Q+le)/(2*G),0<Z&&Z<1&&re.push(Z),se=(-Q-le)/(2*G),0<se&&se<1&&re.push(se))}for(var ce,ee,ae=re.length,he=ae,de;ae--;)K=re[ae],de=1-K,ce=de*de*de*k+3*de*de*K*R+3*de*K*K*W+K*K*K*P,q[0][ae]=ce,ee=de*de*de*E+3*de*de*K*D+3*de*K*K*M+K*K*K*z,q[1][ae]=ee;q[0][he]=k,q[1][he]=E,q[0][he+1]=P,q[1][he+1]=z;var xe=[{x:Y.apply(null,q[0]),y:Y.apply(null,q[1])},{x:J.apply(null,q[0]),y:J.apply(null,q[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[$]=xe),xe}function d(k,E,R){for(var D=R[1],W=R[2],M=R[3],P=R[4],z=R[5],$=R[6],X=R[7],Y=a($-k,X-E,D,W,P,z,M),J=0,ie=Y.length;J<ie;J++)Y[J][1]+=k,Y[J][2]+=E,Y[J][3]+=k,Y[J][4]+=E,Y[J][5]+=k,Y[J][6]+=E;return Y}function v(k){var E=0,R=0,D=k.length,W=0,M=0,P,z,$,X=[],Y,J,ie;for(z=0;z<D;++z){switch($=!1,P=k[z].slice(0),P[0]){case"l":P[0]="L",P[1]+=E,P[2]+=R;case"L":E=P[1],R=P[2];break;case"h":P[1]+=E;case"H":P[0]="L",P[2]=R,E=P[1];break;case"v":P[1]+=R;case"V":P[0]="L",R=P[1],P[1]=E,P[2]=R;break;case"m":P[0]="M",P[1]+=E,P[2]+=R;case"M":E=P[1],R=P[2],W=P[1],M=P[2];break;case"c":P[0]="C",P[1]+=E,P[2]+=R,P[3]+=E,P[4]+=R,P[5]+=E,P[6]+=R;case"C":J=P[3],ie=P[4],E=P[5],R=P[6];break;case"s":P[0]="S",P[1]+=E,P[2]+=R,P[3]+=E,P[4]+=R;case"S":Y==="C"?(J=2*E-J,ie=2*R-ie):(J=E,ie=R),E=P[3],R=P[4],P[0]="C",P[5]=P[3],P[6]=P[4],P[3]=P[1],P[4]=P[2],P[1]=J,P[2]=ie,J=P[3],ie=P[4];break;case"q":P[0]="Q",P[1]+=E,P[2]+=R,P[3]+=E,P[4]+=R;case"Q":J=P[1],ie=P[2],E=P[3],R=P[4];break;case"t":P[0]="T",P[1]+=E,P[2]+=R;case"T":Y==="Q"?(J=2*E-J,ie=2*R-ie):(J=E,ie=R),P[0]="Q",E=P[1],R=P[2],P[1]=J,P[2]=ie,P[3]=E,P[4]=R;break;case"a":P[0]="A",P[6]+=E,P[7]+=R;case"A":$=!0,X=X.concat(d(E,R,P)),E=P[6],R=P[7];break;case"z":case"Z":E=W,R=M;break}$||X.push(P),Y=P[0]}return X}function p(k,E,R,D){return Math.sqrt((R-k)*(R-k)+(D-E)*(D-E))}function g(k){return k*k*k}function y(k){return 3*k*k*(1-k)}function x(k){return 3*k*(1-k)*(1-k)}function w(k){return(1-k)*(1-k)*(1-k)}function b(k,E,R,D,W,M,P,z){return function($){var X=g($),Y=y($),J=x($),ie=w($);return{x:P*X+W*Y+R*J+k*ie,y:z*X+M*Y+D*J+E*ie}}}function S(k,E,R,D,W,M,P,z){return function($){var X=1-$,Y=3*X*X*(R-k)+6*X*$*(W-R)+3*$*$*(P-W),J=3*X*X*(D-E)+6*X*$*(M-D)+3*$*$*(z-M);return Math.atan2(J,Y)}}function _(k){return k*k}function C(k){return 2*k*(1-k)}function T(k){return(1-k)*(1-k)}function O(k,E,R,D,W,M){return function(P){var z=_(P),$=C(P),X=T(P);return{x:W*z+R*$+k*X,y:M*z+D*$+E*X}}}function L(k,E,R,D,W,M){return function(P){var z=1-P,$=2*z*(R-k)+2*P*(W-R),X=2*z*(D-E)+2*P*(M-D);return Math.atan2(X,$)}}function j(k,E,R){var D={x:E,y:R},W,M=0,P;for(P=1;P<=100;P+=1)W=k(P/100),M+=p(D.x,D.y,W.x,W.y),D=W;return M}function H(k,E){for(var R=0,D=0,W=k.iterator,M={x:k.x,y:k.y},P,z,$=.01,X=k.angleFinder,Y;D<E&&$>1e-4;)P=W(R),Y=R,z=p(M.x,M.y,P.x,P.y),z+D>E?(R-=$,$/=2):(M=P,R+=$,D+=z);return P.angle=X(Y),P}function F(k){for(var E=0,R=k.length,D,W=0,M=0,P=0,z=0,$=[],X,Y,J,ie=0;ie<R;ie++){switch(D=k[ie],Y={x:W,y:M,command:D[0]},D[0]){case"M":Y.length=0,P=W=D[1],z=M=D[2];break;case"L":Y.length=p(W,M,D[1],D[2]),W=D[1],M=D[2];break;case"C":X=b(W,M,D[1],D[2],D[3],D[4],D[5],D[6]),J=S(W,M,D[1],D[2],D[3],D[4],D[5],D[6]),Y.iterator=X,Y.angleFinder=J,Y.length=j(X,W,M),W=D[5],M=D[6];break;case"Q":X=O(W,M,D[1],D[2],D[3],D[4]),J=L(W,M,D[1],D[2],D[3],D[4]),Y.iterator=X,Y.angleFinder=J,Y.length=j(X,W,M),W=D[3],M=D[4];break;case"Z":case"z":Y.destX=P,Y.destY=z,Y.length=p(W,M,P,z),W=P,M=z;break}E+=Y.length,$.push(Y)}return $.push({length:E,x:W,y:M}),$}function V(k,E,R){R||(R=F(k));for(var D=0;E-R[D].length>0&&D<R.length-2;)E-=R[D].length,D++;var W=R[D],M=E/W.length,P=W.command,z=k[D],$;switch(P){case"M":return{x:W.x,y:W.y,angle:0};case"Z":case"z":return $=new e.Point(W.x,W.y).lerp(new e.Point(W.destX,W.destY),M),$.angle=Math.atan2(W.destY-W.y,W.destX-W.x),$;case"L":return $=new e.Point(W.x,W.y).lerp(new e.Point(z[1],z[2]),M),$.angle=Math.atan2(z[2]-W.y,z[1]-W.x),$;case"C":return H(W,E);case"Q":return H(W,E)}}function I(k){var E=[],R=[],D,W,M=e.rePathCommand,P="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",z="("+P+")"+e.commaWsp,$="([01])"+e.commaWsp+"?",X=z+"?"+z+"?"+z+$+$+z+"?("+P+")",Y=new RegExp(X,"g"),J,ie,re;if(!k||!k.match)return E;re=k.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var q=0,G,Q=re.length;q<Q;q++){D=re[q],ie=D.slice(1).trim(),R.length=0;var te=D.charAt(0);if(G=[te],te.toLowerCase()==="a")for(var K;K=Y.exec(ie);)for(var Z=1;Z<K.length;Z++)R.push(K[Z]);else for(;J=M.exec(ie);)R.push(J[0]);for(var Z=0,se=R.length;Z<se;Z++)W=parseFloat(R[Z]),isNaN(W)||G.push(W);var fe=s[te.toLowerCase()],le=h[te]||te;if(G.length-1>fe)for(var ne=1,ce=G.length;ne<ce;ne+=fe)E.push([te].concat(G.slice(ne,ne+fe))),te=le;else E.push(G)}return E}function A(k,E){var R=[],D,W=new e.Point(k[0].x,k[0].y),M=new e.Point(k[1].x,k[1].y),P=k.length,z=1,$=0,X=P>2;for(E=E||0,X&&(z=k[2].x<M.x?-1:k[2].x===M.x?0:1,$=k[2].y<M.y?-1:k[2].y===M.y?0:1),R.push(["M",W.x-z*E,W.y-$*E]),D=1;D<P;D++){if(!W.eq(M)){var Y=W.midPointFrom(M);R.push(["Q",W.x,W.y,Y.x,Y.y])}W=k[D],D+1<k.length&&(M=k[D+1])}return X&&(z=W.x>k[D-2].x?1:W.x===k[D-2].x?0:-1,$=W.y>k[D-2].y?1:W.y===k[D-2].y?0:-1),R.push(["L",W.x+z*E,W.y+$*E]),R}function U(k,E,R){return R&&(E=e.util.multiplyTransformMatrices(E,[1,0,0,1,-R.x,-R.y])),k.map(function(D){for(var W=D.slice(0),M={},P=1;P<D.length-1;P+=2)M.x=D[P],M.y=D[P+1],M=e.util.transformPoint(M,E),W[P]=M.x,W[P+1]=M.y;return W})}e.util.joinPath=function(k){return k.map(function(E){return E.join(" ")}).join(" ")},e.util.parsePath=I,e.util.makePathSimpler=v,e.util.getSmoothPathFromPoints=A,e.util.getPathSegmentsInfo=F,e.util.getBoundsOfCurve=c,e.util.getPointOnPath=V,e.util.transformPath=U}(),function(){var l=Array.prototype.slice;function s(c,d){for(var v=l.call(arguments,2),p=[],g=0,y=c.length;g<y;g++)p[g]=v.length?c[g][d].apply(c[g],v):c[g][d].call(c[g]);return p}function h(c,d){return o(c,d,function(v,p){return v>=p})}function f(c,d){return o(c,d,function(v,p){return v<p})}function a(c,d){for(var v=c.length;v--;)c[v]=d;return c}function o(c,d,v){if(!(!c||c.length===0)){var p=c.length-1,g=d?c[p][d]:c[p];if(d)for(;p--;)v(c[p][d],g)&&(g=c[p][d]);else for(;p--;)v(c[p],g)&&(g=c[p]);return g}}e.util.array={fill:a,invoke:s,min:f,max:h}}(),function(){function l(h,f,a){if(a)if(!e.isLikelyNode&&f instanceof Element)h=f;else if(f instanceof Array){h=[];for(var o=0,c=f.length;o<c;o++)h[o]=l({},f[o],a)}else if(f&&typeof f=="object")for(var d in f)d==="canvas"||d==="group"?h[d]=null:f.hasOwnProperty(d)&&(h[d]=l({},f[d],a));else h=f;else for(var d in f)h[d]=f[d];return h}function s(h,f){return l({},h,f)}e.util.object={extend:l,clone:s},e.util.object.extend(e.util,e.Observable)}(),function(){function l(o){return o.replace(/-+(.)?/g,function(c,d){return d?d.toUpperCase():""})}function s(o,c){return o.charAt(0).toUpperCase()+(c?o.slice(1):o.slice(1).toLowerCase())}function h(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function f(o){var c=0,d,v=[];for(c=0,d;c<o.length;c++)(d=a(o,c))!==!1&&v.push(d);return v}function a(o,c){var d=o.charCodeAt(c);if(isNaN(d))return"";if(d<55296||d>57343)return o.charAt(c);if(55296<=d&&d<=56319){if(o.length<=c+1)throw"High surrogate without following low surrogate";var v=o.charCodeAt(c+1);if(56320>v||v>57343)throw"High surrogate without following low surrogate";return o.charAt(c)+o.charAt(c+1)}if(c===0)throw"Low surrogate without preceding high surrogate";var p=o.charCodeAt(c-1);if(55296>p||p>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:l,capitalize:s,escapeXml:h,graphemeSplit:f}}(),function(){var l=Array.prototype.slice,s=function(){},h=function(){for(var d in{toString:1})if(d==="toString")return!1;return!0}(),f=function(d,v,p){for(var g in v)g in d.prototype&&typeof d.prototype[g]=="function"&&(v[g]+"").indexOf("callSuper")>-1?d.prototype[g]=function(y){return function(){var x=this.constructor.superclass;this.constructor.superclass=p;var w=v[y].apply(this,arguments);if(this.constructor.superclass=x,y!=="initialize")return w}}(g):d.prototype[g]=v[g],h&&(v.toString!==Object.prototype.toString&&(d.prototype.toString=v.toString),v.valueOf!==Object.prototype.valueOf&&(d.prototype.valueOf=v.valueOf))};function a(){}function o(d){for(var v=null,p=this;p.constructor.superclass;){var g=p.constructor.superclass.prototype[d];if(p[d]!==g){v=g;break}p=p.constructor.superclass.prototype}return v?arguments.length>1?v.apply(this,l.call(arguments,1)):v.call(this):console.log("tried to callSuper "+d+", method not found in prototype chain",this)}function c(){var d=null,v=l.call(arguments,0);typeof v[0]=="function"&&(d=v.shift());function p(){this.initialize.apply(this,arguments)}p.superclass=d,p.subclasses=[],d&&(a.prototype=d.prototype,p.prototype=new a,d.subclasses.push(p));for(var g=0,y=v.length;g<y;g++)f(p,v[g],d);return p.prototype.initialize||(p.prototype.initialize=s),p.prototype.constructor=p,p.prototype.callSuper=o,p}e.util.createClass=c}(),function(){var l=!!e.document.createElement("div").attachEvent,s=["touchstart","touchmove","touchend"];e.util.addListener=function(f,a,o,c){f&&f.addEventListener(a,o,l?!1:c)},e.util.removeListener=function(f,a,o,c){f&&f.removeEventListener(a,o,l?!1:c)};function h(f){var a=f.changedTouches;return a&&a[0]?a[0]:f}e.util.getPointer=function(f){var a=f.target,o=e.util.getScrollLeftTop(a),c=h(f);return{x:c.clientX+o.left,y:c.clientY+o.top}},e.util.isTouchEvent=function(f){return s.indexOf(f.type)>-1||f.pointerType==="touch"}}(),function(){function l(c,d){var v=c.style;if(!v)return c;if(typeof d=="string")return c.style.cssText+=";"+d,d.indexOf("opacity")>-1?o(c,d.match(/opacity:\s*(\d?\.?\d*)/)[1]):c;for(var p in d)if(p==="opacity")o(c,d[p]);else{var g=p==="float"||p==="cssFloat"?typeof v.styleFloat>"u"?"cssFloat":"styleFloat":p;v.setProperty(g,d[p])}return c}var s=e.document.createElement("div"),h=typeof s.style.opacity=="string",f=typeof s.style.filter=="string",a=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(c){return c};h?o=function(c,d){return c.style.opacity=d,c}:f&&(o=function(c,d){var v=c.style;return c.currentStyle&&!c.currentStyle.hasLayout&&(v.zoom=1),a.test(v.filter)?(d=d>=.9999?"":"alpha(opacity="+d*100+")",v.filter=v.filter.replace(a,d)):v.filter+=" alpha(opacity="+d*100+")",c}),e.util.setStyle=l}(),function(){var l=Array.prototype.slice;function s(w){return typeof w=="string"?e.document.getElementById(w):w}var h,f=function(w){return l.call(w,0)};try{h=f(e.document.childNodes)instanceof Array}catch{}h||(f=function(w){for(var b=new Array(w.length),S=w.length;S--;)b[S]=w[S];return b});function a(w,b){var S=e.document.createElement(w);for(var _ in b)_==="class"?S.className=b[_]:_==="for"?S.htmlFor=b[_]:S.setAttribute(_,b[_]);return S}function o(w,b){w&&(" "+w.className+" ").indexOf(" "+b+" ")===-1&&(w.className+=(w.className?" ":"")+b)}function c(w,b,S){return typeof b=="string"&&(b=a(b,S)),w.parentNode&&w.parentNode.replaceChild(b,w),b.appendChild(w),b}function d(w){for(var b=0,S=0,_=e.document.documentElement,C=e.document.body||{scrollLeft:0,scrollTop:0};w&&(w.parentNode||w.host)&&(w=w.parentNode||w.host,w===e.document?(b=C.scrollLeft||_.scrollLeft||0,S=C.scrollTop||_.scrollTop||0):(b+=w.scrollLeft||0,S+=w.scrollTop||0),!(w.nodeType===1&&w.style.position==="fixed")););return{left:b,top:S}}function v(w){var b,S=w&&w.ownerDocument,_={left:0,top:0},C={left:0,top:0},T,O={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return C;for(var L in O)C[O[L]]+=parseInt(p(w,L),10)||0;return b=S.documentElement,typeof w.getBoundingClientRect<"u"&&(_=w.getBoundingClientRect()),T=d(w),{left:_.left+T.left-(b.clientLeft||0)+C.left,top:_.top+T.top-(b.clientTop||0)+C.top}}var p;e.document.defaultView&&e.document.defaultView.getComputedStyle?p=function(w,b){var S=e.document.defaultView.getComputedStyle(w,null);return S?S[b]:void 0}:p=function(w,b){var S=w.style[b];return!S&&w.currentStyle&&(S=w.currentStyle[b]),S},function(){var w=e.document.documentElement.style,b="userSelect"in w?"userSelect":"MozUserSelect"in w?"MozUserSelect":"WebkitUserSelect"in w?"WebkitUserSelect":"KhtmlUserSelect"in w?"KhtmlUserSelect":"";function S(C){return typeof C.onselectstart<"u"&&(C.onselectstart=e.util.falseFunction),b?C.style[b]="none":typeof C.unselectable=="string"&&(C.unselectable="on"),C}function _(C){return typeof C.onselectstart<"u"&&(C.onselectstart=null),b?C.style[b]="":typeof C.unselectable=="string"&&(C.unselectable=""),C}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=_}();function g(w){var b=e.jsdomImplForWrapper(w);return b._canvas||b._image}function y(w){if(e.isLikelyNode){var b=e.jsdomImplForWrapper(w);b&&(b._image=null,b._canvas=null,b._currentSrc=null,b._attributes=null,b._classList=null)}}function x(w,b){w.imageSmoothingEnabled=w.imageSmoothingEnabled||w.webkitImageSmoothingEnabled||w.mozImageSmoothingEnabled||w.msImageSmoothingEnabled||w.oImageSmoothingEnabled,w.imageSmoothingEnabled=b}e.util.setImageSmoothing=x,e.util.getById=s,e.util.toArray=f,e.util.addClass=o,e.util.makeElement=a,e.util.wrapElement=c,e.util.getScrollLeftTop=d,e.util.getElementOffset=v,e.util.getNodeCanvas=g,e.util.cleanUpJsdomNode=y}(),function(){function l(f,a){return f+(/\?/.test(f)?"&":"?")+a}function s(){}function h(f,a){a||(a={});var o=a.method?a.method.toUpperCase():"GET",c=a.onComplete||function(){},d=new e.window.XMLHttpRequest,v=a.body||a.parameters;return d.onreadystatechange=function(){d.readyState===4&&(c(d),d.onreadystatechange=s)},o==="GET"&&(v=null,typeof a.parameters=="string"&&(f=l(f,a.parameters))),d.open(o,f,!0),(o==="POST"||o==="PUT")&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(v),d}e.util.request=h}(),e.log=console.log,e.warn=console.warn,function(){var l=e.util.object.extend,s=e.util.object.clone,h=[];e.util.object.extend(h,{cancelAll:function(){var g=this.splice(0);return g.forEach(function(y){y.cancel()}),g},cancelByCanvas:function(g){if(!g)return[];var y=this.filter(function(x){return typeof x.target=="object"&&x.target.canvas===g});return y.forEach(function(x){x.cancel()}),y},cancelByTarget:function(g){var y=this.findAnimationsByTarget(g);return y.forEach(function(x){x.cancel()}),y},findAnimationIndex:function(g){return this.indexOf(this.findAnimation(g))},findAnimation:function(g){return this.find(function(y){return y.cancel===g})},findAnimationsByTarget:function(g){return g?this.filter(function(y){return y.target===g}):[]}});function f(){return!1}function a(g,y,x,w){return-x*Math.cos(g/w*(Math.PI/2))+x+y}function o(g){g||(g={});var y=!1,x,w=function(){var b=e.runningAnimations.indexOf(x);return b>-1&&e.runningAnimations.splice(b,1)[0]};return x=l(s(g),{cancel:function(){return y=!0,w()},currentValue:"startValue"in g?g.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(x),v(function(b){var S=b||+new Date,_=g.duration||500,C=S+_,T,O=g.onChange||f,L=g.abort||f,j=g.onComplete||f,H=g.easing||a,F="startValue"in g?g.startValue.length>0:!1,V="startValue"in g?g.startValue:0,I="endValue"in g?g.endValue:100,A=g.byValue||(F?V.map(function(U,k){return I[k]-V[k]}):I-V);g.onStart&&g.onStart(),function U(k){T=k||+new Date;var E=T>C?_:T-S,R=E/_,D=F?V.map(function(M,P){return H(E,V[P],A[P],_)}):H(E,V,A,_),W=Math.abs(F?(D[0]-V[0])/A[0]:(D-V)/A);if(x.currentValue=F?D.slice():D,x.completionRate=W,x.durationRate=R,!y){if(L(D,W,R)){w();return}if(T>C){x.currentValue=F?I.slice():I,x.completionRate=1,x.durationRate=1,O(F?I.slice():I,1,1),j(I,1,1),w();return}else O(D,W,R),v(U)}}(S)}),x.cancel}var c=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(g){return e.window.setTimeout(g,1e3/60)},d=e.window.cancelAnimationFrame||e.window.clearTimeout;function v(){return c.apply(e.window,arguments)}function p(){return d.apply(e.window,arguments)}e.util.animate=o,e.util.requestAnimFrame=v,e.util.cancelAnimFrame=p,e.runningAnimations=h}(),function(){function l(h,f,a){var o="rgba("+parseInt(h[0]+a*(f[0]-h[0]),10)+","+parseInt(h[1]+a*(f[1]-h[1]),10)+","+parseInt(h[2]+a*(f[2]-h[2]),10);return o+=","+(h&&f?parseFloat(h[3]+a*(f[3]-h[3])):1),o+=")",o}function s(h,f,a,o){var c=new e.Color(h).getSource(),d=new e.Color(f).getSource(),v=o.onComplete,p=o.onChange;return o=o||{},e.util.animate(e.util.object.extend(o,{duration:a||500,startValue:c,endValue:d,byValue:d,easing:function(g,y,x,w){var b=o.colorEasing?o.colorEasing(g,w):1-Math.cos(g/w*(Math.PI/2));return l(y,x,b)},onComplete:function(g,y,x){if(v)return v(l(d,d,0),y,x)},onChange:function(g,y,x){if(p){if(Array.isArray(g))return p(l(g,g,0),y,x);p(g,y,x)}}}))}e.util.animateColor=s}(),function(){function l(k,E,R,D){return k<Math.abs(E)?(k=E,D=R/4):E===0&&k===0?D=R/(2*Math.PI)*Math.asin(1):D=R/(2*Math.PI)*Math.asin(E/k),{a:k,c:E,p:R,s:D}}function s(k,E,R){return k.a*Math.pow(2,10*(E-=1))*Math.sin((E*R-k.s)*(2*Math.PI)/k.p)}function h(k,E,R,D){return R*((k=k/D-1)*k*k+1)+E}function f(k,E,R,D){return k/=D/2,k<1?R/2*k*k*k+E:R/2*((k-=2)*k*k+2)+E}function a(k,E,R,D){return R*(k/=D)*k*k*k+E}function o(k,E,R,D){return-R*((k=k/D-1)*k*k*k-1)+E}function c(k,E,R,D){return k/=D/2,k<1?R/2*k*k*k*k+E:-R/2*((k-=2)*k*k*k-2)+E}function d(k,E,R,D){return R*(k/=D)*k*k*k*k+E}function v(k,E,R,D){return R*((k=k/D-1)*k*k*k*k+1)+E}function p(k,E,R,D){return k/=D/2,k<1?R/2*k*k*k*k*k+E:R/2*((k-=2)*k*k*k*k+2)+E}function g(k,E,R,D){return-R*Math.cos(k/D*(Math.PI/2))+R+E}function y(k,E,R,D){return R*Math.sin(k/D*(Math.PI/2))+E}function x(k,E,R,D){return-R/2*(Math.cos(Math.PI*k/D)-1)+E}function w(k,E,R,D){return k===0?E:R*Math.pow(2,10*(k/D-1))+E}function b(k,E,R,D){return k===D?E+R:R*(-Math.pow(2,-10*k/D)+1)+E}function S(k,E,R,D){return k===0?E:k===D?E+R:(k/=D/2,k<1?R/2*Math.pow(2,10*(k-1))+E:R/2*(-Math.pow(2,-10*--k)+2)+E)}function _(k,E,R,D){return-R*(Math.sqrt(1-(k/=D)*k)-1)+E}function C(k,E,R,D){return R*Math.sqrt(1-(k=k/D-1)*k)+E}function T(k,E,R,D){return k/=D/2,k<1?-R/2*(Math.sqrt(1-k*k)-1)+E:R/2*(Math.sqrt(1-(k-=2)*k)+1)+E}function O(k,E,R,D){var W=1.70158,M=0,P=R;if(k===0)return E;if(k/=D,k===1)return E+R;M||(M=D*.3);var z=l(P,R,M,W);return-s(z,k,D)+E}function L(k,E,R,D){var W=1.70158,M=0,P=R;if(k===0)return E;if(k/=D,k===1)return E+R;M||(M=D*.3);var z=l(P,R,M,W);return z.a*Math.pow(2,-10*k)*Math.sin((k*D-z.s)*(2*Math.PI)/z.p)+z.c+E}function j(k,E,R,D){var W=1.70158,M=0,P=R;if(k===0)return E;if(k/=D/2,k===2)return E+R;M||(M=D*(.3*1.5));var z=l(P,R,M,W);return k<1?-.5*s(z,k,D)+E:z.a*Math.pow(2,-10*(k-=1))*Math.sin((k*D-z.s)*(2*Math.PI)/z.p)*.5+z.c+E}function H(k,E,R,D,W){return W===void 0&&(W=1.70158),R*(k/=D)*k*((W+1)*k-W)+E}function F(k,E,R,D,W){return W===void 0&&(W=1.70158),R*((k=k/D-1)*k*((W+1)*k+W)+1)+E}function V(k,E,R,D,W){return W===void 0&&(W=1.70158),k/=D/2,k<1?R/2*(k*k*(((W*=1.525)+1)*k-W))+E:R/2*((k-=2)*k*(((W*=1.525)+1)*k+W)+2)+E}function I(k,E,R,D){return R-A(D-k,0,R,D)+E}function A(k,E,R,D){return(k/=D)<1/2.75?R*(7.5625*k*k)+E:k<2/2.75?R*(7.5625*(k-=1.5/2.75)*k+.75)+E:k<2.5/2.75?R*(7.5625*(k-=2.25/2.75)*k+.9375)+E:R*(7.5625*(k-=2.625/2.75)*k+.984375)+E}function U(k,E,R,D){return k<D/2?I(k*2,0,R,D)*.5+E:A(k*2-D,0,R,D)*.5+R*.5+E}e.util.ease={easeInQuad:function(k,E,R,D){return R*(k/=D)*k+E},easeOutQuad:function(k,E,R,D){return-R*(k/=D)*(k-2)+E},easeInOutQuad:function(k,E,R,D){return k/=D/2,k<1?R/2*k*k+E:-R/2*(--k*(k-2)-1)+E},easeInCubic:function(k,E,R,D){return R*(k/=D)*k*k+E},easeOutCubic:h,easeInOutCubic:f,easeInQuart:a,easeOutQuart:o,easeInOutQuart:c,easeInQuint:d,easeOutQuint:v,easeInOutQuint:p,easeInSine:g,easeOutSine:y,easeInOutSine:x,easeInExpo:w,easeOutExpo:b,easeInOutExpo:S,easeInCirc:_,easeOutCirc:C,easeInOutCirc:T,easeInElastic:O,easeOutElastic:L,easeInOutElastic:j,easeInBack:H,easeOutBack:F,easeInOutBack:V,easeInBounce:I,easeOutBounce:A,easeInOutBounce:U}}(),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend,f=s.util.object.clone,a=s.util.toFixed,o=s.util.parseUnit,c=s.util.multiplyTransformMatrices,d=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],v=["symbol","image","marker","pattern","view","svg"],p=["pattern","defs","symbol","metadata","clipPath","mask","desc"],g=["symbol","g","a","svg","clipPath","defs"],y={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},x={stroke:"strokeOpacity",fill:"fillOpacity"},w="font-size",b="clip-path";s.svgValidTagNamesRegEx=C(d),s.svgViewBoxElementsRegEx=C(v),s.svgInvalidAncestorsRegEx=C(p),s.svgValidParentsRegEx=C(g),s.cssRules={},s.gradientDefs={},s.clipPaths={};function S(M){return M in y?y[M]:M}function _(M,P,z,$){var X=Array.isArray(P),Y;if((M==="fill"||M==="stroke")&&P==="none")P="";else{if(M==="strokeUniform")return P==="non-scaling-stroke";if(M==="strokeDashArray")P==="none"?P=null:P=P.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(M==="transformMatrix")z&&z.transformMatrix?P=c(z.transformMatrix,s.parseTransformAttribute(P)):P=s.parseTransformAttribute(P);else if(M==="visible")P=P!=="none"&&P!=="hidden",z&&z.visible===!1&&(P=!1);else if(M==="opacity")P=parseFloat(P),z&&typeof z.opacity<"u"&&(P*=z.opacity);else if(M==="textAnchor")P=P==="start"?"left":P==="end"?"right":"center";else if(M==="charSpacing")Y=o(P,$)/$*1e3;else if(M==="paintFirst"){var J=P.indexOf("fill"),ie=P.indexOf("stroke"),P="fill";(J>-1&&ie>-1&&ie<J||J===-1&&ie>-1)&&(P="stroke")}else{if(M==="href"||M==="xlink:href"||M==="font")return P;if(M==="imageSmoothing")return P==="optimizeQuality";Y=X?P.map(o):o(P,$)}}return!X&&isNaN(Y)?P:Y}function C(M){return new RegExp("^("+M.join("|")+")\\b","i")}function T(M){for(var P in x)if(!(typeof M[x[P]]>"u"||M[P]==="")){if(typeof M[P]>"u"){if(!s.Object.prototype[P])continue;M[P]=s.Object.prototype[P]}if(M[P].indexOf("url(")!==0){var z=new s.Color(M[P]);M[P]=z.setAlpha(a(z.getAlpha()*M[x[P]],2)).toRgba()}}return M}function O(M,P){var z,$=[],X,Y,J;for(Y=0,J=P.length;Y<J;Y++)z=P[Y],X=M.getElementsByTagName(z),$=$.concat(Array.prototype.slice.call(X));return $}s.parseTransformAttribute=function(){function M(ne,ce){var ee=s.util.cos(ce[0]),ae=s.util.sin(ce[0]),he=0,de=0;ce.length===3&&(he=ce[1],de=ce[2]),ne[0]=ee,ne[1]=ae,ne[2]=-ae,ne[3]=ee,ne[4]=he-(ee*he-ae*de),ne[5]=de-(ae*he+ee*de)}function P(ne,ce){var ee=ce[0],ae=ce.length===2?ce[1]:ce[0];ne[0]=ee,ne[3]=ae}function z(ne,ce,ee){ne[ee]=Math.tan(s.util.degreesToRadians(ce[0]))}function $(ne,ce){ne[4]=ce[0],ce.length===2&&(ne[5]=ce[1])}var X=s.iMatrix,Y=s.reNum,J=s.commaWsp,ie="(?:(skewX)\\s*\\(\\s*("+Y+")\\s*\\))",re="(?:(skewY)\\s*\\(\\s*("+Y+")\\s*\\))",q="(?:(rotate)\\s*\\(\\s*("+Y+")(?:"+J+"("+Y+")"+J+"("+Y+"))?\\s*\\))",G="(?:(scale)\\s*\\(\\s*("+Y+")(?:"+J+"("+Y+"))?\\s*\\))",Q="(?:(translate)\\s*\\(\\s*("+Y+")(?:"+J+"("+Y+"))?\\s*\\))",te="(?:(matrix)\\s*\\(\\s*("+Y+")"+J+"("+Y+")"+J+"("+Y+")"+J+"("+Y+")"+J+"("+Y+")"+J+"("+Y+")\\s*\\))",K="(?:"+te+"|"+Q+"|"+G+"|"+q+"|"+ie+"|"+re+")",Z="(?:"+K+"(?:"+J+"*"+K+")*)",se="^\\s*(?:"+Z+"?)\\s*$",fe=new RegExp(se),le=new RegExp(K,"g");return function(ne){var ce=X.concat(),ee=[];if(!ne||ne&&!fe.test(ne))return ce;ne.replace(le,function(he){var de=new RegExp(K).exec(he).filter(function(Oe){return!!Oe}),xe=de[1],_e=de.slice(2).map(parseFloat);switch(xe){case"translate":$(ce,_e);break;case"rotate":_e[0]=s.util.degreesToRadians(_e[0]),M(ce,_e);break;case"scale":P(ce,_e);break;case"skewX":z(ce,_e,2);break;case"skewY":z(ce,_e,1);break;case"matrix":ce=_e;break}ee.push(ce.concat()),ce=X.concat()});for(var ae=ee[0];ee.length>1;)ee.shift(),ae=s.util.multiplyTransformMatrices(ae,ee[0]);return ae}}();function L(M,P){var z,$;M.replace(/;\s*$/,"").split(";").forEach(function(X){var Y=X.split(":");z=Y[0].trim().toLowerCase(),$=Y[1].trim(),P[z]=$})}function j(M,P){var z,$;for(var X in M)typeof M[X]>"u"||(z=X.toLowerCase(),$=M[X],P[z]=$)}function H(M,P){var z={};for(var $ in s.cssRules[P])if(F(M,$.split(" ")))for(var X in s.cssRules[P][$])z[X]=s.cssRules[P][$][X];return z}function F(M,P){var z,$=!0;return z=I(M,P.pop()),z&&P.length&&($=V(M,P)),z&&$&&P.length===0}function V(M,P){for(var z,$=!0;M.parentNode&&M.parentNode.nodeType===1&&P.length;)$&&(z=P.pop()),M=M.parentNode,$=I(M,z);return P.length===0}function I(M,P){var z=M.nodeName,$=M.getAttribute("class"),X=M.getAttribute("id"),Y,J;if(Y=new RegExp("^"+z,"i"),P=P.replace(Y,""),X&&P.length&&(Y=new RegExp("#"+X+"(?![a-zA-Z\\-]+)","i"),P=P.replace(Y,"")),$&&P.length)for($=$.split(" "),J=$.length;J--;)Y=new RegExp("\\."+$[J]+"(?![a-zA-Z\\-]+)","i"),P=P.replace(Y,"");return P.length===0}function A(M,P){var z;if(M.getElementById&&(z=M.getElementById(P)),z)return z;var $,X,Y,J=M.getElementsByTagName("*");for(X=0,Y=J.length;X<Y;X++)if($=J[X],P===$.getAttribute("id"))return $}function U(M){for(var P=O(M,["use","svg:use"]),z=0;P.length&&z<P.length;){var $=P[z],X=$.getAttribute("xlink:href")||$.getAttribute("href");if(X===null)return;var Y=X.slice(1),J=$.getAttribute("x")||0,ie=$.getAttribute("y")||0,re=A(M,Y).cloneNode(!0),q=(re.getAttribute("transform")||"")+" translate("+J+", "+ie+")",G,Q=P.length,te,K,Z,se,fe=s.svgNS;if(E(re),/^svg$/i.test(re.nodeName)){var le=re.ownerDocument.createElementNS(fe,"g");for(K=0,Z=re.attributes,se=Z.length;K<se;K++)te=Z.item(K),le.setAttributeNS(fe,te.nodeName,te.nodeValue);for(;re.firstChild;)le.appendChild(re.firstChild);re=le}for(K=0,Z=$.attributes,se=Z.length;K<se;K++)te=Z.item(K),!(te.nodeName==="x"||te.nodeName==="y"||te.nodeName==="xlink:href"||te.nodeName==="href")&&(te.nodeName==="transform"?q=te.nodeValue+" "+q:re.setAttribute(te.nodeName,te.nodeValue));re.setAttribute("transform",q),re.setAttribute("instantiated_by_use","1"),re.removeAttribute("id"),G=$.parentNode,G.replaceChild(re,$),P.length===Q&&z++}}var k=new RegExp("^\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*,?\\s*("+s.reNum+"+)\\s*$");function E(M){if(!s.svgViewBoxElementsRegEx.test(M.nodeName))return{};var P=M.getAttribute("viewBox"),z=1,$=1,X=0,Y=0,J,ie,re,q,G=M.getAttribute("width"),Q=M.getAttribute("height"),te=M.getAttribute("x")||0,K=M.getAttribute("y")||0,Z=M.getAttribute("preserveAspectRatio")||"",se=!P||!(P=P.match(k)),fe=!G||!Q||G==="100%"||Q==="100%",le=se&&fe,ne={},ce="",ee=0,ae=0;if(ne.width=0,ne.height=0,ne.toBeParsed=le,se&&(te||K)&&M.parentNode&&M.parentNode.nodeName!=="#document"&&(ce=" translate("+o(te)+" "+o(K)+") ",re=(M.getAttribute("transform")||"")+ce,M.setAttribute("transform",re),M.removeAttribute("x"),M.removeAttribute("y")),le)return ne;if(se)return ne.width=o(G),ne.height=o(Q),ne;if(X=-parseFloat(P[1]),Y=-parseFloat(P[2]),J=parseFloat(P[3]),ie=parseFloat(P[4]),ne.minX=X,ne.minY=Y,ne.viewBoxWidth=J,ne.viewBoxHeight=ie,fe?(ne.width=J,ne.height=ie):(ne.width=o(G),ne.height=o(Q),z=ne.width/J,$=ne.height/ie),Z=s.util.parsePreserveAspectRatioAttribute(Z),Z.alignX!=="none"&&(Z.meetOrSlice==="meet"&&($=z=z>$?$:z),Z.meetOrSlice==="slice"&&($=z=z>$?z:$),ee=ne.width-J*z,ae=ne.height-ie*z,Z.alignX==="Mid"&&(ee/=2),Z.alignY==="Mid"&&(ae/=2),Z.alignX==="Min"&&(ee=0),Z.alignY==="Min"&&(ae=0)),z===1&&$===1&&X===0&&Y===0&&te===0&&K===0)return ne;if((te||K)&&M.parentNode.nodeName!=="#document"&&(ce=" translate("+o(te)+" "+o(K)+") "),re=ce+" matrix("+z+" 0 0 "+$+" "+(X*z+ee)+" "+(Y*$+ae)+") ",M.nodeName==="svg"){for(q=M.ownerDocument.createElementNS(s.svgNS,"g");M.firstChild;)q.appendChild(M.firstChild);M.appendChild(q)}else q=M,q.removeAttribute("x"),q.removeAttribute("y"),re=q.getAttribute("transform")+re;return q.setAttribute("transform",re),ne}function R(M,P){for(;M&&(M=M.parentNode);)if(M.nodeName&&P.test(M.nodeName.replace("svg:",""))&&!M.getAttribute("instantiated_by_use"))return!0;return!1}s.parseSVGDocument=function(M,P,z,$){if(M){U(M);var X=s.Object.__uid++,Y,J,ie=E(M),re=s.util.toArray(M.getElementsByTagName("*"));if(ie.crossOrigin=$&&$.crossOrigin,ie.svgUid=X,re.length===0&&s.isLikelyNode){re=M.selectNodes('//*[name(.)!="svg"]');var q=[];for(Y=0,J=re.length;Y<J;Y++)q[Y]=re[Y];re=q}var G=re.filter(function(te){return E(te),s.svgValidTagNamesRegEx.test(te.nodeName.replace("svg:",""))&&!R(te,s.svgInvalidAncestorsRegEx)});if(!G||G&&!G.length){P&&P([],{});return}var Q={};re.filter(function(te){return te.nodeName.replace("svg:","")==="clipPath"}).forEach(function(te){var K=te.getAttribute("id");Q[K]=s.util.toArray(te.getElementsByTagName("*")).filter(function(Z){return s.svgValidTagNamesRegEx.test(Z.nodeName.replace("svg:",""))})}),s.gradientDefs[X]=s.getGradientDefs(M),s.cssRules[X]=s.getCSSRules(M),s.clipPaths[X]=Q,s.parseElements(G,function(te,K){P&&(P(te,ie,K,re),delete s.gradientDefs[X],delete s.cssRules[X],delete s.clipPaths[X])},f(ie),z,$)}};function D(M,P){var z=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],$="xlink:href",X=P.getAttribute($).slice(1),Y=A(M,X);if(Y&&Y.getAttribute($)&&D(M,Y),z.forEach(function(ie){Y&&!P.hasAttribute(ie)&&Y.hasAttribute(ie)&&P.setAttribute(ie,Y.getAttribute(ie))}),!P.children.length)for(var J=Y.cloneNode(!0);J.firstChild;)P.appendChild(J.firstChild);P.removeAttribute($)}var W=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+s.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+s.reNum+"))?\\s+(.*)");h(s,{parseFontDeclaration:function(M,P){var z=M.match(W);if(z){var $=z[1],X=z[3],Y=z[4],J=z[5],ie=z[6];$&&(P.fontStyle=$),X&&(P.fontWeight=isNaN(parseFloat(X))?X:parseFloat(X)),Y&&(P.fontSize=o(Y)),ie&&(P.fontFamily=ie),J&&(P.lineHeight=J==="normal"?1:J)}},getGradientDefs:function(M){var P=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],z=O(M,P),$,X=0,Y={};for(X=z.length;X--;)$=z[X],$.getAttribute("xlink:href")&&D(M,$),Y[$.getAttribute("id")]=$;return Y},parseAttributes:function(M,P,z){if(M){var $,X={},Y,J;typeof z>"u"&&(z=M.getAttribute("svgUid")),M.parentNode&&s.svgValidParentsRegEx.test(M.parentNode.nodeName)&&(X=s.parseAttributes(M.parentNode,P,z));var ie=P.reduce(function(Z,se){return $=M.getAttribute(se),$&&(Z[se]=$),Z},{}),re=h(H(M,z),s.parseStyleAttribute(M));ie=h(ie,re),re[b]&&M.setAttribute(b,re[b]),Y=J=X.fontSize||s.Text.DEFAULT_SVG_FONT_SIZE,ie[w]&&(ie[w]=Y=o(ie[w],J));var q,G,Q={};for(var te in ie)q=S(te),G=_(q,ie[te],X,Y),Q[q]=G;Q&&Q.font&&s.parseFontDeclaration(Q.font,Q);var K=h(X,Q);return s.svgValidParentsRegEx.test(M.nodeName)?K:T(K)}},parseElements:function(M,P,z,$,X){new s.ElementsParser(M,P,z,$,X).parse()},parseStyleAttribute:function(M){var P={},z=M.getAttribute("style");return z&&(typeof z=="string"?L(z,P):j(z,P)),P},parsePointsAttribute:function(M){if(!M)return null;M=M.replace(/,/g," ").trim(),M=M.split(/\s+/);var P=[],z,$;for(z=0,$=M.length;z<$;z+=2)P.push({x:parseFloat(M[z]),y:parseFloat(M[z+1])});return P},getCSSRules:function(M){var P=M.getElementsByTagName("style"),z,$,X={},Y;for(z=0,$=P.length;z<$;z++){var J=P[z].textContent;J=J.replace(/\/\*[\s\S]*?\*\//g,""),J.trim()!==""&&(Y=J.split("}"),Y=Y.filter(function(ie){return ie.trim()}),Y.forEach(function(ie){var re=ie.split("{"),q={},G=re[1].trim(),Q=G.split(";").filter(function(se){return se.trim()});for(z=0,$=Q.length;z<$;z++){var te=Q[z].split(":"),K=te[0].trim(),Z=te[1].trim();q[K]=Z}ie=re[0].trim(),ie.split(",").forEach(function(se){se=se.replace(/^svg/i,"").trim(),se!==""&&(X[se]?s.util.object.extend(X[se],q):X[se]=s.util.object.clone(q))})}))}return X},loadSVGFromURL:function(M,P,z,$){M=M.replace(/^\n\s*/,"").trim(),new s.util.request(M,{method:"get",onComplete:X});function X(Y){var J=Y.responseXML;if(!J||!J.documentElement)return P&&P(null),!1;s.parseSVGDocument(J.documentElement,function(ie,re,q,G){P&&P(ie,re,q,G)},z,$)}},loadSVGFromString:function(M,P,z,$){var X=new s.window.DOMParser,Y=X.parseFromString(M.trim(),"text/xml");s.parseSVGDocument(Y.documentElement,function(J,ie,re,q){P(J,ie,re,q)},z,$)}})}(t),e.ElementsParser=function(l,s,h,f,a,o){this.elements=l,this.callback=s,this.options=h,this.reviver=f,this.svgUid=h&&h.svgUid||0,this.parsingOptions=a,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(l){l.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},l.createObjects=function(){var s=this;this.elements.forEach(function(h,f){h.setAttribute("svgUid",s.svgUid),s.createObject(h,f)})},l.findTag=function(s){return e[e.util.string.capitalize(s.tagName.replace("svg:",""))]},l.createObject=function(s,h){var f=this.findTag(s);if(f&&f.fromElement)try{f.fromElement(s,this.createCallback(h,s),this.options)}catch(a){e.log(a)}else this.checkIfDone()},l.createCallback=function(s,h){var f=this;return function(a){var o;f.resolveGradient(a,h,"fill"),f.resolveGradient(a,h,"stroke"),a instanceof e.Image&&a._originalElement&&(o=a.parsePreserveAspectRatioAttribute(h)),a._removeTransformMatrix(o),f.resolveClipPath(a,h),f.reviver&&f.reviver(h,a),f.instances[s]=a,f.checkIfDone()}},l.extractPropertyDefinition=function(s,h,f){var a=s[h],o=this.regexUrl;if(o.test(a)){o.lastIndex=0;var c=o.exec(a)[1];return o.lastIndex=0,e[f][this.svgUid][c]}},l.resolveGradient=function(s,h,f){var a=this.extractPropertyDefinition(s,f,"gradientDefs");if(a){var o=h.getAttribute(f+"-opacity"),c=e.Gradient.fromElement(a,s,o,this.options);s.set(f,c)}},l.createClipPathCallback=function(s,h){return function(f){f._removeTransformMatrix(),f.fillRule=f.clipRule,h.push(f)}},l.resolveClipPath=function(s,h){var f=this.extractPropertyDefinition(s,"clipPath","clipPaths"),a,o,c,d,v,p;if(f){d=[],c=e.util.invertTransform(s.calcTransformMatrix());for(var g=f[0].parentNode,y=h;y.parentNode&&y.getAttribute("clip-path")!==s.clipPath;)y=y.parentNode;y.parentNode.appendChild(g);for(var x=0;x<f.length;x++)a=f[x],o=this.findTag(a),o.fromElement(a,this.createClipPathCallback(s,d),this.options);d.length===1?f=d[0]:f=new e.Group(d),v=e.util.multiplyTransformMatrices(c,f.calcTransformMatrix()),f.clipPath&&this.resolveClipPath(f,y);var p=e.util.qrDecompose(v);f.flipX=!1,f.flipY=!1,f.set("scaleX",p.scaleX),f.set("scaleY",p.scaleY),f.angle=p.angle,f.skewX=p.skewX,f.skewY=0,f.setPositionByOrigin({x:p.translateX,y:p.translateY},"center","center"),s.clipPath=f}else delete s.clipPath},l.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(s){return s!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(l){var s=l.fabric||(l.fabric={});if(s.Point){s.warn("fabric.Point is already defined");return}s.Point=h;function h(f,a){this.x=f,this.y=a}h.prototype={type:"point",constructor:h,add:function(f){return new h(this.x+f.x,this.y+f.y)},addEquals:function(f){return this.x+=f.x,this.y+=f.y,this},scalarAdd:function(f){return new h(this.x+f,this.y+f)},scalarAddEquals:function(f){return this.x+=f,this.y+=f,this},subtract:function(f){return new h(this.x-f.x,this.y-f.y)},subtractEquals:function(f){return this.x-=f.x,this.y-=f.y,this},scalarSubtract:function(f){return new h(this.x-f,this.y-f)},scalarSubtractEquals:function(f){return this.x-=f,this.y-=f,this},multiply:function(f){return new h(this.x*f,this.y*f)},multiplyEquals:function(f){return this.x*=f,this.y*=f,this},divide:function(f){return new h(this.x/f,this.y/f)},divideEquals:function(f){return this.x/=f,this.y/=f,this},eq:function(f){return this.x===f.x&&this.y===f.y},lt:function(f){return this.x<f.x&&this.y<f.y},lte:function(f){return this.x<=f.x&&this.y<=f.y},gt:function(f){return this.x>f.x&&this.y>f.y},gte:function(f){return this.x>=f.x&&this.y>=f.y},lerp:function(f,a){return typeof a>"u"&&(a=.5),a=Math.max(Math.min(1,a),0),new h(this.x+(f.x-this.x)*a,this.y+(f.y-this.y)*a)},distanceFrom:function(f){var a=this.x-f.x,o=this.y-f.y;return Math.sqrt(a*a+o*o)},midPointFrom:function(f){return this.lerp(f)},min:function(f){return new h(Math.min(this.x,f.x),Math.min(this.y,f.y))},max:function(f){return new h(Math.max(this.x,f.x),Math.max(this.y,f.y))},toString:function(){return this.x+","+this.y},setXY:function(f,a){return this.x=f,this.y=a,this},setX:function(f){return this.x=f,this},setY:function(f){return this.y=f,this},setFromPoint:function(f){return this.x=f.x,this.y=f.y,this},swap:function(f){var a=this.x,o=this.y;this.x=f.x,this.y=f.y,f.x=a,f.y=o},clone:function(){return new h(this.x,this.y)}}}(t),function(l){var s=l.fabric||(l.fabric={});if(s.Intersection){s.warn("fabric.Intersection is already defined");return}function h(f){this.status=f,this.points=[]}s.Intersection=h,s.Intersection.prototype={constructor:h,appendPoint:function(f){return this.points.push(f),this},appendPoints:function(f){return this.points=this.points.concat(f),this}},s.Intersection.intersectLineLine=function(f,a,o,c){var d,v=(c.x-o.x)*(f.y-o.y)-(c.y-o.y)*(f.x-o.x),p=(a.x-f.x)*(f.y-o.y)-(a.y-f.y)*(f.x-o.x),g=(c.y-o.y)*(a.x-f.x)-(c.x-o.x)*(a.y-f.y);if(g!==0){var y=v/g,x=p/g;0<=y&&y<=1&&0<=x&&x<=1?(d=new h("Intersection"),d.appendPoint(new s.Point(f.x+y*(a.x-f.x),f.y+y*(a.y-f.y)))):d=new h}else v===0||p===0?d=new h("Coincident"):d=new h("Parallel");return d},s.Intersection.intersectLinePolygon=function(f,a,o){var c=new h,d=o.length,v,p,g,y;for(y=0;y<d;y++)v=o[y],p=o[(y+1)%d],g=h.intersectLineLine(f,a,v,p),c.appendPoints(g.points);return c.points.length>0&&(c.status="Intersection"),c},s.Intersection.intersectPolygonPolygon=function(f,a){var o=new h,c=f.length,d;for(d=0;d<c;d++){var v=f[d],p=f[(d+1)%c],g=h.intersectLinePolygon(v,p,a);o.appendPoints(g.points)}return o.points.length>0&&(o.status="Intersection"),o},s.Intersection.intersectPolygonRectangle=function(f,a,o){var c=a.min(o),d=a.max(o),v=new s.Point(d.x,c.y),p=new s.Point(c.x,d.y),g=h.intersectLinePolygon(c,v,f),y=h.intersectLinePolygon(v,d,f),x=h.intersectLinePolygon(d,p,f),w=h.intersectLinePolygon(p,c,f),b=new h;return b.appendPoints(g.points),b.appendPoints(y.points),b.appendPoints(x.points),b.appendPoints(w.points),b.points.length>0&&(b.status="Intersection"),b}}(t),function(l){var s=l.fabric||(l.fabric={});if(s.Color){s.warn("fabric.Color is already defined.");return}function h(a){a?this._tryParsingColor(a):this.setSource([0,0,0,1])}s.Color=h,s.Color.prototype={_tryParsingColor:function(a){var o;a in h.colorNameMap&&(a=h.colorNameMap[a]),a==="transparent"&&(o=[255,255,255,0]),o||(o=h.sourceFromHex(a)),o||(o=h.sourceFromRgb(a)),o||(o=h.sourceFromHsl(a)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(a,o,c){a/=255,o/=255,c/=255;var d,v,p,g=s.util.array.max([a,o,c]),y=s.util.array.min([a,o,c]);if(p=(g+y)/2,g===y)d=v=0;else{var x=g-y;switch(v=p>.5?x/(2-g-y):x/(g+y),g){case a:d=(o-c)/x+(o<c?6:0);break;case o:d=(c-a)/x+2;break;case c:d=(a-o)/x+4;break}d/=6}return[Math.round(d*360),Math.round(v*100),Math.round(p*100)]},getSource:function(){return this._source},setSource:function(a){this._source=a},toRgb:function(){var a=this.getSource();return"rgb("+a[0]+","+a[1]+","+a[2]+")"},toRgba:function(){var a=this.getSource();return"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")"},toHsl:function(){var a=this.getSource(),o=this._rgbToHsl(a[0],a[1],a[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var a=this.getSource(),o=this._rgbToHsl(a[0],a[1],a[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+a[3]+")"},toHex:function(){var a=this.getSource(),o,c,d;return o=a[0].toString(16),o=o.length===1?"0"+o:o,c=a[1].toString(16),c=c.length===1?"0"+c:c,d=a[2].toString(16),d=d.length===1?"0"+d:d,o.toUpperCase()+c.toUpperCase()+d.toUpperCase()},toHexa:function(){var a=this.getSource(),o;return o=Math.round(a[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(a){var o=this.getSource();return o[3]=a,this.setSource(o),this},toGrayscale:function(){var a=this.getSource(),o=parseInt((a[0]*.3+a[1]*.59+a[2]*.11).toFixed(0),10),c=a[3];return this.setSource([o,o,o,c]),this},toBlackWhite:function(a){var o=this.getSource(),c=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),d=o[3];return a=a||127,c=Number(c)<Number(a)?0:255,this.setSource([c,c,c,d]),this},overlayWith:function(a){a instanceof h||(a=new h(a));var o=[],c=this.getAlpha(),d=.5,v=this.getSource(),p=a.getSource(),g;for(g=0;g<3;g++)o.push(Math.round(v[g]*(1-d)+p[g]*d));return o[3]=c,this.setSource(o),this}},s.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,s.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,s.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,s.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function f(a,o,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(o-a)*6*c:c<1/2?o:c<2/3?a+(o-a)*(2/3-c)*6:a}s.Color.fromRgb=function(a){return h.fromSource(h.sourceFromRgb(a))},s.Color.sourceFromRgb=function(a){var o=a.match(h.reRGBa);if(o){var c=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),d=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),v=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(c,10),parseInt(d,10),parseInt(v,10),o[4]?parseFloat(o[4]):1]}},s.Color.fromRgba=h.fromRgb,s.Color.fromHsl=function(a){return h.fromSource(h.sourceFromHsl(a))},s.Color.sourceFromHsl=function(a){var o=a.match(h.reHSLa);if(o){var c=(parseFloat(o[1])%360+360)%360/360,d=parseFloat(o[2])/(/%$/.test(o[2])?100:1),v=parseFloat(o[3])/(/%$/.test(o[3])?100:1),p,g,y;if(d===0)p=g=y=v;else{var x=v<=.5?v*(d+1):v+d-v*d,w=v*2-x;p=f(w,x,c+1/3),g=f(w,x,c),y=f(w,x,c-1/3)}return[Math.round(p*255),Math.round(g*255),Math.round(y*255),o[4]?parseFloat(o[4]):1]}},s.Color.fromHsla=h.fromHsl,s.Color.fromHex=function(a){return h.fromSource(h.sourceFromHex(a))},s.Color.sourceFromHex=function(a){if(a.match(h.reHex)){var o=a.slice(a.indexOf("#")+1),c=o.length===3||o.length===4,d=o.length===8||o.length===4,v=c?o.charAt(0)+o.charAt(0):o.substring(0,2),p=c?o.charAt(1)+o.charAt(1):o.substring(2,4),g=c?o.charAt(2)+o.charAt(2):o.substring(4,6),y=d?c?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(v,16),parseInt(p,16),parseInt(g,16),parseFloat((parseInt(y,16)/255).toFixed(2))]}},s.Color.fromSource=function(a){var o=new h;return o.setSource(a),o}}(t),function(l){var s=l.fabric||(l.fabric={}),h=["e","se","s","sw","w","nw","n","ne","e"],f=["ns","nesw","ew","nwse"],a={},o="left",c="top",d="right",v="bottom",p="center",g={top:v,bottom:c,left:d,right:o,center:p},y=s.util.radiansToDegrees,x=Math.sign||function(q){return(q>0)-(q<0)||+q};function w(q,G){var Q=q.angle+y(Math.atan2(G.y,G.x))+360;return Math.round(Q%360/45)}function b(q,G){var Q=G.transform.target,te=Q.canvas,K=s.util.object.clone(G);K.target=Q,te&&te.fire("object:"+q,K),Q.fire(q,G)}function S(q,G){var Q=G.canvas,te=Q.uniScaleKey,K=q[te];return Q.uniformScaling&&!K||!Q.uniformScaling&&K}function _(q){return q.originX===p&&q.originY===p}function C(q,G,Q){var te=q.lockScalingX,K=q.lockScalingY;return!!(te&&K||!G&&(te||K)&&Q||te&&G==="x"||K&&G==="y")}function T(q,G,Q){var te="not-allowed",K=S(q,Q),Z="";if(G.x!==0&&G.y===0?Z="x":G.x===0&&G.y!==0&&(Z="y"),C(Q,Z,K))return te;var se=w(Q,G);return h[se]+"-resize"}function O(q,G,Q){var te="not-allowed";if(G.x!==0&&Q.lockSkewingY||G.y!==0&&Q.lockSkewingX)return te;var K=w(Q,G)%4;return f[K]+"-resize"}function L(q,G,Q){return q[Q.canvas.altActionKey]?a.skewCursorStyleHandler(q,G,Q):a.scaleCursorStyleHandler(q,G,Q)}function j(q,G,Q){var te=q[Q.canvas.altActionKey];if(G.x===0)return te?"skewX":"scaleY";if(G.y===0)return te?"skewY":"scaleX"}function H(q,G,Q){return Q.lockRotation?"not-allowed":G.cursorStyle}function F(q,G,Q,te){return{e:q,transform:G,pointer:{x:Q,y:te}}}function V(q){return function(G,Q,te,K){var Z=Q.target,se=Z.getCenterPoint(),fe=Z.translateToOriginPoint(se,Q.originX,Q.originY),le=q(G,Q,te,K);return Z.setPositionByOrigin(fe,Q.originX,Q.originY),le}}function I(q,G){return function(Q,te,K,Z){var se=G(Q,te,K,Z);return se&&b(q,F(Q,te,K,Z)),se}}function A(q,G,Q,te,K){var Z=q.target,se=Z.controls[q.corner],fe=Z.canvas.getZoom(),le=Z.padding/fe,ne=Z.toLocalPoint(new s.Point(te,K),G,Q);return ne.x>=le&&(ne.x-=le),ne.x<=-le&&(ne.x+=le),ne.y>=le&&(ne.y-=le),ne.y<=le&&(ne.y+=le),ne.x-=se.offsetX,ne.y-=se.offsetY,ne}function U(q){return q.flipX!==q.flipY}function k(q,G,Q,te,K){if(q[G]!==0){var Z=q._getTransformedDimensions()[te],se=K/Z*q[Q];q.set(Q,se)}}function E(q,G,Q,te){var K=G.target,Z=K._getTransformedDimensions(0,K.skewY),se=A(G,G.originX,G.originY,Q,te),fe=Math.abs(se.x*2)-Z.x,le=K.skewX,ne;fe<2?ne=0:(ne=y(Math.atan2(fe/K.scaleX,Z.y/K.scaleY)),G.originX===o&&G.originY===v&&(ne=-ne),G.originX===d&&G.originY===c&&(ne=-ne),U(K)&&(ne=-ne));var ce=le!==ne;if(ce){var ee=K._getTransformedDimensions().y;K.set("skewX",ne),k(K,"skewY","scaleY","y",ee)}return ce}function R(q,G,Q,te){var K=G.target,Z=K._getTransformedDimensions(K.skewX,0),se=A(G,G.originX,G.originY,Q,te),fe=Math.abs(se.y*2)-Z.y,le=K.skewY,ne;fe<2?ne=0:(ne=y(Math.atan2(fe/K.scaleY,Z.x/K.scaleX)),G.originX===o&&G.originY===v&&(ne=-ne),G.originX===d&&G.originY===c&&(ne=-ne),U(K)&&(ne=-ne));var ce=le!==ne;if(ce){var ee=K._getTransformedDimensions().x;K.set("skewY",ne),k(K,"skewX","scaleX","x",ee)}return ce}function D(q,G,Q,te){var K=G.target,Z=K.skewX,se,fe=G.originY;if(K.lockSkewingX)return!1;if(Z===0){var le=A(G,p,p,Q,te);le.x>0?se=o:se=d}else Z>0&&(se=fe===c?o:d),Z<0&&(se=fe===c?d:o),U(K)&&(se=se===o?d:o);G.originX=se;var ne=I("skewing",V(E));return ne(q,G,Q,te)}function W(q,G,Q,te){var K=G.target,Z=K.skewY,se,fe=G.originX;if(K.lockSkewingY)return!1;if(Z===0){var le=A(G,p,p,Q,te);le.y>0?se=c:se=v}else Z>0&&(se=fe===o?c:v),Z<0&&(se=fe===o?v:c),U(K)&&(se=se===c?v:c);G.originY=se;var ne=I("skewing",V(R));return ne(q,G,Q,te)}function M(q,G,Q,te){var K=G,Z=K.target,se=Z.translateToOriginPoint(Z.getCenterPoint(),K.originX,K.originY);if(Z.lockRotation)return!1;var fe=Math.atan2(K.ey-se.y,K.ex-se.x),le=Math.atan2(te-se.y,Q-se.x),ne=y(le-fe+K.theta),ce=!0;if(Z.snapAngle>0){var ee=Z.snapAngle,ae=Z.snapThreshold||ee,he=Math.ceil(ne/ee)*ee,de=Math.floor(ne/ee)*ee;Math.abs(ne-de)<ae?ne=de:Math.abs(ne-he)<ae&&(ne=he)}return ne<0&&(ne=360+ne),ne%=360,ce=Z.angle!==ne,Z.angle=ne,ce}function P(q,G,Q,te,K){K=K||{};var Z=G.target,se=Z.lockScalingX,fe=Z.lockScalingY,le=K.by,ne,ce,ee,ae,he=S(q,Z),de=C(Z,le,he),xe,_e,Oe=G.gestureScale;if(de)return!1;if(Oe)ce=G.scaleX*Oe,ee=G.scaleY*Oe;else{if(ne=A(G,G.originX,G.originY,Q,te),xe=le!=="y"?x(ne.x):1,_e=le!=="x"?x(ne.y):1,G.signX||(G.signX=xe),G.signY||(G.signY=_e),Z.lockScalingFlip&&(G.signX!==xe||G.signY!==_e))return!1;if(ae=Z._getTransformedDimensions(),he&&!le){var Ke=Math.abs(ne.x)+Math.abs(ne.y),Le=G.original,kt=Math.abs(ae.x*Le.scaleX/Z.scaleX)+Math.abs(ae.y*Le.scaleY/Z.scaleY),at=Ke/kt;ce=Le.scaleX*at,ee=Le.scaleY*at}else ce=Math.abs(ne.x*Z.scaleX/ae.x),ee=Math.abs(ne.y*Z.scaleY/ae.y);_(G)&&(ce*=2,ee*=2),G.signX!==xe&&le!=="y"&&(G.originX=g[G.originX],ce*=-1,G.signX=xe),G.signY!==_e&&le!=="x"&&(G.originY=g[G.originY],ee*=-1,G.signY=_e)}var Vt=Z.scaleX,Fn=Z.scaleY;return le?(le==="x"&&Z.set("scaleX",ce),le==="y"&&Z.set("scaleY",ee)):(!se&&Z.set("scaleX",ce),!fe&&Z.set("scaleY",ee)),Vt!==Z.scaleX||Fn!==Z.scaleY}function z(q,G,Q,te){return P(q,G,Q,te)}function $(q,G,Q,te){return P(q,G,Q,te,{by:"x"})}function X(q,G,Q,te){return P(q,G,Q,te,{by:"y"})}function Y(q,G,Q,te){return q[G.target.canvas.altActionKey]?a.skewHandlerX(q,G,Q,te):a.scalingY(q,G,Q,te)}function J(q,G,Q,te){return q[G.target.canvas.altActionKey]?a.skewHandlerY(q,G,Q,te):a.scalingX(q,G,Q,te)}function ie(q,G,Q,te){var K=G.target,Z=A(G,G.originX,G.originY,Q,te),se=K.strokeWidth/(K.strokeUniform?K.scaleX:1),fe=_(G)?2:1,le=K.width,ne=Math.abs(Z.x*fe/K.scaleX)-se;return K.set("width",Math.max(ne,0)),le!==ne}function re(q,G,Q,te){var K=G.target,Z=Q-G.offsetX,se=te-G.offsetY,fe=!K.get("lockMovementX")&&K.left!==Z,le=!K.get("lockMovementY")&&K.top!==se;return fe&&K.set("left",Z),le&&K.set("top",se),(fe||le)&&b("moving",F(q,G,Q,te)),fe||le}a.scaleCursorStyleHandler=T,a.skewCursorStyleHandler=O,a.scaleSkewCursorStyleHandler=L,a.rotationWithSnapping=I("rotating",V(M)),a.scalingEqually=I("scaling",V(z)),a.scalingX=I("scaling",V($)),a.scalingY=I("scaling",V(X)),a.scalingYOrSkewingX=Y,a.scalingXOrSkewingY=J,a.changeWidth=I("resizing",V(ie)),a.skewHandlerX=D,a.skewHandlerY=W,a.dragHandler=re,a.scaleOrSkewActionName=j,a.rotationStyleHandler=H,a.fireEvent=b,a.wrapWithFixedAnchor=V,a.wrapWithFireEvent=I,a.getLocalPoint=A,s.controlsUtils=a}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.degreesToRadians,f=s.controlsUtils;function a(c,d,v,p,g){p=p||{};var y=this.sizeX||p.cornerSize||g.cornerSize,x=this.sizeY||p.cornerSize||g.cornerSize,w=typeof p.transparentCorners<"u"?p.transparentCorners:g.transparentCorners,b=w?"stroke":"fill",S=!w&&(p.cornerStrokeColor||g.cornerStrokeColor),_=d,C=v,T;c.save(),c.fillStyle=p.cornerColor||g.cornerColor,c.strokeStyle=p.cornerStrokeColor||g.cornerStrokeColor,y>x?(T=y,c.scale(1,x/y),C=v*y/x):x>y?(T=x,c.scale(y/x,1),_=d*x/y):T=y,c.lineWidth=1,c.beginPath(),c.arc(_,C,T/2,0,2*Math.PI,!1),c[b](),S&&c.stroke(),c.restore()}function o(c,d,v,p,g){p=p||{};var y=this.sizeX||p.cornerSize||g.cornerSize,x=this.sizeY||p.cornerSize||g.cornerSize,w=typeof p.transparentCorners<"u"?p.transparentCorners:g.transparentCorners,b=w?"stroke":"fill",S=!w&&(p.cornerStrokeColor||g.cornerStrokeColor),_=y/2,C=x/2;c.save(),c.fillStyle=p.cornerColor||g.cornerColor,c.strokeStyle=p.cornerStrokeColor||g.cornerStrokeColor,c.lineWidth=1,c.translate(d,v),c.rotate(h(g.angle)),c[b+"Rect"](-_,-C,y,x),S&&c.strokeRect(-_,-C,y,x),c.restore()}f.renderCircleControl=a,f.renderSquareControl=o}(t),function(l){var s=l.fabric||(l.fabric={});function h(f){for(var a in f)this[a]=f[a]}s.Control=h,s.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(f,a){return a.cursorStyle},getActionName:function(f,a){return a.actionName},getVisibility:function(f,a){var o=f._controlsVisibility;return o&&typeof o[a]<"u"?o[a]:this.visible},setVisibility:function(f){this.visible=f},positionHandler:function(f,a){var o=s.util.transformPoint({x:this.x*f.x+this.offsetX,y:this.y*f.y+this.offsetY},a);return o},calcCornerCoords:function(f,a,o,c,d){var v,p,g,y,x=d?this.touchSizeX:this.sizeX,w=d?this.touchSizeY:this.sizeY;if(x&&w&&x!==w){var b=Math.atan2(w,x),S=Math.sqrt(x*x+w*w)/2,_=b-s.util.degreesToRadians(f),C=Math.PI/2-b-s.util.degreesToRadians(f);v=S*s.util.cos(_),p=S*s.util.sin(_),g=S*s.util.cos(C),y=S*s.util.sin(C)}else{var T=x&&w?x:a;S=T*.7071067812;var _=s.util.degreesToRadians(45-f);v=g=S*s.util.cos(_),p=y=S*s.util.sin(_)}return{tl:{x:o-y,y:c-g},tr:{x:o+v,y:c-p},bl:{x:o-v,y:c+p},br:{x:o+y,y:c+g}}},render:function(f,a,o,c,d){switch(c=c||{},c.cornerStyle||d.cornerStyle){case"circle":s.controlsUtils.renderCircleControl.call(this,f,a,o,c,d);break;default:s.controlsUtils.renderSquareControl.call(this,f,a,o,c,d)}}}}(t),function(){function l(o,c){var d=o.getAttribute("style"),v=o.getAttribute("offset")||0,p,g,y,x;if(v=parseFloat(v)/(/%$/.test(v)?100:1),v=v<0?0:v>1?1:v,d){var w=d.split(/\s*;\s*/);for(w[w.length-1]===""&&w.pop(),x=w.length;x--;){var b=w[x].split(/\s*:\s*/),S=b[0].trim(),_=b[1].trim();S==="stop-color"?p=_:S==="stop-opacity"&&(y=_)}}return p||(p=o.getAttribute("stop-color")||"rgb(0,0,0)"),y||(y=o.getAttribute("stop-opacity")),p=new e.Color(p),g=p.getAlpha(),y=isNaN(parseFloat(y))?1:parseFloat(y),y*=g*c,{offset:v,color:p.toRgb(),opacity:y}}function s(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function h(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var f=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var c,d=this;Object.keys(o).forEach(function(v){d[v]=o[v]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,c={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(c.r1=o.coords.r1||0,c.r2=o.coords.r2||0),this.coords=c,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var c in o){var d=new e.Color(o[c]);this.colorStops.push({offset:parseFloat(c),color:d.toRgb(),opacity:d.getAlpha()})}return this},toObject:function(o){var c={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,c,o),c},toSVG:function(o,g){var d=f(this.coords,!0),v,p,g=g||{},y,x,w=f(this.colorStops,!0),b=d.r1>d.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),_=-this.offsetX,C=-this.offsetY,T=!!g.additionalTransform,O=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(w.sort(function(V,I){return V.offset-I.offset}),O==="objectBoundingBox"?(_/=o.width,C/=o.height):(_+=o.width/2,C+=o.height/2),o.type==="path"&&this.gradientUnits!=="percentage"&&(_-=o.pathOffset.x,C-=o.pathOffset.y),S[4]-=_,S[5]-=C,x='id="SVGID_'+this.id+'" gradientUnits="'+O+'"',x+=' gradientTransform="'+(T?g.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?y=["<linearGradient ",x,' x1="',d.x1,'" y1="',d.y1,'" x2="',d.x2,'" y2="',d.y2,`">
`]:this.type==="radial"&&(y=["<radialGradient ",x,' cx="',b?d.x1:d.x2,'" cy="',b?d.y1:d.y2,'" r="',b?d.r1:d.r2,'" fx="',b?d.x2:d.x1,'" fy="',b?d.y2:d.y1,`">
`]),this.type==="radial"){if(b)for(w=w.concat(),w.reverse(),v=0,p=w.length;v<p;v++)w[v].offset=1-w[v].offset;var L=Math.min(d.r1,d.r2);if(L>0){var j=Math.max(d.r1,d.r2),H=L/j;for(v=0,p=w.length;v<p;v++)w[v].offset+=H*(1-w[v].offset)}}for(v=0,p=w.length;v<p;v++){var F=w[v];y.push("<stop ",'offset="',F.offset*100+"%",'" style="stop-color:',F.color,typeof F.opacity<"u"?";stop-opacity: "+F.opacity:";",`"/>
`)}return y.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),y.join("")},toLive:function(o){var c,d=e.util.object.clone(this.coords),v,p;if(this.type){for(this.type==="linear"?c=o.createLinearGradient(d.x1,d.y1,d.x2,d.y2):this.type==="radial"&&(c=o.createRadialGradient(d.x1,d.y1,d.r1,d.x2,d.y2,d.r2)),v=0,p=this.colorStops.length;v<p;v++){var g=this.colorStops[v].color,y=this.colorStops[v].opacity,x=this.colorStops[v].offset;typeof y<"u"&&(g=new e.Color(g).setAlpha(y).toRgba()),c.addColorStop(x,g)}return c}}}),e.util.object.extend(e.Gradient,{fromElement:function(o,c,d,v){var p=parseFloat(d)/(/%$/.test(d)?100:1);p=p<0?0:p>1?1:p,isNaN(p)&&(p=1);var g=o.getElementsByTagName("stop"),y,x=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",w=o.getAttribute("gradientTransform")||"",b=[],S,_,C=0,T=0,O;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(y="linear",S=s(o)):(y="radial",S=h(o)),_=g.length;_--;)b.push(l(g[_],p));O=e.parseTransformAttribute(w),a(c,S,v,x),x==="pixels"&&(C=-c.left,T=-c.top);var L=new e.Gradient({id:o.getAttribute("id"),type:y,coords:S,colorStops:b,gradientUnits:x,gradientTransform:O,offsetX:C,offsetY:T});return L}});function a(o,c,d,v){var p,g;Object.keys(c).forEach(function(y){p=c[y],p==="Infinity"?g=1:p==="-Infinity"?g=0:(g=parseFloat(c[y],10),typeof p=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(p)&&(g*=.01,v==="pixels"&&((y==="x1"||y==="x2"||y==="r2")&&(g*=d.viewBoxWidth||d.width),(y==="y1"||y==="y2")&&(g*=d.viewBoxHeight||d.height)))),c[y]=g})}}(),function(){var l=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(s,h){if(s||(s={}),this.id=e.Object.__uid++,this.setOptions(s),!s.source||s.source&&typeof s.source!="string"){h&&h(this);return}else{var f=this;this.source=e.util.createImage(),e.util.loadImage(s.source,function(a,o){f.source=a,h&&h(f,o)},null,this.crossOrigin)}},toObject:function(s){var h=e.Object.NUM_FRACTION_DIGITS,f,a;return typeof this.source.src=="string"?f=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(f=this.source.toDataURL()),a={type:"pattern",source:f,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:l(this.offsetX,h),offsetY:l(this.offsetY,h),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,a,s),a},toSVG:function(s){var h=typeof this.source=="function"?this.source():this.source,f=h.width/s.width,a=h.height/s.height,o=this.offsetX/s.width,c=this.offsetY/s.height,d="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(a=1,c&&(a+=Math.abs(c))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(f=1,o&&(f+=Math.abs(o))),h.src?d=h.src:h.toDataURL&&(d=h.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+c+'" width="'+f+'" height="'+a+`">
<image x="0" y="0" width="`+h.width+'" height="'+h.height+'" xlink:href="'+d+`"></image>
</pattern>
`},setOptions:function(s){for(var h in s)this[h]=s[h]},toLive:function(s){var h=this.source;return!h||typeof h.src<"u"&&(!h.complete||h.naturalWidth===0||h.naturalHeight===0)?"":s.createPattern(h,this.repeat)}})}(),function(l){var s=l.fabric||(l.fabric={}),h=s.util.toFixed;if(s.Shadow){s.warn("fabric.Shadow is already defined.");return}s.Shadow=s.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(f){typeof f=="string"&&(f=this._parseShadow(f));for(var a in f)this[a]=f[a];this.id=s.Object.__uid++},_parseShadow:function(f){var a=f.trim(),o=s.Shadow.reOffsetsAndBlur.exec(a)||[],c=a.replace(s.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:c.trim(),offsetX:parseFloat(o[1],10)||0,offsetY:parseFloat(o[2],10)||0,blur:parseFloat(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(f){var a=40,o=40,c=s.Object.NUM_FRACTION_DIGITS,d=s.util.rotateVector({x:this.offsetX,y:this.offsetY},s.util.degreesToRadians(-f.angle)),v=20,p=new s.Color(this.color);return f.width&&f.height&&(a=h((Math.abs(d.x)+this.blur)/f.width,c)*100+v,o=h((Math.abs(d.y)+this.blur)/f.height,c)*100+v),f.flipX&&(d.x*=-1),f.flipY&&(d.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+a+'%" width="'+(100+2*a)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+h(this.blur?this.blur/2:0,c)+`"></feGaussianBlur>
	<feOffset dx="`+h(d.x,c)+'" dy="'+h(d.y,c)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+p.toRgb()+'" flood-opacity="'+p.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var f={},a=s.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==a[o]&&(f[o]=this[o])},this),f}}),s.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var l=e.util.object.extend,s=e.util.getElementOffset,h=e.util.removeFromArray,f=e.util.toFixed,a=e.util.transformPoint,o=e.util.invertTransform,c=e.util.getNodeCanvas,d=e.util.createCanvasElement,v=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(p,g){g||(g={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(p,g)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(p,g){var y=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(p),this._initOptions(g),this.interactive||this._initRetinaScaling(),g.overlayImage&&this.setOverlayImage(g.overlayImage,y),g.backgroundImage&&this.setBackgroundImage(g.backgroundImage,y),g.backgroundColor&&this.setBackgroundColor(g.backgroundColor,y),g.overlayColor&&this.setOverlayColor(g.overlayColor,y),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var p=e.devicePixelRatio;this.__initRetinaScaling(p,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(p,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(p,g,y){g.setAttribute("width",this.width*p),g.setAttribute("height",this.height*p),y.scale(p,p)},calcOffset:function(){return this._offset=s(this.lowerCanvasEl),this},setOverlayImage:function(p,g,y){return this.__setBgOverlayImage("overlayImage",p,g,y)},setBackgroundImage:function(p,g,y){return this.__setBgOverlayImage("backgroundImage",p,g,y)},setOverlayColor:function(p,g){return this.__setBgOverlayColor("overlayColor",p,g)},setBackgroundColor:function(p,g){return this.__setBgOverlayColor("backgroundColor",p,g)},__setBgOverlayImage:function(p,g,y,x){return typeof g=="string"?e.util.loadImage(g,function(w,b){if(w){var S=new e.Image(w,x);this[p]=S,S.canvas=this}y&&y(w,b)},this,x&&x.crossOrigin):(x&&g.setOptions(x),this[p]=g,g&&(g.canvas=this),y&&y(g,!1)),this},__setBgOverlayColor:function(p,g,y){return this[p]=g,this._initGradient(g,p),this._initPattern(g,p,y),this},_createCanvasElement:function(){var p=d();if(!p||(p.style||(p.style={}),typeof p.getContext>"u"))throw v;return p},_initOptions:function(p){var g=this.lowerCanvasEl;this._setOptions(p),this.width=this.width||parseInt(g.width,10)||0,this.height=this.height||parseInt(g.height,10)||0,this.lowerCanvasEl.style&&(g.width=this.width,g.height=this.height,g.style.width=this.width+"px",g.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(p){p&&p.getContext?this.lowerCanvasEl=p:this.lowerCanvasEl=e.util.getById(p)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(p,g){return this.setDimensions({width:p},g)},setHeight:function(p,g){return this.setDimensions({height:p},g)},setDimensions:function(p,g){var y;g=g||{};for(var x in p)y=p[x],g.cssOnly||(this._setBackstoreDimension(x,p[x]),y+="px",this.hasLostContext=!0),g.backstoreOnly||this._setCssDimension(x,y);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),g.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(p,g){return this.lowerCanvasEl[p]=g,this.upperCanvasEl&&(this.upperCanvasEl[p]=g),this.cacheCanvasEl&&(this.cacheCanvasEl[p]=g),this[p]=g,this},_setCssDimension:function(p,g){return this.lowerCanvasEl.style[p]=g,this.upperCanvasEl&&(this.upperCanvasEl.style[p]=g),this.wrapperEl&&(this.wrapperEl.style[p]=g),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(p){var g=this._activeObject,y=this.backgroundImage,x=this.overlayImage,w,b,S;for(this.viewportTransform=p,b=0,S=this._objects.length;b<S;b++)w=this._objects[b],w.group||w.setCoords(!0);return g&&g.setCoords(),y&&y.setCoords(!0),x&&x.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(p,g){var y=p,x=this.viewportTransform.slice(0);p=a(p,o(this.viewportTransform)),x[0]=g,x[3]=g;var w=a(p,x);return x[4]+=y.x-w.x,x[5]+=y.y-w.y,this.setViewportTransform(x)},setZoom:function(p){return this.zoomToPoint(new e.Point(0,0),p),this},absolutePan:function(p){var g=this.viewportTransform.slice(0);return g[4]=-p.x,g[5]=-p.y,this.setViewportTransform(g)},relativePan:function(p){return this.absolutePan(new e.Point(-p.x-this.viewportTransform[4],-p.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(p){this.stateful&&p.setupState(),p._set("canvas",this),p.setCoords(),this.fire("object:added",{target:p}),p.fire("added")},_onObjectRemoved:function(p){this.fire("object:removed",{target:p}),p.fire("removed"),delete p.canvas},clearContext:function(p){return p.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var p=this.contextContainer;return this.renderCanvas(p,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var p={},g=this.width,y=this.height,x=o(this.viewportTransform);return p.tl=a({x:0,y:0},x),p.br=a({x:g,y},x),p.tr=new e.Point(p.br.x,p.tl.y),p.bl=new e.Point(p.tl.x,p.br.y),this.vptCoords=p,p},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(p,g){var y=this.viewportTransform,x=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(p),e.util.setImageSmoothing(p,this.imageSmoothingEnabled),this.fire("before:render",{ctx:p}),this._renderBackground(p),p.save(),p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._renderObjects(p,g),p.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),x&&(x.canvas=this,x.shouldCache(),x._transformDone=!0,x.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(p)),this._renderOverlay(p),this.controlsAboveOverlay&&this.interactive&&this.drawControls(p),this.fire("after:render",{ctx:p})},drawClipPathOnCanvas:function(p){var g=this.viewportTransform,y=this.clipPath;p.save(),p.transform(g[0],g[1],g[2],g[3],g[4],g[5]),p.globalCompositeOperation="destination-in",y.transform(p),p.scale(1/y.zoomX,1/y.zoomY),p.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),p.restore()},_renderObjects:function(p,g){var y,x;for(y=0,x=g.length;y<x;++y)g[y]&&g[y].render(p)},_renderBackgroundOrOverlay:function(p,g){var y=this[g+"Color"],x=this[g+"Image"],w=this.viewportTransform,b=this[g+"Vpt"];if(!(!y&&!x)){if(y){p.save(),p.beginPath(),p.moveTo(0,0),p.lineTo(this.width,0),p.lineTo(this.width,this.height),p.lineTo(0,this.height),p.closePath(),p.fillStyle=y.toLive?y.toLive(p,this):y,b&&p.transform(w[0],w[1],w[2],w[3],w[4],w[5]),p.transform(1,0,0,1,y.offsetX||0,y.offsetY||0);var S=y.gradientTransform||y.patternTransform;S&&p.transform(S[0],S[1],S[2],S[3],S[4],S[5]),p.fill(),p.restore()}if(x){p.save();var _=this.skipOffscreen;this.skipOffscreen=b,b&&p.transform(w[0],w[1],w[2],w[3],w[4],w[5]),x.render(p),this.skipOffscreen=_,p.restore()}}},_renderBackground:function(p){this._renderBackgroundOrOverlay(p,"background")},_renderOverlay:function(p){this._renderBackgroundOrOverlay(p,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(p){return this._centerObject(p,new e.Point(this.getCenterPoint().x,p.getCenterPoint().y))},centerObjectV:function(p){return this._centerObject(p,new e.Point(p.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(p){var g=this.getCenterPoint();return this._centerObject(p,g)},viewportCenterObject:function(p){var g=this.getVpCenter();return this._centerObject(p,g)},viewportCenterObjectH:function(p){var g=this.getVpCenter();return this._centerObject(p,new e.Point(g.x,p.getCenterPoint().y)),this},viewportCenterObjectV:function(p){var g=this.getVpCenter();return this._centerObject(p,new e.Point(p.getCenterPoint().x,g.y))},getVpCenter:function(){var p=this.getCenterPoint(),g=o(this.viewportTransform);return a(p,g)},_centerObject:function(p,g){return p.setPositionByOrigin(g,"center","center"),p.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(p){return this.toDatalessObject(p)},toObject:function(p){return this._toObjectMethod("toObject",p)},toDatalessObject:function(p){return this._toObjectMethod("toDatalessObject",p)},_toObjectMethod:function(p,g){var y=this.clipPath,x={version:e.version,objects:this._toObjects(p,g)};return y&&!y.excludeFromExport&&(x.clipPath=this._toObject(this.clipPath,p,g)),l(x,this.__serializeBgOverlay(p,g)),e.util.populateWithProperties(this,x,g),x},_toObjects:function(p,g){return this._objects.filter(function(y){return!y.excludeFromExport}).map(function(y){return this._toObject(y,p,g)},this)},_toObject:function(p,g,y){var x;this.includeDefaultValues||(x=p.includeDefaultValues,p.includeDefaultValues=!1);var w=p[g](y);return this.includeDefaultValues||(p.includeDefaultValues=x),w},__serializeBgOverlay:function(p,g){var y={},x=this.backgroundImage,w=this.overlayImage,b=this.backgroundColor,S=this.overlayColor;return b&&b.toObject?b.excludeFromExport||(y.background=b.toObject(g)):b&&(y.background=b),S&&S.toObject?S.excludeFromExport||(y.overlay=S.toObject(g)):S&&(y.overlay=S),x&&!x.excludeFromExport&&(y.backgroundImage=this._toObject(x,p,g)),w&&!w.excludeFromExport&&(y.overlayImage=this._toObject(w,p,g)),y},svgViewportTransformation:!0,toSVG:function(p,g){p||(p={}),p.reviver=g;var y=[];return this._setSVGPreamble(y,p),this._setSVGHeader(y,p),this.clipPath&&y.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(y,"background"),this._setSVGBgOverlayImage(y,"backgroundImage",g),this._setSVGObjects(y,g),this.clipPath&&y.push(`</g>
`),this._setSVGBgOverlayColor(y,"overlay"),this._setSVGBgOverlayImage(y,"overlayImage",g),y.push("</svg>"),y.join("")},_setSVGPreamble:function(p,g){g.suppressPreamble||p.push('<?xml version="1.0" encoding="',g.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(p,g){var y=g.width||this.width,x=g.height||this.height,w,b='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;g.viewBox?b='viewBox="'+g.viewBox.x+" "+g.viewBox.y+" "+g.viewBox.width+" "+g.viewBox.height+'" ':this.svgViewportTransformation&&(w=this.viewportTransform,b='viewBox="'+f(-w[4]/w[0],S)+" "+f(-w[5]/w[3],S)+" "+f(this.width/w[0],S)+" "+f(this.height/w[3],S)+'" '),p.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',y,'" ','height="',x,'" ',b,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(g),`</defs>
`)},createSVGClipPathMarkup:function(p){var g=this.clipPath;return g?(g.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+g.clipPathId+`" >
`+this.clipPath.toClipPathSVG(p.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var p=this,g=["background","overlay"].map(function(y){var x=p[y+"Color"];if(x&&x.toLive){var w=p[y+"Vpt"],b=p.viewportTransform,S={width:p.width/(w?b[0]:1),height:p.height/(w?b[3]:1)};return x.toSVG(S,{additionalTransform:w?e.util.matrixToSVG(b):""})}});return g.join("")},createSVGFontFacesMarkup:function(){var p="",g={},y,x,w,b,S,_,C,T,O,L=e.fontPaths,j=[];for(this._objects.forEach(function F(V){j.push(V),V._objects&&V._objects.forEach(F)}),T=0,O=j.length;T<O;T++)if(y=j[T],x=y.fontFamily,!(y.type.indexOf("text")===-1||g[x]||!L[x])&&(g[x]=!0,!!y.styles)){w=y.styles;for(S in w){b=w[S];for(C in b)_=b[C],x=_.fontFamily,!g[x]&&L[x]&&(g[x]=!0)}}for(var H in g)p+=[`		@font-face {
`,"			font-family: '",H,`';
`,"			src: url('",L[H],`');
`,`		}
`].join("");return p&&(p=['	<style type="text/css">',`<![CDATA[
`,p,"]]>",`</style>
`].join("")),p},_setSVGObjects:function(p,g){var y,x,w,b=this._objects;for(x=0,w=b.length;x<w;x++)y=b[x],!y.excludeFromExport&&this._setSVGObject(p,y,g)},_setSVGObject:function(p,g,y){p.push(g.toSVG(y))},_setSVGBgOverlayImage:function(p,g,y){this[g]&&!this[g].excludeFromExport&&this[g].toSVG&&p.push(this[g].toSVG(y))},_setSVGBgOverlayColor:function(p,g){var y=this[g+"Color"],x=this.viewportTransform,w=this.width,b=this.height;if(y)if(y.toLive){var S=y.repeat,_=e.util.invertTransform(x),C=this[g+"Vpt"],T=C?e.util.matrixToSVG(_):"";p.push('<rect transform="'+T+" translate(",w/2,",",b/2,')"',' x="',y.offsetX-w/2,'" y="',y.offsetY-b/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?y.source.width:w,'" height="',S==="repeat-x"||S==="no-repeat"?y.source.height:b,'" fill="url(#SVGID_'+y.id+')"',`></rect>
`)}else p.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',y,'"',`></rect>
`)},sendToBack:function(p){if(!p)return this;var g=this._activeObject,y,x,w;if(p===g&&p.type==="activeSelection")for(w=g._objects,y=w.length;y--;)x=w[y],h(this._objects,x),this._objects.unshift(x);else h(this._objects,p),this._objects.unshift(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(p){if(!p)return this;var g=this._activeObject,y,x,w;if(p===g&&p.type==="activeSelection")for(w=g._objects,y=0;y<w.length;y++)x=w[y],h(this._objects,x),this._objects.push(x);else h(this._objects,p),this._objects.push(p);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(p,g){if(!p)return this;var y=this._activeObject,x,w,b,S,_,C=0;if(p===y&&p.type==="activeSelection")for(_=y._objects,x=0;x<_.length;x++)w=_[x],b=this._objects.indexOf(w),b>0+C&&(S=b-1,h(this._objects,w),this._objects.splice(S,0,w)),C++;else b=this._objects.indexOf(p),b!==0&&(S=this._findNewLowerIndex(p,b,g),h(this._objects,p),this._objects.splice(S,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(p,g,y){var x,w;if(y)for(x=g,w=g-1;w>=0;--w){var b=p.intersectsWithObject(this._objects[w])||p.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(p);if(b){x=w;break}}else x=g-1;return x},bringForward:function(p,g){if(!p)return this;var y=this._activeObject,x,w,b,S,_,C=0;if(p===y&&p.type==="activeSelection")for(_=y._objects,x=_.length;x--;)w=_[x],b=this._objects.indexOf(w),b<this._objects.length-1-C&&(S=b+1,h(this._objects,w),this._objects.splice(S,0,w)),C++;else b=this._objects.indexOf(p),b!==this._objects.length-1&&(S=this._findNewUpperIndex(p,b,g),h(this._objects,p),this._objects.splice(S,0,p));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(p,g,y){var x,w,b;if(y)for(x=g,w=g+1,b=this._objects.length;w<b;++w){var S=p.intersectsWithObject(this._objects[w])||p.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(p);if(S){x=w;break}}else x=g+1;return x},moveTo:function(p,g){return h(this._objects,p),this._objects.splice(g,0,p),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(p){p.dispose&&p.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),l(e.StaticCanvas.prototype,e.Observable),l(e.StaticCanvas.prototype,e.Collection),l(e.StaticCanvas.prototype,e.DataURLExporter),l(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(p){var g=d();if(!g||!g.getContext)return null;var y=g.getContext("2d");if(!y)return null;switch(p){case"setLineDash":return typeof y.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var p=c(this.lowerCanvasEl);return p&&p.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(p){var g=c(this.lowerCanvasEl);return g&&g.createJPEGStream(p)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(l){l.strokeStyle=this.color,l.lineWidth=this.width,l.lineCap=this.strokeLineCap,l.miterLimit=this.strokeMiterLimit,l.lineJoin=this.strokeLineJoin,l.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(l){var s=this.canvas.viewportTransform;l.save(),l.transform(s[0],s[1],s[2],s[3],s[4],s[5])},_setShadow:function(){if(this.shadow){var l=this.canvas,s=this.shadow,h=l.contextTop,f=l.getZoom();l&&l._isRetinaScaling()&&(f*=e.devicePixelRatio),h.shadowColor=s.color,h.shadowBlur=s.blur*f,h.shadowOffsetX=s.offsetX*f,h.shadowOffsetY=s.offsetY*f}},needsFullRender:function(){var l=new e.Color(this.color);return l.getAlpha()<1||!!this.shadow},_resetShadow:function(){var l=this.canvas.contextTop;l.shadowColor="",l.shadowBlur=l.shadowOffsetX=l.shadowOffsetY=0},_isOutSideCanvas:function(l){return l.x<0||l.x>this.canvas.getWidth()||l.y<0||l.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(l){this.canvas=l,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(l,s,h){var f=s.midPointFrom(h);return l.quadraticCurveTo(s.x,s.y,f.x,f.y),f},onMouseDown:function(l,s){this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],this._prepareForDrawing(l),this._captureDrawingPath(l),this._render())},onMouseMove:function(l,s){if(this.canvas._isMainEvent(s.e)&&(this.drawStraightLine=s.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(l))&&this._captureDrawingPath(l)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var h=this._points,f=h.length,a=this.canvas.contextTop;this._saveAndTransform(a),this.oldEnd&&(a.beginPath(),a.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(a,h[f-2],h[f-1],!0),a.stroke(),a.restore()}},onMouseUp:function(l){return this.canvas._isMainEvent(l.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(l){var s=new e.Point(l.x,l.y);this._reset(),this._addPoint(s),this.canvas.contextTop.moveTo(s.x,s.y)},_addPoint:function(l){return this._points.length>1&&l.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(l),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(l){var s=new e.Point(l.x,l.y);return this._addPoint(s)},_render:function(l){var s,h,f=this._points[0],a=this._points[1];if(l=l||this.canvas.contextTop,this._saveAndTransform(l),l.beginPath(),this._points.length===2&&f.x===a.x&&f.y===a.y){var o=this.width/1e3;f=new e.Point(f.x,f.y),a=new e.Point(a.x,a.y),f.x-=o,a.x+=o}for(l.moveTo(f.x,f.y),s=1,h=this._points.length;s<h;s++)this._drawSegment(l,f,a),f=this._points[s],a=this._points[s+1];l.lineTo(f.x,f.y),l.stroke(),l.restore()},convertPointsToSVGPath:function(l){var s=this.width/1e3;return e.util.getSmoothPathFromPoints(l,s)},_isEmptySVGPath:function(l){var s=e.util.joinPath(l);return s==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(l){var s=new e.Path(l,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,s.shadow=new e.Shadow(this.shadow)),s},decimatePoints:function(l,s){if(l.length<=2)return l;var h=this.canvas.getZoom(),f=Math.pow(s/h,2),a,o=l.length-1,c=l[0],d=[c],v;for(a=1;a<o-1;a++)v=Math.pow(c.x-l[a].x,2)+Math.pow(c.y-l[a].y,2),v>=f&&(c=l[a],d.push(c));return d.push(l[o]),d},_finalizeAndAddPath:function(){var l=this.canvas.contextTop;l.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var s=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(s)){this.canvas.requestRenderAll();return}var h=this.createPath(s);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.requestRenderAll(),h.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:h})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(l){this.canvas=l,this.points=[]},drawDot:function(l){var s=this.addPoint(l),h=this.canvas.contextTop;this._saveAndTransform(h),this.dot(h,s),h.restore()},dot:function(l,s){l.fillStyle=s.fill,l.beginPath(),l.arc(s.x,s.y,s.radius,0,Math.PI*2,!1),l.closePath(),l.fill()},onMouseDown:function(l){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(l)},_render:function(){var l=this.canvas.contextTop,s,h,f=this.points;for(this._saveAndTransform(l),s=0,h=f.length;s<h;s++)this.dot(l,f[s]);l.restore()},onMouseMove:function(l){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(l)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(l),this._render()):this.drawDot(l))},onMouseUp:function(){var l=this.canvas.renderOnAddRemove,s,h;this.canvas.renderOnAddRemove=!1;var f=[];for(s=0,h=this.points.length;s<h;s++){var a=this.points[s],o=new e.Circle({radius:a.radius,left:a.x,top:a.y,originX:"center",originY:"center",fill:a.fill});this.shadow&&(o.shadow=new e.Shadow(this.shadow)),f.push(o)}var c=new e.Group(f);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=l,this.canvas.requestRenderAll()},addPoint:function(l){var s=new e.Point(l.x,l.y),h=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,f=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return s.radius=h,s.fill=f,this.points.push(s),s}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(l){this.canvas=l,this.sprayChunks=[]},onMouseDown:function(l){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(l),this.render(this.sprayChunkPoints)},onMouseMove:function(l){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(l)||(this.addSprayChunk(l),this.render(this.sprayChunkPoints))},onMouseUp:function(){var l=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var s=[],h=0,f=this.sprayChunks.length;h<f;h++)for(var a=this.sprayChunks[h],o=0,c=a.length;o<c;o++){var d=new e.Rect({width:a[o].width,height:a[o].width,left:a[o].x+1,top:a[o].y+1,originX:"center",originY:"center",fill:this.color});s.push(d)}this.optimizeOverlapping&&(s=this._getOptimizedRects(s));var v=new e.Group(s);this.shadow&&v.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:v}),this.canvas.add(v),this.canvas.fire("path:created",{path:v}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=l,this.canvas.requestRenderAll()},_getOptimizedRects:function(l){var s={},h,f,a;for(f=0,a=l.length;f<a;f++)h=l[f].left+""+l[f].top,s[h]||(s[h]=l[f]);var o=[];for(h in s)o.push(s[h]);return o},render:function(l){var s=this.canvas.contextTop,h,f;for(s.fillStyle=this.color,this._saveAndTransform(s),h=0,f=l.length;h<f;h++){var a=l[h];typeof a.opacity<"u"&&(s.globalAlpha=a.opacity),s.fillRect(a.x,a.y,a.width,a.width)}s.restore()},_render:function(){var l=this.canvas.contextTop,s,h;for(l.fillStyle=this.color,this._saveAndTransform(l),s=0,h=this.sprayChunks.length;s<h;s++)this.render(this.sprayChunks[s]);l.restore()},addSprayChunk:function(l){this.sprayChunkPoints=[];var s,h,f,a=this.width/2,o;for(o=0;o<this.density;o++){s=e.util.getRandomInt(l.x-a,l.x+a),h=e.util.getRandomInt(l.y-a,l.y+a),this.dotWidthVariance?f=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):f=this.dotWidth;var c=new e.Point(s,h);c.width=f,this.randomOpacity&&(c.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var l=20,s=5,h=e.util.createCanvasElement(),f=h.getContext("2d");return h.width=h.height=l+s,f.fillStyle=this.color,f.beginPath(),f.arc(l/2,l/2,l/2,0,Math.PI*2,!1),f.closePath(),f.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(l){return l.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(l){this.callSuper("_setBrushStyles",l),l.strokeStyle=this.getPattern(l)},createPath:function(l){var s=this.callSuper("createPath",l),h=s._getLeftTopCoords().scalarAdd(s.strokeWidth/2);return s.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-h.x,offsetY:-h.y}),s}}),function(){var l=e.util.getPointer,s=e.util.degreesToRadians,h=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(a,o){o||(o={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(a,o),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var a=this.getActiveObjects(),o,c,d;if(a.length>0&&!this.preserveObjectStacking){c=[],d=[];for(var v=0,p=this._objects.length;v<p;v++)o=this._objects[v],a.indexOf(o)===-1?c.push(o):d.push(o);a.length>1&&(this._activeObject._objects=d),c.push.apply(c,d)}else c=this._objects;return c},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var a=this.contextContainer;return this.renderCanvas(a,this._chooseObjectsToRender()),this},renderTopLayer:function(a){a.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(a),this.contextTopDirty=!0),a.restore()},renderTop:function(){var a=this.contextTop;return this.clearContext(a),this.renderTopLayer(a),this.fire("after:render"),this},_normalizePointer:function(a,o){var c=a.calcTransformMatrix(),d=e.util.invertTransform(c),v=this.restorePointerVpt(o);return e.util.transformPoint(v,d)},isTargetTransparent:function(a,o,c){if(a.shouldCache()&&a._cacheCanvas&&a!==this._activeObject){var d=this._normalizePointer(a,{x:o,y:c}),v=Math.max(a.cacheTranslationX+d.x*a.zoomX,0),p=Math.max(a.cacheTranslationY+d.y*a.zoomY,0),w=e.util.isTransparent(a._cacheContext,Math.round(v),Math.round(p),this.targetFindTolerance);return w}var g=this.contextCache,y=a.selectionBackgroundColor,x=this.viewportTransform;a.selectionBackgroundColor="",this.clearContext(g),g.save(),g.transform(x[0],x[1],x[2],x[3],x[4],x[5]),a.render(g),g.restore(),a.selectionBackgroundColor=y;var w=e.util.isTransparent(g,o,c,this.targetFindTolerance);return w},_isSelectionKeyPressed:function(a){var o=!1;return Array.isArray(this.selectionKey)?o=!!this.selectionKey.find(function(c){return a[c]===!0}):o=a[this.selectionKey],o},_shouldClearSelection:function(a,o){var c=this.getActiveObjects(),d=this._activeObject;return!o||o&&d&&c.length>1&&c.indexOf(o)===-1&&d!==o&&!this._isSelectionKeyPressed(a)||o&&!o.evented||o&&!o.selectable&&d&&d!==o},_shouldCenterTransform:function(a,o,c){if(a){var d;return o==="scale"||o==="scaleX"||o==="scaleY"||o==="resizing"?d=this.centeredScaling||a.centeredScaling:o==="rotate"&&(d=this.centeredRotation||a.centeredRotation),d?!c:c}},_getOriginFromCorner:function(a,o){var c={x:a.originX,y:a.originY};return o==="ml"||o==="tl"||o==="bl"?c.x="right":(o==="mr"||o==="tr"||o==="br")&&(c.x="left"),o==="tl"||o==="mt"||o==="tr"?c.y="bottom":(o==="bl"||o==="mb"||o==="br")&&(c.y="top"),c},_getActionFromCorner:function(a,o,c,d){if(!o||!a)return"drag";var v=d.controls[o];return v.getActionName(c,v,d)},_setupCurrentTransform:function(a,o,c){if(o){var d=this.getPointer(a),v=o.__corner,p=o.controls[v],g=c&&v?p.getActionHandler(a,o,p):e.controlsUtils.dragHandler,y=this._getActionFromCorner(c,v,a,o),x=this._getOriginFromCorner(o,v),w=a[this.centeredKey],b={target:o,action:y,actionHandler:g,corner:v,scaleX:o.scaleX,scaleY:o.scaleY,skewX:o.skewX,skewY:o.skewY,offsetX:d.x-o.left,offsetY:d.y-o.top,originX:x.x,originY:x.y,ex:d.x,ey:d.y,lastX:d.x,lastY:d.y,theta:s(o.angle),width:o.width*o.scaleX,shiftKey:a.shiftKey,altKey:w,original:e.util.saveObjectTransform(o)};this._shouldCenterTransform(o,y,w)&&(b.originX="center",b.originY="center"),b.original.originX=x.x,b.original.originY=x.y,this._currentTransform=b,this._beforeTransform(a)}},setCursor:function(a){this.upperCanvasEl.style.cursor=a},_drawSelection:function(a){var o=this._groupSelector,c=new e.Point(o.ex,o.ey),d=e.util.transformPoint(c,this.viewportTransform),v=new e.Point(o.ex+o.left,o.ey+o.top),p=e.util.transformPoint(v,this.viewportTransform),g=Math.min(d.x,p.x),y=Math.min(d.y,p.y),x=Math.max(d.x,p.x),w=Math.max(d.y,p.y),b=this.selectionLineWidth/2;this.selectionColor&&(a.fillStyle=this.selectionColor,a.fillRect(g,y,x-g,w-y)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(a.lineWidth=this.selectionLineWidth,a.strokeStyle=this.selectionBorderColor,g+=b,y+=b,x-=b,w-=b,e.Object.prototype._setLineDash.call(this,a,this.selectionDashArray),a.strokeRect(g,y,x-g,w-y))},findTarget:function(a,o){if(!this.skipTargetFind){var c=!0,d=this.getPointer(a,c),v=this._activeObject,p=this.getActiveObjects(),g,y,x=h(a),w=p.length>1&&!o||p.length===1;if(this.targets=[],w&&v._findTargetCorner(d,x)||p.length>1&&!o&&v===this._searchPossibleTargets([v],d))return v;if(p.length===1&&v===this._searchPossibleTargets([v],d))if(this.preserveObjectStacking)g=v,y=this.targets,this.targets=[];else return v;var b=this._searchPossibleTargets(this._objects,d);return a[this.altSelectionKey]&&b&&g&&b!==g&&(b=g,this.targets=y),b}},_checkTarget:function(a,o,c){if(o&&o.visible&&o.evented&&o.containsPoint(a))if((this.perPixelTargetFind||o.perPixelTargetFind)&&!o.isEditing){var d=this.isTargetTransparent(o,c.x,c.y);if(!d)return!0}else return!0},_searchPossibleTargets:function(a,o){for(var c,d=a.length,v;d--;){var p=a[d],g=p.group?this._normalizePointer(p.group,o):o;if(this._checkTarget(g,p,o)){c=a[d],c.subTargetCheck&&c instanceof e.Group&&(v=this._searchPossibleTargets(c._objects,o),v&&this.targets.push(v));break}}return c},restorePointerVpt:function(a){return e.util.transformPoint(a,e.util.invertTransform(this.viewportTransform))},getPointer:function(a,o){if(this._absolutePointer&&!o)return this._absolutePointer;if(this._pointer&&o)return this._pointer;var c=l(a),d=this.upperCanvasEl,v=d.getBoundingClientRect(),p=v.width||0,g=v.height||0,y;(!p||!g)&&("top"in v&&"bottom"in v&&(g=Math.abs(v.top-v.bottom)),"right"in v&&"left"in v&&(p=Math.abs(v.right-v.left))),this.calcOffset(),c.x=c.x-this._offset.left,c.y=c.y-this._offset.top,o||(c=this.restorePointerVpt(c));var x=this.getRetinaScaling();return x!==1&&(c.x/=x,c.y/=x),p===0||g===0?y={width:1,height:1}:y={width:d.width/p,height:d.height/g},{x:c.x*y.width,y:c.y*y.height}},_createUpperCanvas:function(){var a=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),o=this.lowerCanvasEl,c=this.upperCanvasEl;c?c.className="":(c=this._createCanvasElement(),this.upperCanvasEl=c),e.util.addClass(c,"upper-canvas "+a),this.wrapperEl.appendChild(c),this._copyCanvasStyle(o,c),this._applyCanvasStyle(c),this.contextTop=c.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(a){var o=this.width||a.width,c=this.height||a.height;e.util.setStyle(a,{position:"absolute",width:o+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),a.width=o,a.height=c,e.util.makeElementUnselectable(a)},_copyCanvasStyle:function(a,o){o.style.cssText=a.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var a=this._activeObject;return a?a.type==="activeSelection"&&a._objects?a._objects.slice(0):[a]:[]},_onObjectRemoved:function(a){a===this._activeObject&&(this.fire("before:selection:cleared",{target:a}),this._discardActiveObject(),this.fire("selection:cleared",{target:a}),a.fire("deselected")),a===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",a)},_fireSelectionEvents:function(a,o){var c=!1,d=this.getActiveObjects(),v=[],p=[];a.forEach(function(g){d.indexOf(g)===-1&&(c=!0,g.fire("deselected",{e:o,target:g}),p.push(g))}),d.forEach(function(g){a.indexOf(g)===-1&&(c=!0,g.fire("selected",{e:o,target:g}),v.push(g))}),a.length>0&&d.length>0?c&&this.fire("selection:updated",{e:o,selected:v,deselected:p}):d.length>0?this.fire("selection:created",{e:o,selected:v}):a.length>0&&this.fire("selection:cleared",{e:o,deselected:p})},setActiveObject:function(a,o){var c=this.getActiveObjects();return this._setActiveObject(a,o),this._fireSelectionEvents(c,o),this},_setActiveObject:function(a,o){return this._activeObject===a||!this._discardActiveObject(o,a)||a.onSelect({e:o})?!1:(this._activeObject=a,!0)},_discardActiveObject:function(a,o){var c=this._activeObject;if(c){if(c.onDeselect({e:a,object:o}))return!1;this._activeObject=null}return!0},discardActiveObject:function(a){var o=this.getActiveObjects(),c=this.getActiveObject();return o.length&&this.fire("before:selection:cleared",{target:c,e:a}),this._discardActiveObject(a),this._fireSelectionEvents(o,a),this},dispose:function(){var a=this.wrapperEl;return this.removeListeners(),a.removeChild(this.upperCanvasEl),a.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(o){e.util.cleanUpJsdomNode(this[o]),this[o]=void 0}).bind(this)),a.parentNode&&a.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(a){var o=this._activeObject;o&&o._renderControls(a)},_toObject:function(a,o,c){var d=this._realizeGroupTransformOnObject(a),v=this.callSuper("_toObject",a,o,c);return this._unwindGroupTransformOnObject(a,d),v},_realizeGroupTransformOnObject:function(a){if(a.group&&a.group.type==="activeSelection"&&this._activeObject===a.group){var o=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],c={};return o.forEach(function(d){c[d]=a[d]}),e.util.addTransformToObject(a,this._activeObject.calcOwnMatrix()),c}else return null},_unwindGroupTransformOnObject:function(a,o){o&&a.set(o)},_setSVGObject:function(a,o,c){var d=this._realizeGroupTransformOnObject(o);this.callSuper("_setSVGObject",a,o,c),this._unwindGroupTransformOnObject(o,d)},setViewportTransform:function(a){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,a)}});for(var f in e.StaticCanvas)f!=="prototype"&&(e.Canvas[f]=e.StaticCanvas[f])}(),function(){var l=e.util.addListener,s=e.util.removeListener,h=3,f=2,a=1,o={passive:!1};function c(d,v){return d.button&&d.button===v-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(l,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(d,v){var p=this.upperCanvasEl,g=this._getEventPrefix();d(e.window,"resize",this._onResize),d(p,g+"down",this._onMouseDown),d(p,g+"move",this._onMouseMove,o),d(p,g+"out",this._onMouseOut),d(p,g+"enter",this._onMouseEnter),d(p,"wheel",this._onMouseWheel),d(p,"contextmenu",this._onContextMenu),d(p,"dblclick",this._onDoubleClick),d(p,"dragover",this._onDragOver),d(p,"dragenter",this._onDragEnter),d(p,"dragleave",this._onDragLeave),d(p,"drop",this._onDrop),this.enablePointerEvents||d(p,"touchstart",this._onTouchStart,o),typeof eventjs<"u"&&v in eventjs&&(eventjs[v](p,"gesture",this._onGesture),eventjs[v](p,"drag",this._onDrag),eventjs[v](p,"orientation",this._onOrientationChange),eventjs[v](p,"shake",this._onShake),eventjs[v](p,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(s,"remove");var d=this._getEventPrefix();s(e.document,d+"up",this._onMouseUp),s(e.document,"touchend",this._onTouchEnd,o),s(e.document,d+"move",this._onMouseMove,o),s(e.document,"touchmove",this._onMouseMove,o)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(d,v){this.__onTransformGesture&&this.__onTransformGesture(d,v)},_onDrag:function(d,v){this.__onDrag&&this.__onDrag(d,v)},_onMouseWheel:function(d){this.__onMouseWheel(d)},_onMouseOut:function(d){var v=this._hoveredTarget;this.fire("mouse:out",{target:v,e:d}),this._hoveredTarget=null,v&&v.fire("mouseout",{e:d});var p=this;this._hoveredTargets.forEach(function(g){p.fire("mouse:out",{target:g,e:d}),g&&g.fire("mouseout",{e:d})}),this._hoveredTargets=[]},_onMouseEnter:function(d){!this._currentTransform&&!this.findTarget(d)&&(this.fire("mouse:over",{target:null,e:d}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(d,v){this.__onOrientationChange&&this.__onOrientationChange(d,v)},_onShake:function(d,v){this.__onShake&&this.__onShake(d,v)},_onLongPress:function(d,v){this.__onLongPress&&this.__onLongPress(d,v)},_onDragOver:function(d){d.preventDefault();var v=this._simpleEventHandler("dragover",d);this._fireEnterLeaveEvents(v,d)},_onDrop:function(d){return this._simpleEventHandler("drop:before",d),this._simpleEventHandler("drop",d)},_onContextMenu:function(d){return this.stopContextMenu&&(d.stopPropagation(),d.preventDefault()),!1},_onDoubleClick:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"dblclick"),this._resetTransformEventData(d)},getPointerId:function(d){var v=d.changedTouches;return v?v[0]&&v[0].identifier:this.enablePointerEvents?d.pointerId:-1},_isMainEvent:function(d){return d.isPrimary===!0?!0:d.isPrimary===!1?!1:d.type==="touchend"&&d.touches.length===0?!0:d.changedTouches?d.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(d){d.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(d)),this.__onMouseDown(d),this._resetTransformEventData();var v=this.upperCanvasEl,p=this._getEventPrefix();l(e.document,"touchend",this._onTouchEnd,o),l(e.document,"touchmove",this._onMouseMove,o),s(v,p+"down",this._onMouseDown)},_onMouseDown:function(d){this.__onMouseDown(d),this._resetTransformEventData();var v=this.upperCanvasEl,p=this._getEventPrefix();s(v,p+"move",this._onMouseMove,o),l(e.document,p+"up",this._onMouseUp),l(e.document,p+"move",this._onMouseMove,o)},_onTouchEnd:function(d){if(!(d.touches.length>0)){this.__onMouseUp(d),this._resetTransformEventData(),this.mainTouchId=null;var v=this._getEventPrefix();s(e.document,"touchend",this._onTouchEnd,o),s(e.document,"touchmove",this._onMouseMove,o);var p=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){l(p.upperCanvasEl,v+"down",p._onMouseDown),p._willAddMouseDown=0},400)}},_onMouseUp:function(d){this.__onMouseUp(d),this._resetTransformEventData();var v=this.upperCanvasEl,p=this._getEventPrefix();this._isMainEvent(d)&&(s(e.document,p+"up",this._onMouseUp),s(e.document,p+"move",this._onMouseMove,o),l(v,p+"move",this._onMouseMove,o))},_onMouseMove:function(d){!this.allowTouchScrolling&&d.preventDefault&&d.preventDefault(),this.__onMouseMove(d)},_onResize:function(){this.calcOffset()},_shouldRender:function(d){var v=this._activeObject;return!!v!=!!d||v&&d&&v!==d?!0:(v&&v.isEditing,!1)},__onMouseUp:function(d){var v,p=this._currentTransform,g=this._groupSelector,y=!1,x=!g||g.left===0&&g.top===0;if(this._cacheTransformEventData(d),v=this._target,this._handleEvent(d,"up:before"),c(d,h)){this.fireRightClick&&this._handleEvent(d,"up",h,x);return}if(c(d,f)){this.fireMiddleClick&&this._handleEvent(d,"up",f,x),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(d);return}if(this._isMainEvent(d)){if(p&&(this._finalizeCurrentTransform(d),y=p.actionPerformed),!x){var w=v===this._activeObject;this._maybeGroupObjects(d),y||(y=this._shouldRender(v)||!w&&v===this._activeObject)}var b,S;if(v){if(b=v._findTargetCorner(this.getPointer(d,!0),e.util.isTouchEvent(d)),v.selectable&&v!==this._activeObject&&v.activeOn==="up")this.setActiveObject(v,d),y=!0;else{var _=v.controls[b],C=_&&_.getMouseUpHandler(d,v,_);C&&(S=this.getPointer(d),C(d,p,S.x,S.y))}v.isMoving=!1}if(p&&(p.target!==v||p.corner!==b)){var T=p.target&&p.target.controls[p.corner],O=T&&T.getMouseUpHandler(d,v,_);S=S||this.getPointer(d),O&&O(d,p,S.x,S.y)}this._setCursorFromEvent(d,v),this._handleEvent(d,"up",a,x),this._groupSelector=null,this._currentTransform=null,v&&(v.__corner=0),y?this.requestRenderAll():x||this.renderTop()}},_simpleEventHandler:function(d,v){var p=this.findTarget(v),g=this.targets,y={e:v,target:p,subTargets:g};if(this.fire(d,y),p&&p.fire(d,y),!g)return p;for(var x=0;x<g.length;x++)g[x].fire(d,y);return p},_handleEvent:function(d,v,p,g){var y=this._target,x=this.targets||[],w={e:d,target:y,subTargets:x,button:p||a,isClick:g||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};v==="up"&&(w.currentTarget=this.findTarget(d),w.currentSubTargets=this.targets),this.fire("mouse:"+v,w),y&&y.fire("mouse"+v,w);for(var b=0;b<x.length;b++)x[b].fire("mouse"+v,w)},_finalizeCurrentTransform:function(d){var v=this._currentTransform,p=v.target,g={e:d,target:p,transform:v,action:v.action};p._scaling&&(p._scaling=!1),p.setCoords(),(v.actionPerformed||this.stateful&&p.hasStateChanged())&&this._fire("modified",g)},_onMouseDownInDrawingMode:function(d){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(d).requestRenderAll();var v=this.getPointer(d);this.freeDrawingBrush.onMouseDown(v,{e:d,pointer:v}),this._handleEvent(d,"down")},_onMouseMoveInDrawingMode:function(d){if(this._isCurrentlyDrawing){var v=this.getPointer(d);this.freeDrawingBrush.onMouseMove(v,{e:d,pointer:v})}this.setCursor(this.freeDrawingCursor),this._handleEvent(d,"move")},_onMouseUpInDrawingMode:function(d){var v=this.getPointer(d);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:d,pointer:v}),this._handleEvent(d,"up")},__onMouseDown:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"down:before");var v=this._target;if(c(d,h)){this.fireRightClick&&this._handleEvent(d,"down",h);return}if(c(d,f)){this.fireMiddleClick&&this._handleEvent(d,"down",f);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(d);return}if(this._isMainEvent(d)&&!this._currentTransform){var p=this._pointer;this._previousPointer=p;var g=this._shouldRender(v),y=this._shouldGroup(d,v);if(this._shouldClearSelection(d,v)?this.discardActiveObject(d):y&&(this._handleGrouping(d,v),v=this._activeObject),this.selection&&(!v||!v.selectable&&!v.isEditing&&v!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),v){var x=v===this._activeObject;v.selectable&&v.activeOn==="down"&&this.setActiveObject(v,d);var w=v._findTargetCorner(this.getPointer(d,!0),e.util.isTouchEvent(d));if(v.__corner=w,v===this._activeObject&&(w||!y)){this._setupCurrentTransform(d,v,x);var b=v.controls[w],p=this.getPointer(d),S=b&&b.getMouseDownHandler(d,v,b);S&&S(d,this._currentTransform,p.x,p.y)}}this._handleEvent(d,"down"),(g||y)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(d){this._resetTransformEventData(),this._pointer=this.getPointer(d,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(d)||null},_beforeTransform:function(d){var v=this._currentTransform;this.stateful&&v.target.saveState(),this.fire("before:transform",{e:d,transform:v})},__onMouseMove:function(d){this._handleEvent(d,"move:before"),this._cacheTransformEventData(d);var v,p;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(d);return}if(this._isMainEvent(d)){var g=this._groupSelector;g?(p=this._absolutePointer,g.left=p.x-g.ex,g.top=p.y-g.ey,this.renderTop()):this._currentTransform?this._transformObject(d):(v=this.findTarget(d)||null,this._setCursorFromEvent(d,v),this._fireOverOutEvents(v,d)),this._handleEvent(d,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(d,v){var p=this._hoveredTarget,g=this._hoveredTargets,y=this.targets,x=Math.max(g.length,y.length);this.fireSyntheticInOutEvents(d,v,{oldTarget:p,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var w=0;w<x;w++)this.fireSyntheticInOutEvents(y[w],v,{oldTarget:g[w],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=d,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(d,v){var p=this._draggedoverTarget,g=this._hoveredTargets,y=this.targets,x=Math.max(g.length,y.length);this.fireSyntheticInOutEvents(d,v,{oldTarget:p,evtOut:"dragleave",evtIn:"dragenter"});for(var w=0;w<x;w++)this.fireSyntheticInOutEvents(y[w],v,{oldTarget:g[w],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=d},fireSyntheticInOutEvents:function(d,v,p){var g,y,x=p.oldTarget,w,b,S=x!==d,_=p.canvasEvtIn,C=p.canvasEvtOut;S&&(g={e:v,target:d,previousTarget:x},y={e:v,target:x,nextTarget:d}),b=d&&S,w=x&&S,w&&(C&&this.fire(C,y),x.fire(p.evtOut,y)),b&&(_&&this.fire(_,g),d.fire(p.evtIn,g))},__onMouseWheel:function(d){this._cacheTransformEventData(d),this._handleEvent(d,"wheel"),this._resetTransformEventData()},_transformObject:function(d){var v=this.getPointer(d),p=this._currentTransform;p.reset=!1,p.shiftKey=d.shiftKey,p.altKey=d[this.centeredKey],this._performTransformAction(d,p,v),p.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(d,v,p){var g=p.x,y=p.y,x=v.action,w=!1,b=v.actionHandler;b&&(w=b(d,v,g,y)),x==="drag"&&w&&(v.target.isMoving=!0,this.setCursor(v.target.moveCursor||this.moveCursor)),v.actionPerformed=v.actionPerformed||w},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(d,v){if(!v)return this.setCursor(this.defaultCursor),!1;var p=v.hoverCursor||this.hoverCursor,g=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,y=(!g||!g.contains(v))&&v._findTargetCorner(this.getPointer(d,!0));y?this.setCursor(this.getCornerCursor(y,v,d)):(v.subTargetCheck&&this.targets.concat().reverse().map(function(x){p=x.hoverCursor||p}),this.setCursor(p))},getCornerCursor:function(d,v,p){var g=v.controls[d];return g.cursorStyleHandler(p,g,v)}})}(),function(){var l=Math.min,s=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(h,f){var a=this._activeObject;return a&&this._isSelectionKeyPressed(h)&&f&&f.selectable&&this.selection&&(a!==f||a.type==="activeSelection")&&!f.onSelect({e:h})},_handleGrouping:function(h,f){var a=this._activeObject;a.__corner||f===a&&(f=this.findTarget(h,!0),!f||!f.selectable)||(a&&a.type==="activeSelection"?this._updateActiveSelection(f,h):this._createActiveSelection(f,h))},_updateActiveSelection:function(h,f){var a=this._activeObject,o=a._objects.slice(0);a.contains(h)?(a.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),a.size()===1&&this._setActiveObject(a.item(0),f)):(a.addWithUpdate(h),this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,f)},_createActiveSelection:function(h,f){var a=this.getActiveObjects(),o=this._createGroup(h);this._hoveredTarget=o,this._setActiveObject(o,f),this._fireSelectionEvents(a,f)},_createGroup:function(h){var f=this._objects,a=f.indexOf(this._activeObject)<f.indexOf(h),o=a?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(h){var f=this._collectObjects(h),a;f.length===1?this.setActiveObject(f[0],h):f.length>1&&(a=new e.ActiveSelection(f.reverse(),{canvas:this}),this.setActiveObject(a,h))},_collectObjects:function(h){for(var f=[],a,o=this._groupSelector.ex,c=this._groupSelector.ey,d=o+this._groupSelector.left,v=c+this._groupSelector.top,p=new e.Point(l(o,d),l(c,v)),g=new e.Point(s(o,d),s(c,v)),y=!this.selectionFullyContained,x=o===d&&c===v,w=this._objects.length;w--&&(a=this._objects[w],!(!(!a||!a.selectable||!a.visible)&&(y&&a.intersectsWithRect(p,g,!0)||a.isContainedWithinRect(p,g,!0)||y&&a.containsPoint(p,null,!0)||y&&a.containsPoint(g,null,!0))&&(f.push(a),x))););return f.length>1&&(f=f.filter(function(b){return!b.onSelect({e:h})})),f},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(l){l||(l={});var s=l.format||"png",h=l.quality||1,f=(l.multiplier||1)*(l.enableRetinaScaling?this.getRetinaScaling():1),a=this.toCanvasElement(f,l);return e.util.toDataURL(a,s,h)},toCanvasElement:function(l,s){l=l||1,s=s||{};var h=(s.width||this.width)*l,f=(s.height||this.height)*l,a=this.getZoom(),o=this.width,c=this.height,d=a*l,v=this.viewportTransform,p=(v[4]-(s.left||0))*l,g=(v[5]-(s.top||0))*l,y=this.interactive,x=[d,0,0,d,p,g],w=this.enableRetinaScaling,b=e.util.createCanvasElement(),S=this.contextTop;return b.width=h,b.height=f,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=x,this.width=h,this.height=f,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),this._objects),this.viewportTransform=v,this.width=o,this.height=c,this.calcViewportBoundaries(),this.interactive=y,this.enableRetinaScaling=w,this.contextTop=S,b}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(l,s,h){if(l){var f=typeof l=="string"?JSON.parse(l):e.util.object.clone(l),a=this,o=f.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete f.clipPath,this._enlivenObjects(f.objects,function(d){a.clear(),a._setBgOverlay(f,function(){o?a._enlivenObjects([o],function(v){a.clipPath=v[0],a.__setupCanvas.call(a,f,d,c,s)}):a.__setupCanvas.call(a,f,d,c,s)})},h),this}},__setupCanvas:function(l,s,h,f){var a=this;s.forEach(function(o,c){a.insertAt(o,c)}),this.renderOnAddRemove=h,delete l.objects,delete l.backgroundImage,delete l.overlayImage,delete l.background,delete l.overlay,this._setOptions(l),this.renderAll(),f&&f()},_setBgOverlay:function(l,s){var h={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!l.backgroundImage&&!l.overlayImage&&!l.background&&!l.overlay){s&&s();return}var f=function(){h.backgroundImage&&h.overlayImage&&h.backgroundColor&&h.overlayColor&&s&&s()};this.__setBgOverlay("backgroundImage",l.backgroundImage,h,f),this.__setBgOverlay("overlayImage",l.overlayImage,h,f),this.__setBgOverlay("backgroundColor",l.background,h,f),this.__setBgOverlay("overlayColor",l.overlay,h,f)},__setBgOverlay:function(l,s,h,f){var a=this;if(!s){h[l]=!0,f&&f();return}l==="backgroundImage"||l==="overlayImage"?e.util.enlivenObjects([s],function(o){a[l]=o[0],h[l]=!0,f&&f()}):this["set"+e.util.string.capitalize(l,!0)](s,function(){h[l]=!0,f&&f()})},_enlivenObjects:function(l,s,h){if(!l||l.length===0){s&&s([]);return}e.util.enlivenObjects(l,function(f){s&&s(f)},null,h)},_toDataURL:function(l,s){this.clone(function(h){s(h.toDataURL(l))})},_toDataURLWithMultiplier:function(l,s,h){this.clone(function(f){h(f.toDataURLWithMultiplier(l,s))})},clone:function(l,s){var h=JSON.stringify(this.toJSON(s));this.cloneWithoutData(function(f){f.loadFromJSON(h,function(){l&&l(f)})})},cloneWithoutData:function(l){var s=e.util.createCanvasElement();s.width=this.width,s.height=this.height;var h=new e.Canvas(s);this.backgroundImage?(h.setBackgroundImage(this.backgroundImage.src,function(){h.renderAll(),l&&l(h)}),h.backgroundImageOpacity=this.backgroundImageOpacity,h.backgroundImageStretch=this.backgroundImageStretch):l&&l(h)}}),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend,f=s.util.object.clone,a=s.util.toFixed,o=s.util.string.capitalize,c=s.util.degreesToRadians,d=!s.isLikelyNode,v=2;s.Object||(s.Object=s.util.createClass(s.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:d,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(p){p&&this.setOptions(p)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=s.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(p){var g=s.perfLimitSizeTotal,y=p.width,x=p.height,w=s.maxCacheSideLimit,b=s.minCacheSideLimit;if(y<=w&&x<=w&&y*x<=g)return y<b&&(p.width=b),x<b&&(p.height=b),p;var S=y/x,_=s.util.limitDimsByArea(S,g),C=s.util.capValue,T=C(b,_.x,w),O=C(b,_.y,w);return y>T&&(p.zoomX/=y/T,p.width=T,p.capped=!0),x>O&&(p.zoomY/=x/O,p.height=O,p.capped=!0),p},_getCacheCanvasDimensions:function(){var p=this.getTotalObjectScaling(),g=this._getTransformedDimensions(0,0),y=g.x*p.scaleX/this.scaleX,x=g.y*p.scaleY/this.scaleY;return{width:y+v,height:x+v,zoomX:p.scaleX,zoomY:p.scaleY,x:y,y:x}},_updateCacheCanvas:function(){var p=this.canvas;if(this.noScaleCache&&p&&p._currentTransform){var g=p._currentTransform.target,y=p._currentTransform.action;if(this===g&&y.slice&&y.slice(0,5)==="scale")return!1}var x=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),b=s.minCacheSideLimit,S=w.width,_=w.height,C,T,O=w.zoomX,L=w.zoomY,j=S!==this.cacheWidth||_!==this.cacheHeight,H=this.zoomX!==O||this.zoomY!==L,F=j||H,V=0,I=0,A=!1;if(j){var U=this._cacheCanvas.width,k=this._cacheCanvas.height,E=S>U||_>k,R=(S<U*.9||_<k*.9)&&U>b&&k>b;A=E||R,E&&!w.capped&&(S>b||_>b)&&(V=S*.1,I=_*.1)}return this instanceof s.Text&&this.path&&(F=!0,A=!0,V+=this.getHeightOfLine(0)*this.zoomX,I+=this.getHeightOfLine(0)*this.zoomY),F?(A?(x.width=Math.ceil(S+V),x.height=Math.ceil(_+I)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,x.width,x.height)),C=w.x/2,T=w.y/2,this.cacheTranslationX=Math.round(x.width/2-C)+C,this.cacheTranslationY=Math.round(x.height/2-T)+T,this.cacheWidth=S,this.cacheHeight=_,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(O,L),this.zoomX=O,this.zoomY=L,!0):!1},setOptions:function(p){this._setOptions(p),this._initGradient(p.fill,"fill"),this._initGradient(p.stroke,"stroke"),this._initPattern(p.fill,"fill"),this._initPattern(p.stroke,"stroke")},transform:function(p){var g=this.group&&!this.group._transformDone||this.group&&this.canvas&&p===this.canvas.contextTop,y=this.calcTransformMatrix(!g);p.transform(y[0],y[1],y[2],y[3],y[4],y[5])},toObject:function(p){var g=s.Object.NUM_FRACTION_DIGITS,y={type:this.type,version:s.version,originX:this.originX,originY:this.originY,left:a(this.left,g),top:a(this.top,g),width:a(this.width,g),height:a(this.height,g),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:a(this.strokeWidth,g),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:a(this.strokeMiterLimit,g),scaleX:a(this.scaleX,g),scaleY:a(this.scaleY,g),angle:a(this.angle,g),flipX:this.flipX,flipY:this.flipY,opacity:a(this.opacity,g),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:a(this.skewX,g),skewY:a(this.skewY,g)};return this.clipPath&&!this.clipPath.excludeFromExport&&(y.clipPath=this.clipPath.toObject(p),y.clipPath.inverted=this.clipPath.inverted,y.clipPath.absolutePositioned=this.clipPath.absolutePositioned),s.util.populateWithProperties(this,y,p),this.includeDefaultValues||(y=this._removeDefaultValues(y)),y},toDatalessObject:function(p){return this.toObject(p)},_removeDefaultValues:function(p){var g=s.util.getKlass(p.type).prototype,y=g.stateProperties;return y.forEach(function(x){x==="left"||x==="top"||(p[x]===g[x]&&delete p[x],Array.isArray(p[x])&&Array.isArray(g[x])&&p[x].length===0&&g[x].length===0&&delete p[x])}),p},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var p=s.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(p.scaleX),scaleY:Math.abs(p.scaleY)}},getTotalObjectScaling:function(){var p=this.getObjectScaling(),g=p.scaleX,y=p.scaleY;if(this.canvas){var x=this.canvas.getZoom(),w=this.canvas.getRetinaScaling();g*=x*w,y*=x*w}return{scaleX:g,scaleY:y}},getObjectOpacity:function(){var p=this.opacity;return this.group&&(p*=this.group.getObjectOpacity()),p},_set:function(p,g){var y=p==="scaleX"||p==="scaleY",x=this[p]!==g,w=!1;return y&&(g=this._constrainScale(g)),p==="scaleX"&&g<0?(this.flipX=!this.flipX,g*=-1):p==="scaleY"&&g<0?(this.flipY=!this.flipY,g*=-1):p==="shadow"&&g&&!(g instanceof s.Shadow)?g=new s.Shadow(g):p==="dirty"&&this.group&&this.group.set("dirty",g),this[p]=g,x&&(w=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(p)>-1?(this.dirty=!0,w&&this.group.set("dirty",!0)):w&&this.stateProperties.indexOf(p)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:s.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(p){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(p.save(),this._setupCompositeOperation(p),this.drawSelectionBackground(p),this.transform(p),this._setOpacity(p),this._setShadow(p,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(p)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(p),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),p.restore())},renderCache:function(p){p=p||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,p.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(p,g){if(p.save(),g.inverted?p.globalCompositeOperation="destination-out":p.globalCompositeOperation="destination-in",g.absolutePositioned){var y=s.util.invertTransform(this.calcTransformMatrix());p.transform(y[0],y[1],y[2],y[3],y[4],y[5])}g.transform(p),p.scale(1/g.zoomX,1/g.zoomY),p.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),p.restore()},drawObject:function(p,g){var y=this.fill,x=this.stroke;g?(this.fill="black",this.stroke="",this._setClippingProperties(p)):this._renderBackground(p),this._render(p),this._drawClipPath(p,this.clipPath),this.fill=y,this.stroke=x},_drawClipPath:function(p,g){g&&(g.canvas=this.canvas,g.shouldCache(),g._transformDone=!0,g.renderCache({forClipping:!0}),this.drawClipPathOnCache(p,g))},drawCacheOnCanvas:function(p){p.scale(1/this.zoomX,1/this.zoomY),p.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(p){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!p&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!p){var g=this.cacheWidth/this.zoomX,y=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-g/2,-y/2,g,y)}return!0}return!1},_renderBackground:function(p){if(this.backgroundColor){var g=this._getNonTransformedDimensions();p.fillStyle=this.backgroundColor,p.fillRect(-g.x/2,-g.y/2,g.x,g.y),this._removeShadow(p)}},_setOpacity:function(p){this.group&&!this.group._transformDone?p.globalAlpha=this.getObjectOpacity():p.globalAlpha*=this.opacity},_setStrokeStyles:function(p,g){var y=g.stroke;y&&(p.lineWidth=g.strokeWidth,p.lineCap=g.strokeLineCap,p.lineDashOffset=g.strokeDashOffset,p.lineJoin=g.strokeLineJoin,p.miterLimit=g.strokeMiterLimit,y.toLive?y.gradientUnits==="percentage"||y.gradientTransform||y.patternTransform?this._applyPatternForTransformedGradient(p,y):(p.strokeStyle=y.toLive(p,this),this._applyPatternGradientTransform(p,y)):p.strokeStyle=g.stroke)},_setFillStyles:function(p,g){var y=g.fill;y&&(y.toLive?(p.fillStyle=y.toLive(p,this),this._applyPatternGradientTransform(p,g.fill)):p.fillStyle=y)},_setClippingProperties:function(p){p.globalAlpha=1,p.strokeStyle="transparent",p.fillStyle="#000000"},_setLineDash:function(p,g){!g||g.length===0||(1&g.length&&g.push.apply(g,g),p.setLineDash(g))},_renderControls:function(p,g){var y=this.getViewportTransform(),x=this.calcTransformMatrix(),w,b,S;g=g||{},b=typeof g.hasBorders<"u"?g.hasBorders:this.hasBorders,S=typeof g.hasControls<"u"?g.hasControls:this.hasControls,x=s.util.multiplyTransformMatrices(y,x),w=s.util.qrDecompose(x),p.save(),p.translate(w.translateX,w.translateY),p.lineWidth=1*this.borderScaleFactor,this.group||(p.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(w.angle-=180),p.rotate(c(this.group?w.angle:this.angle)),g.forActiveSelection||this.group?b&&this.drawBordersInGroup(p,w,g):b&&this.drawBorders(p,g),S&&this.drawControls(p,g),p.restore()},_setShadow:function(p){if(this.shadow){var g=this.shadow,y=this.canvas,x,w=y&&y.viewportTransform[0]||1,b=y&&y.viewportTransform[3]||1;g.nonScaling?x={scaleX:1,scaleY:1}:x=this.getObjectScaling(),y&&y._isRetinaScaling()&&(w*=s.devicePixelRatio,b*=s.devicePixelRatio),p.shadowColor=g.color,p.shadowBlur=g.blur*s.browserShadowBlurConstant*(w+b)*(x.scaleX+x.scaleY)/4,p.shadowOffsetX=g.offsetX*w*x.scaleX,p.shadowOffsetY=g.offsetY*b*x.scaleY}},_removeShadow:function(p){this.shadow&&(p.shadowColor="",p.shadowBlur=p.shadowOffsetX=p.shadowOffsetY=0)},_applyPatternGradientTransform:function(p,g){if(!g||!g.toLive)return{offsetX:0,offsetY:0};var y=g.gradientTransform||g.patternTransform,x=-this.width/2+g.offsetX||0,w=-this.height/2+g.offsetY||0;return g.gradientUnits==="percentage"?p.transform(this.width,0,0,this.height,x,w):p.transform(1,0,0,1,x,w),y&&p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),{offsetX:x,offsetY:w}},_renderPaintInOrder:function(p){this.paintFirst==="stroke"?(this._renderStroke(p),this._renderFill(p)):(this._renderFill(p),this._renderStroke(p))},_render:function(){},_renderFill:function(p){this.fill&&(p.save(),this._setFillStyles(p,this),this.fillRule==="evenodd"?p.fill("evenodd"):p.fill(),p.restore())},_renderStroke:function(p){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(p),p.save(),this.strokeUniform&&this.group){var g=this.getObjectScaling();p.scale(1/g.scaleX,1/g.scaleY)}else this.strokeUniform&&p.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(p,this.strokeDashArray),this._setStrokeStyles(p,this),p.stroke(),p.restore()}},_applyPatternForTransformedGradient:function(p,g){var y=this._limitCacheSize(this._getCacheCanvasDimensions()),x=s.util.createCanvasElement(),w,b=this.canvas.getRetinaScaling(),S=y.x/this.scaleX/b,_=y.y/this.scaleY/b;x.width=Math.ceil(S),x.height=Math.ceil(_),w=x.getContext("2d"),w.beginPath(),w.moveTo(0,0),w.lineTo(S,0),w.lineTo(S,_),w.lineTo(0,_),w.closePath(),w.translate(S/2,_/2),w.scale(y.zoomX/this.scaleX/b,y.zoomY/this.scaleY/b),this._applyPatternGradientTransform(w,g),w.fillStyle=g.toLive(p),w.fill(),p.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),p.scale(b*this.scaleX/y.zoomX,b*this.scaleY/y.zoomY),p.strokeStyle=w.createPattern(x,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var p=s.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",p.scaleX),this.set("scaleY",p.scaleY),this.angle=p.angle,this.skewX=p.skewX,this.skewY=0}},_removeTransformMatrix:function(p){var g=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),g=s.util.transformPoint(g,this.transformMatrix)),this.transformMatrix=null,p&&(this.scaleX*=p.scaleX,this.scaleY*=p.scaleY,this.cropX=p.cropX,this.cropY=p.cropY,g.x+=p.offsetLeft,g.y+=p.offsetTop,this.width=p.width,this.height=p.height),this.setPositionByOrigin(g,"center","center")},clone:function(p,g){var y=this.toObject(g);this.constructor.fromObject?this.constructor.fromObject(y,p):s.Object._fromObject("Object",y,p)},cloneAsImage:function(p,g){var y=this.toCanvasElement(g);return p&&p(new s.Image(y)),this},toCanvasElement:function(p){p||(p={});var g=s.util,y=g.saveObjectTransform(this),x=this.group,w=this.shadow,b=Math.abs,S=(p.multiplier||1)*(p.enableRetinaScaling?s.devicePixelRatio:1);delete this.group,p.withoutTransform&&g.resetObjectTransform(this),p.withoutShadow&&(this.shadow=null);var _=s.util.createCanvasElement(),C=this.getBoundingRect(!0,!0),T=this.shadow,O,L={x:0,y:0},j,H,F;T&&(j=T.blur,T.nonScaling?O={scaleX:1,scaleY:1}:O=this.getObjectScaling(),L.x=2*Math.round(b(T.offsetX)+j)*b(O.scaleX),L.y=2*Math.round(b(T.offsetY)+j)*b(O.scaleY)),H=C.width+L.x,F=C.height+L.y,_.width=Math.ceil(H),_.height=Math.ceil(F);var V=new s.StaticCanvas(_,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});p.format==="jpeg"&&(V.backgroundColor="#fff"),this.setPositionByOrigin(new s.Point(V.width/2,V.height/2),"center","center");var I=this.canvas;V.add(this);var A=V.toCanvasElement(S||1,p);return this.shadow=w,this.set("canvas",I),x&&(this.group=x),this.set(y).setCoords(),V._objects=[],V.dispose(),V=null,A},toDataURL:function(p){return p||(p={}),s.util.toDataURL(this.toCanvasElement(p),p.format||"png",p.quality||1)},isType:function(p){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===p},complexity:function(){return 1},toJSON:function(p){return this.toObject(p)},rotate:function(p){var g=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return g&&this._setOriginToCenter(),this.set("angle",p),g&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(p,g){g=g||this.canvas.getPointer(p);var y=new s.Point(g.x,g.y),x=this._getLeftTopCoords();return this.angle&&(y=s.util.rotatePoint(y,x,c(-this.angle))),{x:y.x-x.x,y:y.y-x.y}},_setupCompositeOperation:function(p){this.globalCompositeOperation&&(p.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){s.runningAnimations&&s.runningAnimations.cancelByTarget(this)}}),s.util.createAccessors&&s.util.createAccessors(s.Object),h(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.ENLIVEN_PROPS=["clipPath"],s.Object._fromObject=function(p,g,y,x){var w=s[p];g=f(g,!0),s.util.enlivenPatterns([g.fill,g.stroke],function(b){typeof b[0]<"u"&&(g.fill=b[0]),typeof b[1]<"u"&&(g.stroke=b[1]),s.util.enlivenObjectEnlivables(g,g,function(){var S=x?new w(g[x],g):new w(g);y&&y(S)})})},s.Object.__uid=0)}(t),function(){var l=e.util.degreesToRadians,s={left:-.5,center:0,right:.5},h={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(f,a,o,c,d){var v=f.x,p=f.y,g,y,x;return typeof a=="string"?a=s[a]:a-=.5,typeof c=="string"?c=s[c]:c-=.5,g=c-a,typeof o=="string"?o=h[o]:o-=.5,typeof d=="string"?d=h[d]:d-=.5,y=d-o,(g||y)&&(x=this._getTransformedDimensions(),v=f.x+g*x.x,p=f.y+y*x.y),new e.Point(v,p)},translateToCenterPoint:function(f,a,o){var c=this.translateToGivenOrigin(f,a,o,"center","center");return this.angle?e.util.rotatePoint(c,f,l(this.angle)):c},translateToOriginPoint:function(f,a,o){var c=this.translateToGivenOrigin(f,"center","center",a,o);return this.angle?e.util.rotatePoint(c,f,l(this.angle)):c},getCenterPoint:function(){var f=new e.Point(this.left,this.top);return this.translateToCenterPoint(f,this.originX,this.originY)},getPointByOrigin:function(f,a){var o=this.getCenterPoint();return this.translateToOriginPoint(o,f,a)},toLocalPoint:function(f,a,o){var c=this.getCenterPoint(),d,v;return typeof a<"u"&&typeof o<"u"?d=this.translateToGivenOrigin(c,"center","center",a,o):d=new e.Point(this.left,this.top),v=new e.Point(f.x,f.y),this.angle&&(v=e.util.rotatePoint(v,c,-l(this.angle))),v.subtractEquals(d)},setPositionByOrigin:function(f,a,o){var c=this.translateToCenterPoint(f,a,o),d=this.translateToOriginPoint(c,this.originX,this.originY);this.set("left",d.x),this.set("top",d.y)},adjustPosition:function(f){var a=l(this.angle),o=this.getScaledWidth(),c=e.util.cos(a)*o,d=e.util.sin(a)*o,v,p;typeof this.originX=="string"?v=s[this.originX]:v=this.originX-.5,typeof f=="string"?p=s[f]:p=f-.5,this.left+=c*(p-v),this.top+=d*(p-v),this.setCoords(),this.originX=f},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var f=this.getCenterPoint();this.originX="center",this.originY="center",this.left=f.x,this.top=f.y},_resetOrigin:function(){var f=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=f.x,this.top=f.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function l(o){return[new e.Point(o.tl.x,o.tl.y),new e.Point(o.tr.x,o.tr.y),new e.Point(o.br.x,o.br.y),new e.Point(o.bl.x,o.bl.y)]}var s=e.util,h=s.degreesToRadians,f=s.multiplyTransformMatrices,a=s.transformPoint;s.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(o,c){return c?o?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),o?this.aCoords:this.lineCoords)},getCoords:function(o,c){return l(this._getCoords(o,c))},intersectsWithRect:function(o,c,d,v){var p=this.getCoords(d,v),g=e.Intersection.intersectPolygonRectangle(p,o,c);return g.status==="Intersection"},intersectsWithObject:function(o,c,d){var v=e.Intersection.intersectPolygonPolygon(this.getCoords(c,d),o.getCoords(c,d));return v.status==="Intersection"||o.isContainedWithinObject(this,c,d)||this.isContainedWithinObject(o,c,d)},isContainedWithinObject:function(o,c,d){for(var v=this.getCoords(c,d),p=c?o.aCoords:o.lineCoords,g=0,y=o._getImageLines(p);g<4;g++)if(!o.containsPoint(v[g],y))return!1;return!0},isContainedWithinRect:function(o,c,d,v){var p=this.getBoundingRect(d,v);return p.left>=o.x&&p.left+p.width<=c.x&&p.top>=o.y&&p.top+p.height<=c.y},containsPoint:function(o,g,d,v){var p=this._getCoords(d,v),g=g||this._getImageLines(p),y=this._findCrossPoints(o,g);return y!==0&&y%2===1},isOnScreen:function(o){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br,v=this.getCoords(!0,o);return v.some(function(p){return p.x<=d.x&&p.x>=c.x&&p.y<=d.y&&p.y>=c.y})||this.intersectsWithRect(c,d,!0,o)?!0:this._containsCenterOfCanvas(c,d,o)},_containsCenterOfCanvas:function(o,c,d){var v={x:(o.x+c.x)/2,y:(o.y+c.y)/2};return!!this.containsPoint(v,null,!0,d)},isPartiallyOnScreen:function(o){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,d=this.canvas.vptCoords.br;if(this.intersectsWithRect(c,d,!0,o))return!0;var v=this.getCoords(!0,o).every(function(p){return(p.x>=d.x||p.x<=c.x)&&(p.y>=d.y||p.y<=c.y)});return v&&this._containsCenterOfCanvas(c,d,o)},_getImageLines:function(o){var c={topline:{o:o.tl,d:o.tr},rightline:{o:o.tr,d:o.br},bottomline:{o:o.br,d:o.bl},leftline:{o:o.bl,d:o.tl}};return c},_findCrossPoints:function(o,c){var d,v,p,g,y,x=0,w;for(var b in c)if(w=c[b],!(w.o.y<o.y&&w.d.y<o.y)&&!(w.o.y>=o.y&&w.d.y>=o.y)&&(w.o.x===w.d.x&&w.o.x>=o.x?y=w.o.x:(d=0,v=(w.d.y-w.o.y)/(w.d.x-w.o.x),p=o.y-d*o.x,g=w.o.y-v*w.o.x,y=-(p-g)/(d-v)),y>=o.x&&(x+=1),x===2))break;return x},getBoundingRect:function(o,c){var d=this.getCoords(o,c);return s.makeBoundingBoxFromPoints(d)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(o){return Math.abs(o)<this.minScaleLimit?o<0?-this.minScaleLimit:this.minScaleLimit:o===0?1e-4:o},scale:function(o){return this._set("scaleX",o),this._set("scaleY",o),this.setCoords()},scaleToWidth:function(o,c){var d=this.getBoundingRect(c).width/this.getScaledWidth();return this.scale(o/this.width/d)},scaleToHeight:function(o,c){var d=this.getBoundingRect(c).height/this.getScaledHeight();return this.scale(o/this.height/d)},calcLineCoords:function(){var o=this.getViewportTransform(),c=this.padding,d=h(this.angle),v=s.cos(d),p=s.sin(d),g=v*c,y=p*c,x=g+y,w=g-y,b=this.calcACoords(),S={tl:a(b.tl,o),tr:a(b.tr,o),bl:a(b.bl,o),br:a(b.br,o)};return c&&(S.tl.x-=w,S.tl.y-=x,S.tr.x+=x,S.tr.y-=w,S.bl.x-=x,S.bl.y+=w,S.br.x+=w,S.br.y+=x),S},calcOCoords:function(){var o=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),d=this.getViewportTransform(),v=f(d,c),p=f(v,o),p=f(p,[1/d[0],0,0,1/d[3],0,0]),g=this._calculateCurrentDimensions(),y={};return this.forEachControl(function(x,w,b){y[w]=x.positionHandler(g,p,b)}),y},calcACoords:function(){var o=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),d=f(c,o),v=this._getTransformedDimensions(),p=v.x/2,g=v.y/2;return{tl:a({x:-p,y:-g},d),tr:a({x:p,y:-g},d),bl:a({x:-p,y:g},d),br:a({x:p,y:g},d)}},setCoords:function(o){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),o?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return s.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var o=this.getCenterPoint();return[1,0,0,1,o.x,o.y]},transformMatrixKey:function(o){var c="_",d="";return!o&&this.group&&(d=this.group.transformMatrixKey(o)+c),d+this.top+c+this.left+c+this.scaleX+c+this.scaleY+c+this.skewX+c+this.skewY+c+this.angle+c+this.originX+c+this.originY+c+this.width+c+this.height+c+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(o){var c=this.calcOwnMatrix();if(o||!this.group)return c;var d=this.transformMatrixKey(o),v=this.matrixCache||(this.matrixCache={});return v.key===d?v.value:(this.group&&(c=f(this.group.calcTransformMatrix(!1),c)),v.key=d,v.value=c,c)},calcOwnMatrix:function(){var o=this.transformMatrixKey(!0),c=this.ownMatrixCache||(this.ownMatrixCache={});if(c.key===o)return c.value;var d=this._calcTranslateMatrix(),v={angle:this.angle,translateX:d[4],translateY:d[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return c.key=o,c.value=s.composeMatrix(v),c.value},_getNonTransformedDimensions:function(){var o=this.strokeWidth,c=this.width+o,d=this.height+o;return{x:c,y:d}},_getTransformedDimensions:function(o,c){typeof o>"u"&&(o=this.skewX),typeof c>"u"&&(c=this.skewY);var d,v,p,g=o===0&&c===0;if(this.strokeUniform?(v=this.width,p=this.height):(d=this._getNonTransformedDimensions(),v=d.x,p=d.y),g)return this._finalizeDimensions(v*this.scaleX,p*this.scaleY);var y=s.sizeAfterTransform(v,p,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:o,skewY:c});return this._finalizeDimensions(y.x,y.y)},_finalizeDimensions:function(o,c){return this.strokeUniform?{x:o+this.strokeWidth,y:c+this.strokeWidth}:{x:o,y:c}},_calculateCurrentDimensions:function(){var o=this.getViewportTransform(),c=this._getTransformedDimensions(),d=a(c,o,!0);return d.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(l){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,l):this.canvas&&this.canvas.sendBackwards(this,l),this},bringForward:function(l){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,l):this.canvas&&this.canvas.bringForward(this,l),this},moveTo:function(l){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,l):this.canvas&&this.canvas.moveTo(this,l),this}}),function(){function l(h,f){if(f){if(f.toLive)return h+": url(#SVGID_"+f.id+"); ";var a=new e.Color(f),o=h+": "+a.toRgb()+"; ",c=a.getAlpha();return c!==1&&(o+=h+"-opacity: "+c.toString()+"; "),o}else return h+": none; "}var s=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(h){var f=this.fillRule?this.fillRule:"nonzero",a=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",c=this.strokeDashOffset?this.strokeDashOffset:"0",d=this.strokeLineCap?this.strokeLineCap:"butt",v=this.strokeLineJoin?this.strokeLineJoin:"miter",p=this.strokeMiterLimit?this.strokeMiterLimit:"4",g=typeof this.opacity<"u"?this.opacity:"1",y=this.visible?"":" visibility: hidden;",x=h?"":this.getSvgFilter(),w=l("fill",this.fill),b=l("stroke",this.stroke);return[b,"stroke-width: ",a,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",d,"; ","stroke-dashoffset: ",c,"; ","stroke-linejoin: ",v,"; ","stroke-miterlimit: ",p,"; ",w,"fill-rule: ",f,"; ","opacity: ",g,";",x,y].join("")},getSvgSpanStyles:function(h,f){var a="; ",c=h.fontFamily?"font-family: "+(h.fontFamily.indexOf("'")===-1&&h.fontFamily.indexOf('"')===-1?"'"+h.fontFamily+"'":h.fontFamily)+a:"",o=h.strokeWidth?"stroke-width: "+h.strokeWidth+a:"",c=c,d=h.fontSize?"font-size: "+h.fontSize+"px"+a:"",v=h.fontStyle?"font-style: "+h.fontStyle+a:"",p=h.fontWeight?"font-weight: "+h.fontWeight+a:"",g=h.fill?l("fill",h.fill):"",y=h.stroke?l("stroke",h.stroke):"",x=this.getSvgTextDecoration(h),w=h.deltaY?"baseline-shift: "+-h.deltaY+"; ":"";return x&&(x="text-decoration: "+x+a),[y,o,c,d,v,p,x,g,w,f?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(h){return["overline","underline","line-through"].filter(function(f){return h[f.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(h,f){var a=h?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+e.util.matrixToSVG(a);return o+(f||"")+'" '},_setSVGBg:function(h){if(this.backgroundColor){var f=e.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',s(-this.width/2,f),'" y="',s(-this.height/2,f),'" width="',s(this.width,f),'" height="',s(this.height,f),`"></rect>
`)}},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(h),{reviver:h})},toClipPathSVG:function(h){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(h),{reviver:h})},_createBaseClipPathSVGMarkup:function(h,f){f=f||{};var a=f.reviver,o=f.additionalTransform||"",c=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),d=h.indexOf("COMMON_PARTS");return h[d]=c,a?a(h.join("")):h.join("")},_createBaseSVGMarkup:function(h,f){f=f||{};var a=f.noStyle,o=f.reviver,c=a?"":'style="'+this.getSvgStyles()+'" ',d=f.withShadow?'style="'+this.getSvgFilter()+'" ':"",v=this.clipPath,p=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",g=v&&v.absolutePositioned,y=this.stroke,x=this.fill,w=this.shadow,b,S=[],_,C=h.indexOf("COMMON_PARTS"),T=f.additionalTransform;return v&&(v.clipPathId="CLIPPATH_"+e.Object.__uid++,_='<clipPath id="'+v.clipPathId+`" >
`+v.toClipPathSVG(o)+`</clipPath>
`),g&&S.push("<g ",d,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),g?"":d+this.getSvgCommons(),` >
`),b=[c,p,a?"":this.addPaintOrder()," ",T?'transform="'+T+'" ':""].join(""),h[C]=b,x&&x.toLive&&S.push(x.toSVG(this)),y&&y.toLive&&S.push(y.toSVG(this)),w&&S.push(w.toSVG(this)),v&&S.push(_),S.push(h.join("")),S.push(`</g>
`),g&&S.push(`</g>
`),o?o(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var l=e.util.object.extend,s="stateProperties";function h(a,o,c){var d={},v=!0;c.forEach(function(p){d[p]=a[p]}),l(a[o],d,v)}function f(a,o,c){if(a===o)return!0;if(Array.isArray(a)){if(!Array.isArray(o)||a.length!==o.length)return!1;for(var d=0,v=a.length;d<v;d++)if(!f(a[d],o[d]))return!1;return!0}else if(a&&typeof a=="object"){var p=Object.keys(a),g;if(!o||typeof o!="object"||!c&&p.length!==Object.keys(o).length)return!1;for(var d=0,v=p.length;d<v;d++)if(g=p[d],!(g==="canvas"||g==="group")&&!f(a[g],o[g]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(a){a=a||s;var o="_"+a;return Object.keys(this[o]).length<this[a].length?!0:!f(this[o],this,!0)},saveState:function(a){var o=a&&a.propertySet||s,c="_"+o;return this[c]?(h(this,c,this[o]),a&&a.stateProperties&&h(this,c,a.stateProperties),this):this.setupState(a)},setupState:function(a){a=a||{};var o=a.propertySet||s;return a.propertySet=o,this["_"+o]={},this.saveState(a),this}})}(),function(){var l=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(s,h){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var f=s.x,a=s.y,o,c,d=Object.keys(this.oCoords),v=d.length-1,p;for(this.__corner=0;v>=0;v--)if(p=d[v],!!this.isControlVisible(p)&&(c=this._getImageLines(h?this.oCoords[p].touchCorner:this.oCoords[p].corner),o=this._findCrossPoints({x:f,y:a},c),o!==0&&o%2===1))return this.__corner=p,p;return!1},forEachControl:function(s){for(var h in this.controls)s(this.controls[h],h,this)},_setCornerCoords:function(){var s=this.oCoords;for(var h in s){var f=this.controls[h];s[h].corner=f.calcCornerCoords(this.angle,this.cornerSize,s[h].x,s[h].y,!1),s[h].touchCorner=f.calcCornerCoords(this.angle,this.touchCornerSize,s[h].x,s[h].y,!0)}},drawSelectionBackground:function(s){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;s.save();var h=this.getCenterPoint(),f=this._calculateCurrentDimensions(),a=this.canvas.viewportTransform;return s.translate(h.x,h.y),s.scale(1/a[0],1/a[3]),s.rotate(l(this.angle)),s.fillStyle=this.selectionBackgroundColor,s.fillRect(-f.x/2,-f.y/2,f.x,f.y),s.restore(),this},drawBorders:function(s,h){h=h||{};var f=this._calculateCurrentDimensions(),a=this.borderScaleFactor,o=f.x+a,c=f.y+a,d=typeof h.hasControls<"u"?h.hasControls:this.hasControls,v=!1;return s.save(),s.strokeStyle=h.borderColor||this.borderColor,this._setLineDash(s,h.borderDashArray||this.borderDashArray),s.strokeRect(-o/2,-c/2,o,c),d&&(s.beginPath(),this.forEachControl(function(p,g,y){p.withConnection&&p.getVisibility(y,g)&&(v=!0,s.moveTo(p.x*o,p.y*c),s.lineTo(p.x*o+p.offsetX,p.y*c+p.offsetY))}),v&&s.stroke()),s.restore(),this},drawBordersInGroup:function(s,h,f){f=f||{};var a=e.util.sizeAfterTransform(this.width,this.height,h),o=this.strokeWidth,c=this.strokeUniform,d=this.borderScaleFactor,v=a.x+o*(c?this.canvas.getZoom():h.scaleX)+d,p=a.y+o*(c?this.canvas.getZoom():h.scaleY)+d;return s.save(),this._setLineDash(s,f.borderDashArray||this.borderDashArray),s.strokeStyle=f.borderColor||this.borderColor,s.strokeRect(-v/2,-p/2,v,p),s.restore(),this},drawControls:function(s,h){h=h||{},s.save();var f=1,a,o;return this.canvas&&(f=this.canvas.getRetinaScaling()),s.setTransform(f,0,0,f,0,0),s.strokeStyle=s.fillStyle=h.cornerColor||this.cornerColor,this.transparentCorners||(s.strokeStyle=h.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(s,h.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(a=this.group.calcTransformMatrix()),this.forEachControl(function(c,d,v){o=v.oCoords[d],c.getVisibility(v,d)&&(a&&(o=e.util.transformPoint(o,a)),c.render(s,o.x,o.y,h,v))}),s.restore(),this},isControlVisible:function(s){return this.controls[s]&&this.controls[s].getVisibility(this,s)},setControlVisible:function(s,h){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[s]=h,this},setControlsVisibility:function(s){s||(s={});for(var h in s)this.setControlVisible(h,s[h]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(l,s){s=s||{};var h=function(){},f=s.onComplete||h,a=s.onChange||h,o=this;return e.util.animate({target:this,startValue:l.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(c){l.set("left",c),o.requestRenderAll(),a()},onComplete:function(){l.setCoords(),f()}})},fxCenterObjectV:function(l,s){s=s||{};var h=function(){},f=s.onComplete||h,a=s.onChange||h,o=this;return e.util.animate({target:this,startValue:l.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(c){l.set("top",c),o.requestRenderAll(),a()},onComplete:function(){l.setCoords(),f()}})},fxRemove:function(l,s){s=s||{};var h=function(){},f=s.onComplete||h,a=s.onChange||h,o=this;return e.util.animate({target:this,startValue:l.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(c){l.set("opacity",c),o.requestRenderAll(),a()},onComplete:function(){o.remove(l),f()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var l=[],s,h,f=[];for(s in arguments[0])l.push(s);for(var a=0,o=l.length;a<o;a++)s=l[a],h=a!==o-1,f.push(this._animate(s,arguments[0][s],arguments[1],h));return f}else return this._animate.apply(this,arguments)},_animate:function(l,s,h,f){var a=this,o;s=s.toString(),h?h=e.util.object.clone(h):h={},~l.indexOf(".")&&(o=l.split("."));var c=a.colorProperties.indexOf(l)>-1||o&&a.colorProperties.indexOf(o[1])>-1,d=o?this.get(o[0])[o[1]]:this.get(l);"from"in h||(h.from=d),c||(~s.indexOf("=")?s=d+parseFloat(s.replace("=","")):s=parseFloat(s));var v={target:this,startValue:h.from,endValue:s,byValue:h.by,easing:h.easing,duration:h.duration,abort:h.abort&&function(p,g,y){return h.abort.call(a,p,g,y)},onChange:function(p,g,y){o?a[o[0]][o[1]]=p:a.set(l,p),!f&&h.onChange&&h.onChange(p,g,y)},onComplete:function(p,g,y){f||(a.setCoords(),h.onComplete&&h.onComplete(p,g,y))}};return c?e.util.animateColor(v.startValue,v.endValue,v.duration,v):e.util.animate(v)}}),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend,f=s.util.object.clone,a={x1:1,x2:1,y1:1,y2:1};if(s.Line){s.warn("fabric.Line is already defined");return}s.Line=s.util.createClass(s.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:s.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(c,d){c||(c=[0,0,0,0]),this.callSuper("initialize",d),this.set("x1",c[0]),this.set("y1",c[1]),this.set("x2",c[2]),this.set("y2",c[3]),this._setWidthHeight(d)},_setWidthHeight:function(c){c||(c={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in c?c.left:this._getLeftToOriginX(),this.top="top"in c?c.top:this._getTopToOriginY()},_set:function(c,d){return this.callSuper("_set",c,d),typeof a[c]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(c){c.beginPath();var d=this.calcLinePoints();c.moveTo(d.x1,d.y1),c.lineTo(d.x2,d.y2),c.lineWidth=this.strokeWidth;var v=c.strokeStyle;c.strokeStyle=this.stroke||c.fillStyle,this.stroke&&this._renderStroke(c),c.strokeStyle=v},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(c){return h(this.callSuper("toObject",c),this.calcLinePoints())},_getNonTransformedDimensions:function(){var c=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(c.y-=this.strokeWidth),this.height===0&&(c.x-=this.strokeWidth)),c},calcLinePoints:function(){var c=this.x1<=this.x2?-1:1,d=this.y1<=this.y2?-1:1,v=c*this.width*.5,p=d*this.height*.5,g=c*this.width*-.5,y=d*this.height*-.5;return{x1:v,x2:g,y1:p,y2:y}},_toSVG:function(){var c=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`" />
`]}}),s.Line.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),s.Line.fromElement=function(c,d,v){v=v||{};var p=s.parseAttributes(c,s.Line.ATTRIBUTE_NAMES),g=[p.x1||0,p.y1||0,p.x2||0,p.y2||0];d(new s.Line(g,h(p,v)))},s.Line.fromObject=function(c,d){function v(g){delete g.points,d&&d(g)}var p=f(c,!0);p.points=[c.x1,c.y1,c.x2,c.y2],s.Object._fromObject("Line",p,v,"points")};function o(c,d){var v=c.origin,p=c.axis1,g=c.axis2,y=c.dimension,x=d.nearest,w=d.center,b=d.farthest;return function(){switch(this.get(v)){case x:return Math.min(this.get(p),this.get(g));case w:return Math.min(this.get(p),this.get(g))+.5*this.get(y);case b:return Math.max(this.get(p),this.get(g))}}}}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.degreesToRadians;if(s.Circle){s.warn("fabric.Circle is already defined.");return}s.Circle=s.util.createClass(s.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:s.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(a,o){return this.callSuper("_set",a,o),a==="radius"&&this.setRadius(o),this},toObject:function(a){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(a))},_toSVG:function(){var a,o=0,c=0,d=(this.endAngle-this.startAngle)%360;if(d===0)a=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+c+'" ','r="',this.radius,`" />
`];else{var v=h(this.startAngle),p=h(this.endAngle),g=this.radius,y=s.util.cos(v)*g,x=s.util.sin(v)*g,w=s.util.cos(p)*g,b=s.util.sin(p)*g,S=d>180?"1":"0";a=['<path d="M '+y+" "+x," A "+g+" "+g," 0 ",+S+" 1"," "+w+" "+b,'" ',"COMMON_PARTS",` />
`]}return a},_render:function(a){a.beginPath(),a.arc(0,0,this.radius,h(this.startAngle),h(this.endAngle),!1),this._renderPaintInOrder(a)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(a){return this.radius=a,this.set("width",a*2).set("height",a*2)}}),s.Circle.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),s.Circle.fromElement=function(a,o){var c=s.parseAttributes(a,s.Circle.ATTRIBUTE_NAMES);if(!f(c))throw new Error("value of `r` attribute is required and can not be negative");c.left=(c.left||0)-c.radius,c.top=(c.top||0)-c.radius,o(new s.Circle(c))};function f(a){return"radius"in a&&a.radius>=0}s.Circle.fromObject=function(a,o){s.Object._fromObject("Circle",a,o)}}(t),function(l){var s=l.fabric||(l.fabric={});if(s.Triangle){s.warn("fabric.Triangle is already defined");return}s.Triangle=s.util.createClass(s.Object,{type:"triangle",width:100,height:100,_render:function(h){var f=this.width/2,a=this.height/2;h.beginPath(),h.moveTo(-f,a),h.lineTo(0,-a),h.lineTo(f,a),h.closePath(),this._renderPaintInOrder(h)},_toSVG:function(){var h=this.width/2,f=this.height/2,a=[-h+" "+f,"0 "+-f,h+" "+f].join(",");return["<polygon ","COMMON_PARTS",'points="',a,'" />']}}),s.Triangle.fromObject=function(h,f){return s.Object._fromObject("Triangle",h,f)}}(t),function(l){var s=l.fabric||(l.fabric={}),h=Math.PI*2;if(s.Ellipse){s.warn("fabric.Ellipse is already defined.");return}s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this.set("rx",f&&f.rx||0),this.set("ry",f&&f.ry||0)},_set:function(f,a){switch(this.callSuper("_set",f,a),f){case"rx":this.rx=a,this.set("width",a*2);break;case"ry":this.ry=a,this.set("height",a*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(f){f.beginPath(),f.save(),f.transform(1,0,0,this.ry/this.rx,0,0),f.arc(0,0,this.rx,0,h,!1),f.restore(),this._renderPaintInOrder(f)}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(f,a){var o=s.parseAttributes(f,s.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,a(new s.Ellipse(o))},s.Ellipse.fromObject=function(f,a){s.Object._fromObject("Ellipse",f,a)}}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend;if(s.Rect){s.warn("fabric.Rect is already defined");return}s.Rect=s.util.createClass(s.Object,{stateProperties:s.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:s.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(f){this.callSuper("initialize",f),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(f){var a=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,d=this.height,v=-this.width/2,p=-this.height/2,g=a!==0||o!==0,y=1-.5522847498;f.beginPath(),f.moveTo(v+a,p),f.lineTo(v+c-a,p),g&&f.bezierCurveTo(v+c-y*a,p,v+c,p+y*o,v+c,p+o),f.lineTo(v+c,p+d-o),g&&f.bezierCurveTo(v+c,p+d-y*o,v+c-y*a,p+d,v+c-a,p+d),f.lineTo(v+a,p+d),g&&f.bezierCurveTo(v+y*a,p+d,v,p+d-y*o,v,p+d-o),f.lineTo(v,p+o),g&&f.bezierCurveTo(v,p+y*o,v+y*a,p,v+a,p),f.closePath(),this._renderPaintInOrder(f)},toObject:function(f){return this.callSuper("toObject",["rx","ry"].concat(f))},_toSVG:function(){var f=-this.width/2,a=-this.height/2;return["<rect ","COMMON_PARTS",'x="',f,'" y="',a,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),s.Rect.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),s.Rect.fromElement=function(f,a,o){if(!f)return a(null);o=o||{};var c=s.parseAttributes(f,s.Rect.ATTRIBUTE_NAMES);c.left=c.left||0,c.top=c.top||0,c.height=c.height||0,c.width=c.width||0;var d=new s.Rect(h(o?s.util.object.clone(o):{},c));d.visible=d.visible&&d.width>0&&d.height>0,a(d)},s.Rect.fromObject=function(f,a){return s.Object._fromObject("Rect",f,a)}}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend,f=s.util.array.min,a=s.util.array.max,o=s.util.toFixed,c=s.util.projectStrokeOnPoints;if(s.Polyline){s.warn("fabric.Polyline is already defined");return}s.Polyline=s.util.createClass(s.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:s.Object.prototype.cacheProperties.concat("points"),initialize:function(d,v){v=v||{},this.points=d||[],this.callSuper("initialize",v),this._setPositionDimensions(v)},_projectStrokeOnPoints:function(){return c(this.points,this,!0)},_setPositionDimensions:function(d){var v=this._calcDimensions(d),p,g=this.exactBoundingBox?this.strokeWidth:0;this.width=v.width-g,this.height=v.height-g,d.fromSVG||(p=this.translateToGivenOrigin({x:v.left-this.strokeWidth/2+g/2,y:v.top-this.strokeWidth/2+g/2},"left","top",this.originX,this.originY)),typeof d.left>"u"&&(this.left=d.fromSVG?v.left:p.x),typeof d.top>"u"&&(this.top=d.fromSVG?v.top:p.y),this.pathOffset={x:v.left+this.width/2+g/2,y:v.top+this.height/2+g/2}},_calcDimensions:function(){var d=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,v=f(d,"x")||0,p=f(d,"y")||0,g=a(d,"x")||0,y=a(d,"y")||0,x=g-v,w=y-p;return{left:v,top:p,width:x,height:w}},toObject:function(d){return h(this.callSuper("toObject",d),{points:this.points.concat()})},_toSVG:function(){for(var d=[],v=this.pathOffset.x,p=this.pathOffset.y,g=s.Object.NUM_FRACTION_DIGITS,y=0,x=this.points.length;y<x;y++)d.push(o(this.points[y].x-v,g),",",o(this.points[y].y-p,g)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',d.join(""),`" />
`]},commonRender:function(d){var v,p=this.points.length,g=this.pathOffset.x,y=this.pathOffset.y;if(!p||isNaN(this.points[p-1].y))return!1;d.beginPath(),d.moveTo(this.points[0].x-g,this.points[0].y-y);for(var x=0;x<p;x++)v=this.points[x],d.lineTo(v.x-g,v.y-y);return!0},_render:function(d){this.commonRender(d)&&this._renderPaintInOrder(d)},complexity:function(){return this.get("points").length}}),s.Polyline.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polyline.fromElementGenerator=function(d){return function(v,p,g){if(!v)return p(null);g||(g={});var y=s.parsePointsAttribute(v.getAttribute("points")),x=s.parseAttributes(v,s[d].ATTRIBUTE_NAMES);x.fromSVG=!0,p(new s[d](y,h(x,g)))}},s.Polyline.fromElement=s.Polyline.fromElementGenerator("Polyline"),s.Polyline.fromObject=function(d,v){return s.Object._fromObject("Polyline",d,v,"points")}}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.projectStrokeOnPoints;if(s.Polygon){s.warn("fabric.Polygon is already defined");return}s.Polygon=s.util.createClass(s.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return h(this.points,this)},_render:function(f){this.commonRender(f)&&(f.closePath(),this._renderPaintInOrder(f))}}),s.Polygon.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(),s.Polygon.fromElement=s.Polyline.fromElementGenerator("Polygon"),s.Polygon.fromObject=function(f,a){s.Object._fromObject("Polygon",f,a,"points")}}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.array.min,f=s.util.array.max,a=s.util.object.extend,o=s.util.object.clone,c=s.util.toFixed;if(s.Path){s.warn("fabric.Path is already defined");return}s.Path=s.util.createClass(s.Object,{type:"path",path:null,cacheProperties:s.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:s.Object.prototype.stateProperties.concat("path"),initialize:function(d,v){v=o(v||{}),delete v.path,this.callSuper("initialize",v),this._setPath(d||[],v)},_setPath:function(d,v){this.path=s.util.makePathSimpler(Array.isArray(d)?d:s.util.parsePath(d)),s.Polyline.prototype._setPositionDimensions.call(this,v||{})},_renderPathCommands:function(d){var v,p=0,g=0,y=0,x=0,w=0,b=0,S=-this.pathOffset.x,_=-this.pathOffset.y;d.beginPath();for(var C=0,T=this.path.length;C<T;++C)switch(v=this.path[C],v[0]){case"L":y=v[1],x=v[2],d.lineTo(y+S,x+_);break;case"M":y=v[1],x=v[2],p=y,g=x,d.moveTo(y+S,x+_);break;case"C":y=v[5],x=v[6],w=v[3],b=v[4],d.bezierCurveTo(v[1]+S,v[2]+_,w+S,b+_,y+S,x+_);break;case"Q":d.quadraticCurveTo(v[1]+S,v[2]+_,v[3]+S,v[4]+_),y=v[3],x=v[4],w=v[1],b=v[2];break;case"z":case"Z":y=p,x=g,d.closePath();break}},_render:function(d){this._renderPathCommands(d),this._renderPaintInOrder(d)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(d){return a(this.callSuper("toObject",d),{path:this.path.map(function(v){return v.slice()})})},toDatalessObject:function(d){var v=this.toObject(["sourcePath"].concat(d));return v.sourcePath&&delete v.path,v},_toSVG:function(){var d=s.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',d,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var d=s.Object.NUM_FRACTION_DIGITS;return" translate("+c(-this.pathOffset.x,d)+", "+c(-this.pathOffset.y,d)+")"},toClipPathSVG:function(d){var v=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:d,additionalTransform:v})},toSVG:function(d){var v=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:d,additionalTransform:v})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var d=[],v=[],p,g=0,y=0,x=0,w=0,b,S=0,_=this.path.length;S<_;++S){switch(p=this.path[S],p[0]){case"L":x=p[1],w=p[2],b=[];break;case"M":x=p[1],w=p[2],g=x,y=w,b=[];break;case"C":b=s.util.getBoundsOfCurve(x,w,p[1],p[2],p[3],p[4],p[5],p[6]),x=p[5],w=p[6];break;case"Q":b=s.util.getBoundsOfCurve(x,w,p[1],p[2],p[1],p[2],p[3],p[4]),x=p[3],w=p[4];break;case"z":case"Z":x=g,w=y;break}b.forEach(function(F){d.push(F.x),v.push(F.y)}),d.push(x),v.push(w)}var C=h(d)||0,T=h(v)||0,O=f(d)||0,L=f(v)||0,j=O-C,H=L-T;return{left:C,top:T,width:j,height:H}}}),s.Path.fromObject=function(d,v){if(typeof d.sourcePath=="string"){var p=d.sourcePath;s.loadSVGFromURL(p,function(g){var y=g[0];y.setOptions(d),d.clipPath?s.util.enlivenObjects([d.clipPath],function(x){y.clipPath=x[0],v&&v(y)}):v&&v(y)})}else s.Object._fromObject("Path",d,v,"path")},s.Path.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat(["d"]),s.Path.fromElement=function(d,v,p){var g=s.parseAttributes(d,s.Path.ATTRIBUTE_NAMES);g.fromSVG=!0,v(new s.Path(g.d,a(g,p)))}}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.array.min,f=s.util.array.max;s.Group||(s.Group=s.util.createClass(s.Object,s.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(a,o,c){o=o||{},this._objects=[],c&&this.callSuper("initialize",o),this._objects=a||[];for(var d=this._objects.length;d--;)this._objects[d].group=this;if(c)this._updateObjectsACoords();else{var v=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),v||this._calcBounds(),this._updateObjectsCoords(v),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var a=!0,o=this._objects.length;o--;)this._objects[o].setCoords(a)},_updateObjectsCoords:function(o){for(var o=o||this.getCenterPoint(),c=this._objects.length;c--;)this._updateObjectCoords(this._objects[c],o)},_updateObjectCoords:function(a,o){var c=a.left,d=a.top,v=!0;a.set({left:c-o.x,top:d-o.y}),a.group=this,a.setCoords(v)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(a){var o=!!this.group;return this._restoreObjectsState(),s.util.resetObjectTransform(this),a&&(o&&s.util.removeTransformFromObject(a,this.group.calcTransformMatrix()),this._objects.push(a),a.group=this,a._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,o?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(a){return this._restoreObjectsState(),s.util.resetObjectTransform(this),this.remove(a),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(a){this.dirty=!0,a.group=this,a._set("canvas",this.canvas)},_onObjectRemoved:function(a){this.dirty=!0,delete a.group},_set:function(a,o){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(a,o);if(a==="canvas")for(;c--;)this._objects[c]._set(a,o);s.Object.prototype._set.call(this,a,o)},toObject:function(a){var o=this.includeDefaultValues,c=this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){var p=v.includeDefaultValues;v.includeDefaultValues=o;var g=v.toObject(a);return v.includeDefaultValues=p,g}),d=s.Object.prototype.toObject.call(this,a);return d.objects=c,d},toDatalessObject:function(a){var o,c=this.sourcePath;if(c)o=c;else{var d=this.includeDefaultValues;o=this._objects.map(function(p){var g=p.includeDefaultValues;p.includeDefaultValues=d;var y=p.toDatalessObject(a);return p.includeDefaultValues=g,y})}var v=s.Object.prototype.toDatalessObject.call(this,a);return v.objects=o,v},render:function(a){this._transformDone=!0,this.callSuper("render",a),this._transformDone=!1},shouldCache:function(){var a=s.Object.prototype.shouldCache.call(this);if(a){for(var o=0,c=this._objects.length;o<c;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return a},willDrawShadow:function(){if(s.Object.prototype.willDrawShadow.call(this))return!0;for(var a=0,o=this._objects.length;a<o;a++)if(this._objects[a].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(a){for(var o=0,c=this._objects.length;o<c;o++)this._objects[o].render(a);this._drawClipPath(a,this.clipPath)},isCacheDirty:function(a){if(this.callSuper("isCacheDirty",a))return!0;if(!this.statefullCache)return!1;for(var o=0,c=this._objects.length;o<c;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var d=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-v/2,d,v)}return!0}return!1},_restoreObjectsState:function(){var a=this.calcOwnMatrix();return this._objects.forEach(function(o){s.util.addTransformToObject(o,a),delete o.group,o.setCoords()}),this},destroy:function(){return this._objects.forEach(function(a){a.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(a){a.dispose&&a.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var a=this._objects,o=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var d=new s.ActiveSelection([]);return d.set(c),d.type="activeSelection",o.remove(this),a.forEach(function(v){v.group=d,v.dirty=!0,o.add(v)}),d.canvas=o,d._objects=a,o._activeObject=d,d.setCoords(),d}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var a=!0;return this.forEachObject(function(o){o.setCoords(a)}),this},_calcBounds:function(a){for(var o=[],c=[],d,v,p,g=["tr","br","bl","tl"],y=0,x=this._objects.length,w,b=g.length;y<x;++y){for(d=this._objects[y],p=d.calcACoords(),w=0;w<b;w++)v=g[w],o.push(p[v].x),c.push(p[v].y);d.aCoords=p}this._getBounds(o,c,a)},_getBounds:function(a,o,c){var d=new s.Point(h(a),h(o)),v=new s.Point(f(a),f(o)),p=d.y||0,g=d.x||0,y=v.x-d.x||0,x=v.y-d.y||0;this.width=y,this.height=x,c||this.setPositionByOrigin({x:g,y:p},"left","top")},_toSVG:function(a){for(var o=["<g ","COMMON_PARTS",` >
`],c=0,d=this._objects.length;c<d;c++)o.push("		",this._objects[c].toSVG(a));return o.push(`</g>
`),o},getSvgStyles:function(){var a=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[a,this.getSvgFilter(),o].join("")},toClipPathSVG:function(a){for(var o=[],c=0,d=this._objects.length;c<d;c++)o.push("	",this._objects[c].toClipPathSVG(a));return this._createBaseClipPathSVGMarkup(o,{reviver:a})}}),s.Group.fromObject=function(a,o){var c=a.objects,d=s.util.object.clone(a,!0);if(delete d.objects,typeof c=="string"){s.loadSVGFromURL(c,function(v){var p=s.util.groupSVGElements(v,a,c),g=d.clipPath;delete d.clipPath,p.set(d),g?s.util.enlivenObjects([g],function(y){p.clipPath=y[0],o&&o(p)}):o&&o(p)});return}s.util.enlivenObjects(c,function(v){s.util.enlivenObjectEnlivables(a,d,function(){o&&o(new s.Group(v,d,!0))})})})}(t),function(l){var s=l.fabric||(l.fabric={});s.ActiveSelection||(s.ActiveSelection=s.util.createClass(s.Group,{type:"activeSelection",initialize:function(h,f){f=f||{},this._objects=h||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;f.originX&&(this.originX=f.originX),f.originY&&(this.originY=f.originY),this._calcBounds(),this._updateObjectsCoords(),s.Object.prototype.initialize.call(this,f),this.setCoords()},toGroup:function(){var h=this._objects.concat();this._objects=[];var f=s.Object.prototype.toObject.call(this),a=new s.Group([]);if(delete f.type,a.set(f),h.forEach(function(c){c.canvas.remove(c),c.group=a}),a._objects=h,!this.canvas)return a;var o=this.canvas;return o.add(a),o._activeObject=a,a.setCoords(),a},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(h,f,a){h.save(),h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,a=a||{},typeof a.hasControls>"u"&&(a.hasControls=!1),a.forActiveSelection=!0;for(var o=0,c=this._objects.length;o<c;o++)this._objects[o]._renderControls(h,a);this.callSuper("_renderControls",h,f),h.restore()}}),s.ActiveSelection.fromObject=function(h,f){s.util.enlivenObjects(h.objects,function(a){delete h.objects,f&&f(new s.ActiveSelection(a,h,!0))})})}(t),function(l){var s=e.util.object.extend;if(l.fabric||(l.fabric={}),l.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(h,f){f||(f={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",f),this._initElement(h,f)},getElement:function(){return this._element||{}},setElement:function(h,f){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=h,this._originalElement=h,this._initConfig(f),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(h){var f=e.filterBackend;f&&f.evictCachesForKey&&f.evictCachesForKey(h)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(h){e.util.cleanUpJsdomNode(this[h]),this[h]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var h=this.getElement();return{width:h.naturalWidth||h.width,height:h.naturalHeight||h.height}},_stroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){var f=this.width/2,a=this.height/2;h.beginPath(),h.moveTo(-f,-a),h.lineTo(f,-a),h.lineTo(f,a),h.lineTo(-f,a),h.lineTo(-f,-a),h.closePath()}},toObject:function(h){var f=[];this.filters.forEach(function(o){o&&f.push(o.toObject())});var a=s(this.callSuper("toObject",["cropX","cropY"].concat(h)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:f});return this.resizeFilter&&(a.resizeFilter=this.resizeFilter.toObject()),a},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var h=[],f=[],a,o=this._element,c=-this.width/2,d=-this.height/2,v="",p="";if(!o)return[];if(this.hasCrop()){var g=e.Object.__uid++;h.push('<clipPath id="imageCrop_'+g+`">
`,'	<rect x="'+c+'" y="'+d+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),v=' clip-path="url(#imageCrop_'+g+')" '}if(this.imageSmoothing||(p='" image-rendering="optimizeSpeed'),f.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',c-this.cropX,'" y="',d-this.cropY,'" width="',o.width||o.naturalWidth,'" height="',o.height||o.height,p,'"',v,`></image>
`),this.stroke||this.strokeDashArray){var y=this.fill;this.fill=null,a=["	<rect ",'x="',c,'" y="',d,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=y}return this.paintFirst!=="fill"?h=h.concat(a,f):h=h.concat(f,a),h},getSrc:function(h){var f=h?this._element:this._originalElement;return f?f.toDataURL?f.toDataURL():this.srcFromAttribute?f.getAttribute("src"):f.src:this.src||""},setSrc:function(h,f,a){return e.util.loadImage(h,function(o,c){this.setElement(o,a),this._setWidthHeight(),f&&f(this,c)},this,a&&a.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var h=this.resizeFilter,f=this.minimumScaleTrigger,a=this.getTotalObjectScaling(),o=a.scaleX,c=a.scaleY,d=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!h||o>f&&c>f){this._element=d,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=c;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var v=e.util.createCanvasElement(),p=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,g=d.width,y=d.height;v.width=g,v.height=y,this._element=v,this._lastScaleX=h.scaleX=o,this._lastScaleY=h.scaleY=c,e.filterBackend.applyFilters([h],d,g,y,this._element,p),this._filterScalingX=v.width/this._originalElement.width,this._filterScalingY=v.height/this._originalElement.height},applyFilters:function(h){if(h=h||this.filters||[],h=h.filter(function(d){return d&&!d.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),h.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var f=this._originalElement,a=f.naturalWidth||f.width,o=f.naturalHeight||f.height;if(this._element===this._originalElement){var c=e.util.createCanvasElement();c.width=a,c.height=o,this._element=c,this._filteredEl=c}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,a,o),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(h,this._originalElement,a,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(h),this._renderPaintInOrder(h)},drawCacheOnCanvas:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,h)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(h){var f=this._element;if(f){var a=this._filterScalingX,o=this._filterScalingY,c=this.width,d=this.height,v=Math.min,p=Math.max,g=p(this.cropX,0),y=p(this.cropY,0),x=f.naturalWidth||f.width,w=f.naturalHeight||f.height,b=g*a,S=y*o,_=v(c*a,x-b),C=v(d*o,w-S),T=-c/2,O=-d/2,L=v(c,x/a-g),j=v(d,w/o-y);f&&h.drawImage(f,b,S,_,C,T,O,L,j)}},_needsResize:function(){var h=this.getTotalObjectScaling();return h.scaleX!==this._lastScaleX||h.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(h,f){this.setElement(e.util.getById(h),f),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(h){h||(h={}),this.setOptions(h),this._setWidthHeight(h)},_initFilters:function(h,f){h&&h.length?e.util.enlivenObjects(h,function(a){f&&f(a)},"fabric.Image.filters"):f&&f()},_setWidthHeight:function(h){h||(h={});var f=this.getElement();this.width=h.width||f.naturalWidth||f.width||0,this.height=h.height||f.naturalHeight||f.height||0},parsePreserveAspectRatioAttribute:function(){var h=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),f=this._element.width,a=this._element.height,o=1,c=1,d=0,v=0,p=0,g=0,y,x=this.width,w=this.height,b={width:x,height:w};return h&&(h.alignX!=="none"||h.alignY!=="none")?(h.meetOrSlice==="meet"&&(o=c=e.util.findScaleToFit(this._element,b),y=(x-f*o)/2,h.alignX==="Min"&&(d=-y),h.alignX==="Max"&&(d=y),y=(w-a*c)/2,h.alignY==="Min"&&(v=-y),h.alignY==="Max"&&(v=y)),h.meetOrSlice==="slice"&&(o=c=e.util.findScaleToCover(this._element,b),y=f-x/o,h.alignX==="Mid"&&(p=y/2),h.alignX==="Max"&&(p=y),y=a-w/c,h.alignY==="Mid"&&(g=y/2),h.alignY==="Max"&&(g=y),f=x/o,a=w/c)):(o=x/f,c=w/a),{width:f,height:a,scaleX:o,scaleY:c,offsetLeft:d,offsetTop:v,cropX:p,cropY:g}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(h,f){var a=e.util.object.clone(h);e.util.loadImage(a.src,function(o,c){if(c){f&&f(null,!0);return}e.Image.prototype._initFilters.call(a,a.filters,function(d){a.filters=d||[],e.Image.prototype._initFilters.call(a,[a.resizeFilter],function(v){a.resizeFilter=v[0],e.util.enlivenObjectEnlivables(a,a,function(){var p=new e.Image(o,a);f(p,!1)})})})},null,a.crossOrigin)},e.Image.fromURL=function(h,f,a){e.util.loadImage(h,function(o,c){f&&f(new e.Image(o,a),c)},null,a&&a.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(h,f,a){var o=e.parseAttributes(h,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(o["xlink:href"],f,s(a?e.util.object.clone(a):{},o))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var l=this.angle%360;return l>0?Math.round((l-1)/90)*90:Math.round(l/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(l){l=l||{};var s=function(){},h=l.onComplete||s,f=l.onChange||s,a=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){a.rotate(o),f()},onComplete:function(){a.setCoords(),h()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(l){return l.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(l){return l.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function l(h,f){var a="precision "+f+` float;
void main(){}`,o=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(o,a),h.compileShader(o),!!h.getShaderParameter(o,h.COMPILE_STATUS)}e.isWebglSupported=function(h){if(e.isLikelyNode)return!1;h=h||e.WebglFilterBackend.prototype.tileSize;var f=document.createElement("canvas"),a=f.getContext("webgl")||f.getContext("experimental-webgl"),o=!1;if(a){e.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),o=e.maxTextureSize>=h;for(var c=["highp","mediump","lowp"],d=0;d<3;d++)if(l(a,c[d])){e.webGlPrecision=c[d];break}}return this.isSupported=o,o},e.WebglFilterBackend=s;function s(h){h&&h.tileSize&&(this.tileSize=h.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}s.prototype={tileSize:2048,resources:{},setupGLContext:function(h,f){this.dispose(),this.createWebGLCanvas(h,f),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(h,f)},chooseFastestCopyGLTo2DMethod:function(h,f){var a=typeof window.performance<"u",o;try{new ImageData(1,1),o=!0}catch{o=!1}var c=typeof ArrayBuffer<"u",d=typeof Uint8ClampedArray<"u";if(a&&o&&c&&d){var v=e.util.createCanvasElement(),p=new ArrayBuffer(h*f*4);if(e.forceGLPutImageData){this.imageBuffer=p,this.copyGLTo2D=m;return}var g={imageBuffer:p,destinationWidth:h,destinationHeight:f,targetCanvas:v},y,x,w;v.width=h,v.height=f,y=window.performance.now(),u.call(g,this.gl,g),x=window.performance.now()-y,y=window.performance.now(),m.call(g,this.gl,g),w=window.performance.now()-y,x>w?(this.imageBuffer=p,this.copyGLTo2D=m):this.copyGLTo2D=u}},createWebGLCanvas:function(h,f){var a=e.util.createCanvasElement();a.width=h,a.height=f;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},c=a.getContext("webgl",o);c||(c=a.getContext("experimental-webgl",o)),c&&(c.clearColor(0,0,0,0),this.canvas=a,this.gl=c)},applyFilters:function(h,f,a,o,c,d){var v=this.gl,p;d&&(p=this.getCachedTexture(d,f));var g={originalWidth:f.width||f.originalWidth,originalHeight:f.height||f.originalHeight,sourceWidth:a,sourceHeight:o,destinationWidth:a,destinationHeight:o,context:v,sourceTexture:this.createTexture(v,a,o,!p&&f),targetTexture:this.createTexture(v,a,o),originalTexture:p||this.createTexture(v,a,o,!p&&f),passes:h.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:c},y=v.createFramebuffer();return v.bindFramebuffer(v.FRAMEBUFFER,y),h.forEach(function(x){x&&x.applyTo(g)}),r(g),this.copyGLTo2D(v,g),v.bindTexture(v.TEXTURE_2D,null),v.deleteTexture(g.sourceTexture),v.deleteTexture(g.targetTexture),v.deleteFramebuffer(y),c.getContext("2d").setTransform(1,0,0,1,0,0),g},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(h,f,a,o,c){var d=h.createTexture();return h.bindTexture(h.TEXTURE_2D,d),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,c||h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,c||h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),o?h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,o):h.texImage2D(h.TEXTURE_2D,0,h.RGBA,f,a,0,h.RGBA,h.UNSIGNED_BYTE,null),d},getCachedTexture:function(h,f){if(this.textureCache[h])return this.textureCache[h];var a=this.createTexture(this.gl,f.width,f.height,f);return this.textureCache[h]=a,a},evictCachesForKey:function(h){this.textureCache[h]&&(this.gl.deleteTexture(this.textureCache[h]),delete this.textureCache[h])},copyGLTo2D:u,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var h=this.gl,f={renderer:"",vendor:""};if(!h)return f;var a=h.getExtension("WEBGL_debug_renderer_info");if(a){var o=h.getParameter(a.UNMASKED_RENDERER_WEBGL),c=h.getParameter(a.UNMASKED_VENDOR_WEBGL);o&&(f.renderer=o.toLowerCase()),c&&(f.vendor=c.toLowerCase())}return this.gpuInfo=f,f}}}();function r(l){var s=l.targetCanvas,h=s.width,f=s.height,a=l.destinationWidth,o=l.destinationHeight;(h!==a||f!==o)&&(s.width=a,s.height=o)}function u(l,s){var h=l.canvas,f=s.targetCanvas,a=f.getContext("2d");a.translate(0,f.height),a.scale(1,-1);var o=h.height-f.height;a.drawImage(h,0,o,f.width,f.height,0,0,f.width,f.height)}function m(l,s){var h=s.targetCanvas,f=h.getContext("2d"),a=s.destinationWidth,o=s.destinationHeight,c=a*o*4,d=new Uint8Array(this.imageBuffer,0,c),v=new Uint8ClampedArray(this.imageBuffer,0,c);l.readPixels(0,0,a,o,l.RGBA,l.UNSIGNED_BYTE,d);var p=new ImageData(v,a,o);f.putImageData(p,0,0)}(function(){var l=function(){};e.Canvas2dFilterBackend=s;function s(){}s.prototype={evictCachesForKey:l,dispose:l,clearWebGLCaches:l,resources:{},applyFilters:function(h,f,a,o,c){var d=c.getContext("2d");d.drawImage(f,0,0,a,o);var v=d.getImageData(0,0,a,o),p=d.getImageData(0,0,a,o),g={sourceWidth:a,sourceHeight:o,imageData:v,originalEl:f,originalImageData:p,canvasEl:c,ctx:d,filterBackend:this};return h.forEach(function(y){y.applyTo(g)}),(g.imageData.width!==a||g.imageData.height!==o)&&(c.width=g.imageData.width,c.height=g.imageData.height),d.putImageData(g.imageData,0,0),g}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(l){l&&this.setOptions(l)},setOptions:function(l){for(var s in l)this[s]=l[s]},createProgram:function(l,s,h){s=s||this.fragmentSource,h=h||this.vertexSource,e.webGlPrecision!=="highp"&&(s=s.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var f=l.createShader(l.VERTEX_SHADER);if(l.shaderSource(f,h),l.compileShader(f),!l.getShaderParameter(f,l.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+l.getShaderInfoLog(f));var a=l.createShader(l.FRAGMENT_SHADER);if(l.shaderSource(a,s),l.compileShader(a),!l.getShaderParameter(a,l.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+l.getShaderInfoLog(a));var o=l.createProgram();if(l.attachShader(o,f),l.attachShader(o,a),l.linkProgram(o),!l.getProgramParameter(o,l.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+l.getProgramInfoLog(o));var c=this.getAttributeLocations(l,o),d=this.getUniformLocations(l,o)||{};return d.uStepW=l.getUniformLocation(o,"uStepW"),d.uStepH=l.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:c,uniformLocations:d}},getAttributeLocations:function(l,s){return{aPosition:l.getAttribLocation(s,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(l,s,h){var f=s.aPosition,a=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,a),l.enableVertexAttribArray(f),l.vertexAttribPointer(f,2,l.FLOAT,!1,0,0),l.bufferData(l.ARRAY_BUFFER,h,l.STATIC_DRAW)},_setupFrameBuffer:function(l){var s=l.context,h,f;l.passes>1?(h=l.destinationWidth,f=l.destinationHeight,(l.sourceWidth!==h||l.sourceHeight!==f)&&(s.deleteTexture(l.targetTexture),l.targetTexture=l.filterBackend.createTexture(s,h,f)),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,l.targetTexture,0)):(s.bindFramebuffer(s.FRAMEBUFFER,null),s.finish())},_swapTextures:function(l){l.passes--,l.pass++;var s=l.targetTexture;l.targetTexture=l.sourceTexture,l.sourceTexture=s},isNeutralState:function(){var l=this.mainParameter,s=e.Image.filters[this.type].prototype;if(l)if(Array.isArray(s[l])){for(var h=s[l].length;h--;)if(this[l][h]!==s[l][h])return!1;return!0}else return s[l]===this[l];else return!1},applyTo:function(l){l.webgl?(this._setupFrameBuffer(l),this.applyToWebGL(l),this._swapTextures(l)):this.applyTo2d(l)},retrieveShader:function(l){return l.programCache.hasOwnProperty(this.type)||(l.programCache[this.type]=this.createProgram(l.context)),l.programCache[this.type]},applyToWebGL:function(l){var s=l.context,h=this.retrieveShader(l);l.pass===0&&l.originalTexture?s.bindTexture(s.TEXTURE_2D,l.originalTexture):s.bindTexture(s.TEXTURE_2D,l.sourceTexture),s.useProgram(h.program),this.sendAttributeData(s,h.attributeLocations,l.aPosition),s.uniform1f(h.uniformLocations.uStepW,1/l.sourceWidth),s.uniform1f(h.uniformLocations.uStepH,1/l.sourceHeight),this.sendUniformData(s,h.uniformLocations),s.viewport(0,0,l.destinationWidth,l.destinationHeight),s.drawArrays(s.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(l,s,h){l.activeTexture(h),l.bindTexture(l.TEXTURE_2D,s),l.activeTexture(l.TEXTURE0)},unbindAdditionalTexture:function(l,s){l.activeTexture(s),l.bindTexture(l.TEXTURE_2D,null),l.activeTexture(l.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(l){this[this.mainParameter]=l},sendUniformData:function(){},createHelpLayer:function(l){if(!l.helpLayer){var s=document.createElement("canvas");s.width=l.sourceWidth,s.height=l.sourceHeight,l.helpLayer=s}},toObject:function(){var l={type:this.type},s=this.mainParameter;return s&&(l[s]=this[s]),l},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(l,s){var h=new e.Image.filters[l.type](l);return s&&s(h),h},function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.ColorMatrix=f(h.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(a){this.callSuper("initialize",a),this.matrix=this.matrix.slice(0)},applyTo2d:function(a){var o=a.imageData,c=o.data,d=c.length,v=this.matrix,p,g,y,x,w,b=this.colorsOnly;for(w=0;w<d;w+=4)p=c[w],g=c[w+1],y=c[w+2],b?(c[w]=p*v[0]+g*v[1]+y*v[2]+v[4]*255,c[w+1]=p*v[5]+g*v[6]+y*v[7]+v[9]*255,c[w+2]=p*v[10]+g*v[11]+y*v[12]+v[14]*255):(x=c[w+3],c[w]=p*v[0]+g*v[1]+y*v[2]+x*v[3]+v[4]*255,c[w+1]=p*v[5]+g*v[6]+y*v[7]+x*v[8]+v[9]*255,c[w+2]=p*v[10]+g*v[11]+y*v[12]+x*v[13]+v[14]*255,c[w+3]=p*v[15]+g*v[16]+y*v[17]+x*v[18]+v[19]*255)},getUniformLocations:function(a,o){return{uColorMatrix:a.getUniformLocation(o,"uColorMatrix"),uConstants:a.getUniformLocation(o,"uConstants")}},sendUniformData:function(a,o){var c=this.matrix,d=[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]],v=[c[4],c[9],c[14],c[19]];a.uniformMatrix4fv(o.uColorMatrix,!1,d),a.uniform4fv(o.uConstants,v)}}),s.Image.filters.ColorMatrix.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Brightness=f(h.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(a){if(this.brightness!==0){var o=a.imageData,c=o.data,d,v=c.length,p=Math.round(this.brightness*255);for(d=0;d<v;d+=4)c[d]=c[d]+p,c[d+1]=c[d+1]+p,c[d+2]=c[d+2]+p}},getUniformLocations:function(a,o){return{uBrightness:a.getUniformLocation(o,"uBrightness")}},sendUniformData:function(a,o){a.uniform1f(o.uBrightness,this.brightness)}}),s.Image.filters.Brightness.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend,f=s.Image.filters,a=s.util.createClass;f.Convolute=a(f.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var c=Math.sqrt(this.matrix.length),d=this.type+"_"+c+"_"+(this.opaque?1:0),v=this.fragmentSource[d];return o.programCache.hasOwnProperty(d)||(o.programCache[d]=this.createProgram(o.context,v)),o.programCache[d]},applyTo2d:function(o){var c=o.imageData,d=c.data,v=this.matrix,p=Math.round(Math.sqrt(v.length)),g=Math.floor(p/2),y=c.width,x=c.height,w=o.ctx.createImageData(y,x),b=w.data,S=this.opaque?1:0,_,C,T,O,L,j,H,F,V,I,A,U,k;for(A=0;A<x;A++)for(I=0;I<y;I++){for(L=(A*y+I)*4,_=0,C=0,T=0,O=0,k=0;k<p;k++)for(U=0;U<p;U++)H=A+k-g,j=I+U-g,!(H<0||H>=x||j<0||j>=y)&&(F=(H*y+j)*4,V=v[k*p+U],_+=d[F]*V,C+=d[F+1]*V,T+=d[F+2]*V,S||(O+=d[F+3]*V));b[L]=_,b[L+1]=C,b[L+2]=T,S?b[L+3]=d[L+3]:b[L+3]=O}o.imageData=w},getUniformLocations:function(o,c){return{uMatrix:o.getUniformLocation(c,"uMatrix"),uOpaque:o.getUniformLocation(c,"uOpaque"),uHalfSize:o.getUniformLocation(c,"uHalfSize"),uSize:o.getUniformLocation(c,"uSize")}},sendUniformData:function(o,c){o.uniform1fv(c.uMatrix,this.matrix)},toObject:function(){return h(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),s.Image.filters.Convolute.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Grayscale=f(h.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(a){var o=a.imageData,c=o.data,d,v=c.length,p,g=this.mode;for(d=0;d<v;d+=4)g==="average"?p=(c[d]+c[d+1]+c[d+2])/3:g==="lightness"?p=(Math.min(c[d],c[d+1],c[d+2])+Math.max(c[d],c[d+1],c[d+2]))/2:g==="luminosity"&&(p=.21*c[d]+.72*c[d+1]+.07*c[d+2]),c[d]=p,c[d+1]=p,c[d+2]=p},retrieveShader:function(a){var o=this.type+"_"+this.mode;if(!a.programCache.hasOwnProperty(o)){var c=this.fragmentSource[this.mode];a.programCache[o]=this.createProgram(a.context,c)}return a.programCache[o]},getUniformLocations:function(a,o){return{uMode:a.getUniformLocation(o,"uMode")}},sendUniformData:function(a,o){var c=1;a.uniform1i(o.uMode,c)},isNeutralState:function(){return!1}}),s.Image.filters.Grayscale.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Invert=f(h.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(a){var o=a.imageData,c=o.data,d,v=c.length;for(d=0;d<v;d+=4)c[d]=255-c[d],c[d+1]=255-c[d+1],c[d+2]=255-c[d+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(a,o){return{uInvert:a.getUniformLocation(o,"uInvert")}},sendUniformData:function(a,o){a.uniform1i(o.uInvert,this.invert)}}),s.Image.filters.Invert.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend,f=s.Image.filters,a=s.util.createClass;f.Noise=a(f.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var c=o.imageData,d=c.data,v,p=d.length,g=this.noise,y;for(v=0,p=d.length;v<p;v+=4)y=(.5-Math.random())*g,d[v]+=y,d[v+1]+=y,d[v+2]+=y}},getUniformLocations:function(o,c){return{uNoise:o.getUniformLocation(c,"uNoise"),uSeed:o.getUniformLocation(c,"uSeed")}},sendUniformData:function(o,c){o.uniform1f(c.uNoise,this.noise/255),o.uniform1f(c.uSeed,Math.random())},toObject:function(){return h(this.callSuper("toObject"),{noise:this.noise})}}),s.Image.filters.Noise.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Pixelate=f(h.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(a){var o=a.imageData,c=o.data,d=o.height,v=o.width,p,g,y,x,w,b,S,_,C,T,O;for(g=0;g<d;g+=this.blocksize)for(y=0;y<v;y+=this.blocksize)for(p=g*4*v+y*4,x=c[p],w=c[p+1],b=c[p+2],S=c[p+3],T=Math.min(g+this.blocksize,d),O=Math.min(y+this.blocksize,v),_=g;_<T;_++)for(C=y;C<O;C++)p=_*4*v+C*4,c[p]=x,c[p+1]=w,c[p+2]=b,c[p+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(a,o){return{uBlocksize:a.getUniformLocation(o,"uBlocksize"),uStepW:a.getUniformLocation(o,"uStepW"),uStepH:a.getUniformLocation(o,"uStepH")}},sendUniformData:function(a,o){a.uniform1f(o.uBlocksize,this.blocksize)}}),s.Image.filters.Pixelate.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.extend,f=s.Image.filters,a=s.util.createClass;f.RemoveColor=a(f.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var c=o.imageData,d=c.data,v,p=this.distance*255,g,y,x,w=new s.Color(this.color).getSource(),b=[w[0]-p,w[1]-p,w[2]-p],S=[w[0]+p,w[1]+p,w[2]+p];for(v=0;v<d.length;v+=4)g=d[v],y=d[v+1],x=d[v+2],g>b[0]&&y>b[1]&&x>b[2]&&g<S[0]&&y<S[1]&&x<S[2]&&(d[v+3]=0)},getUniformLocations:function(o,c){return{uLow:o.getUniformLocation(c,"uLow"),uHigh:o.getUniformLocation(c,"uHigh")}},sendUniformData:function(o,c){var d=new s.Color(this.color).getSource(),v=parseFloat(this.distance),p=[0+d[0]/255-v,0+d[1]/255-v,0+d[2]/255-v,1],g=[d[0]/255+v,d[1]/255+v,d[2]/255+v,1];o.uniform4fv(c.uLow,p),o.uniform4fv(c.uHigh,g)},toObject:function(){return h(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),s.Image.filters.RemoveColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass,a={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in a)h[o]=f(h.ColorMatrix,{type:o,matrix:a[o],mainParameter:!1,colorsOnly:!0}),s.Image.filters[o].fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric,h=s.Image.filters,f=s.util.createClass;h.BlendColor=f(h.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(a){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[a]+`}
}`},retrieveShader:function(a){var o=this.type+"_"+this.mode,c;return a.programCache.hasOwnProperty(o)||(c=this.buildSource(this.mode),a.programCache[o]=this.createProgram(a.context,c)),a.programCache[o]},applyTo2d:function(a){var o=a.imageData,c=o.data,d=c.length,v,p,g,y,x,w,b,S=1-this.alpha;b=new s.Color(this.color).getSource(),v=b[0]*this.alpha,p=b[1]*this.alpha,g=b[2]*this.alpha;for(var _=0;_<d;_+=4)switch(y=c[_],x=c[_+1],w=c[_+2],this.mode){case"multiply":c[_]=y*v/255,c[_+1]=x*p/255,c[_+2]=w*g/255;break;case"screen":c[_]=255-(255-y)*(255-v)/255,c[_+1]=255-(255-x)*(255-p)/255,c[_+2]=255-(255-w)*(255-g)/255;break;case"add":c[_]=y+v,c[_+1]=x+p,c[_+2]=w+g;break;case"diff":case"difference":c[_]=Math.abs(y-v),c[_+1]=Math.abs(x-p),c[_+2]=Math.abs(w-g);break;case"subtract":c[_]=y-v,c[_+1]=x-p,c[_+2]=w-g;break;case"darken":c[_]=Math.min(y,v),c[_+1]=Math.min(x,p),c[_+2]=Math.min(w,g);break;case"lighten":c[_]=Math.max(y,v),c[_+1]=Math.max(x,p),c[_+2]=Math.max(w,g);break;case"overlay":c[_]=v<128?2*y*v/255:255-2*(255-y)*(255-v)/255,c[_+1]=p<128?2*x*p/255:255-2*(255-x)*(255-p)/255,c[_+2]=g<128?2*w*g/255:255-2*(255-w)*(255-g)/255;break;case"exclusion":c[_]=v+y-2*v*y/255,c[_+1]=p+x-2*p*x/255,c[_+2]=g+w-2*g*w/255;break;case"tint":c[_]=v+y*S,c[_+1]=p+x*S,c[_+2]=g+w*S}},getUniformLocations:function(a,o){return{uColor:a.getUniformLocation(o,"uColor")}},sendUniformData:function(a,o){var c=new s.Color(this.color).getSource();c[0]=this.alpha*c[0]/255,c[1]=this.alpha*c[1]/255,c[2]=this.alpha*c[2]/255,c[3]=this.alpha,a.uniform4fv(o.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendColor.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric,h=s.Image.filters,f=s.util.createClass;h.BlendImage=f(h.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(a){var o=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];return a.programCache.hasOwnProperty(o)||(a.programCache[o]=this.createProgram(a.context,c)),a.programCache[o]},applyToWebGL:function(a){var o=a.context,c=this.createTexture(a.filterBackend,this.image);this.bindAdditionalTexture(o,c,o.TEXTURE1),this.callSuper("applyToWebGL",a),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(a,o){return a.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var a=this.image,o=a._element.width,c=a._element.height;return[1/a.scaleX,0,0,0,1/a.scaleY,0,-a.left/o,-a.top/c,1]},applyTo2d:function(a){var o=a.imageData,c=a.filterBackend.resources,d=o.data,v=d.length,p=o.width,g=o.height,y,x,w,b,S,_,C,T,O,L,j=this.image,H;c.blendImage||(c.blendImage=s.util.createCanvasElement()),O=c.blendImage,L=O.getContext("2d"),O.width!==p||O.height!==g?(O.width=p,O.height=g):L.clearRect(0,0,p,g),L.setTransform(j.scaleX,0,0,j.scaleY,j.left,j.top),L.drawImage(j._element,0,0,p,g),H=L.getImageData(0,0,p,g).data;for(var F=0;F<v;F+=4)switch(S=d[F],_=d[F+1],C=d[F+2],T=d[F+3],y=H[F],x=H[F+1],w=H[F+2],b=H[F+3],this.mode){case"multiply":d[F]=S*y/255,d[F+1]=_*x/255,d[F+2]=C*w/255,d[F+3]=T*b/255;break;case"mask":d[F+3]=b;break}},getUniformLocations:function(a,o){return{uTransformMatrix:a.getUniformLocation(o,"uTransformMatrix"),uImage:a.getUniformLocation(o,"uImage")}},sendUniformData:function(a,o){var c=this.calculateMatrix();a.uniform1i(o.uImage,1),a.uniformMatrix3fv(o.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),s.Image.filters.BlendImage.fromObject=function(a,o){s.Image.fromObject(a.image,function(c){var d=s.util.object.clone(a);d.image=c,o(new s.Image.filters.BlendImage(d))})}}(t),function(l){var s=l.fabric||(l.fabric={}),h=Math.pow,f=Math.floor,a=Math.sqrt,o=Math.abs,c=Math.round,d=Math.sin,v=Math.ceil,p=s.Image.filters,g=s.util.createClass;p.Resize=g(p.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(y,x){return{uDelta:y.getUniformLocation(x,"uDelta"),uTaps:y.getUniformLocation(x,"uTaps")}},sendUniformData:function(y,x){y.uniform2fv(x.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),y.uniform1fv(x.uTaps,this.taps)},retrieveShader:function(y){var x=this.getFilterWindow(),w=this.type+"_"+x;if(!y.programCache.hasOwnProperty(w)){var b=this.generateShader(x);y.programCache[w]=this.createProgram(y.context,b)}return y.programCache[w]},getFilterWindow:function(){var y=this.tempScale;return Math.ceil(this.lanczosLobes/y)},getTaps:function(){for(var y=this.lanczosCreate(this.lanczosLobes),x=this.tempScale,w=this.getFilterWindow(),b=new Array(w),S=1;S<=w;S++)b[S-1]=y(S*x);return b},generateShader:function(b){for(var x=new Array(b),w=this.fragmentSourceTOP,b,S=1;S<=b;S++)x[S-1]=S+".0 * uDelta";return w+="uniform float uTaps["+b+`];
`,w+=`void main() {
`,w+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,w+=`  float sum = 1.0;
`,x.forEach(function(_,C){w+="  color += texture2D(uTexture, vTexCoord + "+_+") * uTaps["+C+`];
`,w+="  color += texture2D(uTexture, vTexCoord - "+_+") * uTaps["+C+`];
`,w+="  sum += 2.0 * uTaps["+C+`];
`}),w+=`  gl_FragColor = color / sum;
`,w+="}",w},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(y){y.webgl?(y.passes++,this.width=y.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=y.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),y.destinationWidth=this.dW,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceWidth=y.destinationWidth,this.height=y.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),y.destinationHeight=this.dH,this._setupFrameBuffer(y),this.applyToWebGL(y),this._swapTextures(y),y.sourceHeight=y.destinationHeight):this.applyTo2d(y)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(y){return function(x){if(x>=y||x<=-y)return 0;if(x<11920929e-14&&x>-11920929e-14)return 1;x*=Math.PI;var w=x/y;return d(x)/x*d(w)/w}},applyTo2d:function(y){var x=y.imageData,w=this.scaleX,b=this.scaleY;this.rcpScaleX=1/w,this.rcpScaleY=1/b;var S=x.width,_=x.height,C=c(S*w),T=c(_*b),O;this.resizeType==="sliceHack"?O=this.sliceByTwo(y,S,_,C,T):this.resizeType==="hermite"?O=this.hermiteFastResize(y,S,_,C,T):this.resizeType==="bilinear"?O=this.bilinearFiltering(y,S,_,C,T):this.resizeType==="lanczos"&&(O=this.lanczosResize(y,S,_,C,T)),y.imageData=O},sliceByTwo:function(y,x,w,b,S){var _=y.imageData,C=.5,T=!1,O=!1,L=x*C,j=w*C,H=s.filterBackend.resources,F,V,I=0,A=0,U=x,k=0;for(H.sliceByTwo||(H.sliceByTwo=document.createElement("canvas")),F=H.sliceByTwo,(F.width<x*1.5||F.height<w)&&(F.width=x*1.5,F.height=w),V=F.getContext("2d"),V.clearRect(0,0,x*1.5,w),V.putImageData(_,0,0),b=f(b),S=f(S);!T||!O;)x=L,w=j,b<f(L*C)?L=f(L*C):(L=b,T=!0),S<f(j*C)?j=f(j*C):(j=S,O=!0),V.drawImage(F,I,A,x,w,U,k,L,j),I=U,A=k,k+=j;return V.getImageData(I,A,b,S)},lanczosResize:function(y,x,w,b,S){function _(R){var D,W,M,P,z,$,X,Y,J,ie,re;for(k.x=(R+.5)*j,E.x=f(k.x),D=0;D<S;D++){for(k.y=(D+.5)*H,E.y=f(k.y),z=0,$=0,X=0,Y=0,J=0,W=E.x-I;W<=E.x+I;W++)if(!(W<0||W>=x)){ie=f(1e3*o(W-k.x)),U[ie]||(U[ie]={});for(var q=E.y-A;q<=E.y+A;q++)q<0||q>=w||(re=f(1e3*o(q-k.y)),U[ie][re]||(U[ie][re]=L(a(h(ie*F,2)+h(re*V,2))/1e3)),M=U[ie][re],M>0&&(P=(q*x+W)*4,z+=M,$+=M*C[P],X+=M*C[P+1],Y+=M*C[P+2],J+=M*C[P+3]))}P=(D*b+R)*4,O[P]=$/z,O[P+1]=X/z,O[P+2]=Y/z,O[P+3]=J/z}return++R<b?_(R):T}var C=y.imageData.data,T=y.ctx.createImageData(b,S),O=T.data,L=this.lanczosCreate(this.lanczosLobes),j=this.rcpScaleX,H=this.rcpScaleY,F=2/this.rcpScaleX,V=2/this.rcpScaleY,I=v(j*this.lanczosLobes/2),A=v(H*this.lanczosLobes/2),U={},k={},E={};return _(0)},bilinearFiltering:function(y,x,w,b,S){var _,C,T,O,L,j,H,F,V,I,A,U,k=0,E,R=this.rcpScaleX,D=this.rcpScaleY,W=4*(x-1),M=y.imageData,P=M.data,z=y.ctx.createImageData(b,S),$=z.data;for(H=0;H<S;H++)for(F=0;F<b;F++)for(L=f(R*F),j=f(D*H),V=R*F-L,I=D*H-j,E=4*(j*x+L),A=0;A<4;A++)_=P[E+A],C=P[E+4+A],T=P[E+W+A],O=P[E+W+4+A],U=_*(1-V)*(1-I)+C*V*(1-I)+T*I*(1-V)+O*V*I,$[k++]=U;return z},hermiteFastResize:function(y,x,w,b,S){for(var _=this.rcpScaleX,C=this.rcpScaleY,T=v(_/2),O=v(C/2),L=y.imageData,j=L.data,H=y.ctx.createImageData(b,S),F=H.data,V=0;V<S;V++)for(var I=0;I<b;I++){for(var A=(I+V*b)*4,U=0,k=0,E=0,R=0,D=0,W=0,M=0,P=(V+.5)*C,z=f(V*C);z<(V+1)*C;z++)for(var $=o(P-(z+.5))/O,X=(I+.5)*_,Y=$*$,J=f(I*_);J<(I+1)*_;J++){var ie=o(X-(J+.5))/T,re=a(Y+ie*ie);re>1&&re<-1||(U=2*re*re*re-3*re*re+1,U>0&&(ie=4*(J+z*x),M+=U*j[ie+3],E+=U,j[ie+3]<255&&(U=U*j[ie+3]/250),R+=U*j[ie],D+=U*j[ie+1],W+=U*j[ie+2],k+=U))}F[A]=R/k,F[A+1]=D/k,F[A+2]=W/k,F[A+3]=M/E}return H},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),s.Image.filters.Resize.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Contrast=f(h.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(a){if(this.contrast!==0){var o=a.imageData,c,v,d=o.data,v=d.length,p=Math.floor(this.contrast*255),g=259*(p+255)/(255*(259-p));for(c=0;c<v;c+=4)d[c]=g*(d[c]-128)+128,d[c+1]=g*(d[c+1]-128)+128,d[c+2]=g*(d[c+2]-128)+128}},getUniformLocations:function(a,o){return{uContrast:a.getUniformLocation(o,"uContrast")}},sendUniformData:function(a,o){a.uniform1f(o.uContrast,this.contrast)}}),s.Image.filters.Contrast.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Saturation=f(h.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(a){if(this.saturation!==0){var o=a.imageData,c=o.data,d=c.length,v=-this.saturation,p,g;for(p=0;p<d;p+=4)g=Math.max(c[p],c[p+1],c[p+2]),c[p]+=g!==c[p]?(g-c[p])*v:0,c[p+1]+=g!==c[p+1]?(g-c[p+1])*v:0,c[p+2]+=g!==c[p+2]?(g-c[p+2])*v:0}},getUniformLocations:function(a,o){return{uSaturation:a.getUniformLocation(o,"uSaturation")}},sendUniformData:function(a,o){a.uniform1f(o.uSaturation,-this.saturation)}}),s.Image.filters.Saturation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Vibrance=f(h.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(a){if(this.vibrance!==0){var o=a.imageData,c=o.data,d=c.length,v=-this.vibrance,p,g,y,x;for(p=0;p<d;p+=4)g=Math.max(c[p],c[p+1],c[p+2]),y=(c[p]+c[p+1]+c[p+2])/3,x=Math.abs(g-y)*2/255*v,c[p]+=g!==c[p]?(g-c[p])*x:0,c[p+1]+=g!==c[p+1]?(g-c[p+1])*x:0,c[p+2]+=g!==c[p+2]?(g-c[p+2])*x:0}},getUniformLocations:function(a,o){return{uVibrance:a.getUniformLocation(o,"uVibrance")}},sendUniformData:function(a,o){a.uniform1f(o.uVibrance,-this.vibrance)}}),s.Image.filters.Vibrance.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Blur=f(h.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(a){a.webgl?(this.aspectRatio=a.sourceWidth/a.sourceHeight,a.passes++,this._setupFrameBuffer(a),this.horizontal=!0,this.applyToWebGL(a),this._swapTextures(a),this._setupFrameBuffer(a),this.horizontal=!1,this.applyToWebGL(a),this._swapTextures(a)):this.applyTo2d(a)},applyTo2d:function(a){a.imageData=this.simpleBlur(a)},simpleBlur:function(a){var o=a.filterBackend.resources,c,d,v=a.imageData.width,p=a.imageData.height;o.blurLayer1||(o.blurLayer1=s.util.createCanvasElement(),o.blurLayer2=s.util.createCanvasElement()),c=o.blurLayer1,d=o.blurLayer2,(c.width!==v||c.height!==p)&&(d.width=c.width=v,d.height=c.height=p);var g=c.getContext("2d"),y=d.getContext("2d"),x=15,w,b,S,_,C=this.blur*.06*.5;for(g.putImageData(a.imageData,0,0),y.clearRect(0,0,v,p),_=-x;_<=x;_++)w=(Math.random()-.5)/4,b=_/x,S=C*b*v+w,y.globalAlpha=1-Math.abs(b),y.drawImage(c,S,w),g.drawImage(d,0,0),y.globalAlpha=1,y.clearRect(0,0,d.width,d.height);for(_=-x;_<=x;_++)w=(Math.random()-.5)/4,b=_/x,S=C*b*p+w,y.globalAlpha=1-Math.abs(b),y.drawImage(c,w,S),g.drawImage(d,0,0),y.globalAlpha=1,y.clearRect(0,0,d.width,d.height);a.ctx.drawImage(c,0,0);var T=a.ctx.getImageData(0,0,c.width,c.height);return g.globalAlpha=1,g.clearRect(0,0,c.width,c.height),T},getUniformLocations:function(a,o){return{delta:a.getUniformLocation(o,"uDelta")}},sendUniformData:function(a,o){var c=this.chooseRightDelta();a.uniform2fv(o.delta,c)},chooseRightDelta:function(){var a=1,o=[0,0],c;return this.horizontal?this.aspectRatio>1&&(a=1/this.aspectRatio):this.aspectRatio<1&&(a=this.aspectRatio),c=a*this.blur*.12,this.horizontal?o[0]=c:o[1]=c,o}}),h.Blur.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Gamma=f(h.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(a){this.gamma=[1,1,1],h.BaseFilter.prototype.initialize.call(this,a)},applyTo2d:function(a){var o=a.imageData,c=o.data,d=this.gamma,v=c.length,p=1/d[0],g=1/d[1],y=1/d[2],x;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),x=0,v=256;x<v;x++)this.rVals[x]=Math.pow(x/255,p)*255,this.gVals[x]=Math.pow(x/255,g)*255,this.bVals[x]=Math.pow(x/255,y)*255;for(x=0,v=c.length;x<v;x+=4)c[x]=this.rVals[c[x]],c[x+1]=this.gVals[c[x+1]],c[x+2]=this.bVals[c[x+2]]},getUniformLocations:function(a,o){return{uGamma:a.getUniformLocation(o,"uGamma")}},sendUniformData:function(a,o){a.uniform3fv(o.uGamma,this.gamma)}}),s.Image.filters.Gamma.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.Composed=f(h.BaseFilter,{type:"Composed",subFilters:[],initialize:function(a){this.callSuper("initialize",a),this.subFilters=this.subFilters.slice(0)},applyTo:function(a){a.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(a)})},toObject:function(){return s.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(a){return a.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(a){return!a.isNeutralState()})}}),s.Image.filters.Composed.fromObject=function(a,o){var c=a.subFilters||[],d=c.map(function(p){return new s.Image.filters[p.type](p)}),v=new s.Image.filters.Composed({subFilters:d});return o&&o(v),v}}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.Image.filters,f=s.util.createClass;h.HueRotation=f(h.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var a=this.rotation*Math.PI,o=s.util.cos(a),c=s.util.sin(a),d=1/3,v=Math.sqrt(d)*c,p=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+p/3,this.matrix[1]=d*p-v,this.matrix[2]=d*p+v,this.matrix[5]=d*p+v,this.matrix[6]=o+d*p,this.matrix[7]=d*p-v,this.matrix[10]=d*p-v,this.matrix[11]=d*p+v,this.matrix[12]=o+d*p},isNeutralState:function(a){return this.calculateMatrix(),h.BaseFilter.prototype.isNeutralState.call(this,a)},applyTo:function(a){this.calculateMatrix(),h.BaseFilter.prototype.applyTo.call(this,a)}}),s.Image.filters.HueRotation.fromObject=s.Image.filters.BaseFilter.fromObject}(t),function(l){var s=l.fabric||(l.fabric={}),h=s.util.object.clone;if(s.Text){s.warn("fabric.Text is already defined");return}var f="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");s.Text=s.util.createClass(s.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:s.Object.prototype.stateProperties.concat(f),cacheProperties:s.Object.prototype.cacheProperties.concat(f),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(a,o){this.styles=o?o.styles||{}:{},this.text=a,this.__skipDimension=!0,this.callSuper("initialize",o),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var a=this.path;a&&(a.segmentsInfo=s.util.getPathSegmentsInfo(a.path))},getMeasuringContext:function(){return s._measuringContext||(s._measuringContext=this.canvas&&this.canvas.contextCache||s.util.createCanvasElement().getContext("2d")),s._measuringContext},_splitText:function(){var a=this._splitTextIntoLines(this.text);return this.textLines=a.lines,this._textLines=a.graphemeLines,this._unwrappedTextLines=a._unwrappedLines,this._text=a.graphemeText,a},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var a,o,c,d,v,p,g,y=0,x=this._textLines.length;y<x;y++)if(!(this.textAlign!=="justify"&&(y===x-1||this.isEndOfWrapping(y)))&&(d=0,v=this._textLines[y],o=this.getLineWidth(y),o<this.width&&(g=this.textLines[y].match(this._reSpacesAndTabs)))){c=g.length,a=(this.width-o)/c;for(var w=0,b=v.length;w<=b;w++)p=this.__charBounds[y][w],this._reSpaceAndTab.test(v[w])?(p.width+=a,p.kernedWidth+=a,p.left+=d,d+=a):p.left+=d}},isEndOfWrapping:function(a){return a===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var a=this.callSuper("_getCacheCanvasDimensions"),o=this.fontSize;return a.width+=o*a.zoomX,a.height+=o*a.zoomY,a},_render:function(a){var o=this.path;o&&!o.isNotVisible()&&o._render(a),this._setTextStyles(a),this._renderTextLinesBackground(a),this._renderTextDecoration(a,"underline"),this._renderText(a),this._renderTextDecoration(a,"overline"),this._renderTextDecoration(a,"linethrough")},_renderText:function(a){this.paintFirst==="stroke"?(this._renderTextStroke(a),this._renderTextFill(a)):(this._renderTextFill(a),this._renderTextStroke(a))},_setTextStyles:function(a,o,c){if(a.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":a.textBaseline="middle";break;case"ascender":a.textBaseline="top";break;case"descender":a.textBaseline="bottom";break}a.font=this._getFontDeclaration(o,c)},calcTextWidth:function(){for(var a=this.getLineWidth(0),o=1,c=this._textLines.length;o<c;o++){var d=this.getLineWidth(o);d>a&&(a=d)}return a},_renderTextLine:function(a,o,c,d,v,p){this._renderChars(a,o,c,d,v,p)},_renderTextLinesBackground:function(a){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var o,c,d=a.fillStyle,v,p,g=this._getLeftOffset(),y=this._getTopOffset(),x=0,w=0,b,S,_=this.path,C,T=0,O=this._textLines.length;T<O;T++){if(o=this.getHeightOfLine(T),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",T)){y+=o;continue}v=this._textLines[T],c=this._getLineLeftOffset(T),w=0,x=0,p=this.getValueOfPropertyAt(T,0,"textBackgroundColor");for(var L=0,j=v.length;L<j;L++)b=this.__charBounds[T][L],S=this.getValueOfPropertyAt(T,L,"textBackgroundColor"),_?(a.save(),a.translate(b.renderLeft,b.renderTop),a.rotate(b.angle),a.fillStyle=S,S&&a.fillRect(-b.width/2,-o/this.lineHeight*(1-this._fontSizeFraction),b.width,o/this.lineHeight),a.restore()):S!==p?(C=g+c+x,this.direction==="rtl"&&(C=this.width-C-w),a.fillStyle=p,p&&a.fillRect(C,y,w,o/this.lineHeight),x=b.left,w=b.width,p=S):w+=b.kernedWidth;S&&!_&&(C=g+c+x,this.direction==="rtl"&&(C=this.width-C-w),a.fillStyle=S,a.fillRect(C,y,w,o/this.lineHeight)),y+=o}a.fillStyle=d,this._removeShadow(a)}},getFontCache:function(a){var o=a.fontFamily.toLowerCase();s.charWidthsCache[o]||(s.charWidthsCache[o]={});var c=s.charWidthsCache[o],d=a.fontStyle.toLowerCase()+"_"+(a.fontWeight+"").toLowerCase();return c[d]||(c[d]={}),c[d]},_measureChar:function(a,o,c,d){var v=this.getFontCache(o),p=this._getFontDeclaration(o),g=this._getFontDeclaration(d),y=c+a,x=p===g,w,b,S,_=o.fontSize/this.CACHE_FONT_SIZE,C;if(c&&v[c]!==void 0&&(S=v[c]),v[a]!==void 0&&(C=w=v[a]),x&&v[y]!==void 0&&(b=v[y],C=b-S),w===void 0||S===void 0||b===void 0){var T=this.getMeasuringContext();this._setTextStyles(T,o,!0)}return w===void 0&&(C=w=T.measureText(a).width,v[a]=w),S===void 0&&x&&c&&(S=T.measureText(c).width,v[c]=S),x&&b===void 0&&(b=T.measureText(y).width,v[y]=b,C=b-S),{width:w*_,kernedWidth:C*_}},getHeightOfChar:function(a,o){return this.getValueOfPropertyAt(a,o,"fontSize")},measureLine:function(a){var o=this._measureLine(a);return this.charSpacing!==0&&(o.width-=this._getWidthOfCharSpacing()),o.width<0&&(o.width=0),o},_measureLine:function(a){var o=0,c,d,v=this._textLines[a],p,g,y=0,x=new Array(v.length),w=0,b,S,_=this.path,C=this.pathSide==="right";for(this.__charBounds[a]=x,c=0;c<v.length;c++)d=v[c],g=this._getGraphemeBox(d,a,c,p),x[c]=g,o+=g.kernedWidth,p=d;if(x[c]={left:g?g.left+g.width:0,width:0,kernedWidth:0,height:this.fontSize},_){switch(S=_.segmentsInfo[_.segmentsInfo.length-1].length,b=s.util.getPointOnPath(_.path,0,_.segmentsInfo),b.x+=_.pathOffset.x,b.y+=_.pathOffset.y,this.textAlign){case"left":w=C?S-o:0;break;case"center":w=(S-o)/2;break;case"right":w=C?0:S-o;break}for(w+=this.pathStartOffset*(C?-1:1),c=C?v.length-1:0;C?c>=0:c<v.length;C?c--:c++)g=x[c],w>S?w%=S:w<0&&(w+=S),this._setGraphemeOnPath(w,g,b),w+=g.kernedWidth}return{width:o,numOfSpaces:y}},_setGraphemeOnPath:function(a,o,c){var d=a+o.kernedWidth/2,v=this.path,p=s.util.getPointOnPath(v.path,d,v.segmentsInfo);o.renderLeft=p.x-c.x,o.renderTop=p.y-c.y,o.angle=p.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(a,o,c,d,v){var p=this.getCompleteStyleDeclaration(o,c),g=d?this.getCompleteStyleDeclaration(o,c-1):{},y=this._measureChar(a,p,d,g),x=y.kernedWidth,w=y.width,b;this.charSpacing!==0&&(b=this._getWidthOfCharSpacing(),w+=b,x+=b);var S={width:w,left:0,height:p.fontSize,kernedWidth:x,deltaY:p.deltaY};if(c>0&&!v){var _=this.__charBounds[o][c-1];S.left=_.left+_.width+y.kernedWidth-y.width}return S},getHeightOfLine:function(a){if(this.__lineHeights[a])return this.__lineHeights[a];for(var o=this._textLines[a],c=this.getHeightOfChar(a,0),d=1,v=o.length;d<v;d++)c=Math.max(this.getHeightOfChar(a,d),c);return this.__lineHeights[a]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var a,o=0,c=0,d=this._textLines.length;c<d;c++)a=this.getHeightOfLine(c),o+=c===d-1?a/this.lineHeight:a;return o},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(a,o){a.save();for(var c=0,d=this._getLeftOffset(),v=this._getTopOffset(),p=0,g=this._textLines.length;p<g;p++){var y=this.getHeightOfLine(p),x=y/this.lineHeight,w=this._getLineLeftOffset(p);this._renderTextLine(o,a,this._textLines[p],d+w,v+c+x,p),c+=y}a.restore()},_renderTextFill:function(a){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(a,"fillText")},_renderTextStroke:function(a){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(a),a.save(),this._setLineDash(a,this.strokeDashArray),a.beginPath(),this._renderTextCommon(a,"strokeText"),a.closePath(),a.restore())},_renderChars:function(a,o,c,d,v,p){var g=this.getHeightOfLine(p),y=this.textAlign.indexOf("justify")!==-1,x,w,b="",S,_=0,C,T=this.path,O=!y&&this.charSpacing===0&&this.isEmptyStyles(p)&&!T,L=this.direction==="ltr",j=this.direction==="ltr"?1:-1,H,F=o.canvas.getAttribute("dir");if(o.save(),F!==this.direction&&(o.canvas.setAttribute("dir",L?"ltr":"rtl"),o.direction=L?"ltr":"rtl",o.textAlign=L?"left":"right"),v-=g*this._fontSizeFraction/this.lineHeight,O){this._renderChar(a,o,p,0,c.join(""),d,v,g),o.restore();return}for(var V=0,I=c.length-1;V<=I;V++)C=V===I||this.charSpacing||T,b+=c[V],S=this.__charBounds[p][V],_===0?(d+=j*(S.kernedWidth-S.width),_+=S.width):_+=S.kernedWidth,y&&!C&&this._reSpaceAndTab.test(c[V])&&(C=!0),C||(x=x||this.getCompleteStyleDeclaration(p,V),w=this.getCompleteStyleDeclaration(p,V+1),C=s.util.hasStyleChanged(x,w,!1)),C&&(T?(o.save(),o.translate(S.renderLeft,S.renderTop),o.rotate(S.angle),this._renderChar(a,o,p,V,b,-_/2,0,g),o.restore()):(H=d,this._renderChar(a,o,p,V,b,H,v,g)),b="",x=w,d+=j*_,_=0);o.restore()},_applyPatternGradientTransformText:function(a){var o=s.util.createCanvasElement(),c,d=this.width+this.strokeWidth,v=this.height+this.strokeWidth;return o.width=d,o.height=v,c=o.getContext("2d"),c.beginPath(),c.moveTo(0,0),c.lineTo(d,0),c.lineTo(d,v),c.lineTo(0,v),c.closePath(),c.translate(d/2,v/2),c.fillStyle=a.toLive(c),this._applyPatternGradientTransform(c,a),c.fill(),c.createPattern(o,"no-repeat")},handleFiller:function(a,o,c){var d,v;return c.toLive?c.gradientUnits==="percentage"||c.gradientTransform||c.patternTransform?(d=-this.width/2,v=-this.height/2,a.translate(d,v),a[o]=this._applyPatternGradientTransformText(c),{offsetX:d,offsetY:v}):(a[o]=c.toLive(a,this),this._applyPatternGradientTransform(a,c)):(a[o]=c,{offsetX:0,offsetY:0})},_setStrokeStyles:function(a,o){return a.lineWidth=o.strokeWidth,a.lineCap=this.strokeLineCap,a.lineDashOffset=this.strokeDashOffset,a.lineJoin=this.strokeLineJoin,a.miterLimit=this.strokeMiterLimit,this.handleFiller(a,"strokeStyle",o.stroke)},_setFillStyles:function(a,o){return this.handleFiller(a,"fillStyle",o.fill)},_renderChar:function(a,o,c,d,v,p,g){var y=this._getStyleDeclaration(c,d),x=this.getCompleteStyleDeclaration(c,d),w=a==="fillText"&&x.fill,b=a==="strokeText"&&x.stroke&&x.strokeWidth,S,_;!b&&!w||(o.save(),w&&(S=this._setFillStyles(o,x)),b&&(_=this._setStrokeStyles(o,x)),o.font=this._getFontDeclaration(x),y&&y.textBackgroundColor&&this._removeShadow(o),y&&y.deltaY&&(g+=y.deltaY),w&&o.fillText(v,p-S.offsetX,g-S.offsetY),b&&o.strokeText(v,p-_.offsetX,g-_.offsetY),o.restore())},setSuperscript:function(a,o){return this._setScript(a,o,this.superscript)},setSubscript:function(a,o){return this._setScript(a,o,this.subscript)},_setScript:function(a,o,c){var d=this.get2DCursorLocation(a,!0),v=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"fontSize"),p=this.getValueOfPropertyAt(d.lineIndex,d.charIndex,"deltaY"),g={fontSize:v*c.size,deltaY:p+v*c.baseline};return this.setSelectionStyles(g,a,o),this},_getLineLeftOffset:function(a){var o=this.getLineWidth(a),c=this.width-o,d=this.textAlign,v=this.direction,g,p=0,g=this.isEndOfWrapping(a);return d==="justify"||d==="justify-center"&&!g||d==="justify-right"&&!g||d==="justify-left"&&!g?0:(d==="center"&&(p=c/2),d==="right"&&(p=c),d==="justify-center"&&(p=c/2),d==="justify-right"&&(p=c),v==="rtl"&&(p-=c),p)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var a=this._forceClearCache;return a||(a=this.hasStateChanged("_dimensionAffectingProps")),a&&(this.dirty=!0,this._forceClearCache=!1),a},getLineWidth:function(a){if(this.__lineWidths[a]!==void 0)return this.__lineWidths[a];var o=this.measureLine(a),c=o.width;return this.__lineWidths[a]=c,c},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(a,o,c){var d=this._getStyleDeclaration(a,o);return d&&typeof d[c]<"u"?d[c]:this[c]},_renderTextDecoration:function(a,o){if(!(!this[o]&&!this.styleHas(o))){a.save(),(o==="overline"||o==="linethrough")&&this._removeShadow(a);for(var c,d,v,p,g,y,x,w,b=this._getLeftOffset(),S=this._getTopOffset(),_,C,T,O,L,j,H,F,V=this.path,I=this._getWidthOfCharSpacing(),A=this.offsets[o],U=0,k=this._textLines.length;U<k;U++){if(c=this.getHeightOfLine(U),!this[o]&&!this.styleHas(o,U)){S+=c;continue}x=this._textLines[U],j=c/this.lineHeight,p=this._getLineLeftOffset(U),C=0,T=0,w=this.getValueOfPropertyAt(U,0,o),F=this.getValueOfPropertyAt(U,0,"fill"),_=S+j*(1-this._fontSizeFraction),d=this.getHeightOfChar(U,0),g=this.getValueOfPropertyAt(U,0,"deltaY");for(var E=0,R=x.length;E<R;E++)if(O=this.__charBounds[U][E],L=this.getValueOfPropertyAt(U,E,o),H=this.getValueOfPropertyAt(U,E,"fill"),v=this.getHeightOfChar(U,E),y=this.getValueOfPropertyAt(U,E,"deltaY"),V&&L&&H)a.save(),a.fillStyle=F,a.translate(O.renderLeft,O.renderTop),a.rotate(O.angle),a.fillRect(-O.kernedWidth/2,A*v+y,O.kernedWidth,this.fontSize/15),a.restore();else if((L!==w||H!==F||v!==d||y!==g)&&T>0){var D=b+p+C;this.direction==="rtl"&&(D=this.width-D-T),w&&F&&(a.fillStyle=F,a.fillRect(D,_+A*d+g,T,this.fontSize/15)),C=O.left,T=O.width,w=L,F=H,d=v,g=y}else T+=O.kernedWidth;var D=b+p+C;this.direction==="rtl"&&(D=this.width-D-T),a.fillStyle=H,L&&H&&a.fillRect(D,_+A*d+g,T-I,this.fontSize/15),S+=c}a.restore()}},_getFontDeclaration:function(a,o){var c=a||this,d=this.fontFamily,v=s.Text.genericFonts.indexOf(d.toLowerCase())>-1,p=d===void 0||d.indexOf("'")>-1||d.indexOf(",")>-1||d.indexOf('"')>-1||v?c.fontFamily:'"'+c.fontFamily+'"';return[s.isLikelyNode?c.fontWeight:c.fontStyle,s.isLikelyNode?c.fontStyle:c.fontWeight,o?this.CACHE_FONT_SIZE+"px":c.fontSize+"px",p].join(" ")},render:function(a){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",a)))},_splitTextIntoLines:function(a){for(var o=a.split(this._reNewline),c=new Array(o.length),d=[`
`],v=[],p=0;p<o.length;p++)c[p]=s.util.string.graphemeSplit(o[p]),v=v.concat(c[p],d);return v.pop(),{_unwrappedLines:c,lines:o,graphemeText:v,graphemeLines:c}},toObject:function(a){var o=f.concat(a),c=this.callSuper("toObject",o);return c.styles=s.util.stylesToArray(this.styles,this.text),c.path&&(c.path=this.path.toObject()),c},set:function(a,o){this.callSuper("set",a,o);var c=!1,d=!1;if(typeof a=="object")for(var v in a)v==="path"&&this.setPathInfo(),c=c||this._dimensionAffectingProps.indexOf(v)!==-1,d=d||v==="path";else c=this._dimensionAffectingProps.indexOf(a)!==-1,d=a==="path";return d&&this.setPathInfo(),c&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),s.Text.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),s.Text.DEFAULT_SVG_FONT_SIZE=16,s.Text.fromElement=function(a,o,c){if(!a)return o(null);var d=s.parseAttributes(a,s.Text.ATTRIBUTE_NAMES),v=d.textAnchor||"left";if(c=s.util.object.extend(c?h(c):{},d),c.top=c.top||0,c.left=c.left||0,d.textDecoration){var p=d.textDecoration;p.indexOf("underline")!==-1&&(c.underline=!0),p.indexOf("overline")!==-1&&(c.overline=!0),p.indexOf("line-through")!==-1&&(c.linethrough=!0),delete c.textDecoration}"dx"in d&&(c.left+=d.dx),"dy"in d&&(c.top+=d.dy),"fontSize"in c||(c.fontSize=s.Text.DEFAULT_SVG_FONT_SIZE);var g="";"textContent"in a?g=a.textContent:"firstChild"in a&&a.firstChild!==null&&"data"in a.firstChild&&a.firstChild.data!==null&&(g=a.firstChild.data),g=g.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var y=c.strokeWidth;c.strokeWidth=0;var x=new s.Text(g,c),w=x.getScaledHeight()/x.height,b=(x.height+x.strokeWidth)*x.lineHeight-x.height,S=b*w,_=x.getScaledHeight()+S,C=0;v==="center"&&(C=x.getScaledWidth()/2),v==="right"&&(C=x.getScaledWidth()),x.set({left:x.left-C,top:x.top-(_-x.fontSize*(.07+x._fontSizeFraction))/x.lineHeight,strokeWidth:typeof y<"u"?y:1}),o(x)},s.Text.fromObject=function(a,o){var c=h(a),d=a.path;return delete c.path,s.Object._fromObject("Text",c,function(v){v.styles=s.util.stylesFromArray(a.styles,a.text),d?s.Object._fromObject("Path",d,function(p){v.set("path",p),o(v)},"path"):o(v)},"text")},s.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],s.util.createAccessors&&s.util.createAccessors(s.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(l){if(!this.styles||typeof l<"u"&&!this.styles[l])return!0;var s=typeof l>"u"?this.styles:{line:this.styles[l]};for(var h in s)for(var f in s[h])for(var a in s[h][f])return!1;return!0},styleHas:function(l,s){if(!this.styles||!l||l===""||typeof s<"u"&&!this.styles[s])return!1;var h=typeof s>"u"?this.styles:{0:this.styles[s]};for(var f in h)for(var a in h[f])if(typeof h[f][a][l]<"u")return!0;return!1},cleanStyle:function(l){if(!this.styles||!l||l==="")return!1;var s=this.styles,h=0,f,a,o=!0,c=0,d;for(var v in s){f=0;for(var p in s[v]){var d=s[v][p],g=d.hasOwnProperty(l);h++,g?(a?d[l]!==a&&(o=!1):a=d[l],d[l]===this[l]&&delete d[l]):o=!1,Object.keys(d).length!==0?f++:delete s[v][p]}f===0&&delete s[v]}for(var y=0;y<this._textLines.length;y++)c+=this._textLines[y].length;o&&h===c&&(this[l]=a,this.removeStyle(l))},removeStyle:function(l){if(!(!this.styles||!l||l==="")){var s=this.styles,h,f,a;for(f in s){h=s[f];for(a in h)delete h[a][l],Object.keys(h[a]).length===0&&delete h[a];Object.keys(h).length===0&&delete s[f]}}},_extendStyles:function(l,s){var h=this.get2DCursorLocation(l);this._getLineStyle(h.lineIndex)||this._setLineStyle(h.lineIndex),this._getStyleDeclaration(h.lineIndex,h.charIndex)||this._setStyleDeclaration(h.lineIndex,h.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(h.lineIndex,h.charIndex),s)},get2DCursorLocation:function(l,s){typeof l>"u"&&(l=this.selectionStart);for(var h=s?this._unwrappedTextLines:this._textLines,f=h.length,a=0;a<f;a++){if(l<=h[a].length)return{lineIndex:a,charIndex:l};l-=h[a].length+this.missingNewlineOffset(a,s)}return{lineIndex:a-1,charIndex:h[a-1].length<l?h[a-1].length:l}},getSelectionStyles:function(l,s,h){typeof l>"u"&&(l=this.selectionStart||0),typeof s>"u"&&(s=this.selectionEnd||l);for(var f=[],a=l;a<s;a++)f.push(this.getStyleAtPosition(a,h));return f},getStyleAtPosition:function(l,s){var h=this.get2DCursorLocation(l),f=s?this.getCompleteStyleDeclaration(h.lineIndex,h.charIndex):this._getStyleDeclaration(h.lineIndex,h.charIndex);return f||{}},setSelectionStyles:function(l,s,h){typeof s>"u"&&(s=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||s);for(var f=s;f<h;f++)this._extendStyles(f,l);return this._forceClearCache=!0,this},_getStyleDeclaration:function(l,s){var h=this.styles&&this.styles[l];return h?h[s]:null},getCompleteStyleDeclaration:function(l,s){for(var h=this._getStyleDeclaration(l,s)||{},f={},a,o=0;o<this._styleProperties.length;o++)a=this._styleProperties[o],f[a]=typeof h[a]>"u"?this[a]:h[a];return f},_setStyleDeclaration:function(l,s,h){this.styles[l][s]=h},_deleteStyleDeclaration:function(l,s){delete this.styles[l][s]},_getLineStyle:function(l){return!!this.styles[l]},_setLineStyle:function(l){this.styles[l]={}},_deleteLineStyle:function(l){delete this.styles[l]}})}(),function(){function l(s){s.textDecoration&&(s.textDecoration.indexOf("underline")>-1&&(s.underline=!0),s.textDecoration.indexOf("line-through")>-1&&(s.linethrough=!0),s.textDecoration.indexOf("overline")>-1&&(s.overline=!0),delete s.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(s,h){this.callSuper("initialize",s,h),this.initBehavior()},setSelectionStart:function(s){s=Math.max(s,0),this._updateAndFire("selectionStart",s)},setSelectionEnd:function(s){s=Math.min(s,this.text.length),this._updateAndFire("selectionEnd",s)},_updateAndFire:function(s,h){this[s]!==h&&(this._fireSelectionChanged(),this[s]=h),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(s){this.clearContextTop(),this.callSuper("render",s),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(s){this.callSuper("_render",s)},clearContextTop:function(s){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this.canvas.contextTop,f=this.canvas.viewportTransform;h.save(),h.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this.transform(h),this._clearTextArea(h),s||h.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var s=this._getCursorBoundaries(),h=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(s,h):this.renderSelection(s,h),h.restore()}},_clearTextArea:function(s){var h=this.width+4,f=this.height+4;s.clearRect(-h/2,-f/2,h,f)},_getCursorBoundaries:function(s){typeof s>"u"&&(s=this.selectionStart);var h=this._getLeftOffset(),f=this._getTopOffset(),a=this._getCursorBoundariesOffsets(s);return{left:h,top:f,leftOffset:a.left,topOffset:a.top}},_getCursorBoundariesOffsets:function(s){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var h,f,a,o=0,c=0,d,v=this.get2DCursorLocation(s);a=v.charIndex,f=v.lineIndex;for(var p=0;p<f;p++)o+=this.getHeightOfLine(p);h=this._getLineLeftOffset(f);var g=this.__charBounds[f][a];return g&&(c=g.left),this.charSpacing!==0&&a===this._textLines[f].length&&(c-=this._getWidthOfCharSpacing()),d={top:o,left:h+(c>0?c:0)},this.direction==="rtl"&&(d.left*=-1),this.cursorOffsetCache=d,this.cursorOffsetCache},renderCursor:function(s,h){var f=this.get2DCursorLocation(),a=f.lineIndex,o=f.charIndex>0?f.charIndex-1:0,c=this.getValueOfPropertyAt(a,o,"fontSize"),d=this.scaleX*this.canvas.getZoom(),v=this.cursorWidth/d,p=s.topOffset,g=this.getValueOfPropertyAt(a,o,"deltaY");p+=(1-this._fontSizeFraction)*this.getHeightOfLine(a)/this.lineHeight-c*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(s,h),h.fillStyle=this.cursorColor||this.getValueOfPropertyAt(a,o,"fill"),h.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,h.fillRect(s.left+s.leftOffset-v/2,p+s.top+g,v,c)},renderSelection:function(s,h){for(var f=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,a=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,c=this.get2DCursorLocation(f),d=this.get2DCursorLocation(a),v=c.lineIndex,p=d.lineIndex,g=c.charIndex<0?0:c.charIndex,y=d.charIndex<0?0:d.charIndex,x=v;x<=p;x++){var w=this._getLineLeftOffset(x)||0,b=this.getHeightOfLine(x),S=0,_=0,C=0;if(x===v&&(_=this.__charBounds[v][g].left),x>=v&&x<p)C=o&&!this.isEndOfWrapping(x)?this.width:this.getLineWidth(x)||5;else if(x===p)if(y===0)C=this.__charBounds[p][y].left;else{var T=this._getWidthOfCharSpacing();C=this.__charBounds[p][y-1].left+this.__charBounds[p][y-1].width-T}S=b,(this.lineHeight<1||x===p&&this.lineHeight>1)&&(b/=this.lineHeight);var O=s.left+w+_,L=C-_,j=b,H=0;this.inCompositionMode?(h.fillStyle=this.compositionColor||"black",j=1,H=b):h.fillStyle=this.selectionColor,this.direction==="rtl"&&(O=this.width-O-L),h.fillRect(O,s.top+s.topOffset+H,L,j),s.topOffset+=S}},getCurrentCharFontSize:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fontSize")},getCurrentCharColor:function(){var s=this._getCurrentCharIndex();return this.getValueOfPropertyAt(s.l,s.c,"fill")},_getCurrentCharIndex:function(){var s=this.get2DCursorLocation(this.selectionStart,!0),h=s.charIndex>0?s.charIndex-1:0;return{l:s.lineIndex,c:h}}}),e.IText.fromObject=function(s,h){var f=e.util.stylesFromArray(s.styles,s.text),a=Object.assign({},s,{styles:f});if(delete a.path,l(a),a.styles)for(var o in a.styles)for(var c in a.styles[o])l(a.styles[o][c]);e.Object._fromObject("IText",a,function(d){s.path?e.Object._fromObject("Path",s.path,function(v){d.set("path",v),h(d)},"path"):h(d)},"text")}}(),function(){var l=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var s=this;this.on("added",function(){var h=s.canvas;h&&(h._hasITextHandlers||(h._hasITextHandlers=!0,s._initCanvasHandlers(h)),h._iTextInstances=h._iTextInstances||[],h._iTextInstances.push(s))})},initRemovedHandler:function(){var s=this;this.on("removed",function(){var h=s.canvas;h&&(h._iTextInstances=h._iTextInstances||[],e.util.removeFromArray(h._iTextInstances,s),h._iTextInstances.length===0&&(h._hasITextHandlers=!1,s._removeCanvasHandlers(h)))})},_initCanvasHandlers:function(s){s._mouseUpITextHandler=function(){s._iTextInstances&&s._iTextInstances.forEach(function(h){h.__isMousedown=!1})},s.on("mouse:up",s._mouseUpITextHandler)},_removeCanvasHandlers:function(s){s.off("mouse:up",s._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(s,h,f,a){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},s.animate("_currentCursorOpacity",h,{duration:f,onComplete:function(){o.isAborted||s[a]()},onChange:function(){s.canvas&&s.selectionStart===s.selectionEnd&&s.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var s=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){s._currentTickCompleteState=s._animateCursor(s,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(s){var h=this,f=s?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){h._tick()},f)},abortCursorAnimation:function(){var s=this._currentTickState||this._currentTickCompleteState,h=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,s&&h&&h.clearContext(h.contextTop||h.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(s){var h=0,f=s-1;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)h++,f--;for(;/\S/.test(this._text[f])&&f>-1;)h++,f--;return s-h},findWordBoundaryRight:function(s){var h=0,f=s;if(this._reSpace.test(this._text[f]))for(;this._reSpace.test(this._text[f]);)h++,f++;for(;/\S/.test(this._text[f])&&f<this._text.length;)h++,f++;return s+h},findLineBoundaryLeft:function(s){for(var h=0,f=s-1;!/\n/.test(this._text[f])&&f>-1;)h++,f--;return s-h},findLineBoundaryRight:function(s){for(var h=0,f=s;!/\n/.test(this._text[f])&&f<this._text.length;)h++,f++;return s+h},searchWordBoundary:function(s,h){for(var f=this._text,a=this._reSpace.test(f[s])?s-1:s,o=f[a],c=e.reNonWord;!c.test(o)&&a>0&&a<f.length;)a+=h,o=f[a];return c.test(o)&&(a+=h===1?0:1),a},selectWord:function(s){s=s||this.selectionStart;var h=this.searchWordBoundary(s,-1),f=this.searchWordBoundary(s,1);this.selectionStart=h,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(s){s=s||this.selectionStart;var h=this.findLineBoundaryLeft(s),f=this.findLineBoundaryRight(s);return this.selectionStart=h,this.selectionEnd=f,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(s){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(s),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(s){s._iTextInstances&&s._iTextInstances.forEach(function(h){h.selected=!1,h.isEditing&&h.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(s){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var h=this.getSelectionStartFromPointer(s.e),f=this.selectionStart,a=this.selectionEnd;(h!==this.__selectionStartOnMouseDown||f===a)&&(f===h||a===h)||(h>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=h):(this.selectionStart=h,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==f||this.selectionEnd!==a)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(s,h,f){var a=f.slice(0,s),o=e.util.string.graphemeSplit(a).length;if(s===h)return{selectionStart:o,selectionEnd:o};var c=f.slice(s,h),d=e.util.string.graphemeSplit(c).length;return{selectionStart:o,selectionEnd:o+d}},fromGraphemeToStringSelection:function(s,h,f){var a=f.slice(0,s),o=a.join("").length;if(s===h)return{selectionStart:o,selectionEnd:o};var c=f.slice(s,h),d=c.join("").length;return{selectionStart:o,selectionEnd:o+d}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var s=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=s.selectionStart,this.hiddenTextarea.selectionEnd=s.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var s=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=s.selectionEnd,this.inCompositionMode||(this.selectionStart=s.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var s=this._calcTextareaPosition();this.hiddenTextarea.style.left=s.left,this.hiddenTextarea.style.top=s.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var s=this.inCompositionMode?this.compositionStart:this.selectionStart,h=this._getCursorBoundaries(s),f=this.get2DCursorLocation(s),a=f.lineIndex,o=f.charIndex,c=this.getValueOfPropertyAt(a,o,"fontSize")*this.lineHeight,d=h.leftOffset,v=this.calcTransformMatrix(),p={x:h.left+d,y:h.top+h.topOffset+c},g=this.canvas.getRetinaScaling(),y=this.canvas.upperCanvasEl,x=y.width/g,w=y.height/g,b=x-c,S=w-c,_=y.clientWidth/x,C=y.clientHeight/w;return p=e.util.transformPoint(p,v),p=e.util.transformPoint(p,this.canvas.viewportTransform),p.x*=_,p.y*=C,p.x<0&&(p.x=0),p.x>b&&(p.x=b),p.y<0&&(p.y=0),p.y>S&&(p.y=S),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:p.x+"px",top:p.y+"px",fontSize:c+"px",charHeight:c}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var s=this._textBeforeEdit!==this.text,h=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,h&&(h.blur&&h.blur(),h.parentNode&&h.parentNode.removeChild(h)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),s&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),s&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var s in this.styles)this._textLines[s]||delete this.styles[s]},removeStyleFromTo:function(s,h){var f=this.get2DCursorLocation(s,!0),a=this.get2DCursorLocation(h,!0),o=f.lineIndex,c=f.charIndex,d=a.lineIndex,v=a.charIndex,p,g;if(o!==d){if(this.styles[o])for(p=c;p<this._unwrappedTextLines[o].length;p++)delete this.styles[o][p];if(this.styles[d])for(p=v;p<this._unwrappedTextLines[d].length;p++)g=this.styles[d][p],g&&(this.styles[o]||(this.styles[o]={}),this.styles[o][c+p-v]=g);for(p=o+1;p<=d;p++)delete this.styles[p];this.shiftLineStyles(d,o-d)}else if(this.styles[o]){g=this.styles[o];var y=v-c,x,w;for(p=c;p<v;p++)delete g[p];for(w in this.styles[o])x=parseInt(w,10),x>=v&&(g[x-y]=g[w],delete g[w])}},shiftLineStyles:function(s,h){var f=l(this.styles);for(var a in this.styles){var o=parseInt(a,10);o>s&&(this.styles[o+h]=f[o],f[o-h]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(s,h,f,a){var o,c={},d=!1,v=this._unwrappedTextLines[s].length,p=v===h;f||(f=1),this.shiftLineStyles(s,f),this.styles[s]&&(o=this.styles[s][h===0?h:h-1]);for(var g in this.styles[s]){var y=parseInt(g,10);y>=h&&(d=!0,c[y-h]=this.styles[s][g],p&&h===0||delete this.styles[s][g])}var x=!1;for(d&&!p&&(this.styles[s+f]=c,x=!0),(x||v>h)&&f--;f>0;)a&&a[f-1]?this.styles[s+f]={0:l(a[f-1])}:o?this.styles[s+f]={0:l(o)}:delete this.styles[s+f],f--;this._forceClearCache=!0},insertCharStyleObject:function(s,h,f,a){this.styles||(this.styles={});var o=this.styles[s],c=o?l(o):{};f||(f=1);for(var d in c){var v=parseInt(d,10);v>=h&&(o[v+f]=c[v],c[v-f]||delete o[v])}if(this._forceClearCache=!0,a){for(;f--;)Object.keys(a[f]).length&&(this.styles[s]||(this.styles[s]={}),this.styles[s][h+f]=l(a[f]));return}if(o)for(var p=o[h?h-1:1];p&&f--;)this.styles[s][h+f]=l(p)},insertNewStyleBlock:function(s,h,f){for(var a=this.get2DCursorLocation(h,!0),o=[0],c=0,d=0;d<s.length;d++)s[d]===`
`?(c++,o[c]=0):o[c]++;o[0]>0&&(this.insertCharStyleObject(a.lineIndex,a.charIndex,o[0],f),f=f&&f.slice(o[0]+1)),c&&this.insertNewlineStyleObject(a.lineIndex,a.charIndex+o[0],c);for(var d=1;d<c;d++)o[d]>0?this.insertCharStyleObject(a.lineIndex+d,0,o[d],f):f&&this.styles[a.lineIndex+d]&&f[0]&&(this.styles[a.lineIndex+d][0]=f[0]),f=f&&f.slice(o[d]+1);o[d]>0&&this.insertCharStyleObject(a.lineIndex+d,0,o[d],f)},setSelectionStartEndWithShift:function(s,h,f){f<=s?(h===s?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=s),this.selectionStart=f):f>s&&f<h?this._selectionDirection==="right"?this.selectionEnd=f:this.selectionStart=f:(h===s?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=h),this.selectionEnd=f)},setSelectionInBoundaries:function(){var s=this.text.length;this.selectionStart>s?this.selectionStart=s:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>s?this.selectionEnd=s:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(l){if(this.canvas){this.__newClickTime=+new Date;var s=l.pointer;this.isTripleClick(s)&&(this.fire("tripleclick",l),this._stopEvent(l.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=s,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(l){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===l.x&&this.__lastPointer.y===l.y},_stopEvent:function(l){l.preventDefault&&l.preventDefault(),l.stopPropagation&&l.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(l){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(l.e))},tripleClickHandler:function(l){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(l.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(l){!this.canvas||!this.editable||l.e.button&&l.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(l.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(l){!this.canvas||!this.editable||l.e.button&&l.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(l){if(this.__isMousedown=!1,!(!this.editable||this.group||l.transform&&l.transform.actionPerformed||l.e.button&&l.e.button!==1)){if(this.canvas){var s=this.canvas._activeObject;if(s&&s!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(l.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(l){var s=this.getSelectionStartFromPointer(l),h=this.selectionStart,f=this.selectionEnd;l.shiftKey?this.setSelectionStartEndWithShift(h,f,s):(this.selectionStart=s,this.selectionEnd=s),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(l){for(var s=this.getLocalPointer(l),h=0,f=0,a=0,o=0,c=0,d,v,p=0,g=this._textLines.length;p<g&&a<=s.y;p++)a+=this.getHeightOfLine(p)*this.scaleY,c=p,p>0&&(o+=this._textLines[p-1].length+this.missingNewlineOffset(p-1));d=this._getLineLeftOffset(c),f=d*this.scaleX,v=this._textLines[c],this.direction==="rtl"&&(s.x=this.width*this.scaleX-s.x+f);for(var y=0,x=v.length;y<x&&(h=f,f+=this.__charBounds[c][y].kernedWidth*this.scaleX,f<=s.x);y++)o++;return this._getNewSelectionStartFromOffset(s,h,f,o,x)},_getNewSelectionStartFromOffset:function(l,s,h,f,a){var o=l.x-s,c=h-l.x,d=c>o||c<0?0:1,v=f+d;return this.flipX&&(v=a-v),v>this._text.length&&(v=this._text.length),v}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var l=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+l.top+"; left: "+l.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+l.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(l){if(this.isEditing){var s=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(l.keyCode in s)this[s[l.keyCode]](l);else if(l.keyCode in this.ctrlKeysMapDown&&(l.ctrlKey||l.metaKey))this[this.ctrlKeysMapDown[l.keyCode]](l);else return;l.stopImmediatePropagation(),l.preventDefault(),l.keyCode>=33&&l.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(l){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(l.keyCode in this.ctrlKeysMapUp&&(l.ctrlKey||l.metaKey))this[this.ctrlKeysMapUp[l.keyCode]](l);else return;l.stopImmediatePropagation(),l.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(l){var s=this.fromPaste;if(this.fromPaste=!1,l&&l.stopPropagation(),!!this.isEditing){var h=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,f=this._text.length,a=h.length,o,c,d=a-f,v=this.selectionStart,p=this.selectionEnd,g=v!==p,y,x,w;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var b=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=v>b.selectionStart;g?(o=this._text.slice(v,p),d+=p-v):a<f&&(S?o=this._text.slice(p+d,p):o=this._text.slice(v,v-d)),c=h.slice(b.selectionEnd-d,b.selectionEnd),o&&o.length&&(c.length&&(y=this.getSelectionStyles(v,v+1,!1),y=c.map(function(){return y[0]})),g?(x=v,w=p):S?(x=p-o.length,w=p):(x=p,w=p+o.length),this.removeStyleFromTo(x,w)),c.length&&(s&&c.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(y=e.copiedTextStyle),this.insertNewStyleBlock(c,v,y)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(l){this.compositionStart=l.target.selectionStart,this.compositionEnd=l.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(l){return l&&l.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(l,s){var h=this._getLineLeftOffset(l),f;return s>0&&(f=this.__charBounds[l][s-1],h+=f.left+f.width),h},getDownCursorOffset:function(l,s){var h=this._getSelectionForOffset(l,s),f=this.get2DCursorLocation(h),a=f.lineIndex;if(a===this._textLines.length-1||l.metaKey||l.keyCode===34)return this._text.length-h;var o=f.charIndex,c=this._getWidthBeforeCursor(a,o),d=this._getIndexOnLine(a+1,c),v=this._textLines[a].slice(o);return v.length+d+1+this.missingNewlineOffset(a)},_getSelectionForOffset:function(l,s){return l.shiftKey&&this.selectionStart!==this.selectionEnd&&s?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(l,s){var h=this._getSelectionForOffset(l,s),f=this.get2DCursorLocation(h),a=f.lineIndex;if(a===0||l.metaKey||l.keyCode===33)return-h;var o=f.charIndex,c=this._getWidthBeforeCursor(a,o),d=this._getIndexOnLine(a-1,c),v=this._textLines[a].slice(0,o),p=this.missingNewlineOffset(a-1);return-this._textLines[a-1].length+d-v.length+(1-p)},_getIndexOnLine:function(l,s){for(var h=this._textLines[l],f=this._getLineLeftOffset(l),a=f,o=0,c,d,v=0,p=h.length;v<p;v++)if(c=this.__charBounds[l][v].width,a+=c,a>s){d=!0;var g=a-c,y=a,x=Math.abs(g-s),w=Math.abs(y-s);o=w<x?v:v-1;break}return d||(o=h.length-1),o},moveCursorDown:function(l){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",l)},moveCursorUp:function(l){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",l)},_moveCursorUpOrDown:function(l,s){var h="get"+l+"CursorOffset",f=this[h](s,this._selectionDirection==="right");s.shiftKey?this.moveCursorWithShift(f):this.moveCursorWithoutShift(f),f!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(l){var s=this._selectionDirection==="left"?this.selectionStart+l:this.selectionEnd+l;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,s),l!==0},moveCursorWithoutShift:function(l){return l<0?(this.selectionStart+=l,this.selectionEnd=this.selectionStart):(this.selectionEnd+=l,this.selectionStart=this.selectionEnd),l!==0},moveCursorLeft:function(l){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",l)},_move:function(l,s,h){var f;if(l.altKey)f=this["findWordBoundary"+h](this[s]);else if(l.metaKey||l.keyCode===35||l.keyCode===36)f=this["findLineBoundary"+h](this[s]);else return this[s]+=h==="Left"?-1:1,!0;if(typeof f<"u"&&this[s]!==f)return this[s]=f,!0},_moveLeft:function(l,s){return this._move(l,s,"Left")},_moveRight:function(l,s){return this._move(l,s,"Right")},moveCursorLeftWithoutShift:function(l){var s=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(s=this._moveLeft(l,"selectionStart")),this.selectionEnd=this.selectionStart,s},moveCursorLeftWithShift:function(l){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(l,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(l,"selectionStart")},moveCursorRight:function(l){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",l)},_moveCursorLeftOrRight:function(l,s){var h="moveCursor"+l+"With";this._currentCursorOpacity=1,s.shiftKey?h+="Shift":h+="outShift",this[h](s)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(l){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(l,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(l,"selectionEnd")},moveCursorRightWithoutShift:function(l){var s=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(s=this._moveRight(l,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,s},removeChars:function(l,s){typeof s>"u"&&(s=l+1),this.removeStyleFromTo(l,s),this._text.splice(l,s-l),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(l,s,h,f){typeof f>"u"&&(f=h),f>h&&this.removeStyleFromTo(h,f);var a=e.util.string.graphemeSplit(l);this.insertNewStyleBlock(a,h,s),this._text=[].concat(this._text.slice(0,h),a,this._text.slice(f)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var l=e.util.toFixed,s=e.util.radiansToDegrees,h=e.util.calcRotateMatrix,f=e.util.transformPoint,a=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var o=this._getSVGLeftTopOffsets(),c=this._getSVGTextAndBg(o.textTop,o.textLeft);return this._wrapSVGTextAndBg(c)},toSVG:function(o){var c=this._createBaseSVGMarkup(this._toSVG(),{reviver:o,noStyle:!0,withShadow:!0}),d=this.path;return d?c+d._createBaseSVGMarkup(d._toSVG(),{reviver:o,withShadow:!0}):c},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(o){var c=!0,d=this.getSvgTextDecoration(this);return[o.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",d?'text-decoration="'+d+'" ':"",'style="',this.getSvgStyles(c),'"',this.addPaintOrder()," >",o.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(o,c){var d=[],v=[],p=o,g;this._setSVGBg(v);for(var y=0,x=this._textLines.length;y<x;y++)g=this._getLineLeftOffset(y),(this.textBackgroundColor||this.styleHas("textBackgroundColor",y))&&this._setSVGTextLineBg(v,y,c+g,p),this._setSVGTextLineText(d,y,c+g,p),p+=this.getHeightOfLine(y);return{textSpans:d,textBgRects:v}},_createTextCharSpan:function(o,c,d,v,p){var g=o!==o.trim()||o.match(a),y=this.getSvgSpanStyles(c,g),x=y?'style="'+y+'"':"",w=c.deltaY,b="",S=e.Object.NUM_FRACTION_DIGITS,_="";if(w&&(b=' dy="'+l(w,S)+'" '),p.renderLeft!==void 0){var C=p.angle;_=' rotate="'+l(s(C),e.Object.NUM_FRACTION_DIGITS)+'" ';var T=p.width/2,O=h({angle:s(C)});O[4]=p.renderLeft,O[5]=p.renderTop;var L=f({x:-T,y:0},O);d=L.x,v=L.y}return['<tspan x="',l(d,S),'" y="',l(v,S),'" ',b,x,_,">",e.util.string.escapeXml(o),"</tspan>"].join("")},_setSVGTextLineText:function(o,c,d,v){var p=this.getHeightOfLine(c),g=this.textAlign.indexOf("justify")!==-1,y,x,w="",b,S,_=0,C=this._textLines[c],T;v+=p*(1-this._fontSizeFraction)/this.lineHeight;for(var O=0,L=C.length-1;O<=L;O++)T=O===L||this.charSpacing||this.path,w+=C[O],b=this.__charBounds[c][O],_===0?(d+=b.kernedWidth-b.width,_+=b.width):_+=b.kernedWidth,g&&!T&&this._reSpaceAndTab.test(C[O])&&(T=!0),T||(y=y||this.getCompleteStyleDeclaration(c,O),x=this.getCompleteStyleDeclaration(c,O+1),T=e.util.hasStyleChanged(y,x,!0)),T&&(S=this._getStyleDeclaration(c,O)||{},o.push(this._createTextCharSpan(w,S,d,v,b)),w="",y=x,d+=_,_=0)},_pushTextBgRect:function(o,c,d,v,p,g){var y=e.Object.NUM_FRACTION_DIGITS;o.push("		<rect ",this._getFillAttributes(c),' x="',l(d,y),'" y="',l(v,y),'" width="',l(p,y),'" height="',l(g,y),`"></rect>
`)},_setSVGTextLineBg:function(o,c,d,v){for(var p=this._textLines[c],g=this.getHeightOfLine(c)/this.lineHeight,y=0,x=0,w,b,S=this.getValueOfPropertyAt(c,0,"textBackgroundColor"),_=0,C=p.length;_<C;_++)w=this.__charBounds[c][_],b=this.getValueOfPropertyAt(c,_,"textBackgroundColor"),b!==S?(S&&this._pushTextBgRect(o,S,d+x,v,y,g),x=w.left,y=w.width,S=b):y+=w.kernedWidth;b&&this._pushTextBgRect(o,b,d+x,v,y,g)},_getFillAttributes:function(o){var c=o&&typeof o=="string"?new e.Color(o):"";return!c||!c.getSource()||c.getAlpha()===1?'fill="'+o+'"':'opacity="'+c.getAlpha()+'" fill="'+c.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(o){for(var c=0,d=0,v=0;v<o;v++)c+=this.getHeightOfLine(v);return d=this.getHeightOfLine(v),{lineTop:c,offset:(this._fontSizeMult-this._fontSizeFraction)*d/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(o){var c=e.Object.prototype.getSvgStyles.call(this,o);return c+" white-space: pre;"}})}(),function(l){var s=l.fabric||(l.fabric={});s.Textbox=s.util.createClass(s.IText,s.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:s.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(h){for(var f=0,a=0,o=0,c={},d=0;d<h.graphemeLines.length;d++)h.graphemeText[o]===`
`&&d>0?(a=0,o++,f++):!this.splitByGrapheme&&this._reSpaceAndTab.test(h.graphemeText[o])&&d>0&&(a++,o++),c[d]={line:f,offset:a},o+=h.graphemeLines[d].length,a+=h.graphemeLines[d].length;return c},styleHas:function(h,f){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[f];a&&(f=a.line)}return s.Text.prototype.styleHas.call(this,h,f)},isEmptyStyles:function(h){if(!this.styles)return!0;var f=0,a=h+1,o,c,d=!1,v=this._styleMap[h],p=this._styleMap[h+1];v&&(h=v.line,f=v.offset),p&&(a=p.line,d=a===h,o=p.offset),c=typeof h>"u"?this.styles:{line:this.styles[h]};for(var g in c)for(var y in c[g])if(y>=f&&(!d||y<o))for(var x in c[g][y])return!1;return!0},_getStyleDeclaration:function(h,f){if(this._styleMap&&!this.isWrapping){var a=this._styleMap[h];if(!a)return null;h=a.line,f=a.offset+f}return this.callSuper("_getStyleDeclaration",h,f)},_setStyleDeclaration:function(h,f,a){var o=this._styleMap[h];h=o.line,f=o.offset+f,this.styles[h][f]=a},_deleteStyleDeclaration:function(h,f){var a=this._styleMap[h];h=a.line,f=a.offset+f,delete this.styles[h][f]},_getLineStyle:function(h){var f=this._styleMap[h];return!!this.styles[f.line]},_setLineStyle:function(h){var f=this._styleMap[h];this.styles[f.line]={}},_wrapText:function(h,f){var a=[],o;for(this.isWrapping=!0,o=0;o<h.length;o++)a=a.concat(this._wrapLine(h[o],o,f));return this.isWrapping=!1,a},_measureWord:function(h,f,a){var o=0,c,d=!0;a=a||0;for(var v=0,p=h.length;v<p;v++){var g=this._getGraphemeBox(h[v],f,v+a,c,d);o+=g.kernedWidth,c=h[v]}return o},_wrapLine:function(h,f,a,O){var c=0,d=this.splitByGrapheme,v=[],p=[],g=d?s.util.string.graphemeSplit(h):h.split(this._wordJoiners),y="",x=0,w=d?"":" ",b=0,S=0,_=0,C=!0,T=this._getWidthOfCharSpacing(),O=O||0;g.length===0&&g.push([]),a-=O;for(var L=0;L<g.length;L++)y=d?g[L]:s.util.string.graphemeSplit(g[L]),b=this._measureWord(y,f,x),x+=y.length,c+=S+b-T,c>a&&!C?(v.push(p),p=[],c=b,C=!0):c+=T,!C&&!d&&p.push(w),p=p.concat(y),S=d?0:this._measureWord([w],f,x),x++,C=!1,b>_&&(_=b);return L&&v.push(p),_+O>this.dynamicMinWidth&&(this.dynamicMinWidth=_-T+O),v},isEndOfWrapping:function(h){return!this._styleMap[h+1]||this._styleMap[h+1].line!==this._styleMap[h].line},missingNewlineOffset:function(h,f){return this.splitByGrapheme&&!f?this.isEndOfWrapping(h)?1:0:1},_splitTextIntoLines:function(h){for(var f=s.Text.prototype._splitTextIntoLines.call(this,h),a=this._wrapText(f.lines,this.width),o=new Array(a.length),c=0;c<a.length;c++)o[c]=a[c].join("");return f.lines=o,f.graphemeLines=a,f},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var h={};for(var f in this._styleMap)this._textLines[f]&&(h[this._styleMap[f].line]=1);for(var f in this.styles)h[f]||delete this.styles[f]},toObject:function(h){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(h))}}),s.Textbox.fromObject=function(h,f){var a=s.util.stylesFromArray(h.styles,h.text),o=Object.assign({},h,{styles:a});return delete o.path,s.Object._fromObject("Textbox",o,function(c){h.path?s.Object._fromObject("Path",h.path,function(d){c.set("path",d),f(c)},"path"):f(c)},"text")}}(t),function(){var l=e.controlsUtils,s=l.scaleSkewCursorStyleHandler,h=l.scaleCursorStyleHandler,f=l.scalingEqually,a=l.scalingYOrSkewingX,o=l.scalingXOrSkewingY,c=l.scaleOrSkewActionName,d=e.Object.prototype.controls;if(d.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:s,actionHandler:o,getActionName:c}),d.mr=new e.Control({x:.5,y:0,cursorStyleHandler:s,actionHandler:o,getActionName:c}),d.mb=new e.Control({x:0,y:.5,cursorStyleHandler:s,actionHandler:a,getActionName:c}),d.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:s,actionHandler:a,getActionName:c}),d.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:h,actionHandler:f}),d.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:h,actionHandler:f}),d.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:h,actionHandler:f}),d.br=new e.Control({x:.5,y:.5,cursorStyleHandler:h,actionHandler:f}),d.mtr=new e.Control({x:0,y:-.5,actionHandler:l.rotationWithSnapping,cursorStyleHandler:l.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var v=e.Textbox.prototype.controls={};v.mtr=d.mtr,v.tr=d.tr,v.br=d.br,v.tl=d.tl,v.bl=d.bl,v.mt=d.mt,v.mb=d.mb,v.mr=new e.Control({x:.5,y:0,actionHandler:l.changeWidth,cursorStyleHandler:s,actionName:"resizing"}),v.ml=new e.Control({x:-.5,y:0,actionHandler:l.changeWidth,cursorStyleHandler:s,actionName:"resizing"})}}()})(it);var Hx={exports:{}};(function(t,e){(function(n,i){i()})(Ps,function(){function n(h,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,f,a){var o=new XMLHttpRequest;o.open("GET",h),o.responseType="blob",o.onload=function(){s(o.response,f,a)},o.onerror=function(){console.error("could not download file")},o.send()}function r(h){var f=new XMLHttpRequest;f.open("HEAD",h,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function u(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(f)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ps=="object"&&Ps.global===Ps?Ps:void 0,l=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(h,f,a){var o=m.URL||m.webkitURL,c=document.createElement("a");f=f||h.name||"download",c.download=f,c.rel="noopener",typeof h=="string"?(c.href=h,c.origin===location.origin?u(c):r(c.href)?i(h,f,a):u(c,c.target="_blank")):(c.href=o.createObjectURL(h),setTimeout(function(){o.revokeObjectURL(c.href)},4e4),setTimeout(function(){u(c)},0))}:"msSaveOrOpenBlob"in navigator?function(h,f,a){if(f=f||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(n(h,a),f);else if(r(h))i(h,f,a);else{var o=document.createElement("a");o.href=h,o.target="_blank",setTimeout(function(){u(o)})}}:function(h,f,a,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof h=="string")return i(h,f,a);var c=h.type==="application/octet-stream",d=/constructor/i.test(m.HTMLElement)||m.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||c&&d||l)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var x=p.result;x=v?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=x:location=x,o=null},p.readAsDataURL(h)}else{var g=m.URL||m.webkitURL,y=g.createObjectURL(h);o?o.location=y:location.href=y,o=null,setTimeout(function(){g.revokeObjectURL(y)},4e4)}});m.saveAs=s.saveAs=s,t.exports=s})})(Hx);var Wx=Hx.exports;function zk(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}function $x(t,e){return new Promise(function(n,i){let r;return Uk(t).then(function(u){try{return r=u,n(new Blob([e.slice(0,2),r,e.slice(2)],{type:"image/jpeg"}))}catch(m){return i(m)}},i)})}const Uk=t=>new Promise((e,n)=>{const i=new FileReader;i.addEventListener("load",({target:{result:r}})=>{const u=new DataView(r);let m=0;if(u.getUint16(m)!==65496)return n("not a valid JPEG");for(m+=2;;){const l=u.getUint16(m);if(l===65498)break;const s=u.getUint16(m+2);if(l===65505&&u.getUint32(m+4)===1165519206){const h=m+10;let f;switch(u.getUint16(h)){case 18761:f=!0;break;case 19789:f=!1;break;default:return n("TIFF header contains invalid endian")}if(u.getUint16(h+2,f)!==42)return n("TIFF header contains invalid version");const a=u.getUint32(h+4,f),o=h+a+2+12*u.getUint16(h+a,f);for(let c=h+a+2;c<o;c+=12)if(u.getUint16(c,f)==274){if(u.getUint16(c+2,f)!==3)return n("Orientation data type is invalid");if(u.getUint32(c+4,f)!==1)return n("Orientation data count is invalid");u.setUint16(c+8,1,f);break}return e(r.slice(m,m+2+s))}m+=2+s}return e(new Blob)}),i.readAsArrayBuffer(t)});var Ol={},Hk={get exports(){return Ol},set exports(t){Ol=t}};(function(t){var e,n,i={};Hk.exports=i,i.parse=function(r,u){for(var m=i.bin.readUshort,l=i.bin.readUint,s=0,h={},f=new Uint8Array(r),a=f.length-4;l(f,a)!=101010256;)a--;s=a,s+=4;var o=m(f,s+=4);m(f,s+=2);var c=l(f,s+=2),d=l(f,s+=4);s+=4,s=d;for(var v=0;v<o;v++){l(f,s),s+=4,s+=4,s+=4,l(f,s+=4),c=l(f,s+=4);var p=l(f,s+=4),g=m(f,s+=4),y=m(f,s+2),x=m(f,s+4);s+=6;var w=l(f,s+=8);s+=4,s+=g+y+x,i._readLocal(f,w,h,c,p,u)}return h},i._readLocal=function(r,u,m,l,s,h){var f=i.bin.readUshort,a=i.bin.readUint;a(r,u),f(r,u+=4),f(r,u+=2);var o=f(r,u+=2);a(r,u+=2),a(r,u+=4),u+=4;var c=f(r,u+=8),d=f(r,u+=2);u+=2;var v=i.bin.readUTF8(r,u,c);if(u+=c,u+=d,h)m[v]={size:s,csize:l};else{var p=new Uint8Array(r.buffer,u);if(o==0)m[v]=new Uint8Array(p.buffer.slice(u,u+l));else{if(o!=8)throw"unknown compression method: "+o;var g=new Uint8Array(s);i.inflateRaw(p,g),m[v]=g}}},i.inflateRaw=function(r,u){return i.F.inflate(r,u)},i.inflate=function(r,u){return r[0],r[1],i.inflateRaw(new Uint8Array(r.buffer,r.byteOffset+2,r.length-6),u)},i.deflate=function(r,u){u==null&&(u={level:6});var m=0,l=new Uint8Array(50+Math.floor(1.1*r.length));l[m]=120,l[m+1]=156,m+=2,m=i.F.deflateRaw(r,l,m,u.level);var s=i.adler(r,0,r.length);return l[m+0]=s>>>24&255,l[m+1]=s>>>16&255,l[m+2]=s>>>8&255,l[m+3]=s>>>0&255,new Uint8Array(l.buffer,0,m+4)},i.deflateRaw=function(r,u){u==null&&(u={level:6});var m=new Uint8Array(50+Math.floor(1.1*r.length)),l=i.F.deflateRaw(r,m,l,u.level);return new Uint8Array(m.buffer,0,l)},i.encode=function(r,u){u==null&&(u=!1);var m=0,l=i.bin.writeUint,s=i.bin.writeUshort,h={};for(var f in r){var a=!i._noNeed(f)&&!u,o=r[f],c=i.crc.crc(o,0,o.length);h[f]={cpr:a,usize:o.length,crc:c,file:a?i.deflateRaw(o):o}}for(var f in h)m+=h[f].file.length+30+46+2*i.bin.sizeUTF8(f);m+=22;var d=new Uint8Array(m),v=0,p=[];for(var f in h){var g=h[f];p.push(v),v=i._writeHeader(d,v,f,g,0)}var y=0,x=v;for(var f in h)g=h[f],p.push(v),v=i._writeHeader(d,v,f,g,1,p[y++]);var w=v-x;return l(d,v,101010256),v+=4,s(d,v+=4,y),s(d,v+=2,y),l(d,v+=2,w),l(d,v+=4,x),v+=4,v+=2,d.buffer},i._noNeed=function(r){var u=r.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(u)!=-1},i._writeHeader=function(r,u,m,l,s,h){var f=i.bin.writeUint,a=i.bin.writeUshort,o=l.file;return f(r,u,s==0?67324752:33639248),u+=4,s==1&&(u+=2),a(r,u,20),a(r,u+=2,0),a(r,u+=2,l.cpr?8:0),f(r,u+=2,0),f(r,u+=4,l.crc),f(r,u+=4,o.length),f(r,u+=4,l.usize),a(r,u+=4,i.bin.sizeUTF8(m)),a(r,u+=2,0),u+=2,s==1&&(u+=2,u+=2,f(r,u+=6,h),u+=4),u+=i.bin.writeUTF8(r,u,m),s==0&&(r.set(o,u),u+=o.length),u},i.crc={table:function(){for(var r=new Uint32Array(256),u=0;u<256;u++){for(var m=u,l=0;l<8;l++)1&m?m=3988292384^m>>>1:m>>>=1;r[u]=m}return r}(),update:function(r,u,m,l){for(var s=0;s<l;s++)r=i.crc.table[255&(r^u[m+s])]^r>>>8;return r},crc:function(r,u,m){return 4294967295^i.crc.update(4294967295,r,u,m)}},i.adler=function(r,u,m){for(var l=1,s=0,h=u,f=u+m;h<f;){for(var a=Math.min(h+5552,f);h<a;)s+=l+=r[h++];l%=65521,s%=65521}return s<<16|l},i.bin={readUshort:function(r,u){return r[u]|r[u+1]<<8},writeUshort:function(r,u,m){r[u]=255&m,r[u+1]=m>>8&255},readUint:function(r,u){return 16777216*r[u+3]+(r[u+2]<<16|r[u+1]<<8|r[u])},writeUint:function(r,u,m){r[u]=255&m,r[u+1]=m>>8&255,r[u+2]=m>>16&255,r[u+3]=m>>24&255},readASCII:function(r,u,m){for(var l="",s=0;s<m;s++)l+=String.fromCharCode(r[u+s]);return l},writeASCII:function(r,u,m){for(var l=0;l<m.length;l++)r[u+l]=m.charCodeAt(l)},pad:function(r){return r.length<2?"0"+r:r},readUTF8:function(r,u,m){for(var l,s="",h=0;h<m;h++)s+="%"+i.bin.pad(r[u+h].toString(16));try{l=decodeURIComponent(s)}catch{return i.bin.readASCII(r,u,m)}return l},writeUTF8:function(r,u,m){for(var l=m.length,s=0,h=0;h<l;h++){var f=m.charCodeAt(h);if(!(4294967168&f))r[u+s]=f,s++;else if(!(4294965248&f))r[u+s]=192|f>>6,r[u+s+1]=128|f>>0&63,s+=2;else if(!(4294901760&f))r[u+s]=224|f>>12,r[u+s+1]=128|f>>6&63,r[u+s+2]=128|f>>0&63,s+=3;else{if(4292870144&f)throw"e";r[u+s]=240|f>>18,r[u+s+1]=128|f>>12&63,r[u+s+2]=128|f>>6&63,r[u+s+3]=128|f>>0&63,s+=4}}return s},sizeUTF8:function(r){for(var u=r.length,m=0,l=0;l<u;l++){var s=r.charCodeAt(l);if(!(4294967168&s))m++;else if(!(4294965248&s))m+=2;else if(!(4294901760&s))m+=3;else{if(4292870144&s)throw"e";m+=4}}return m}},i.F={},i.F.deflateRaw=function(r,u,m,l){var s=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],h=i.F.U,f=i.F._goodIndex;i.F._hash;var a=i.F._putsE,o=0,c=m<<3,d=0,v=r.length;if(l==0){for(;o<v;)a(u,c,o+(L=Math.min(65535,v-o))==v?1:0),c=i.F._copyExact(r,o,L,u,c+8),o+=L;return c>>>3}var p=h.lits,g=h.strt,y=h.prev,x=0,w=0,b=0,S=0,_=0,C=0;for(v>2&&(g[C=i.F._hash(r,0)]=0),o=0;o<v;o++){if(_=C,o+1<v-2){C=i.F._hash(r,o+1);var T=o+1&32767;y[T]=g[C],g[C]=T}if(d<=o){(x>14e3||w>26697)&&v-o>100&&(d<o&&(p[x]=o-d,x+=2,d=o),c=i.F._writeBlock(o==v-1||d==v?1:0,p,x,S,r,b,o-b,u,c),x=w=S=0,b=o);var O=0;o<v-2&&(O=i.F._bestMatch(r,o,y,_,Math.min(s[2],v-o),s[3]));var L=O>>>16,j=65535&O;if(O!=0){j=65535&O;var H=f(L=O>>>16,h.of0);h.lhst[257+H]++;var F=f(j,h.df0);h.dhst[F]++,S+=h.exb[H]+h.dxb[F],p[x]=L<<23|o-d,p[x+1]=j<<16|H<<8|F,x+=2,d=o+L}else h.lhst[r[o]]++;w++}}for(b==o&&r.length!=0||(d<o&&(p[x]=o-d,x+=2,d=o),c=i.F._writeBlock(1,p,x,S,r,b,o-b,u,c),x=0,w=0,x=w=S=0,b=o);7&c;)c++;return c>>>3},i.F._bestMatch=function(r,u,m,l,s,h){var f=32767&u,a=m[f],o=f-a+32768&32767;if(a==f||l!=i.F._hash(r,u-o))return 0;for(var c=0,d=0,v=Math.min(32767,u);o<=v&&--h!=0&&a!=f;){if(c==0||r[u+c]==r[u+c-o]){var p=i.F._howLong(r,u,o);if(p>c){if(d=o,(c=p)>=s)break;o+2<p&&(p=o+2);for(var g=0,y=0;y<p-2;y++){var x=u-o+y+32768&32767,w=x-m[x]+32768&32767;w>g&&(g=w,a=x)}}}o+=(f=a)-(a=m[f])+32768&32767}return c<<16|d},i.F._howLong=function(r,u,m){if(r[u]!=r[u-m]||r[u+1]!=r[u+1-m]||r[u+2]!=r[u+2-m])return 0;var l=u,s=Math.min(r.length,u+258);for(u+=3;u<s&&r[u]==r[u-m];)u++;return u-l},i.F._hash=function(r,u){return(r[u]<<8|r[u+1])+(r[u+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(r,u,m,l,s,h,f,a,o){var c,d,v,p,g,y,x,w,b,S=i.F.U,_=i.F._putsF,C=i.F._putsE;S.lhst[256]++,d=(c=i.F.getTrees())[0],v=c[1],p=c[2],g=c[3],y=c[4],x=c[5],w=c[6],b=c[7];var T=32+(o+3&7?8-(o+3&7):0)+(f<<3),O=l+i.F.contSize(S.fltree,S.lhst)+i.F.contSize(S.fdtree,S.dhst),L=l+i.F.contSize(S.ltree,S.lhst)+i.F.contSize(S.dtree,S.dhst);L+=14+3*x+i.F.contSize(S.itree,S.ihst)+(2*S.ihst[16]+3*S.ihst[17]+7*S.ihst[18]);for(var j=0;j<286;j++)S.lhst[j]=0;for(j=0;j<30;j++)S.dhst[j]=0;for(j=0;j<19;j++)S.ihst[j]=0;var H=T<O&&T<L?0:O<L?1:2;if(_(a,o,r),_(a,o+1,H),o+=3,H==0){for(;7&o;)o++;o=i.F._copyExact(s,h,f,a,o)}else{var F,V;if(H==1&&(F=S.fltree,V=S.fdtree),H==2){i.F.makeCodes(S.ltree,d),i.F.revCodes(S.ltree,d),i.F.makeCodes(S.dtree,v),i.F.revCodes(S.dtree,v),i.F.makeCodes(S.itree,p),i.F.revCodes(S.itree,p),F=S.ltree,V=S.dtree,C(a,o,g-257),C(a,o+=5,y-1),C(a,o+=5,x-4),o+=4;for(var I=0;I<x;I++)C(a,o+3*I,S.itree[1+(S.ordr[I]<<1)]);o+=3*x,o=i.F._codeTiny(w,S.itree,a,o),o=i.F._codeTiny(b,S.itree,a,o)}for(var A=h,U=0;U<m;U+=2){for(var k=u[U],E=k>>>23,R=A+(8388607&k);A<R;)o=i.F._writeLit(s[A++],F,a,o);if(E!=0){var D=u[U+1],W=D>>16,M=D>>8&255,P=255&D;C(a,o=i.F._writeLit(257+M,F,a,o),E-S.of0[M]),o+=S.exb[M],_(a,o=i.F._writeLit(P,V,a,o),W-S.df0[P]),o+=S.dxb[P],A+=E}}o=i.F._writeLit(256,F,a,o)}return o},i.F._copyExact=function(r,u,m,l,s){var h=s>>>3;return l[h]=m,l[h+1]=m>>>8,l[h+2]=255-l[h],l[h+3]=255-l[h+1],h+=4,l.set(new Uint8Array(r.buffer,u,m),h),s+(m+4<<3)},i.F.getTrees=function(){for(var r=i.F.U,u=i.F._hufTree(r.lhst,r.ltree,15),m=i.F._hufTree(r.dhst,r.dtree,15),l=[],s=i.F._lenCodes(r.ltree,l),h=[],f=i.F._lenCodes(r.dtree,h),a=0;a<l.length;a+=2)r.ihst[l[a]]++;for(a=0;a<h.length;a+=2)r.ihst[h[a]]++;for(var o=i.F._hufTree(r.ihst,r.itree,7),c=19;c>4&&r.itree[1+(r.ordr[c-1]<<1)]==0;)c--;return[u,m,o,s,f,c,l,h]},i.F.getSecond=function(r){for(var u=[],m=0;m<r.length;m+=2)u.push(r[m+1]);return u},i.F.nonZero=function(r){for(var u="",m=0;m<r.length;m+=2)r[m+1]!=0&&(u+=(m>>1)+",");return u},i.F.contSize=function(r,u){for(var m=0,l=0;l<u.length;l++)m+=u[l]*r[1+(l<<1)];return m},i.F._codeTiny=function(r,u,m,l){for(var s=0;s<r.length;s+=2){var h=r[s],f=r[s+1];l=i.F._writeLit(h,u,m,l);var a=h==16?2:h==17?3:7;h>15&&(i.F._putsE(m,l,f,a),l+=a)}return l},i.F._lenCodes=function(r,u){for(var m=r.length;m!=2&&r[m-1]==0;)m-=2;for(var l=0;l<m;l+=2){var s=r[l+1],h=l+3<m?r[l+3]:-1,f=l+5<m?r[l+5]:-1,a=l==0?-1:r[l-1];if(s==0&&h==s&&f==s){for(var o=l+5;o+2<m&&r[o+2]==s;)o+=2;(c=Math.min(o+1-l>>>1,138))<11?u.push(17,c-3):u.push(18,c-11),l+=2*c-2}else if(s==a&&h==s&&f==s){for(o=l+5;o+2<m&&r[o+2]==s;)o+=2;var c=Math.min(o+1-l>>>1,6);u.push(16,c-3),l+=2*c-2}else u.push(s,0)}return m>>>1},i.F._hufTree=function(r,u,m){var l=[],s=r.length,h=u.length,f=0;for(f=0;f<h;f+=2)u[f]=0,u[f+1]=0;for(f=0;f<s;f++)r[f]!=0&&l.push({lit:f,f:r[f]});var a=l.length,o=l.slice(0);if(a==0)return 0;if(a==1){var c=l[0].lit;return o=c==0?1:0,u[1+(c<<1)]=1,u[1+(o<<1)]=1,1}l.sort(function(w,b){return w.f-b.f});var d=l[0],v=l[1],p=0,g=1,y=2;for(l[0]={lit:-1,f:d.f+v.f,l:d,r:v,d:0};g!=a-1;)d=p!=g&&(y==a||l[p].f<l[y].f)?l[p++]:l[y++],v=p!=g&&(y==a||l[p].f<l[y].f)?l[p++]:l[y++],l[g++]={lit:-1,f:d.f+v.f,l:d,r:v};var x=i.F.setDepth(l[g-1],0);for(x>m&&(i.F.restrictDepth(o,m,x),x=m),f=0;f<a;f++)u[1+(o[f].lit<<1)]=o[f].d;return x},i.F.setDepth=function(r,u){return r.lit!=-1?(r.d=u,u):Math.max(i.F.setDepth(r.l,u+1),i.F.setDepth(r.r,u+1))},i.F.restrictDepth=function(r,u,m){var l=0,s=1<<m-u,h=0;for(r.sort(function(a,o){return o.d==a.d?a.f-o.f:o.d-a.d}),l=0;l<r.length&&r[l].d>u;l++){var f=r[l].d;r[l].d=u,h+=s-(1<<m-f)}for(h>>>=m-u;h>0;)(f=r[l].d)<u?(r[l].d++,h-=1<<u-f-1):l++;for(;l>=0;l--)r[l].d==u&&h<0&&(r[l].d--,h++);h!=0&&console.log("debt left")},i.F._goodIndex=function(r,u){var m=0;return u[16|m]<=r&&(m|=16),u[8|m]<=r&&(m|=8),u[4|m]<=r&&(m|=4),u[2|m]<=r&&(m|=2),u[1|m]<=r&&(m|=1),m},i.F._writeLit=function(r,u,m,l){return i.F._putsF(m,l,u[r<<1]),l+u[1+(r<<1)]},i.F.inflate=function(r,u){var m=Uint8Array;if(r[0]==3&&r[1]==0)return u||new m(0);var l=i.F,s=l._bitsF,h=l._bitsE,f=l._decodeTiny,a=l.makeCodes,o=l.codes2map,c=l._get17,d=l.U,v=u==null;v&&(u=new m(r.length>>>2<<3));for(var p,g,y=0,x=0,w=0,b=0,S=0,_=0,C=0,T=0,O=0;y==0;)if(y=s(r,O,1),x=s(r,O+1,2),O+=3,x!=0){if(v&&(u=i.F._check(u,T+(1<<17))),x==1&&(p=d.flmap,g=d.fdmap,_=511,C=31),x==2){w=h(r,O,5)+257,b=h(r,O+5,5)+1,S=h(r,O+10,4)+4,O+=14;for(var L=0;L<38;L+=2)d.itree[L]=0,d.itree[L+1]=0;var j=1;for(L=0;L<S;L++){var H=h(r,O+3*L,3);d.itree[1+(d.ordr[L]<<1)]=H,H>j&&(j=H)}O+=3*S,a(d.itree,j),o(d.itree,j,d.imap),p=d.lmap,g=d.dmap,O=f(d.imap,(1<<j)-1,w+b,r,O,d.ttree);var F=l._copyOut(d.ttree,0,w,d.ltree);_=(1<<F)-1;var V=l._copyOut(d.ttree,w,b,d.dtree);C=(1<<V)-1,a(d.ltree,F),o(d.ltree,F,p),a(d.dtree,V),o(d.dtree,V,g)}for(;;){var I=p[c(r,O)&_];O+=15&I;var A=I>>>4;if(!(A>>>8))u[T++]=A;else{if(A==256)break;var U=T+A-254;if(A>264){var k=d.ldef[A-257];U=T+(k>>>3)+h(r,O,7&k),O+=7&k}var E=g[c(r,O)&C];O+=15&E;var R=E>>>4,D=d.ddef[R],W=(D>>>4)+s(r,O,15&D);for(O+=15&D,v&&(u=i.F._check(u,T+(1<<17)));T<U;)u[T]=u[T++-W],u[T]=u[T++-W],u[T]=u[T++-W],u[T]=u[T++-W];T=U}}}else{7&O&&(O+=8-(7&O));var M=4+(O>>>3),P=r[M-4]|r[M-3]<<8;v&&(u=i.F._check(u,T+P)),u.set(new m(r.buffer,r.byteOffset+M,P),T),O=M+P<<3,T+=P}return u.length==T?u:u.slice(0,T)},i.F._check=function(r,u){var m=r.length;if(u<=m)return r;var l=new Uint8Array(Math.max(m<<1,u));return l.set(r,0),l},i.F._decodeTiny=function(r,u,m,l,s,h){for(var f=i.F._bitsE,a=i.F._get17,o=0;o<m;){var c=r[a(l,s)&u];s+=15&c;var d=c>>>4;if(d<=15)h[o]=d,o++;else{var v=0,p=0;d==16?(p=3+f(l,s,2),s+=2,v=h[o-1]):d==17?(p=3+f(l,s,3),s+=3):d==18&&(p=11+f(l,s,7),s+=7);for(var g=o+p;o<g;)h[o]=v,o++}}return s},i.F._copyOut=function(r,u,m,l){for(var s=0,h=0,f=l.length>>>1;h<m;){var a=r[h+u];l[h<<1]=0,l[1+(h<<1)]=a,a>s&&(s=a),h++}for(;h<f;)l[h<<1]=0,l[1+(h<<1)]=0,h++;return s},i.F.makeCodes=function(r,u){for(var m,l,s,h,f=i.F.U,a=r.length,o=f.bl_count,c=0;c<=u;c++)o[c]=0;for(c=1;c<a;c+=2)o[r[c]]++;var d=f.next_code;for(m=0,o[0]=0,l=1;l<=u;l++)m=m+o[l-1]<<1,d[l]=m;for(s=0;s<a;s+=2)(h=r[s+1])!=0&&(r[s]=d[h],d[h]++)},i.F.codes2map=function(r,u,m){for(var l=r.length,s=i.F.U.rev15,h=0;h<l;h+=2)if(r[h+1]!=0)for(var f=h>>1,a=r[h+1],o=f<<4|a,c=u-a,d=r[h]<<c,v=d+(1<<c);d!=v;)m[s[d]>>>15-u]=o,d++},i.F.revCodes=function(r,u){for(var m=i.F.U.rev15,l=15-u,s=0;s<r.length;s+=2){var h=r[s]<<u-r[s+1];r[s]=m[h]>>>l}},i.F._putsE=function(r,u,m){m<<=7&u;var l=u>>>3;r[l]|=m,r[l+1]|=m>>>8},i.F._putsF=function(r,u,m){m<<=7&u;var l=u>>>3;r[l]|=m,r[l+1]|=m>>>8,r[l+2]|=m>>>16},i.F._bitsE=function(r,u,m){return(r[u>>>3]|r[1+(u>>>3)]<<8)>>>(7&u)&(1<<m)-1},i.F._bitsF=function(r,u,m){return(r[u>>>3]|r[1+(u>>>3)]<<8|r[2+(u>>>3)]<<16)>>>(7&u)&(1<<m)-1},i.F._get17=function(r,u){return(r[u>>>3]|r[1+(u>>>3)]<<8|r[2+(u>>>3)]<<16)>>>(7&u)},i.F._get25=function(r,u){return(r[u>>>3]|r[1+(u>>>3)]<<8|r[2+(u>>>3)]<<16|r[3+(u>>>3)]<<24)>>>(7&u)},i.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var r=i.F.U,u=0;u<32768;u++){var m=u;m=(4278255360&(m=(4042322160&(m=(3435973836&(m=(2863311530&m)>>>1|(1431655765&m)<<1))>>>2|(858993459&m)<<2))>>>4|(252645135&m)<<4))>>>8|(16711935&m)<<8,r.rev15[u]=(m>>>16|m<<16)>>>17}function l(s,h,f){for(;h--!=0;)s.push(0,f)}for(u=0;u<32;u++)r.ldef[u]=r.of0[u]<<3|r.exb[u],r.ddef[u]=r.df0[u]<<4|r.dxb[u];l(r.fltree,144,8),l(r.fltree,112,9),l(r.fltree,24,7),l(r.fltree,8,8),i.F.makeCodes(r.fltree,9),i.F.codes2map(r.fltree,9,r.flmap),i.F.revCodes(r.fltree,9),l(r.fdtree,32,5),i.F.makeCodes(r.fdtree,5),i.F.codes2map(r.fdtree,5,r.fdmap),i.F.revCodes(r.fdtree,5),l(r.itree,19,0),l(r.ltree,286,0),l(r.dtree,30,0),l(r.ttree,320,0)}()})();var Wk=zk({__proto__:null,default:Ol},[Ol]);const ln=function(){var t={nextZero(f,a){for(;f[a]!=0;)a++;return a},readUshort:(f,a)=>f[a]<<8|f[a+1],writeUshort(f,a,o){f[a]=o>>8&255,f[a+1]=255&o},readUint:(f,a)=>16777216*f[a]+(f[a+1]<<16|f[a+2]<<8|f[a+3]),writeUint(f,a,o){f[a]=o>>24&255,f[a+1]=o>>16&255,f[a+2]=o>>8&255,f[a+3]=255&o},readASCII(f,a,o){let c="";for(let d=0;d<o;d++)c+=String.fromCharCode(f[a+d]);return c},writeASCII(f,a,o){for(let c=0;c<o.length;c++)f[a+c]=o.charCodeAt(c)},readBytes(f,a,o){const c=[];for(let d=0;d<o;d++)c.push(f[a+d]);return c},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,a,o){let c,d="";for(let v=0;v<o;v++)d+=`%${t.pad(f[a+v].toString(16))}`;try{c=decodeURIComponent(d)}catch{return t.readASCII(f,a,o)}return c}};function e(f,a,o,c){const d=a*o,v=u(c),p=Math.ceil(a*v/8),g=new Uint8Array(4*d),y=new Uint32Array(g.buffer),{ctype:x}=c,{depth:w}=c,b=t.readUshort;if(x==6){const k=d<<2;if(w==8)for(var S=0;S<k;S+=4)g[S]=f[S],g[S+1]=f[S+1],g[S+2]=f[S+2],g[S+3]=f[S+3];if(w==16)for(S=0;S<k;S++)g[S]=f[S<<1]}else if(x==2){const k=c.tabs.tRNS;if(k==null){if(w==8)for(S=0;S<d;S++){var _=3*S;y[S]=255<<24|f[_+2]<<16|f[_+1]<<8|f[_]}if(w==16)for(S=0;S<d;S++)_=6*S,y[S]=255<<24|f[_+4]<<16|f[_+2]<<8|f[_]}else{var C=k[0];const E=k[1],R=k[2];if(w==8)for(S=0;S<d;S++){var T=S<<2;_=3*S,y[S]=255<<24|f[_+2]<<16|f[_+1]<<8|f[_],f[_]==C&&f[_+1]==E&&f[_+2]==R&&(g[T+3]=0)}if(w==16)for(S=0;S<d;S++)T=S<<2,_=6*S,y[S]=255<<24|f[_+4]<<16|f[_+2]<<8|f[_],b(f,_)==C&&b(f,_+2)==E&&b(f,_+4)==R&&(g[T+3]=0)}}else if(x==3){const k=c.tabs.PLTE,E=c.tabs.tRNS,R=E?E.length:0;if(w==1)for(var O=0;O<o;O++){var L=O*p,j=O*a;for(S=0;S<a;S++){T=j+S<<2;var H=3*(F=f[L+(S>>3)]>>7-((7&S)<<0)&1);g[T]=k[H],g[T+1]=k[H+1],g[T+2]=k[H+2],g[T+3]=F<R?E[F]:255}}if(w==2)for(O=0;O<o;O++)for(L=O*p,j=O*a,S=0;S<a;S++)T=j+S<<2,H=3*(F=f[L+(S>>2)]>>6-((3&S)<<1)&3),g[T]=k[H],g[T+1]=k[H+1],g[T+2]=k[H+2],g[T+3]=F<R?E[F]:255;if(w==4)for(O=0;O<o;O++)for(L=O*p,j=O*a,S=0;S<a;S++)T=j+S<<2,H=3*(F=f[L+(S>>1)]>>4-((1&S)<<2)&15),g[T]=k[H],g[T+1]=k[H+1],g[T+2]=k[H+2],g[T+3]=F<R?E[F]:255;if(w==8)for(S=0;S<d;S++){var F;T=S<<2,H=3*(F=f[S]),g[T]=k[H],g[T+1]=k[H+1],g[T+2]=k[H+2],g[T+3]=F<R?E[F]:255}}else if(x==4){if(w==8)for(S=0;S<d;S++){T=S<<2;var V=f[I=S<<1];g[T]=V,g[T+1]=V,g[T+2]=V,g[T+3]=f[I+1]}if(w==16)for(S=0;S<d;S++){var I;T=S<<2,V=f[I=S<<2],g[T]=V,g[T+1]=V,g[T+2]=V,g[T+3]=f[I+2]}}else if(x==0)for(C=c.tabs.tRNS?c.tabs.tRNS:-1,O=0;O<o;O++){const k=O*p,E=O*a;if(w==1)for(var A=0;A<a;A++){var U=(V=255*(f[k+(A>>>3)]>>>7-(7&A)&1))==255*C?0:255;y[E+A]=U<<24|V<<16|V<<8|V}else if(w==2)for(A=0;A<a;A++)U=(V=85*(f[k+(A>>>2)]>>>6-((3&A)<<1)&3))==85*C?0:255,y[E+A]=U<<24|V<<16|V<<8|V;else if(w==4)for(A=0;A<a;A++)U=(V=17*(f[k+(A>>>1)]>>>4-((1&A)<<2)&15))==17*C?0:255,y[E+A]=U<<24|V<<16|V<<8|V;else if(w==8)for(A=0;A<a;A++)U=(V=f[k+A])==C?0:255,y[E+A]=U<<24|V<<16|V<<8|V;else if(w==16)for(A=0;A<a;A++)V=f[k+(A<<1)],U=b(f,k+(A<<1))==C?0:255,y[E+A]=U<<24|V<<16|V<<8|V}return g}function n(f,a,o,c){const d=u(f),v=Math.ceil(o*d/8),p=new Uint8Array((v+1+f.interlace)*c);return a=f.tabs.CgBI?r(a,p):i(a,p),f.interlace==0?a=m(a,f,0,o,c):f.interlace==1&&(a=function(y,x){const w=x.width,b=x.height,S=u(x),_=S>>3,C=Math.ceil(w*S/8),T=new Uint8Array(b*C);let O=0;const L=[0,0,4,0,2,0,1],j=[0,4,0,2,0,1,0],H=[8,8,8,4,4,2,2],F=[8,8,4,4,2,2,1];let V=0;for(;V<7;){const A=H[V],U=F[V];let k=0,E=0,R=L[V];for(;R<b;)R+=A,E++;let D=j[V];for(;D<w;)D+=U,k++;const W=Math.ceil(k*S/8);m(y,x,O,k,E);let M=0,P=L[V];for(;P<b;){let z=j[V],$=O+M*W<<3;for(;z<w;){var I;if(S==1&&(I=(I=y[$>>3])>>7-(7&$)&1,T[P*C+(z>>3)]|=I<<7-((7&z)<<0)),S==2&&(I=(I=y[$>>3])>>6-(7&$)&3,T[P*C+(z>>2)]|=I<<6-((3&z)<<1)),S==4&&(I=(I=y[$>>3])>>4-(7&$)&15,T[P*C+(z>>1)]|=I<<4-((1&z)<<2)),S>=8){const X=P*C+z*_;for(let Y=0;Y<_;Y++)T[X+Y]=y[($>>3)+Y]}$+=S,z+=U}M++,P+=A}k*E!=0&&(O+=E*(1+W)),V+=1}return T}(a,f)),a}function i(f,a){return r(new Uint8Array(f.buffer,2,f.length-6),a)}var r=function(){const f={H:{}};return f.H.N=function(a,o){const c=Uint8Array;let d,v,p=0,g=0,y=0,x=0,w=0,b=0,S=0,_=0,C=0;if(a[0]==3&&a[1]==0)return o||new c(0);const T=f.H,O=T.b,L=T.e,j=T.R,H=T.n,F=T.A,V=T.Z,I=T.m,A=o==null;for(A&&(o=new c(a.length>>>2<<5));p==0;)if(p=O(a,C,1),g=O(a,C+1,2),C+=3,g!=0){if(A&&(o=f.H.W(o,_+(1<<17))),g==1&&(d=I.J,v=I.h,b=511,S=31),g==2){y=L(a,C,5)+257,x=L(a,C+5,5)+1,w=L(a,C+10,4)+4,C+=14;let k=1;for(var U=0;U<38;U+=2)I.Q[U]=0,I.Q[U+1]=0;for(U=0;U<w;U++){const D=L(a,C+3*U,3);I.Q[1+(I.X[U]<<1)]=D,D>k&&(k=D)}C+=3*w,H(I.Q,k),F(I.Q,k,I.u),d=I.w,v=I.d,C=j(I.u,(1<<k)-1,y+x,a,C,I.v);const E=T.V(I.v,0,y,I.C);b=(1<<E)-1;const R=T.V(I.v,y,x,I.D);S=(1<<R)-1,H(I.C,E),F(I.C,E,d),H(I.D,R),F(I.D,R,v)}for(;;){const k=d[V(a,C)&b];C+=15&k;const E=k>>>4;if(!(E>>>8))o[_++]=E;else{if(E==256)break;{let R=_+E-254;if(E>264){const z=I.q[E-257];R=_+(z>>>3)+L(a,C,7&z),C+=7&z}const D=v[V(a,C)&S];C+=15&D;const W=D>>>4,M=I.c[W],P=(M>>>4)+O(a,C,15&M);for(C+=15&M;_<R;)o[_]=o[_++-P],o[_]=o[_++-P],o[_]=o[_++-P],o[_]=o[_++-P];_=R}}}}else{7&C&&(C+=8-(7&C));const k=4+(C>>>3),E=a[k-4]|a[k-3]<<8;A&&(o=f.H.W(o,_+E)),o.set(new c(a.buffer,a.byteOffset+k,E),_),C=k+E<<3,_+=E}return o.length==_?o:o.slice(0,_)},f.H.W=function(a,o){const c=a.length;if(o<=c)return a;const d=new Uint8Array(c<<1);return d.set(a,0),d},f.H.R=function(a,o,c,d,v,p){const g=f.H.e,y=f.H.Z;let x=0;for(;x<c;){const w=a[y(d,v)&o];v+=15&w;const b=w>>>4;if(b<=15)p[x]=b,x++;else{let S=0,_=0;b==16?(_=3+g(d,v,2),v+=2,S=p[x-1]):b==17?(_=3+g(d,v,3),v+=3):b==18&&(_=11+g(d,v,7),v+=7);const C=x+_;for(;x<C;)p[x]=S,x++}}return v},f.H.V=function(a,o,c,d){let v=0,p=0;const g=d.length>>>1;for(;p<c;){const y=a[p+o];d[p<<1]=0,d[1+(p<<1)]=y,y>v&&(v=y),p++}for(;p<g;)d[p<<1]=0,d[1+(p<<1)]=0,p++;return v},f.H.n=function(a,o){const c=f.H.m,d=a.length;let v,p,g,y;const x=c.j;for(var w=0;w<=o;w++)x[w]=0;for(w=1;w<d;w+=2)x[a[w]]++;const b=c.K;for(v=0,x[0]=0,p=1;p<=o;p++)v=v+x[p-1]<<1,b[p]=v;for(g=0;g<d;g+=2)y=a[g+1],y!=0&&(a[g]=b[y],b[y]++)},f.H.A=function(a,o,c){const d=a.length,v=f.H.m.r;for(let p=0;p<d;p+=2)if(a[p+1]!=0){const g=p>>1,y=a[p+1],x=g<<4|y,w=o-y;let b=a[p]<<w;const S=b+(1<<w);for(;b!=S;)c[v[b]>>>15-o]=x,b++}},f.H.l=function(a,o){const c=f.H.m.r,d=15-o;for(let v=0;v<a.length;v+=2){const p=a[v]<<o-a[v+1];a[v]=c[p]>>>d}},f.H.M=function(a,o,c){c<<=7&o;const d=o>>>3;a[d]|=c,a[d+1]|=c>>>8},f.H.I=function(a,o,c){c<<=7&o;const d=o>>>3;a[d]|=c,a[d+1]|=c>>>8,a[d+2]|=c>>>16},f.H.e=function(a,o,c){return(a[o>>>3]|a[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},f.H.b=function(a,o,c){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},f.H.Z=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16)>>>(7&o)},f.H.i=function(a,o){return(a[o>>>3]|a[1+(o>>>3)]<<8|a[2+(o>>>3)]<<16|a[3+(o>>>3)]<<24)>>>(7&o)},f.H.m=function(){const a=Uint16Array,o=Uint32Array;return{K:new a(16),j:new a(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new a(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new o(32),J:new a(512),_:[],h:new a(32),$:[],w:new a(32768),C:[],v:[],d:new a(32768),D:[],u:new a(512),Q:[],r:new a(32768),s:new o(286),Y:new o(30),a:new o(19),t:new o(15e3),k:new a(65536),g:new a(32768)}}(),function(){const a=f.H.m;for(var o=0;o<32768;o++){let d=o;d=(2863311530&d)>>>1|(1431655765&d)<<1,d=(3435973836&d)>>>2|(858993459&d)<<2,d=(4042322160&d)>>>4|(252645135&d)<<4,d=(4278255360&d)>>>8|(16711935&d)<<8,a.r[o]=(d>>>16|d<<16)>>>17}function c(d,v,p){for(;v--!=0;)d.push(0,p)}for(o=0;o<32;o++)a.q[o]=a.S[o]<<3|a.T[o],a.c[o]=a.p[o]<<4|a.z[o];c(a._,144,8),c(a._,112,9),c(a._,24,7),c(a._,8,8),f.H.n(a._,9),f.H.A(a._,9,a.J),f.H.l(a._,9),c(a.$,32,5),f.H.n(a.$,5),f.H.A(a.$,5,a.h),f.H.l(a.$,5),c(a.Q,19,0),c(a.C,286,0),c(a.D,30,0),c(a.v,320,0)}(),f.H.N}();function u(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function m(f,a,o,c,d){let v=u(a);const p=Math.ceil(c*v/8);let g,y;v=Math.ceil(v/8);let x=f[o],w=0;if(x>1&&(f[o]=[0,0,1][x-2]),x==3)for(w=v;w<p;w++)f[w+1]=f[w+1]+(f[w+1-v]>>>1)&255;for(let b=0;b<d;b++)if(g=o+b*p,y=g+b+1,x=f[y-1],w=0,x==0)for(;w<p;w++)f[g+w]=f[y+w];else if(x==1){for(;w<v;w++)f[g+w]=f[y+w];for(;w<p;w++)f[g+w]=f[y+w]+f[g+w-v]}else if(x==2)for(;w<p;w++)f[g+w]=f[y+w]+f[g+w-p];else if(x==3){for(;w<v;w++)f[g+w]=f[y+w]+(f[g+w-p]>>>1);for(;w<p;w++)f[g+w]=f[y+w]+(f[g+w-p]+f[g+w-v]>>>1)}else{for(;w<v;w++)f[g+w]=f[y+w]+l(0,f[g+w-p],0);for(;w<p;w++)f[g+w]=f[y+w]+l(f[g+w-v],f[g+w-p],f[g+w-v-p])}return f}function l(f,a,o){const c=f+a-o,d=c-f,v=c-a,p=c-o;return d*d<=v*v&&d*d<=p*p?f:v*v<=p*p?a:o}function s(f,a,o){o.width=t.readUint(f,a),a+=4,o.height=t.readUint(f,a),a+=4,o.depth=f[a],a++,o.ctype=f[a],a++,o.compress=f[a],a++,o.filter=f[a],a++,o.interlace=f[a],a++}function h(f,a,o,c,d,v,p,g,y){const x=Math.min(a,d),w=Math.min(o,v);let b=0,S=0;for(let V=0;V<w;V++)for(let I=0;I<x;I++)if(p>=0&&g>=0?(b=V*a+I<<2,S=(g+V)*d+p+I<<2):(b=(-g+V)*a-p+I<<2,S=V*d+I<<2),y==0)c[S]=f[b],c[S+1]=f[b+1],c[S+2]=f[b+2],c[S+3]=f[b+3];else if(y==1){var _=f[b+3]*.00392156862745098,C=f[b]*_,T=f[b+1]*_,O=f[b+2]*_,L=c[S+3]*(1/255),j=c[S]*L,H=c[S+1]*L,F=c[S+2]*L;const A=1-_,U=_+L*A,k=U==0?0:1/U;c[S+3]=255*U,c[S+0]=(C+j*A)*k,c[S+1]=(T+H*A)*k,c[S+2]=(O+F*A)*k}else if(y==2)_=f[b+3],C=f[b],T=f[b+1],O=f[b+2],L=c[S+3],j=c[S],H=c[S+1],F=c[S+2],_==L&&C==j&&T==H&&O==F?(c[S]=0,c[S+1]=0,c[S+2]=0,c[S+3]=0):(c[S]=C,c[S+1]=T,c[S+2]=O,c[S+3]=_);else if(y==3){if(_=f[b+3],C=f[b],T=f[b+1],O=f[b+2],L=c[S+3],j=c[S],H=c[S+1],F=c[S+2],_==L&&C==j&&T==H&&O==F)continue;if(_<220&&L>20)return!1}return!0}return{decode:function(a){const o=new Uint8Array(a);let c=8;const d=t,v=d.readUshort,p=d.readUint,g={tabs:{},frames:[]},y=new Uint8Array(o.length);let x,w=0,b=0;const S=[137,80,78,71,13,10,26,10];for(var _=0;_<8;_++)if(o[_]!=S[_])throw"The input is not a PNG file!";for(;c<o.length;){const V=d.readUint(o,c);c+=4;const I=d.readASCII(o,c,4);if(c+=4,I=="IHDR")s(o,c,g);else if(I=="iCCP"){for(var C=c;o[C]!=0;)C++;d.readASCII(o,c,C-c),o[C+1];const A=o.slice(C+2,c+V);let U=null;try{U=i(A)}catch{U=r(A)}g.tabs[I]=U}else if(I=="CgBI")g.tabs[I]=o.slice(c,c+4);else if(I=="IDAT"){for(_=0;_<V;_++)y[w+_]=o[c+_];w+=V}else if(I=="acTL")g.tabs[I]={num_frames:p(o,c),num_plays:p(o,c+4)},x=new Uint8Array(o.length);else if(I=="fcTL"){b!=0&&((F=g.frames[g.frames.length-1]).data=n(g,x.slice(0,b),F.rect.width,F.rect.height),b=0);const A={x:p(o,c+12),y:p(o,c+16),width:p(o,c+4),height:p(o,c+8)};let U=v(o,c+22);U=v(o,c+20)/(U==0?100:U);const k={rect:A,delay:Math.round(1e3*U),dispose:o[c+24],blend:o[c+25]};g.frames.push(k)}else if(I=="fdAT"){for(_=0;_<V-4;_++)x[b+_]=o[c+_+4];b+=V-4}else if(I=="pHYs")g.tabs[I]=[d.readUint(o,c),d.readUint(o,c+4),o[c+8]];else if(I=="cHRM")for(g.tabs[I]=[],_=0;_<8;_++)g.tabs[I].push(d.readUint(o,c+4*_));else if(I=="tEXt"||I=="zTXt"){g.tabs[I]==null&&(g.tabs[I]={});var T=d.nextZero(o,c),O=d.readASCII(o,c,T-c),L=c+V-T-1;if(I=="tEXt")H=d.readASCII(o,T+1,L);else{var j=i(o.slice(T+2,T+2+L));H=d.readUTF8(j,0,j.length)}g.tabs[I][O]=H}else if(I=="iTXt"){g.tabs[I]==null&&(g.tabs[I]={}),T=0,C=c,T=d.nextZero(o,C),O=d.readASCII(o,C,T-C);const A=o[C=T+1];var H;o[C+1],C+=2,T=d.nextZero(o,C),d.readASCII(o,C,T-C),C=T+1,T=d.nextZero(o,C),d.readUTF8(o,C,T-C),L=V-((C=T+1)-c),A==0?H=d.readUTF8(o,C,L):(j=i(o.slice(C,C+L)),H=d.readUTF8(j,0,j.length)),g.tabs[I][O]=H}else if(I=="PLTE")g.tabs[I]=d.readBytes(o,c,V);else if(I=="hIST"){const A=g.tabs.PLTE.length/3;for(g.tabs[I]=[],_=0;_<A;_++)g.tabs[I].push(v(o,c+2*_))}else if(I=="tRNS")g.ctype==3?g.tabs[I]=d.readBytes(o,c,V):g.ctype==0?g.tabs[I]=v(o,c):g.ctype==2&&(g.tabs[I]=[v(o,c),v(o,c+2),v(o,c+4)]);else if(I=="gAMA")g.tabs[I]=d.readUint(o,c)/1e5;else if(I=="sRGB")g.tabs[I]=o[c];else if(I=="bKGD")g.ctype==0||g.ctype==4?g.tabs[I]=[v(o,c)]:g.ctype==2||g.ctype==6?g.tabs[I]=[v(o,c),v(o,c+2),v(o,c+4)]:g.ctype==3&&(g.tabs[I]=o[c]);else if(I=="IEND")break;c+=V,d.readUint(o,c),c+=4}var F;return b!=0&&((F=g.frames[g.frames.length-1]).data=n(g,x.slice(0,b),F.rect.width,F.rect.height)),g.data=n(g,y,g.width,g.height),delete g.compress,delete g.interlace,delete g.filter,g},toRGBA8:function(a){const o=a.width,c=a.height;if(a.tabs.acTL==null)return[e(a.data,o,c,a).buffer];const d=[];a.frames[0].data==null&&(a.frames[0].data=a.data);const v=o*c*4,p=new Uint8Array(v),g=new Uint8Array(v),y=new Uint8Array(v);for(let w=0;w<a.frames.length;w++){const b=a.frames[w],S=b.rect.x,_=b.rect.y,C=b.rect.width,T=b.rect.height,O=e(b.data,C,T,a);if(w!=0)for(var x=0;x<v;x++)y[x]=p[x];if(b.blend==0?h(O,C,T,p,o,c,S,_,0):b.blend==1&&h(O,C,T,p,o,c,S,_,1),d.push(p.buffer.slice(0)),b.dispose!=0){if(b.dispose==1)h(g,C,T,p,o,c,S,_,0);else if(b.dispose==2)for(x=0;x<v;x++)p[x]=y[x]}}return d},_paeth:l,_copyTile:h,_bin:t}}();(function(){const{_copyTile:t}=ln,{_bin:e}=ln,n=ln._paeth;var i={table:function(){const C=new Uint32Array(256);for(let T=0;T<256;T++){let O=T;for(let L=0;L<8;L++)1&O?O=3988292384^O>>>1:O>>>=1;C[T]=O}return C}(),update(C,T,O,L){for(let j=0;j<L;j++)C=i.table[255&(C^T[O+j])]^C>>>8;return C},crc:(C,T,O)=>4294967295^i.update(4294967295,C,T,O)};function r(C,T,O,L){T[O]+=C[0]*L>>4,T[O+1]+=C[1]*L>>4,T[O+2]+=C[2]*L>>4,T[O+3]+=C[3]*L>>4}function u(C){return Math.max(0,Math.min(255,C))}function m(C,T){const O=C[0]-T[0],L=C[1]-T[1],j=C[2]-T[2],H=C[3]-T[3];return O*O+L*L+j*j+H*H}function l(C,T,O,L,j,H,F){F==null&&(F=1);const V=L.length,I=[];for(var A=0;A<V;A++){const P=L[A];I.push([P>>>0&255,P>>>8&255,P>>>16&255,P>>>24&255])}for(A=0;A<V;A++){let P=4294967295;for(var U=0,k=0;k<V;k++){var E=m(I[A],I[k]);k!=A&&E<P&&(P=E,U=k)}}const R=new Uint32Array(j.buffer),D=new Int16Array(T*O*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(A=0;A<W.length;A++)W[A]=255*((W[A]+.5)/16-.5);for(let P=0;P<O;P++)for(let z=0;z<T;z++){var M;A=4*(P*T+z),F!=2?M=[u(C[A]+D[A]),u(C[A+1]+D[A+1]),u(C[A+2]+D[A+2]),u(C[A+3]+D[A+3])]:(E=W[4*(3&P)+(3&z)],M=[u(C[A]+E),u(C[A+1]+E),u(C[A+2]+E),u(C[A+3]+E)]),U=0;let $=16777215;for(k=0;k<V;k++){const J=m(M,I[k]);J<$&&($=J,U=k)}const X=I[U],Y=[M[0]-X[0],M[1]-X[1],M[2]-X[2],M[3]-X[3]];F==1&&(z!=T-1&&r(Y,D,A+4,7),P!=O-1&&(z!=0&&r(Y,D,A+4*T-4,3),r(Y,D,A+4*T,5),z!=T-1&&r(Y,D,A+4*T+4,1))),H[A>>2]=U,R[A>>2]=L[U]}}function s(C,T,O,L,j){j==null&&(j={});const{crc:H}=i,F=e.writeUint,V=e.writeUshort,I=e.writeASCII;let A=8;const U=C.frames.length>1;let k,E=!1,R=33+(U?20:0);if(j.sRGB!=null&&(R+=13),j.pHYs!=null&&(R+=21),j.iCCP!=null&&(k=pako.deflate(j.iCCP),R+=21+k.length+4),C.ctype==3){for(var D=C.plte.length,W=0;W<D;W++)C.plte[W]>>>24!=255&&(E=!0);R+=8+3*D+4+(E?8+1*D+4:0)}for(var M=0;M<C.frames.length;M++)U&&(R+=38),R+=(X=C.frames[M]).cimg.length+12,M!=0&&(R+=4);R+=12;const P=new Uint8Array(R),z=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)P[W]=z[W];if(F(P,A,13),A+=4,I(P,A,"IHDR"),A+=4,F(P,A,T),A+=4,F(P,A,O),A+=4,P[A]=C.depth,A++,P[A]=C.ctype,A++,P[A]=0,A++,P[A]=0,A++,P[A]=0,A++,F(P,A,H(P,A-17,17)),A+=4,j.sRGB!=null&&(F(P,A,1),A+=4,I(P,A,"sRGB"),A+=4,P[A]=j.sRGB,A++,F(P,A,H(P,A-5,5)),A+=4),j.iCCP!=null){const Y=13+k.length;F(P,A,Y),A+=4,I(P,A,"iCCP"),A+=4,I(P,A,"ICC profile"),A+=11,A+=2,P.set(k,A),A+=k.length,F(P,A,H(P,A-(Y+4),Y+4)),A+=4}if(j.pHYs!=null&&(F(P,A,9),A+=4,I(P,A,"pHYs"),A+=4,F(P,A,j.pHYs[0]),A+=4,F(P,A,j.pHYs[1]),A+=4,P[A]=j.pHYs[2],A++,F(P,A,H(P,A-13,13)),A+=4),U&&(F(P,A,8),A+=4,I(P,A,"acTL"),A+=4,F(P,A,C.frames.length),A+=4,F(P,A,j.loop!=null?j.loop:0),A+=4,F(P,A,H(P,A-12,12)),A+=4),C.ctype==3){for(F(P,A,3*(D=C.plte.length)),A+=4,I(P,A,"PLTE"),A+=4,W=0;W<D;W++){const Y=3*W,J=C.plte[W],ie=255&J,re=J>>>8&255,q=J>>>16&255;P[A+Y+0]=ie,P[A+Y+1]=re,P[A+Y+2]=q}if(A+=3*D,F(P,A,H(P,A-3*D-4,3*D+4)),A+=4,E){for(F(P,A,D),A+=4,I(P,A,"tRNS"),A+=4,W=0;W<D;W++)P[A+W]=C.plte[W]>>>24&255;A+=D,F(P,A,H(P,A-D-4,D+4)),A+=4}}let $=0;for(M=0;M<C.frames.length;M++){var X=C.frames[M];U&&(F(P,A,26),A+=4,I(P,A,"fcTL"),A+=4,F(P,A,$++),A+=4,F(P,A,X.rect.width),A+=4,F(P,A,X.rect.height),A+=4,F(P,A,X.rect.x),A+=4,F(P,A,X.rect.y),A+=4,V(P,A,L[M]),A+=2,V(P,A,1e3),A+=2,P[A]=X.dispose,A++,P[A]=X.blend,A++,F(P,A,H(P,A-30,30)),A+=4);const Y=X.cimg;F(P,A,(D=Y.length)+(M==0?0:4)),A+=4;const J=A;I(P,A,M==0?"IDAT":"fdAT"),A+=4,M!=0&&(F(P,A,$++),A+=4),P.set(Y,A),A+=D,F(P,A,H(P,J,A-J)),A+=4}return F(P,A,0),A+=4,I(P,A,"IEND"),A+=4,F(P,A,H(P,A-4,4)),A+=4,P.buffer}function h(C,T,O){for(let L=0;L<C.frames.length;L++){const j=C.frames[L];j.rect.width;const H=j.rect.height,F=new Uint8Array(H*j.bpl+H);j.cimg=c(j.img,H,j.bpp,j.bpl,F,T,O)}}function f(C,T,O,L,j){const H=j[0],F=j[1],V=j[2],I=j[3],A=j[4],U=j[5];let k=6,E=8,R=255;for(var D=0;D<C.length;D++){const te=new Uint8Array(C[D]);for(var W=te.length,M=0;M<W;M+=4)R&=te[M+3]}const P=R!=255,z=function(K,Z,se,fe,le,ne){const ce=[];for(var ee=0;ee<K.length;ee++){const Oe=new Uint8Array(K[ee]),Ke=new Uint32Array(Oe.buffer);var ae;let Le=0,kt=0,at=Z,Vt=se,Fn=fe?1:0;if(ee!=0){const _s=ne||fe||ee==1||ce[ee-2].dispose!=0?1:2;let zi=0,qa=1e9;for(let Ts=0;Ts<_s;Ts++){var he=new Uint8Array(K[ee-1-Ts]);const iC=new Uint32Array(K[ee-1-Ts]);let ii=Z,ri=se,kr=-1,ks=-1;for(let Ui=0;Ui<se;Ui++)for(let Hi=0;Hi<Z;Hi++)Ke[xe=Ui*Z+Hi]!=iC[xe]&&(Hi<ii&&(ii=Hi),Hi>kr&&(kr=Hi),Ui<ri&&(ri=Ui),Ui>ks&&(ks=Ui));kr==-1&&(ii=ri=kr=ks=0),le&&((1&ii)==1&&ii--,(1&ri)==1&&ri--);const nm=(kr-ii+1)*(ks-ri+1);nm<qa&&(qa=nm,zi=Ts,Le=ii,kt=ri,at=kr-ii+1,Vt=ks-ri+1)}he=new Uint8Array(K[ee-1-zi]),zi==1&&(ce[ee-1].dispose=2),ae=new Uint8Array(at*Vt*4),t(he,Z,se,ae,at,Vt,-Le,-kt,0),Fn=t(Oe,Z,se,ae,at,Vt,-Le,-kt,3)?1:0,Fn==1?o(Oe,Z,se,ae,{x:Le,y:kt,width:at,height:Vt}):t(Oe,Z,se,ae,at,Vt,-Le,-kt,0)}else ae=Oe.slice(0);ce.push({rect:{x:Le,y:kt,width:at,height:Vt},img:ae,blend:Fn,dispose:0})}if(fe)for(ee=0;ee<ce.length;ee++){if((_e=ce[ee]).blend==1)continue;const Oe=_e.rect,Ke=ce[ee-1].rect,Le=Math.min(Oe.x,Ke.x),kt=Math.min(Oe.y,Ke.y),at={x:Le,y:kt,width:Math.max(Oe.x+Oe.width,Ke.x+Ke.width)-Le,height:Math.max(Oe.y+Oe.height,Ke.y+Ke.height)-kt};ce[ee-1].dispose=1,ee-1!=0&&a(K,Z,se,ce,ee-1,at,le),a(K,Z,se,ce,ee,at,le)}let de=0;if(K.length!=1)for(var xe=0;xe<ce.length;xe++){var _e;de+=(_e=ce[xe]).rect.width*_e.rect.height}return ce}(C,T,O,H,F,V),$={},X=[],Y=[];if(L!=0){const te=[];for(M=0;M<z.length;M++)te.push(z[M].img.buffer);const K=function(le){let ne=0;for(var ce=0;ce<le.length;ce++)ne+=le[ce].byteLength;const ee=new Uint8Array(ne);let ae=0;for(ce=0;ce<le.length;ce++){const he=new Uint8Array(le[ce]),de=he.length;for(let xe=0;xe<de;xe+=4){let _e=he[xe],Oe=he[xe+1],Ke=he[xe+2];const Le=he[xe+3];Le==0&&(_e=Oe=Ke=0),ee[ae+xe]=_e,ee[ae+xe+1]=Oe,ee[ae+xe+2]=Ke,ee[ae+xe+3]=Le}ae+=de}return ee.buffer}(te),Z=v(K,L);for(M=0;M<Z.plte.length;M++)X.push(Z.plte[M].est.rgba);let se=0;for(M=0;M<z.length;M++){const fe=(ie=z[M]).img.length;var J=new Uint8Array(Z.inds.buffer,se>>2,fe>>2);Y.push(J);const le=new Uint8Array(Z.abuf,se,fe);U&&l(ie.img,ie.rect.width,ie.rect.height,X,le,J),ie.img.set(le),se+=fe}}else for(D=0;D<z.length;D++){var ie=z[D];const te=new Uint32Array(ie.img.buffer);var re=ie.rect.width;for(W=te.length,J=new Uint8Array(W),Y.push(J),M=0;M<W;M++){const K=te[M];if(M!=0&&K==te[M-1])J[M]=J[M-1];else if(M>re&&K==te[M-re])J[M]=J[M-re];else{let Z=$[K];if(Z==null&&($[K]=Z=X.length,X.push(K),X.length>=300))break;J[M]=Z}}}const q=X.length;for(q<=256&&A==0&&(E=q<=2?1:q<=4?2:q<=16?4:8,E=Math.max(E,I)),D=0;D<z.length;D++){(ie=z[D]).rect.x,ie.rect.y,re=ie.rect.width;const te=ie.rect.height;let K=ie.img;new Uint32Array(K.buffer);let Z=4*re,se=4;if(q<=256&&A==0){Z=Math.ceil(E*re/8);var G=new Uint8Array(Z*te);const fe=Y[D];for(let le=0;le<te;le++){M=le*Z;const ne=le*re;if(E==8)for(var Q=0;Q<re;Q++)G[M+Q]=fe[ne+Q];else if(E==4)for(Q=0;Q<re;Q++)G[M+(Q>>1)]|=fe[ne+Q]<<4-4*(1&Q);else if(E==2)for(Q=0;Q<re;Q++)G[M+(Q>>2)]|=fe[ne+Q]<<6-2*(3&Q);else if(E==1)for(Q=0;Q<re;Q++)G[M+(Q>>3)]|=fe[ne+Q]<<7-1*(7&Q)}K=G,k=3,se=1}else if(P==0&&z.length==1){G=new Uint8Array(re*te*3);const fe=re*te;for(M=0;M<fe;M++){const le=3*M,ne=4*M;G[le]=K[ne],G[le+1]=K[ne+1],G[le+2]=K[ne+2]}K=G,k=2,se=3,Z=3*re}ie.img=K,ie.bpl=Z,ie.bpp=se}return{ctype:k,depth:E,plte:X,frames:z}}function a(C,T,O,L,j,H,F){const V=Uint8Array,I=Uint32Array,A=new V(C[j-1]),U=new I(C[j-1]),k=j+1<C.length?new V(C[j+1]):null,E=new V(C[j]),R=new I(E.buffer);let D=T,W=O,M=-1,P=-1;for(let $=0;$<H.height;$++)for(let X=0;X<H.width;X++){const Y=H.x+X,J=H.y+$,ie=J*T+Y,re=R[ie];re==0||L[j-1].dispose==0&&U[ie]==re&&(k==null||k[4*ie+3]!=0)||(Y<D&&(D=Y),Y>M&&(M=Y),J<W&&(W=J),J>P&&(P=J))}M==-1&&(D=W=M=P=0),F&&((1&D)==1&&D--,(1&W)==1&&W--),H={x:D,y:W,width:M-D+1,height:P-W+1};const z=L[j];z.rect=H,z.blend=1,z.img=new Uint8Array(H.width*H.height*4),L[j-1].dispose==0?(t(A,T,O,z.img,H.width,H.height,-H.x,-H.y,0),o(E,T,O,z.img,H)):t(E,T,O,z.img,H.width,H.height,-H.x,-H.y,0)}function o(C,T,O,L,j){t(C,T,O,L,j.width,j.height,-j.x,-j.y,2)}function c(C,T,O,L,j,H,F){const V=[];let I,A=[0,1,2,3,4];H!=-1?A=[H]:(T*L>5e5||O==1)&&(A=[0]),F&&(I={level:0});const U=Wk;for(var k=0;k<A.length;k++){for(let D=0;D<T;D++)d(j,C,D,L,O,A[k]);V.push(U.deflate(j,I))}let E,R=1e9;for(k=0;k<V.length;k++)V[k].length<R&&(E=k,R=V[k].length);return V[E]}function d(C,T,O,L,j,H){const F=O*L;let V=F+O;if(C[V]=H,V++,H==0)if(L<500)for(var I=0;I<L;I++)C[V+I]=T[F+I];else C.set(new Uint8Array(T.buffer,F,L),V);else if(H==1){for(I=0;I<j;I++)C[V+I]=T[F+I];for(I=j;I<L;I++)C[V+I]=T[F+I]-T[F+I-j]+256&255}else if(O==0){for(I=0;I<j;I++)C[V+I]=T[F+I];if(H==2)for(I=j;I<L;I++)C[V+I]=T[F+I];if(H==3)for(I=j;I<L;I++)C[V+I]=T[F+I]-(T[F+I-j]>>1)+256&255;if(H==4)for(I=j;I<L;I++)C[V+I]=T[F+I]-n(T[F+I-j],0,0)+256&255}else{if(H==2)for(I=0;I<L;I++)C[V+I]=T[F+I]+256-T[F+I-L]&255;if(H==3){for(I=0;I<j;I++)C[V+I]=T[F+I]+256-(T[F+I-L]>>1)&255;for(I=j;I<L;I++)C[V+I]=T[F+I]+256-(T[F+I-L]+T[F+I-j]>>1)&255}if(H==4){for(I=0;I<j;I++)C[V+I]=T[F+I]+256-n(0,T[F+I-L],0)&255;for(I=j;I<L;I++)C[V+I]=T[F+I]+256-n(T[F+I-j],T[F+I-L],T[F+I-j-L])&255}}}function v(C,T){const O=new Uint8Array(C),L=O.slice(0),j=new Uint32Array(L.buffer),H=p(L,T),F=H[0],V=H[1],I=O.length,A=new Uint8Array(I>>2);let U;if(O.length<2e7)for(var k=0;k<I;k+=4)U=g(F,E=O[k]*(1/255),R=O[k+1]*(1/255),D=O[k+2]*(1/255),W=O[k+3]*(1/255)),A[k>>2]=U.ind,j[k>>2]=U.est.rgba;else for(k=0;k<I;k+=4){var E=O[k]*.00392156862745098,R=O[k+1]*(1/255),D=O[k+2]*(1/255),W=O[k+3]*(1/255);for(U=F;U.left;)U=y(U.est,E,R,D,W)<=0?U.left:U.right;A[k>>2]=U.ind,j[k>>2]=U.est.rgba}return{abuf:L.buffer,inds:A,plte:V}}function p(C,T,O){O==null&&(O=1e-4);const L=new Uint32Array(C.buffer),j={i0:0,i1:C.length,bst:null,est:null,tdst:0,left:null,right:null};j.bst=b(C,j.i0,j.i1),j.est=S(j.bst);const H=[j];for(;H.length<T;){let V=0,I=0;for(var F=0;F<H.length;F++)H[F].est.L>V&&(V=H[F].est.L,I=F);if(V<O)break;const A=H[I],U=x(C,L,A.i0,A.i1,A.est.e,A.est.eMq255);if(A.i0>=U||A.i1<=U){A.est.L=0;continue}const k={i0:A.i0,i1:U,bst:null,est:null,tdst:0,left:null,right:null};k.bst=b(C,k.i0,k.i1),k.est=S(k.bst);const E={i0:U,i1:A.i1,bst:null,est:null,tdst:0,left:null,right:null};for(E.bst={R:[],m:[],N:A.bst.N-k.bst.N},F=0;F<16;F++)E.bst.R[F]=A.bst.R[F]-k.bst.R[F];for(F=0;F<4;F++)E.bst.m[F]=A.bst.m[F]-k.bst.m[F];E.est=S(E.bst),A.left=k,A.right=E,H[I]=k,H.push(E)}for(H.sort((V,I)=>I.bst.N-V.bst.N),F=0;F<H.length;F++)H[F].ind=F;return[j,H]}function g(C,T,O,L,j){if(C.left==null)return C.tdst=function(k,E,R,D,W){const M=E-k[0],P=R-k[1],z=D-k[2],$=W-k[3];return M*M+P*P+z*z+$*$}(C.est.q,T,O,L,j),C;const H=y(C.est,T,O,L,j);let F=C.left,V=C.right;H>0&&(F=C.right,V=C.left);const I=g(F,T,O,L,j);if(I.tdst<=H*H)return I;const A=g(V,T,O,L,j);return A.tdst<I.tdst?A:I}function y(C,T,O,L,j){const{e:H}=C;return H[0]*T+H[1]*O+H[2]*L+H[3]*j-C.eMq}function x(C,T,O,L,j,H){for(L-=4;O<L;){for(;w(C,O,j)<=H;)O+=4;for(;w(C,L,j)>H;)L-=4;if(O>=L)break;const F=T[O>>2];T[O>>2]=T[L>>2],T[L>>2]=F,O+=4,L-=4}for(;w(C,O,j)>H;)O-=4;return O+4}function w(C,T,O){return C[T]*O[0]+C[T+1]*O[1]+C[T+2]*O[2]+C[T+3]*O[3]}function b(C,T,O){const L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0],H=O-T>>2;for(let F=T;F<O;F+=4){const V=C[F]*.00392156862745098,I=C[F+1]*(1/255),A=C[F+2]*(1/255),U=C[F+3]*(1/255);j[0]+=V,j[1]+=I,j[2]+=A,j[3]+=U,L[0]+=V*V,L[1]+=V*I,L[2]+=V*A,L[3]+=V*U,L[5]+=I*I,L[6]+=I*A,L[7]+=I*U,L[10]+=A*A,L[11]+=A*U,L[15]+=U*U}return L[4]=L[1],L[8]=L[2],L[9]=L[6],L[12]=L[3],L[13]=L[7],L[14]=L[11],{R:L,m:j,N:H}}function S(C){const{R:T}=C,{m:O}=C,{N:L}=C,j=O[0],H=O[1],F=O[2],V=O[3],I=L==0?0:1/L,A=[T[0]-j*j*I,T[1]-j*H*I,T[2]-j*F*I,T[3]-j*V*I,T[4]-H*j*I,T[5]-H*H*I,T[6]-H*F*I,T[7]-H*V*I,T[8]-F*j*I,T[9]-F*H*I,T[10]-F*F*I,T[11]-F*V*I,T[12]-V*j*I,T[13]-V*H*I,T[14]-V*F*I,T[15]-V*V*I],U=A,k=_;let E=[Math.random(),Math.random(),Math.random(),Math.random()],R=0,D=0;if(L!=0)for(let M=0;M<16&&(E=k.multVec(U,E),D=Math.sqrt(k.dot(E,E)),E=k.sml(1/D,E),!(M!=0&&Math.abs(D-R)<1e-9));M++)R=D;const W=[j*I,H*I,F*I,V*I];return{Cov:A,q:W,e:E,L:R,eMq255:k.dot(k.sml(255,W),E),eMq:k.dot(E,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var _={multVec:(C,T)=>[C[0]*T[0]+C[1]*T[1]+C[2]*T[2]+C[3]*T[3],C[4]*T[0]+C[5]*T[1]+C[6]*T[2]+C[7]*T[3],C[8]*T[0]+C[9]*T[1]+C[10]*T[2]+C[11]*T[3],C[12]*T[0]+C[13]*T[1]+C[14]*T[2]+C[15]*T[3]],dot:(C,T)=>C[0]*T[0]+C[1]*T[1]+C[2]*T[2]+C[3]*T[3],sml:(C,T)=>[C*T[0],C*T[1],C*T[2],C*T[3]]};ln.encode=function(T,O,L,j,H,F,V){j==null&&(j=0),V==null&&(V=!1);const I=f(T,O,L,j,[!1,!1,!1,0,V,!1]);return h(I,-1),s(I,O,L,H,F)},ln.encodeLL=function(T,O,L,j,H,F,V,I){const A={ctype:0+(j==1?0:2)+(H==0?0:4),depth:F,frames:[]},U=(j+H)*F,k=U*O;for(let E=0;E<T.length;E++)A.frames.push({rect:{x:0,y:0,width:O,height:L},img:new Uint8Array(T[E]),blend:0,dispose:1,bpp:Math.ceil(U/8),bpl:Math.ceil(k/8)});return h(A,0,!0),s(A,O,L,V,I)},ln.encode.compress=f,ln.encode.dither=l,ln.quantize=v,ln.quantize.getKDtree=p,ln.quantize.getNearest=g})();const Gx={toArrayBuffer(t,e){const n=t.width,i=t.height,r=n<<2,u=t.getContext("2d").getImageData(0,0,n,i),m=new Uint32Array(u.data.buffer),l=(32*n+31)/32<<2,s=l*i,h=122+s,f=new ArrayBuffer(h),a=new DataView(f),o=1<<20;let c,d,v,p,g=o,y=0,x=0,w=0;function b(C){a.setUint16(x,C,!0),x+=2}function S(C){a.setUint32(x,C,!0),x+=4}function _(C){x+=C}b(19778),S(h),_(4),S(122),S(108),S(n),S(-i>>>0),b(1),b(32),S(3),S(s),S(2835),S(2835),_(8),S(16711680),S(65280),S(255),S(4278190080),S(1466527264),function C(){for(;y<i&&g>0;){for(p=122+y*l,c=0;c<r;)g--,d=m[w++],v=d>>>24,a.setUint32(p+c,d<<8|v),c+=4;y++}w<m.length?(g=o,setTimeout(C,Gx._dly)):e(f)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Lt={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},$k={[Lt.CHROME]:16384,[Lt.FIREFOX]:11180,[Lt.DESKTOP_SAFARI]:16384,[Lt.IE]:8192,[Lt.IOS]:4096,[Lt.ETC]:8192};const Kd=typeof window<"u",Yx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,El=Kd&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Gk=(Kd||Yx)&&(El&&El.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Xx=(Kd||Yx)&&(El&&El.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function qd(t,e,n=Date.now()){return new Promise(i=>{const r=t.split(","),u=r[0].match(/:(.*?);/)[1],m=globalThis.atob(r[1]);let l=m.length;const s=new Uint8Array(l);for(;l--;)s[l]=m.charCodeAt(l);const h=new Blob([s],{type:u});h.name=e,h.lastModified=n,i(h)})}function Kx(t){return new Promise((e,n)=>{const i=new Xx;i.onload=()=>e(i.result),i.onerror=r=>n(r),i.readAsDataURL(t)})}function qx(t){return new Promise((e,n)=>{const i=new Image;i.onload=()=>e(i),i.onerror=r=>n(r),i.src=t})}function tr(){if(tr.cachedResult!==void 0)return tr.cachedResult;let t=Lt.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Lt.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Lt.IOS:/Safari/i.test(e)?t=Lt.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Lt.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Lt.IE),tr.cachedResult=t,tr.cachedResult}function Qx(t,e){const n=tr(),i=$k[n];let r=t,u=e,m=r*u;const l=r>u?u/r:r/u;for(;m>i*i;){const s=(i+r)/2,h=(i+u)/2;s<h?(u=h,r=h*l):(u=s*l,r=s),m=r*u}return{width:r,height:u}}function xc(t,e){let n,i;try{if(n=new OffscreenCanvas(t,e),i=n.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),i=n.getContext("2d")}return n.width=t,n.height=e,[n,i]}function Jx(t,e){const{width:n,height:i}=Qx(t.width,t.height),[r,u]=xc(n,i);return e&&/jpe?g/.test(e)&&(u.fillStyle="white",u.fillRect(0,0,r.width,r.height)),u.drawImage(t,0,0,r.width,r.height),r}function $o(){return $o.cachedResult!==void 0||($o.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),$o.cachedResult}function Al(t,e={}){return new Promise(function(n,i){let r,u;var m=function(){try{return u=Jx(r,e.fileType||t.type),n([r,u])}catch(s){return i(s)}},l=function(s){try{var h=function(f){try{throw f}catch(a){return i(a)}};try{let f;return Kx(t).then(function(a){try{return f=a,qx(f).then(function(o){try{return r=o,function(){try{return m()}catch(c){return i(c)}}()}catch(c){return h(c)}},h)}catch(o){return h(o)}},h)}catch(f){h(f)}}catch(f){return i(f)}};try{if($o()||[Lt.DESKTOP_SAFARI,Lt.MOBILE_SAFARI].includes(tr()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(s){try{return r=s,m()}catch{return l()}},l)}catch{l()}})}function Ml(t,e,n,i,r=1){return new Promise(function(u,m){let l;if(e==="image/png"){let a,o,c;return a=t.getContext("2d"),{data:o}=a.getImageData(0,0,t.width,t.height),c=ln.encode([o.buffer],t.width,t.height,4096*r),l=new Blob([c],{type:e}),l.name=n,l.lastModified=i,s.call(this)}{let a=function(){return s.call(this)};var h=a;if(e==="image/bmp")return new Promise(o=>Gx.toBlob(t,o)).then((function(o){try{return l=o,l.name=n,l.lastModified=i,a.call(this)}catch(c){return m(c)}}).bind(this),m);{let o=function(){return a.call(this)};var f=o;if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:r}).then((function(c){try{return l=c,l.name=n,l.lastModified=i,o.call(this)}catch(d){return m(d)}}).bind(this),m);{let c;return c=t.toDataURL(e,r),qd(c,n,i).then((function(d){try{return l=d,o.call(this)}catch(v){return m(v)}}).bind(this),m)}}}function s(){return u(l)}})}function Cn(t){t.width=0,t.height=0}function Hr(){return new Promise(function(t,e){let n,i,r,u;return Hr.cachedResult!==void 0?t(Hr.cachedResult):qd("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(m){try{return n=m,Al(n).then(function(l){try{return i=l[1],Ml(i,n.type,n.name,n.lastModified).then(function(s){try{return r=s,Cn(i),Al(r).then(function(h){try{return u=h[0],Hr.cachedResult=u.width===1&&u.height===2,t(Hr.cachedResult)}catch(f){return e(f)}},e)}catch(h){return e(h)}},e)}catch(s){return e(s)}},e)}catch(l){return e(l)}},e)})}function Zx(t){return new Promise((e,n)=>{const i=new Xx;i.onload=r=>{const u=new DataView(r.target.result);if(u.getUint16(0,!1)!=65496)return e(-2);const m=u.byteLength;let l=2;for(;l<m;){if(u.getUint16(l+2,!1)<=8)return e(-1);const s=u.getUint16(l,!1);if(l+=2,s==65505){if(u.getUint32(l+=2,!1)!=1165519206)return e(-1);const h=u.getUint16(l+=6,!1)==18761;l+=u.getUint32(l+4,h);const f=u.getUint16(l,h);l+=2;for(let a=0;a<f;a++)if(u.getUint16(l+12*a,h)==274)return e(u.getUint16(l+12*a+8,h))}else{if((65280&s)!=65280)break;l+=u.getUint16(l,!1)}}return e(-1)},i.onerror=r=>n(r),i.readAsArrayBuffer(t)})}function ew(t,e){const{width:n}=t,{height:i}=t,{maxWidthOrHeight:r}=e;let u,m=t;return isFinite(r)&&(n>r||i>r)&&([m,u]=xc(n,i),n>i?(m.width=r,m.height=i/n*r):(m.width=n/i*r,m.height=r),u.drawImage(t,0,0,m.width,m.height),Cn(t)),m}function tw(t,e){const{width:n}=t,{height:i}=t,[r,u]=xc(n,i);switch(e>4&&e<9?(r.width=i,r.height=n):(r.width=n,r.height=i),e){case 2:u.transform(-1,0,0,1,n,0);break;case 3:u.transform(-1,0,0,-1,n,i);break;case 4:u.transform(1,0,0,-1,0,i);break;case 5:u.transform(0,1,1,0,0,0);break;case 6:u.transform(0,1,-1,0,i,0);break;case 7:u.transform(0,-1,-1,0,i,n);break;case 8:u.transform(0,-1,1,0,0,n)}return u.drawImage(t,0,0,n,i),Cn(t),r}function Eg(t,e,n=0){return new Promise(function(i,r){let u,m,l,s,h,f,a,o,c,d,v,p,g,y,x,w,b,S,_,C;function T(L=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;u+=L,e.onProgress(Math.min(u,100))}function O(L){if(e.signal&&e.signal.aborted)throw e.signal.reason;u=Math.min(Math.max(L,u),100),e.onProgress(u)}return u=n,m=e.maxIteration||10,l=1024*e.maxSizeMB*1024,T(),Al(t,e).then((function(L){try{return[,s]=L,T(),h=ew(s,e),T(),new Promise(function(j,H){var F;if(!(F=e.exifOrientation))return Zx(t).then((function(I){try{return F=I,V.call(this)}catch(A){return H(A)}}).bind(this),H);function V(){return j(F)}return V.call(this)}).then((function(j){try{return f=j,T(),Hr().then((function(H){try{return a=H?h:tw(h,f),T(),o=e.initialQuality||1,c=e.fileType||t.type,Ml(a,c,t.name,t.lastModified,o).then((function(F){try{{let U=function(){if(m--&&(x>l||x>g)){let E,R;return E=C?.95*_.width:_.width,R=C?.95*_.height:_.height,[b,S]=xc(E,R),S.drawImage(_,0,0,E,R),o*=c==="image/png"?.85:.95,Ml(b,c,t.name,t.lastModified,o).then(function(D){try{return w=D,Cn(_),_=b,x=w.size,O(Math.min(99,Math.floor((y-x)/(y-l)*100))),U}catch(W){return r(W)}},r)}return[1]},k=function(){return Cn(_),Cn(b),Cn(h),Cn(a),Cn(s),O(100),i(w)};var I=U,A=k;if(d=F,T(),v=d.size>l,p=d.size>t.size,!v&&!p)return O(100),i(d);var V;return g=t.size,y=d.size,x=y,_=a,C=!e.alwaysKeepResolution&&v,(V=(function(E){for(;E;){if(E.then)return void E.then(V,r);try{if(E.pop){if(E.length)return E.pop()?k.call(this):E;E=U}else E=E.call(this)}catch(R){return r(R)}}}).bind(this))(U)}}catch(U){return r(U)}}).bind(this),r)}catch(F){return r(F)}}).bind(this),r)}catch(H){return r(H)}}).bind(this),r)}catch(j){return r(j)}}).bind(this),r)})}const Yk=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Eu;function Xk(t,e){return new Promise((n,i)=>{Eu||(Eu=function(m){const l=[];return l.push(m),URL.createObjectURL(new Blob(l))}(Yk));const r=new Worker(Eu);r.addEventListener("message",function(m){if(e.signal&&e.signal.aborted)r.terminate();else if(m.data.progress===void 0){if(m.data.error)return i(new Error(m.data.error)),void r.terminate();n(m.data.file),r.terminate()}else e.onProgress(m.data.progress)}),r.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",()=>{i(e.signal.reason),r.terminate()}),r.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function xt(t,e){return new Promise(function(n,i){let r,u,m,l,s,h;if(r={...e},m=0,{onProgress:l}=r,r.maxSizeMB=r.maxSizeMB||Number.POSITIVE_INFINITY,s=typeof r.useWebWorker!="boolean"||r.useWebWorker,delete r.useWebWorker,r.onProgress=c=>{m=c,typeof l=="function"&&l(m)},!(t instanceof Blob||t instanceof Gk))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return i(new Error("The file given is not an image"));if(h=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!s||typeof Worker!="function"||h)return Eg(t,r).then((function(c){try{return u=c,o.call(this)}catch(d){return i(d)}}).bind(this),i);var f=(function(){try{return o.call(this)}catch(c){return i(c)}}).bind(this),a=function(c){try{return Eg(t,r).then(function(d){try{return u=d,f()}catch(v){return i(v)}},i)}catch(d){return i(d)}};try{return r.libURL=r.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",Xk(t,r).then(function(c){try{return u=c,f()}catch{return a()}},a)}catch{a()}function o(){try{u.name=t.name,u.lastModified=t.lastModified}catch{}try{r.preserveExif&&t.type==="image/jpeg"&&(!r.fileType||r.fileType&&r.fileType===t.type)&&(u=$x(t,u))}catch{}return n(u)}})}xt.getDataUrlFromFile=Kx,xt.getFilefromDataUrl=qd,xt.loadImage=qx,xt.drawImageInCanvas=Jx,xt.drawFileInCanvas=Al,xt.canvasToFile=Ml,xt.getExifOrientation=Zx,xt.handleMaxWidthOrHeight=ew,xt.followExifOrientation=tw,xt.cleanupCanvasMemory=Cn,xt.isAutoOrientationInBrowser=Hr,xt.approximateBelowMaximumCanvasSizeOfBrowser=Qx,xt.copyExifWithoutOrientation=$x,xt.getBrowserName=tr,xt.version="2.0.2";async function Au(t,e){const n=new it.fabric.Canvas(null),i=await new Promise(r=>{it.fabric.Image.fromURL(t.preview,u=>r(u))});if(n.setDimensions({width:i.width,height:i.height}),e.filters){const r=[];e.filters.brightness!==void 0&&r.push(new it.fabric.Image.filters.Brightness({brightness:(e.filters.brightness-100)/100})),e.filters.contrast!==void 0&&r.push(new it.fabric.Image.filters.Contrast({contrast:e.filters.contrast/100})),e.filters.saturation!==void 0&&r.push(new it.fabric.Image.filters.Saturation({saturation:e.filters.saturation/100})),e.filters.sepia&&r.push(new it.fabric.Image.filters.Sepia),e.filters.blur&&r.push(new it.fabric.Image.filters.Blur({blur:e.filters.blur/10})),e.filters.noise&&r.push(new it.fabric.Image.filters.Noise({noise:e.filters.noise})),e.filters.vignette&&r.push(new it.fabric.Image.filters.Vignette({radius:e.filters.vignette/100})),i.filters=r,i.applyFilters()}if(e.resize&&(i.scaleToWidth(e.resize.width),i.scaleToHeight(e.resize.height)),n.add(i),n.centerObject(i),n.renderAll(),e.export){const{format:r,quality:u,maxWidth:m,maxHeight:l,preserveAspectRatio:s}=e.export;let h=n;if(m||l){const o=s?Math.min(m?m/n.width:1,l?l/n.height:1):1;h=new it.fabric.Canvas(null),h.setDimensions({width:n.width*o,height:n.height*o});const c=new it.fabric.Image(n.toDataURL());c.scale(o),h.add(c),h.renderAll()}const f=h.toDataURL({format:r,quality:u}),a=await(await fetch(f)).blob();Wx.saveAs(a,`${t.file.name.split(".")[0]}_edited.${r}`)}return{...t,preview:n.toDataURL(),filters:{...t.filters,...e.filters}}}var wc=typeof self<"u"?self:global;const Ma=typeof navigator<"u",Kk=Ma&&typeof HTMLImageElement>"u",Dl=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),bc=wc.Buffer,yo=wc.BigInt,Sc=!!bc,qk=t=>t;function Il(t,e=qk){if(Dl)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let Qd=wc.fetch;const Qk=t=>Qd=t;if(!wc.fetch){const t=Il("http",i=>i),e=Il("https",i=>i),n=(i,{headers:r}={})=>new Promise(async(u,m)=>{let{port:l,hostname:s,pathname:h,protocol:f,search:a}=new URL(i);const o={method:"GET",hostname:s,path:encodeURI(h)+a,headers:r};l!==""&&(o.port=Number(l));const c=(f==="https:"?await e:await t).request(o,d=>{if(d.statusCode===301||d.statusCode===302){let v=new URL(d.headers.location,i).toString();return n(v,{headers:r}).then(u).catch(m)}u({status:d.statusCode,arrayBuffer:()=>new Promise(v=>{let p=[];d.on("data",g=>p.push(g)),d.on("end",()=>v(Buffer.concat(p)))})})});c.on("error",m),c.end()});Qk(n)}function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ll=t=>nw(t)?void 0:t,Jk=t=>t!==void 0;function nw(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(Jk).length===0)}function nt(t){let e=new Error(t);throw delete e.stack,e}function nr(t){return(t=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(t).trim())===""?void 0:t}function ch(t){let e=function(n){let i=0;return n.ifd0.enabled&&(i+=1024),n.exif.enabled&&(i+=2048),n.makerNote&&(i+=2048),n.userComment&&(i+=1024),n.gps.enabled&&(i+=512),n.interop.enabled&&(i+=100),n.ifd1.enabled&&(i+=1024),i+2048}(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const uh=t=>String.fromCharCode.apply(null,t),Ag=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function iw(t){return Ag?Ag.decode(t):Sc?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(uh(t)))}let Di=class Ar{static from(e,n){return e instanceof this&&e.le===n?e:new Ar(e,void 0,void 0,n)}constructor(e,n=0,i,r){if(typeof r=="boolean"&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-n);let u=new DataView(e,n,i);this._swapDataView(u)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ar){i===void 0&&(i=e.byteLength-n),(n+=e.byteOffset)+i>e.byteOffset+e.byteLength&&nt("Creating view outside of available memory in ArrayBuffer");let u=new DataView(e.buffer,n,i);this._swapDataView(u)}else if(typeof e=="number"){let u=new DataView(new ArrayBuffer(e));this._swapDataView(u)}else nt("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,n,i=Ar){return e instanceof DataView||e instanceof Ar?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||nt("BufferView.set(): Invalid data argument."),this.toUint8().set(e,n),new i(this,n,e.byteLength)}subarray(e,n){return n=n||this._lengthToEnd(e),new Ar(this,e,n)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,n){return new Uint8Array(this.buffer,this.byteOffset+e,n)}getString(e=0,n=this.byteLength){return iw(this.getUint8Array(e,n))}getLatin1String(e=0,n=this.byteLength){let i=this.getUint8Array(e,n);return uh(i)}getUnicodeString(e=0,n=this.byteLength){const i=[];for(let r=0;r<n&&e+r<this.byteLength;r+=2)i.push(this.getUint16(e+r));return uh(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,n=this.le){return this.dataView.getInt16(e,n)}getInt32(e,n=this.le){return this.dataView.getInt32(e,n)}getUint16(e,n=this.le){return this.dataView.getUint16(e,n)}getUint32(e,n=this.le){return this.dataView.getUint32(e,n)}getFloat32(e,n=this.le){return this.dataView.getFloat32(e,n)}getFloat64(e,n=this.le){return this.dataView.getFloat64(e,n)}getFloat(e,n=this.le){return this.dataView.getFloat32(e,n)}getDouble(e,n=this.le){return this.dataView.getFloat64(e,n)}getUintBytes(e,n,i){switch(n){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,n,i){switch(n){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function fh(t,e){nt(`${t} '${e}' was not loaded, try using full build of exifr.`)}let Jd=class extends Map{constructor(e){super(),this.kind=e}get(e,n){return this.has(e)||fh(this.kind,e),n&&(e in n||function(i,r){nt(`Unknown ${i} '${r}'.`)}(this.kind,e),n[e].enabled||fh(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}};var In=new Jd("file parser"),Ze=new Jd("segment parser"),Ln=new Jd("file reader");function Zk(t,e){return typeof t=="string"?Mg(t,e):Ma&&!Kk&&t instanceof HTMLImageElement?Mg(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Di(t):Ma&&t instanceof Blob?hh(t,e,"blob",gr):void nt("Invalid input argument")}function Mg(t,e){return(n=t).startsWith("data:")||n.length>1e4?dh(t,e,"base64"):Dl&&t.includes("://")?hh(t,e,"url",mr):Dl?dh(t,e,"fs"):Ma?hh(t,e,"url",mr):void nt("Invalid input argument");var n}async function hh(t,e,n,i){return Ln.has(n)?dh(t,e,n):i?async function(r,u){let m=await u(r);return new Di(m)}(t,i):void nt(`Parser ${n} is not loaded`)}async function dh(t,e,n){let i=new(Ln.get(n))(t,e);return await i.read(),i}const mr=t=>Qd(t).then(e=>e.arrayBuffer()),gr=t=>new Promise((e,n)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=n,i.readAsArrayBuffer(t)});let eP=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function Je(t,e,n){let i=new eP;for(let[r,u]of n)i.set(r,u);if(Array.isArray(e))for(let r of e)t.set(r,i);else t.set(e,i);return i}function vr(t,e,n){let i,r=t.get(e);for(i of n)r.set(i[0],i[1])}const ct=new Map,vn=new Map,Ei=new Map,mi=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],xs=["jfif","xmp","icc","iptc","ihdr"],yr=["tiff",...xs],$e=["ifd0","ifd1","exif","gps","interop"],gi=[...yr,...$e],vi=["makerNote","userComment"],ws=["translateKeys","translateValues","reviveValues","multiSegment"],yi=[...ws,"sanitize","mergeOutput","silentErrors"];class rw{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}let Rs=class extends rw{get needed(){return this.enabled||this.deps.size>0}constructor(e,n,i,r){if(super(),ye(this,"enabled",!1),ye(this,"skip",new Set),ye(this,"pick",new Set),ye(this,"deps",new Set),ye(this,"translateKeys",!1),ye(this,"translateValues",!1),ye(this,"reviveValues",!1),this.key=e,this.enabled=n,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=$e.includes(e),this.canBeFiltered&&(this.dict=ct.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:u,skip:m}=i;u&&u.length>0&&this.translateTagSet(u,this.pick),m&&m.length>0&&this.translateTagSet(m,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:nt(`Invalid options argument: ${i}`)}applyInheritables(e){let n,i;for(n of ws)i=e[n],i!==void 0&&(this[n]=i)}translateTagSet(e,n){if(this.dict){let i,r,{tagKeys:u,tagValues:m}=this.dict;for(i of e)typeof i=="string"?(r=m.indexOf(i),r===-1&&(r=u.indexOf(Number(i))),r!==-1&&n.add(Number(u[r]))):n.add(i)}else for(let i of e)n.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Fl(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Fl(this.pick,this.deps)}};var Pt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Dg=new Map;let _r=class extends rw{static useCached(e){let n=Dg.get(e);return n!==void 0||(n=new this(e),Dg.set(e,n)),n}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):nt(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Ma?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of mi)this[e]=Pt[e];for(e of yi)this[e]=Pt[e];for(e of vi)this[e]=Pt[e];for(e of gi)this[e]=new Rs(e,Pt[e],void 0,this)}setupFromTrue(){let e;for(e of mi)this[e]=Pt[e];for(e of yi)this[e]=Pt[e];for(e of vi)this[e]=!0;for(e of gi)this[e]=new Rs(e,!0,void 0,this)}setupFromArray(e){let n;for(n of mi)this[n]=Pt[n];for(n of yi)this[n]=Pt[n];for(n of vi)this[n]=Pt[n];for(n of gi)this[n]=new Rs(n,!1,void 0,this);this.setupGlobalFilters(e,void 0,$e)}setupFromObject(e){let n;for(n of($e.ifd0=$e.ifd0||$e.image,$e.ifd1=$e.ifd1||$e.thumbnail,Object.assign(this,e),mi))this[n]=Mu(e[n],Pt[n]);for(n of yi)this[n]=Mu(e[n],Pt[n]);for(n of vi)this[n]=Mu(e[n],Pt[n]);for(n of yr)this[n]=new Rs(n,Pt[n],e[n],this);for(n of $e)this[n]=new Rs(n,Pt[n],e[n],this.tiff);this.setupGlobalFilters(e.pick,e.skip,$e,gi),e.tiff===!0?this.batchEnableWithBool($e,!0):e.tiff===!1?this.batchEnableWithUserValue($e,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,$e):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,$e)}batchEnableWithBool(e,n){for(let i of e)this[i].enabled=n}batchEnableWithUserValue(e,n){for(let i of e){let r=n[i];this[i].enabled=r!==!1&&r!==void 0}}setupGlobalFilters(e,n,i,r=i){if(e&&e.length){for(let m of r)this[m].enabled=!1;let u=Ig(e,i);for(let[m,l]of u)Fl(this[m].pick,l),this[m].enabled=!0}else if(n&&n.length){let u=Ig(n,i);for(let[m,l]of u)Fl(this[m].skip,l)}}filterNestedSegmentTags(){let{ifd0:e,exif:n,xmp:i,iptc:r,icc:u}=this;this.makerNote?n.deps.add(37500):n.skip.add(37500),this.userComment?n.deps.add(37510):n.skip.add(37510),i.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),u.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:n,gps:i,interop:r}=this;r.needed&&(n.deps.add(40965),e.deps.add(40965)),n.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=$e.some(u=>this[u].enabled===!0)||this.makerNote||this.userComment;for(let u of $e)this[u].finalizeFilters()}get onlyTiff(){return!xs.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of yr)this[e].enabled&&!Ze.has(e)&&fh("segment parser",e)}};function Ig(t,e){let n,i,r,u,m=[];for(r of e){for(u of(n=ct.get(r),i=[],n))(t.includes(u[0])||t.includes(u[1]))&&i.push(u[0]);i.length&&m.push([r,i])}return m}function Mu(t,e){return t!==void 0?t:e!==void 0?e:void 0}function Fl(t,e){for(let n of e)t.add(n)}ye(_r,"default",Pt);class Ni{constructor(e){ye(this,"parsers",{}),ye(this,"output",{}),ye(this,"errors",[]),ye(this,"pushToErrors",n=>this.errors.push(n)),this.options=_r.useCached(e)}async read(e){this.file=await Zk(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,n=e.getUint16(0);for(let[i,r]of In)if(r.canHandle(e,n))return this.fileParser=new r(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),nt("Unknown file format")}async parse(){let{output:e,errors:n}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),n.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(e.errors=n),Ll(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let n=Object.values(this.parsers).map(async i=>{let r=await i.parse();i.assignToOutput(e,r)});this.options.silentErrors&&(n=n.map(i=>i.catch(this.pushToErrors))),await Promise.all(n)}async extractThumbnail(){this.setup();let{options:e,file:n}=this,i=Ze.get("tiff",e);var r;if(n.tiff?r={start:0,type:"tiff"}:n.jpeg&&(r=await this.fileParser.getOrFindSegment("tiff")),r===void 0)return;let u=await this.fileParser.ensureSegmentChunk(r),m=this.parsers.tiff=new i(u,e,n),l=await m.extractThumbnail();return n.close&&n.close(),l}}async function Cc(t,e){let n=new Ni(e);return await n.read(t),n.parse()}var tP=Object.freeze({__proto__:null,parse:Cc,Exifr:Ni,fileParsers:In,segmentParsers:Ze,fileReaders:Ln,tagKeys:ct,tagValues:vn,tagRevivers:Ei,createDictionary:Je,extendDictionary:vr,fetchUrlAsArrayBuffer:mr,readBlobAsArrayBuffer:gr,chunkedProps:mi,otherSegments:xs,segments:yr,tiffBlocks:$e,segmentsAndBlocks:gi,tiffExtractables:vi,inheritables:ws,allFormatters:yi,Options:_r});class _c{constructor(e,n,i){ye(this,"errors",[]),ye(this,"ensureSegmentChunk",async r=>{let u=r.start,m=r.size||65536;if(this.file.chunked)if(this.file.available(u,m))r.chunk=this.file.subarray(u,m);else try{r.chunk=await this.file.readChunk(u,m)}catch(l){nt(`Couldn't read segment: ${JSON.stringify(r)}. ${l.message}`)}else this.file.byteLength>u+m?r.chunk=this.file.subarray(u,m):r.size===void 0?r.chunk=this.file.subarray(u):nt("Segment unreachable: "+JSON.stringify(r));return r.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=n,this.parsers=i}injectSegment(e,n){this.options[e].enabled&&this.createParser(e,n)}createParser(e,n){let i=new(Ze.get(e))(n,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let n of e){let{type:i,chunk:r}=n,u=this.options[i];if(u&&u.enabled){let m=this.parsers[i];m&&m.append||m||this.createParser(i,r)}}}async readSegments(e){let n=e.map(this.ensureSegmentChunk);await Promise.all(n)}}class hn{static findPosition(e,n){let i=e.getUint16(n+2)+2,r=typeof this.headerLength=="function"?this.headerLength(e,n,i):this.headerLength,u=n+r,m=i-r;return{offset:n,length:i,headerLength:r,start:u,size:m,end:u+m}}static parse(e,n={}){return new this(e,new _r({[this.type]:n}),e).parse()}normalizeInput(e){return e instanceof Di?e:new Di(e)}constructor(e,n={},i){ye(this,"errors",[]),ye(this,"raw",new Map),ye(this,"handleError",r=>{if(!this.options.silentErrors)throw r;this.errors.push(r.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=n,this.localOptions=n[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,n){let i=Ei.get(n),r=vn.get(n),u=ct.get(n),m=this.options[n],l=m.reviveValues&&!!i,s=m.translateValues&&!!r,h=m.translateKeys&&!!u,f={};for(let[a,o]of e)l&&i.has(a)?o=i.get(a)(o):s&&r.has(a)&&(o=this.translateValue(o,r.get(a))),h&&u.has(a)&&(a=u.get(a)||a),f[a]=o;return f}translateValue(e,n){return n[e]||n.DEFAULT||e}assignToOutput(e,n){this.assignObjectToOutput(e,this.constructor.type,n)}assignObjectToOutput(e,n,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[n]?Object.assign(e[n],i):e[n]=i}}ye(hn,"headerLength",4),ye(hn,"type",void 0),ye(hn,"multiSegment",!1),ye(hn,"canHandle",()=>!1);function nP(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function iP(t){return t>=224&&t<=239}function rP(t,e,n){for(let[i,r]of Ze)if(r.canHandle(t,e,n))return i}class Lg extends _c{constructor(...e){super(...e),ye(this,"appSegments",[]),ye(this,"jpegSegments",[]),ye(this,"unknownSegments",[])}static canHandle(e,n){return n===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ze.keyList())):(e=e===void 0?Ze.keyList().filter(n=>this.options[n].enabled):e.filter(n=>this.options[n].enabled&&Ze.has(n)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,n){this.setupSegmentFinderArgs(n);let{file:i,findAll:r,wanted:u,remaining:m}=this;if(!r&&this.file.chunked&&(r=Array.from(u).some(l=>{let s=Ze.get(l),h=this.options[l];return s.multiSegment&&h.multiSegment}),r&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let l=!1;for(;m.size>0&&!l&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:s}=i,h=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(l=e>s&&!h?!await i.readNextChunk(e):!await i.readNextChunk(s),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,n){n-=2;let i,r,u,m,l,s,{file:h,findAll:f,wanted:a,remaining:o,options:c}=this;for(;e<n;e++)if(h.getUint8(e)===255){if(i=h.getUint8(e+1),iP(i)){if(r=h.getUint16(e+2),u=rP(h,e,r),u&&a.has(u)&&(m=Ze.get(u),l=m.findPosition(h,e),s=c[u],l.type=u,this.appSegments.push(l),!f&&(m.multiSegment&&s.multiSegment?(this.unfinishedMultiSegment=l.chunkNumber<l.chunkCount,this.unfinishedMultiSegment||o.delete(u)):o.delete(u),o.size===0)))break;c.recordUnknownSegments&&(l=hn.findPosition(h,e),l.marker=i,this.unknownSegments.push(l)),e+=r+1}else if(nP(i)){if(r=h.getUint16(e+2),i===218&&c.stopAfterSos!==!1)return;c.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:i}),e+=r+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(n=>n.multiSegment))return;let e=function(n,i){let r,u,m,l=new Map;for(let s=0;s<n.length;s++)r=n[s],u=r[i],l.has(u)?m=l.get(u):l.set(u,m=[]),m.push(r);return Array.from(l)}(this.appSegments,"type");this.mergedAppSegments=e.map(([n,i])=>{let r=Ze.get(n,this.options);return r.handleMultiSegments?{type:n,chunk:r.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(n=>n.type===e)}async getOrFindSegment(e){let n=this.getSegment(e);return n===void 0&&(await this.findAppSegments(0,[e]),n=this.getSegment(e)),n}}ye(Lg,"type","jpeg"),In.set("jpeg",Lg);const sP=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class aP extends hn{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,n,i=new Map){let{pick:r,skip:u}=this.options[n];r=new Set(r);let m=r.size>0,l=u.size===0,s=this.chunk.getUint16(e);e+=2;for(let h=0;h<s;h++){let f=this.chunk.getUint16(e);if(m){if(r.has(f)&&(i.set(f,this.parseTag(e,f,n)),r.delete(f),r.size===0))break}else!l&&u.has(f)||i.set(f,this.parseTag(e,f,n));e+=12}return i}parseTag(e,n,i){let{chunk:r}=this,u=r.getUint16(e+2),m=r.getUint32(e+4),l=sP[u];if(l*m<=4?e+=8:e=r.getUint32(e+8),(u<1||u>13)&&nt(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${n.toString(16)}, type: ${u}, offset ${e}`),e>r.byteLength&&nt(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${n.toString(16)}, type: ${u}, offset ${e} is outside of chunk size ${r.byteLength}`),u===1)return r.getUint8Array(e,m);if(u===2)return nr(r.getString(e,m));if(u===7)return r.getUint8Array(e,m);if(m===1)return this.parseTagValue(u,e);{let s=new(function(f){switch(f){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(u))(m),h=l;for(let f=0;f<m;f++)s[f]=this.parseTagValue(u,e),e+=h;return s}}parseTagValue(e,n){let{chunk:i}=this;switch(e){case 1:return i.getUint8(n);case 3:return i.getUint16(n);case 4:return i.getUint32(n);case 5:return i.getUint32(n)/i.getUint32(n+4);case 6:return i.getInt8(n);case 8:return i.getInt16(n);case 9:return i.getInt32(n);case 10:return i.getInt32(n)/i.getInt32(n+4);case 11:return i.getFloat(n);case 12:return i.getDouble(n);case 13:return i.getUint32(n);default:nt(`Invalid tiff type ${e}`)}}}class Du extends aP{static canHandle(e,n){return e.getUint8(n+1)===225&&e.getUint32(n+4)===1165519206&&e.getUint16(n+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let n=this[e]();return n.catch!==void 0&&(n=n.catch(this.handleError)),n}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),n=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(n)}}parseBlock(e,n){let i=new Map;return this[n]=i,this.parseTags(e,n,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&nt("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&nt(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,ch(this.options));let n=this.parseBlock(this.ifd0Offset,"ifd0");return n.size!==0?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,ch(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,n){let i=e.get(n);i&&i.length===1&&e.set(n,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Fg(...e.get(2),e.get(1))),e.set("longitude",Fg(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),n=this.ifd1.get(514);return this.chunk.getUint8Array(e,n)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,n,i,r={};for(n of $e)if(e=this[n],!nw(e))if(i=this.canTranslate?this.translateBlock(e,n):Object.fromEntries(e),this.options.mergeOutput){if(n==="ifd1")continue;Object.assign(r,i)}else r[n]=i;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,n){if(this.globalOptions.mergeOutput)Object.assign(e,n);else for(let[i,r]of Object.entries(n))this.assignObjectToOutput(e,i,r)}}function Fg(t,e,n,i){var r=t+e/60+n/3600;return i!=="S"&&i!=="W"||(r*=-1),r}ye(Du,"type","tiff"),ye(Du,"headerLength",10),Ze.set("tiff",Du);var oP=Object.freeze({__proto__:null,default:tP,Exifr:Ni,fileParsers:In,segmentParsers:Ze,fileReaders:Ln,tagKeys:ct,tagValues:vn,tagRevivers:Ei,createDictionary:Je,extendDictionary:vr,fetchUrlAsArrayBuffer:mr,readBlobAsArrayBuffer:gr,chunkedProps:mi,otherSegments:xs,segments:yr,tiffBlocks:$e,segmentsAndBlocks:gi,tiffExtractables:vi,inheritables:ws,allFormatters:yi,Options:_r,parse:Cc});const Zd={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ep=Object.assign({},Zd,{firstChunkSize:4e4,gps:[1,2,3,4]});async function sw(t){let e=new Ni(ep);await e.read(t);let n=await e.parse();if(n&&n.gps){let{latitude:i,longitude:r}=n.gps;return{latitude:i,longitude:r}}}const tp=Object.assign({},Zd,{tiff:!1,ifd1:!0,mergeOutput:!1});async function aw(t){let e=new Ni(tp);await e.read(t);let n=await e.extractThumbnail();return n&&Sc?bc.from(n):n}async function ow(t){let e=await this.thumbnail(t);if(e!==void 0){let n=new Blob([e]);return URL.createObjectURL(n)}}const np=Object.assign({},Zd,{firstChunkSize:4e4,ifd0:[274]});async function ip(t){let e=new Ni(np);await e.read(t);let n=await e.parse();if(n&&n.ifd0)return n.ifd0[274]}const rp=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ir=!0,rr=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,n,i]=e;ir=Number(n)+.1*Number(i)<13.4,rr=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);ir=rr=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);ir=rr=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);ir=rr=Number(e)<77}}async function lw(t){let e=await ip(t);return Object.assign({canvas:ir,css:rr},rp[e])}class lP extends Di{constructor(...e){super(...e),ye(this,"ranges",new cP),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,n,i){if(e===0&&this.byteLength===0&&i){let r=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(r)}else{let r=e+n;if(r>this.byteLength){let{dataView:u}=this._extend(r);this._swapDataView(u)}}}_extend(e){let n;n=Sc?bc.allocUnsafe(e):new Uint8Array(e);let i=new DataView(n.buffer,n.byteOffset,n.byteLength);return n.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:n,dataView:i}}subarray(e,n,i=!1){return n=n||this._lengthToEnd(e),i&&this._tryExtend(e,n),this.ranges.add(e,n),super.subarray(e,n)}set(e,n,i=!1){i&&this._tryExtend(n,e.byteLength,e);let r=super.set(e,n);return this.ranges.add(n,r.byteLength),r}async ensureChunk(e,n){this.chunked&&(this.ranges.available(e,n)||await this.readChunk(e,n))}available(e,n){return this.ranges.available(e,n)}}class cP{constructor(){ye(this,"list",[])}get length(){return this.list.length}add(e,n,i=0){let r=e+n,u=this.list.filter(m=>Rg(e,m.offset,r)||Rg(e,m.end,r));if(u.length>0){e=Math.min(e,...u.map(l=>l.offset)),r=Math.max(r,...u.map(l=>l.end)),n=r-e;let m=u.shift();m.offset=e,m.length=n,m.end=r,this.list=this.list.filter(l=>!u.includes(l))}else this.list.push({offset:e,length:n,end:r})}available(e,n){let i=e+n;return this.list.some(r=>r.offset<=e&&i<=r.end)}}function Rg(t,e,n){return t<=e&&e<=n}class Tc extends lP{constructor(e,n){super(0),ye(this,"chunksRead",0),this.input=e,this.options=n}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let n=this.options.chunkSize,i=await this.readChunk(e,n);return!!i&&i.byteLength===n}async readChunk(e,n){if(this.chunksRead++,(n=this.safeWrapAddress(e,n))!==0)return this._readChunk(e,n)}safeWrapAddress(e,n){return this.size!==void 0&&e+n>this.size?Math.max(0,this.size-e):n}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Ln.set("blob",class extends Tc{async readWhole(){this.chunked=!1;let t=await gr(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let n=e?t+e:void 0,i=this.input.slice(t,n),r=await gr(i);return this.set(r,t,!0)}});var uP=Object.freeze({__proto__:null,default:oP,Exifr:Ni,fileParsers:In,segmentParsers:Ze,fileReaders:Ln,tagKeys:ct,tagValues:vn,tagRevivers:Ei,createDictionary:Je,extendDictionary:vr,fetchUrlAsArrayBuffer:mr,readBlobAsArrayBuffer:gr,chunkedProps:mi,otherSegments:xs,segments:yr,tiffBlocks:$e,segmentsAndBlocks:gi,tiffExtractables:vi,inheritables:ws,allFormatters:yi,Options:_r,parse:Cc,gpsOnlyOptions:ep,gps:sw,thumbnailOnlyOptions:tp,thumbnail:aw,thumbnailUrl:ow,orientationOnlyOptions:np,orientation:ip,rotations:rp,get rotateCanvas(){return ir},get rotateCss(){return rr},rotation:lw});Ln.set("url",class extends Tc{async readWhole(){this.chunked=!1;let t=await mr(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let n=e?t+e-1:void 0,i=this.options.httpHeaders||{};(t||n)&&(i.range=`bytes=${[t,n].join("-")}`);let r=await Qd(this.input,{headers:i}),u=await r.arrayBuffer(),m=u.byteLength;if(r.status!==416)return m!==e&&(this.size=t+m),this.set(u,t,!0)}});Di.prototype.getUint64=function(t){let e=this.getUint32(t),n=this.getUint32(t+4);return e<1048575?e<<32|n:typeof yo!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),yo(e)<<yo(32)|yo(n)):void nt("Trying to read 64b value but JS can only handle 53b numbers.")};class fP extends _c{parseBoxes(e=0){let n=[];for(;e<this.file.byteLength-4;){let i=this.parseBoxHead(e);if(n.push(i),i.length===0)break;e+=i.length}return n}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,n){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find(i=>i.kind===n)}parseBoxHead(e){let n=this.file.getUint32(e),i=this.file.getString(e+4,4),r=e+8;return n===1&&(n=this.file.getUint64(e+8),r+=8),{offset:e,length:n,kind:i,start:r}}parseBoxFullHead(e){if(e.version!==void 0)return;let n=this.file.getUint32(e.start);e.version=n>>24,e.start+=4}}class cw extends fP{static canHandle(e,n){if(n!==0)return!1;let i=e.getUint16(2);if(i>50)return!1;let r=16,u=[];for(;r<i;)u.push(e.getString(r,4)),r+=4;return u.includes(this.type)}async parse(){let e=this.file.getUint32(0),n=this.parseBoxHead(e);for(;n.kind!=="meta";)e+=n.length,await this.file.ensureChunk(e,16),n=this.parseBoxHead(e);await this.file.ensureChunk(n.offset,n.length),this.parseBoxFullHead(n),this.parseSubBoxes(n),this.options.icc.enabled&&await this.findIcc(n),this.options.tiff.enabled&&await this.findExif(n)}async registerSegment(e,n,i){await this.file.ensureChunk(n,i);let r=this.file.subarray(n,i);this.createParser(e,r)}async findIcc(e){let n=this.findBox(e,"iprp");if(n===void 0)return;let i=this.findBox(n,"ipco");if(i===void 0)return;let r=this.findBox(i,"colr");r!==void 0&&await this.registerSegment("icc",r.offset+12,r.length)}async findExif(e){let n=this.findBox(e,"iinf");if(n===void 0)return;let i=this.findBox(e,"iloc");if(i===void 0)return;let r=this.findExifLocIdInIinf(n),u=this.findExtentInIloc(i,r);if(u===void 0)return;let[m,l]=u;await this.file.ensureChunk(m,l);let s=4+this.file.getUint32(m);m+=s,l-=s,await this.registerSegment("tiff",m,l)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let n,i,r,u,m=e.start,l=this.file.getUint16(m);for(m+=2;l--;){if(n=this.parseBoxHead(m),this.parseBoxFullHead(n),i=n.start,n.version>=2&&(r=n.version===3?4:2,u=this.file.getString(i+r+2,4),u==="Exif"))return this.file.getUintBytes(i,r);m+=n.length}}get8bits(e){let n=this.file.getUint8(e);return[n>>4,15&n]}findExtentInIloc(e,n){this.parseBoxFullHead(e);let i=e.start,[r,u]=this.get8bits(i++),[m,l]=this.get8bits(i++),s=e.version===2?4:2,h=e.version===1||e.version===2?2:0,f=l+r+u,a=e.version===2?4:2,o=this.file.getUintBytes(i,a);for(i+=a;o--;){let c=this.file.getUintBytes(i,s);i+=s+h+2+m;let d=this.file.getUint16(i);if(i+=2,c===n)return d>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(i+l,r),this.file.getUintBytes(i+l+r,u)];i+=d*f}}}class uw extends cw{}ye(uw,"type","heic");class jg extends cw{}ye(jg,"type","avif"),In.set("heic",uw),In.set("avif",jg),Je(ct,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Je(ct,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Je(ct,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Je(vn,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let aa=Je(vn,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Ng={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};aa.set(37392,Ng),aa.set(41488,Ng);const Iu={0:"Normal",1:"Low",2:"High"};function Bg(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function Vg(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map(n=>String.fromCharCode(n))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function Lu(t){if(typeof t=="string"){var[e,n,i,r,u,m]=t.trim().split(/[-: ]/g).map(Number),l=new Date(e,n-1,i);return Number.isNaN(r)||Number.isNaN(u)||Number.isNaN(m)||(l.setHours(r),l.setMinutes(u),l.setSeconds(m)),Number.isNaN(+l)?t:l}}function js(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let n=0;n<t.length;n+=2)e.push(zg(t[n+1],t[n]));else for(let n=0;n<t.length;n+=2)e.push(zg(t[n],t[n+1]));return nr(String.fromCodePoint(...e))}function zg(t,e){return t<<8|e}aa.set(41992,Iu),aa.set(41993,Iu),aa.set(41994,Iu),Je(Ei,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?iw(t):t}],[306,Lu],[40091,js],[40092,js],[40093,js],[40094,js],[40095,js]]),Je(Ei,"exif",[[40960,Vg],[36864,Vg],[36867,Lu],[36868,Lu],[40962,Bg],[40963,Bg]]),Je(Ei,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class Fu extends hn{static canHandle(e,n){return e.getUint8(n+1)===225&&e.getUint32(n+4)===1752462448&&e.getString(n+4,20)==="http://ns.adobe.com/"}static headerLength(e,n){return e.getString(n+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,n){let i=super.findPosition(e,n);return i.multiSegment=i.extended=i.headerLength===79,i.multiSegment?(i.chunkCount=e.getUint8(n+72),i.chunkNumber=e.getUint8(n+76),e.getUint8(n+77)!==0&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(e){return e.map(n=>n.chunk.getString()).join("")}normalizeInput(e){return typeof e=="string"?e:Di.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(u){let m={},l={};for(let s of pw)m[s]=[],l[s]=0;return u.replace(mP,(s,h,f)=>{if(h==="<"){let a=++l[f];return m[f].push(a),`${s}#${a}`}return`${s}#${m[f].pop()}`})}(e);let n=ts.findAll(e,"rdf","Description");n.length===0&&n.push(new ts("rdf","Description",void 0,e));let i,r={};for(let u of n)for(let m of u.properties)i=pP(m.ns,r),fw(m,i);return function(u){let m;for(let l in u)m=u[l]=Ll(u[l]),m===void 0&&delete u[l];return Ll(u)}(r)}assignToOutput(e,n){if(this.localOptions.parse)for(let[i,r]of Object.entries(n))switch(i){case"tiff":this.assignObjectToOutput(e,"ifd0",r);break;case"exif":this.assignObjectToOutput(e,"exif",r);break;case"xmlns":break;default:this.assignObjectToOutput(e,i,r)}else e.xmp=n}}ye(Fu,"type","xmp"),ye(Fu,"multiSegment",!0),Ze.set("xmp",Fu);class Rl{static findAll(e){return hw(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Rl.unpackMatch)}static unpackMatch(e){let n=e[1],i=e[2],r=e[3].slice(1,-1);return r=dw(r),new Rl(n,i,r)}constructor(e,n,i){this.ns=e,this.name=n,this.value=i}serialize(){return this.value}}class ts{static findAll(e,n,i){if(n!==void 0||i!==void 0){n=n||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var r=new RegExp(`<(${n}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else r=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return hw(e,r).map(ts.unpackMatch)}static unpackMatch(e){let n=e[1],i=e[2],r=e[4],u=e[8];return new ts(n,i,r,u)}constructor(e,n,i,r){this.ns=e,this.name=n,this.attrString=i,this.innerXml=r,this.attrs=Rl.findAll(i),this.children=ts.findAll(r),this.value=this.children.length===0?dw(r):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:n}=this;return e==="rdf"&&(n==="Seq"||n==="Bag"||n==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return dP(this.children.map(hP));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let n of this.properties)fw(n,e);return this.value!==void 0&&(e.value=this.value),Ll(e)}}function fw(t,e){let n=t.serialize();n!==void 0&&(e[t.name]=n)}var hP=t=>t.serialize(),dP=t=>t.length===1?t[0]:t,pP=(t,e)=>e[t]?e[t]:e[t]={};function hw(t,e){let n,i=[];if(!t)return i;for(;(n=e.exec(t))!==null;)i.push(n);return i}function dw(t){if(function(i){return i==null||i==="null"||i==="undefined"||i===""||i.trim()===""}(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let n=t.toLowerCase();return n==="true"||n!=="false"&&t.trim()}const pw=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],mP=new RegExp(`(<|\\/)(${pw.join("|")})`,"g");var gP=Object.freeze({__proto__:null,default:uP,Exifr:Ni,fileParsers:In,segmentParsers:Ze,fileReaders:Ln,tagKeys:ct,tagValues:vn,tagRevivers:Ei,createDictionary:Je,extendDictionary:vr,fetchUrlAsArrayBuffer:mr,readBlobAsArrayBuffer:gr,chunkedProps:mi,otherSegments:xs,segments:yr,tiffBlocks:$e,segmentsAndBlocks:gi,tiffExtractables:vi,inheritables:ws,allFormatters:yi,Options:_r,parse:Cc,gpsOnlyOptions:ep,gps:sw,thumbnailOnlyOptions:tp,thumbnail:aw,thumbnailUrl:ow,orientationOnlyOptions:np,orientation:ip,rotations:rp,get rotateCanvas(){return ir},get rotateCss(){return rr},rotation:lw});let Ug=Il("fs",t=>t.promises);Ln.set("fs",class extends Tc{async readWhole(){this.chunked=!1,this.fs=await Ug;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await Ug,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var n=this.subarray(t,e,!0);return await this.fh.read(n.dataView,0,e,t),n}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});Ln.set("base64",class extends Tc{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let n,i,r=this.input;t===void 0?(t=0,n=0,i=0):(n=4*Math.floor(t/3),i=t-n/4*3),e===void 0&&(e=this.size);let u=t+e,m=n+4*Math.ceil(u/3);r=r.slice(n,m);let l=Math.min(e,this.size-t);if(Sc){let s=bc.from(r,"base64").slice(i,i+l);return this.set(s,t,!0)}{let s=this.subarray(t,l,!0),h=atob(r),f=s.toUint8();for(let a=0;a<l;a++)f[a]=h.charCodeAt(i+a);return s}}});class Hg extends _c{static canHandle(e,n){return n===18761||n===19789}extendOptions(e){let{ifd0:n,xmp:i,iptc:r,icc:u}=e;i.enabled&&n.deps.add(700),r.enabled&&n.deps.add(33723),u.enabled&&n.deps.add(34675),n.finalizeFilters()}async parse(){let{tiff:e,xmp:n,iptc:i,icc:r}=this.options;if(e.enabled||n.enabled||i.enabled||r.enabled){let u=Math.max(ch(this.options),this.options.chunkSize);await this.file.ensureChunk(0,u),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let n=this.parsers.tiff[e];this.injectSegment(e,n)}}}ye(Hg,"type","tiff"),In.set("tiff",Hg);let vP=Il("zlib");const yP=["ihdr","iccp","text","itxt","exif"];class Wg extends _c{constructor(...e){super(...e),ye(this,"catchError",n=>this.errors.push(n)),ye(this,"metaChunks",[]),ye(this,"unknownChunks",[])}static canHandle(e,n){return n===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,n){let{file:i}=this;for(;e<n;){let r=i.getUint32(e),u=i.getUint32(e+4),m=i.getString(e+4,4).toLowerCase(),l=r+4+4+4,s={type:m,offset:e,length:l,start:e+4+4,size:r,marker:u};yP.includes(m)?this.metaChunks.push(s):this.unknownChunks.push(s),e+=l}}parseTextChunks(){let e=this.metaChunks.filter(n=>n.type==="text");for(let n of e){let[i,r]=this.file.getString(n.start,n.size).split("\0");this.injectKeyValToIhdr(i,r)}}injectKeyValToIhdr(e,n){let i=this.parsers.ihdr;i&&i.raw.set(e,n)}findIhdr(){let e=this.metaChunks.find(n=>n.type==="ihdr");e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find(n=>n.type==="exif");e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter(n=>n.type==="itxt");for(let n of e)n.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",n.chunk)}async findIcc(){let e=this.metaChunks.find(l=>l.type==="iccp");if(!e)return;let{chunk:n}=e,i=n.getUint8Array(0,81),r=0;for(;r<80&&i[r]!==0;)r++;let u=r+2,m=n.getString(0,r);if(this.injectKeyValToIhdr("ProfileName",m),Dl){let l=await vP,s=n.getUint8Array(u);s=l.inflateSync(s),this.injectSegment("icc",s)}}}ye(Wg,"type","png"),In.set("png",Wg),Je(ct,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),vr(ct,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let $g=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];vr(ct,"ifd0",$g),vr(ct,"exif",$g),Je(vn,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class Ru extends hn{static canHandle(e,n){return e.getUint8(n+1)===224&&e.getUint32(n+4)===1246120262&&e.getUint8(n+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}ye(Ru,"type","jfif"),ye(Ru,"headerLength",9),Ze.set("jfif",Ru),Je(ct,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Gg extends hn{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}ye(Gg,"type","ihdr"),Ze.set("ihdr",Gg),Je(ct,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Je(vn,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Go extends hn{static canHandle(e,n){return e.getUint8(n+1)===226&&e.getUint32(n+4)===1229144927}static findPosition(e,n){let i=super.findPosition(e,n);return i.chunkNumber=e.getUint8(n+16),i.chunkCount=e.getUint8(n+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(e){return function(n){let i=function(r){let u=r[0].constructor,m=0;for(let h of r)m+=h.length;let l=new u(m),s=0;for(let h of r)l.set(h,s),s+=h.length;return l}(n.map(r=>r.chunk.toUint8()));return new Di(i)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&nt("ICC header is too short");for(let[n,i]of Object.entries(xP)){n=parseInt(n,10);let r=i(this.chunk,n);r!=="\0\0\0\0"&&e.set(n,r)}}parseTags(){let e,n,i,r,u,{raw:m}=this,l=this.chunk.getUint32(128),s=132,h=this.chunk.byteLength;for(;l--;){if(e=this.chunk.getString(s,4),n=this.chunk.getUint32(s+4),i=this.chunk.getUint32(s+8),r=this.chunk.getString(n,4),n+i>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");u=this.parseTag(r,n,i),u!==void 0&&u!=="\0\0\0\0"&&m.set(e,u),s+=12}}parseTag(e,n,i){switch(e){case"desc":return this.parseDesc(n);case"mluc":return this.parseMluc(n);case"text":return this.parseText(n,i);case"sig ":return this.parseSig(n)}if(!(n+i>this.chunk.byteLength))return this.chunk.getUint8Array(n,i)}parseDesc(e){let n=this.chunk.getUint32(e+8)-1;return nr(this.chunk.getString(e+12,n))}parseText(e,n){return nr(this.chunk.getString(e+8,n-8))}parseSig(e){return nr(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:n}=this,i=n.getUint32(e+8),r=n.getUint32(e+12),u=e+16,m=[];for(let l=0;l<i;l++){let s=n.getString(u+0,2),h=n.getString(u+2,2),f=n.getUint32(u+4),a=n.getUint32(u+8)+e,o=nr(n.getUnicodeString(a,f));m.push({lang:s,country:h,text:o}),u+=r}return i===1?m[0].text:m}translateValue(e,n){return typeof e=="string"?n[e]||n[e.toLowerCase()]||e:n[e]||e}}ye(Go,"type","icc"),ye(Go,"multiSegment",!0),ye(Go,"headerLength",18);const xP={4:Rn,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map(n=>n.toString(10)).join(".")},12:Rn,16:Rn,20:Rn,24:function(t,e){const n=t.getUint16(e),i=t.getUint16(e+2)-1,r=t.getUint16(e+4),u=t.getUint16(e+6),m=t.getUint16(e+8),l=t.getUint16(e+10);return new Date(Date.UTC(n,i,r,u,m,l))},36:Rn,40:Rn,48:Rn,52:Rn,64:(t,e)=>t.getUint32(e),80:Rn};function Rn(t,e){return nr(t.getString(e,4))}Ze.set("icc",Go),Je(ct,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const xo={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Yg={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Je(vn,"icc",[[4,xo],[12,Yg],[40,Object.assign({},xo,Yg)],[48,xo],[80,xo],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class wo extends hn{static canHandle(e,n,i){return e.getUint8(n+1)===237&&e.getString(n+4,9)==="Photoshop"&&this.containsIptc8bim(e,n,i)!==void 0}static headerLength(e,n,i){let r,u=this.containsIptc8bim(e,n,i);if(u!==void 0)return r=e.getUint8(n+u+7),r%2!=0&&(r+=1),r===0&&(r=4),u+8+r}static containsIptc8bim(e,n,i){for(let r=0;r<i;r++)if(this.isIptcSegmentHead(e,n+r))return r}static isIptcSegmentHead(e,n){return e.getUint8(n)===56&&e.getUint32(n)===943868237&&e.getUint16(n+4)===1028}parse(){let{raw:e}=this,n=this.chunk.byteLength-1,i=!1;for(let r=0;r<n;r++)if(this.chunk.getUint8(r)===28&&this.chunk.getUint8(r+1)===2){i=!0;let u=this.chunk.getUint16(r+3),m=this.chunk.getUint8(r+2),l=this.chunk.getLatin1String(r+5,u);e.set(m,this.pluralizeValue(e.get(m),l)),r+=4+u}else if(i)break;return this.translate(),this.output}pluralizeValue(e,n){return e!==void 0?e instanceof Array?(e.push(n),e):[e,n]:n}}ye(wo,"type","iptc"),ye(wo,"translateValues",!1),ye(wo,"reviveValues",!1),Ze.set("iptc",wo),Je(ct,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Je(vn,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);async function wP(t){try{const e=await gP.parse(t),n={width:0,height:0,format:t.type.split("/")[1],size:t.size,created:t.lastModified?new Date(t.lastModified).toISOString():void 0},i=new Image,r=new Promise(m=>{i.onload=()=>{m({width:i.width,height:i.height})}});i.src=URL.createObjectURL(t);const u=await r;return{...n,...u,camera:e?{make:e.Make,model:e.Model,focalLength:e.FocalLength,aperture:e.FNumber,iso:e.ISO,exposureTime:e.ExposureTime}:void 0,location:e!=null&&e.latitude&&(e!=null&&e.longitude)?{latitude:e.latitude,longitude:e.longitude}:void 0}}catch(e){return console.error("Error extracting metadata:",e),{width:0,height:0,format:t.type.split("/")[1],size:t.size}}}function Jn(t){return Array.isArray?Array.isArray(t):vw(t)==="[object Array]"}const bP=1/0;function SP(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-bP?"-0":e}function CP(t){return t==null?"":SP(t)}function Pn(t){return typeof t=="string"}function mw(t){return typeof t=="number"}function _P(t){return t===!0||t===!1||TP(t)&&vw(t)=="[object Boolean]"}function gw(t){return typeof t=="object"}function TP(t){return gw(t)&&t!==null}function Ut(t){return t!=null}function ju(t){return!t.trim().length}function vw(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const kP="Incorrect 'index' type",PP=t=>`Invalid value for key ${t}`,OP=t=>`Pattern length exceeds max of ${t}.`,EP=t=>`Missing ${t} property in key`,AP=t=>`Property 'weight' in key '${t}' must be a positive integer`,Xg=Object.prototype.hasOwnProperty;class MP{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(i=>{let r=yw(i);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(i=>{i.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function yw(t){let e=null,n=null,i=null,r=1,u=null;if(Pn(t)||Jn(t))i=t,e=Kg(t),n=ph(t);else{if(!Xg.call(t,"name"))throw new Error(EP("name"));const m=t.name;if(i=m,Xg.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(AP(m));e=Kg(m),n=ph(m),u=t.getFn}return{path:e,id:n,weight:r,src:i,getFn:u}}function Kg(t){return Jn(t)?t:t.split(".")}function ph(t){return Jn(t)?t.join("."):t}function DP(t,e){let n=[],i=!1;const r=(u,m,l)=>{if(Ut(u))if(!m[l])n.push(u);else{let s=m[l];const h=u[s];if(!Ut(h))return;if(l===m.length-1&&(Pn(h)||mw(h)||_P(h)))n.push(CP(h));else if(Jn(h)){i=!0;for(let f=0,a=h.length;f<a;f+=1)r(h[f],m,l+1)}else m.length&&r(h,m,l+1)}};return r(t,Pn(e)?e.split("."):e,0),i?n:n[0]}const IP={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},LP={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},FP={location:0,threshold:.6,distance:100},RP={useExtendedSearch:!1,getFn:DP,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var be={...LP,...IP,...FP,...RP};const jP=/[^ ]+/g;function NP(t=1,e=3){const n=new Map,i=Math.pow(10,e);return{get(r){const u=r.match(jP).length;if(n.has(u))return n.get(u);const m=1/Math.pow(u,.5*t),l=parseFloat(Math.round(m*i)/i);return n.set(u,l),l},clear(){n.clear()}}}class sp{constructor({getFn:e=be.getFn,fieldNormWeight:n=be.fieldNormWeight}={}){this.norm=NP(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,i)=>{this._keysMap[n.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Pn(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Pn(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,i=this.size();n<i;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Ut(e)||ju(e))return;let i={v:e,i:n,n:this.norm.get(e)};this.records.push(i)}_addObject(e,n){let i={i:n,$:{}};this.keys.forEach((r,u)=>{let m=r.getFn?r.getFn(e):this.getFn(e,r.path);if(Ut(m)){if(Jn(m)){let l=[];const s=[{nestedArrIndex:-1,value:m}];for(;s.length;){const{nestedArrIndex:h,value:f}=s.pop();if(Ut(f))if(Pn(f)&&!ju(f)){let a={v:f,i:h,n:this.norm.get(f)};l.push(a)}else Jn(f)&&f.forEach((a,o)=>{s.push({nestedArrIndex:o,value:a})})}i.$[u]=l}else if(Pn(m)&&!ju(m)){let l={v:m,n:this.norm.get(m)};i.$[u]=l}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function xw(t,e,{getFn:n=be.getFn,fieldNormWeight:i=be.fieldNormWeight}={}){const r=new sp({getFn:n,fieldNormWeight:i});return r.setKeys(t.map(yw)),r.setSources(e),r.create(),r}function BP(t,{getFn:e=be.getFn,fieldNormWeight:n=be.fieldNormWeight}={}){const{keys:i,records:r}=t,u=new sp({getFn:e,fieldNormWeight:n});return u.setKeys(i),u.setIndexRecords(r),u}function bo(t,{errors:e=0,currentLocation:n=0,expectedLocation:i=0,distance:r=be.distance,ignoreLocation:u=be.ignoreLocation}={}){const m=e/t.length;if(u)return m;const l=Math.abs(i-n);return r?m+l/r:l?1:m}function VP(t=[],e=be.minMatchCharLength){let n=[],i=-1,r=-1,u=0;for(let m=t.length;u<m;u+=1){let l=t[u];l&&i===-1?i=u:!l&&i!==-1&&(r=u-1,r-i+1>=e&&n.push([i,r]),i=-1)}return t[u-1]&&u-i>=e&&n.push([i,u-1]),n}const Qi=32;function zP(t,e,n,{location:i=be.location,distance:r=be.distance,threshold:u=be.threshold,findAllMatches:m=be.findAllMatches,minMatchCharLength:l=be.minMatchCharLength,includeMatches:s=be.includeMatches,ignoreLocation:h=be.ignoreLocation}={}){if(e.length>Qi)throw new Error(OP(Qi));const f=e.length,a=t.length,o=Math.max(0,Math.min(i,a));let c=u,d=o;const v=l>1||s,p=v?Array(a):[];let g;for(;(g=t.indexOf(e,d))>-1;){let _=bo(e,{currentLocation:g,expectedLocation:o,distance:r,ignoreLocation:h});if(c=Math.min(_,c),d=g+f,v){let C=0;for(;C<f;)p[g+C]=1,C+=1}}d=-1;let y=[],x=1,w=f+a;const b=1<<f-1;for(let _=0;_<f;_+=1){let C=0,T=w;for(;C<T;)bo(e,{errors:_,currentLocation:o+T,expectedLocation:o,distance:r,ignoreLocation:h})<=c?C=T:w=T,T=Math.floor((w-C)/2+C);w=T;let O=Math.max(1,o-T+1),L=m?a:Math.min(o+T,a)+f,j=Array(L+2);j[L+1]=(1<<_)-1;for(let F=L;F>=O;F-=1){let V=F-1,I=n[t.charAt(V)];if(v&&(p[V]=+!!I),j[F]=(j[F+1]<<1|1)&I,_&&(j[F]|=(y[F+1]|y[F])<<1|1|y[F+1]),j[F]&b&&(x=bo(e,{errors:_,currentLocation:V,expectedLocation:o,distance:r,ignoreLocation:h}),x<=c)){if(c=x,d=V,d<=o)break;O=Math.max(1,2*o-d)}}if(bo(e,{errors:_+1,currentLocation:o,expectedLocation:o,distance:r,ignoreLocation:h})>c)break;y=j}const S={isMatch:d>=0,score:Math.max(.001,x)};if(v){const _=VP(p,l);_.length?s&&(S.indices=_):S.isMatch=!1}return S}function UP(t){let e={};for(let n=0,i=t.length;n<i;n+=1){const r=t.charAt(n);e[r]=(e[r]||0)|1<<i-n-1}return e}class ww{constructor(e,{location:n=be.location,threshold:i=be.threshold,distance:r=be.distance,includeMatches:u=be.includeMatches,findAllMatches:m=be.findAllMatches,minMatchCharLength:l=be.minMatchCharLength,isCaseSensitive:s=be.isCaseSensitive,ignoreLocation:h=be.ignoreLocation}={}){if(this.options={location:n,threshold:i,distance:r,includeMatches:u,findAllMatches:m,minMatchCharLength:l,isCaseSensitive:s,ignoreLocation:h},this.pattern=s?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(o,c)=>{this.chunks.push({pattern:o,alphabet:UP(o),startIndex:c})},a=this.pattern.length;if(a>Qi){let o=0;const c=a%Qi,d=a-c;for(;o<d;)f(this.pattern.substr(o,Qi),o),o+=Qi;if(c){const v=a-Qi;f(this.pattern.substr(v),v)}}else f(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,includeMatches:i}=this.options;if(n||(e=e.toLowerCase()),this.pattern===e){let d={isMatch:!0,score:0};return i&&(d.indices=[[0,e.length-1]]),d}const{location:r,distance:u,threshold:m,findAllMatches:l,minMatchCharLength:s,ignoreLocation:h}=this.options;let f=[],a=0,o=!1;this.chunks.forEach(({pattern:d,alphabet:v,startIndex:p})=>{const{isMatch:g,score:y,indices:x}=zP(e,d,v,{location:r+p,distance:u,threshold:m,findAllMatches:l,minMatchCharLength:s,includeMatches:i,ignoreLocation:h});g&&(o=!0),a+=y,g&&x&&(f=[...f,...x])});let c={isMatch:o,score:o?a/this.chunks.length:1};return o&&i&&(c.indices=f),c}}class Bi{constructor(e){this.pattern=e}static isMultiMatch(e){return qg(e,this.multiRegex)}static isSingleMatch(e){return qg(e,this.singleRegex)}search(){}}function qg(t,e){const n=t.match(e);return n?n[1]:null}class HP extends Bi{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class WP extends Bi{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class $P extends Bi{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class GP extends Bi{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class YP extends Bi{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class XP extends Bi{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class bw extends Bi{constructor(e,{location:n=be.location,threshold:i=be.threshold,distance:r=be.distance,includeMatches:u=be.includeMatches,findAllMatches:m=be.findAllMatches,minMatchCharLength:l=be.minMatchCharLength,isCaseSensitive:s=be.isCaseSensitive,ignoreLocation:h=be.ignoreLocation}={}){super(e),this._bitapSearch=new ww(e,{location:n,threshold:i,distance:r,includeMatches:u,findAllMatches:m,minMatchCharLength:l,isCaseSensitive:s,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Sw extends Bi{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,i;const r=[],u=this.pattern.length;for(;(i=e.indexOf(this.pattern,n))>-1;)n=i+u,r.push([i,n-1]);const m=!!r.length;return{isMatch:m,score:m?0:1,indices:r}}}const mh=[HP,Sw,$P,GP,XP,YP,WP,bw],Qg=mh.length,KP=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,qP="|";function QP(t,e={}){return t.split(qP).map(n=>{let i=n.trim().split(KP).filter(u=>u&&!!u.trim()),r=[];for(let u=0,m=i.length;u<m;u+=1){const l=i[u];let s=!1,h=-1;for(;!s&&++h<Qg;){const f=mh[h];let a=f.isMultiMatch(l);a&&(r.push(new f(a,e)),s=!0)}if(!s)for(h=-1;++h<Qg;){const f=mh[h];let a=f.isSingleMatch(l);if(a){r.push(new f(a,e));break}}}return r})}const JP=new Set([bw.type,Sw.type]);class ZP{constructor(e,{isCaseSensitive:n=be.isCaseSensitive,includeMatches:i=be.includeMatches,minMatchCharLength:r=be.minMatchCharLength,ignoreLocation:u=be.ignoreLocation,findAllMatches:m=be.findAllMatches,location:l=be.location,threshold:s=be.threshold,distance:h=be.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:i,minMatchCharLength:r,findAllMatches:m,ignoreLocation:u,location:l,threshold:s,distance:h},this.pattern=n?e:e.toLowerCase(),this.query=QP(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let u=0,m=[],l=0;for(let s=0,h=n.length;s<h;s+=1){const f=n[s];m.length=0,u=0;for(let a=0,o=f.length;a<o;a+=1){const c=f[a],{isMatch:d,indices:v,score:p}=c.search(e);if(d){if(u+=1,l+=p,i){const g=c.constructor.type;JP.has(g)?m=[...m,...v]:m.push(v)}}else{l=0,u=0,m.length=0;break}}if(u){let a={isMatch:!0,score:l/u};return i&&(a.indices=m),a}}return{isMatch:!1,score:1}}}const gh=[];function eO(...t){gh.push(...t)}function vh(t,e){for(let n=0,i=gh.length;n<i;n+=1){let r=gh[n];if(r.condition(t,e))return new r(t,e)}return new ww(t,e)}const jl={AND:"$and",OR:"$or"},yh={PATH:"$path",PATTERN:"$val"},xh=t=>!!(t[jl.AND]||t[jl.OR]),tO=t=>!!t[yh.PATH],nO=t=>!Jn(t)&&gw(t)&&!xh(t),Jg=t=>({[jl.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Cw(t,e,{auto:n=!0}={}){const i=r=>{let u=Object.keys(r);const m=tO(r);if(!m&&u.length>1&&!xh(r))return i(Jg(r));if(nO(r)){const s=m?r[yh.PATH]:u[0],h=m?r[yh.PATTERN]:r[s];if(!Pn(h))throw new Error(PP(s));const f={keyId:ph(s),pattern:h};return n&&(f.searcher=vh(h,e)),f}let l={children:[],operator:u[0]};return u.forEach(s=>{const h=r[s];Jn(h)&&h.forEach(f=>{l.children.push(i(f))})}),l};return xh(t)||(t=Jg(t)),i(t)}function iO(t,{ignoreFieldNorm:e=be.ignoreFieldNorm}){t.forEach(n=>{let i=1;n.matches.forEach(({key:r,norm:u,score:m})=>{const l=r?r.weight:null;i*=Math.pow(m===0&&l?Number.EPSILON:m,(l||1)*(e?1:u))}),n.score=i})}function rO(t,e){const n=t.matches;e.matches=[],Ut(n)&&n.forEach(i=>{if(!Ut(i.indices)||!i.indices.length)return;const{indices:r,value:u}=i;let m={indices:r,value:u};i.key&&(m.key=i.key.src),i.idx>-1&&(m.refIndex=i.idx),e.matches.push(m)})}function sO(t,e){e.score=t.score}function aO(t,e,{includeMatches:n=be.includeMatches,includeScore:i=be.includeScore}={}){const r=[];return n&&r.push(rO),i&&r.push(sO),t.map(u=>{const{idx:m}=u,l={item:e[m],refIndex:m};return r.length&&r.forEach(s=>{s(u,l)}),l})}class bs{constructor(e,n={},i){this.options={...be,...n},this.options.useExtendedSearch,this._keyStore=new MP(this.options.keys),this.setCollection(e,i)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof sp))throw new Error(kP);this._myIndex=n||xw(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Ut(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let i=0,r=this._docs.length;i<r;i+=1){const u=this._docs[i];e(u,i)&&(this.removeAt(i),i-=1,r-=1,n.push(u))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:i,includeScore:r,shouldSort:u,sortFn:m,ignoreFieldNorm:l}=this.options;let s=Pn(e)?Pn(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return iO(s,{ignoreFieldNorm:l}),u&&s.sort(m),mw(n)&&n>-1&&(s=s.slice(0,n)),aO(s,this._docs,{includeMatches:i,includeScore:r})}_searchStringList(e){const n=vh(e,this.options),{records:i}=this._myIndex,r=[];return i.forEach(({v:u,i:m,n:l})=>{if(!Ut(u))return;const{isMatch:s,score:h,indices:f}=n.searchIn(u);s&&r.push({item:u,idx:m,matches:[{score:h,value:u,norm:l,indices:f}]})}),r}_searchLogical(e){const n=Cw(e,this.options),i=(l,s,h)=>{if(!l.children){const{keyId:a,searcher:o}=l,c=this._findMatches({key:this._keyStore.get(a),value:this._myIndex.getValueForItemAtKeyId(s,a),searcher:o});return c&&c.length?[{idx:h,item:s,matches:c}]:[]}const f=[];for(let a=0,o=l.children.length;a<o;a+=1){const c=l.children[a],d=i(c,s,h);if(d.length)f.push(...d);else if(l.operator===jl.AND)return[]}return f},r=this._myIndex.records,u={},m=[];return r.forEach(({$:l,i:s})=>{if(Ut(l)){let h=i(n,l,s);h.length&&(u[s]||(u[s]={idx:s,item:l,matches:[]},m.push(u[s])),h.forEach(({matches:f})=>{u[s].matches.push(...f)}))}}),m}_searchObjectList(e){const n=vh(e,this.options),{keys:i,records:r}=this._myIndex,u=[];return r.forEach(({$:m,i:l})=>{if(!Ut(m))return;let s=[];i.forEach((h,f)=>{s.push(...this._findMatches({key:h,value:m[f],searcher:n}))}),s.length&&u.push({idx:l,item:m,matches:s})}),u}_findMatches({key:e,value:n,searcher:i}){if(!Ut(n))return[];let r=[];if(Jn(n))n.forEach(({v:u,i:m,n:l})=>{if(!Ut(u))return;const{isMatch:s,score:h,indices:f}=i.searchIn(u);s&&r.push({score:h,key:e,value:u,idx:m,norm:l,indices:f})});else{const{v:u,n:m}=n,{isMatch:l,score:s,indices:h}=i.searchIn(u);l&&r.push({score:s,key:e,value:u,norm:m,indices:h})}return r}}bs.version="7.0.0";bs.createIndex=xw;bs.parseIndex=BP;bs.config=be;bs.parseQuery=Cw;eO(ZP);const yn=Nk((t,e)=>({images:[],selectedImage:null,tags:[{value:"nature",label:"Nature",category:"Nature"},{value:"people",label:"People",category:"People"},{value:"objects",label:"Objects",category:"Objects"}],filterPresets:[{id:"vintage",name:"Vintage",filters:{brightness:90,contrast:110,saturation:80,sepia:50,vignette:30,vintage:100,dramatic:0,vibrant:0,blur:0,sharpen:0,noise:20,preset:"vintage"}},{id:"dramatic",name:"Dramatic",filters:{brightness:90,contrast:150,saturation:120,sepia:0,vignette:50,vintage:0,dramatic:100,vibrant:0,blur:0,sharpen:30,noise:10,preset:"dramatic"}}],batchOperations:[],searchQuery:"",sortBy:"name",sortDirection:"asc",addImage:async n=>{const i=await wP(n.file);t(r=>({images:[...r.images,{...n,metadata:i,editHistory:[],filters:{brightness:100,contrast:100,saturation:100,sepia:0,blur:0,sharpen:0,noise:0,vignette:0,vintage:0,dramatic:0,vibrant:0,preset:""}}]}))},removeImage:n=>t(i=>({images:i.images.filter(r=>r.id!==n),selectedImage:i.selectedImage===n?null:i.selectedImage})),updateImage:(n,i)=>t(r=>({images:r.images.map(u=>u.id===n?{...u,...i}:u)})),setSelectedImage:n=>t({selectedImage:n}),addTag:n=>t(i=>({tags:[...i.tags,n]})),updateTag:(n,i)=>t(r=>({tags:r.tags.map(u=>u.value===n?{...u,...i}:u)})),removeTag:n=>t(i=>({tags:i.tags.filter(r=>r.value!==n)})),addEditAction:(n,i)=>t(r=>({images:r.images.map(u=>u.id===n?{...u,editHistory:[...u.editHistory||[],i]}:u)})),addBatchOperation:async n=>{const{images:i,updateImage:r,addEditAction:u}=e(),m=i.filter(l=>n.imageIds.includes(l.id));for(const l of m){const s=await Au(l,n.settings),h={id:Date.now().toString(),type:n.type,timestamp:Date.now(),description:`Batch ${n.type} operation`,params:n.settings};r(l.id,s),u(l.id,h)}t(l=>({batchOperations:[...l.batchOperations,n]}))},addFilterPreset:n=>t(i=>({filterPresets:[...i.filterPresets,n]})),applyFilterPreset:async(n,i)=>{const{images:r,filterPresets:u,updateImage:m,addEditAction:l}=e(),s=r.find(f=>f.id===n),h=u.find(f=>f.id===i);if(s&&h){const f=await Au(s,{filters:h.filters}),a={id:Date.now().toString(),type:"preset",timestamp:Date.now(),description:`Applied ${h.name} preset`,params:h.filters};m(n,f),l(n,a)}},exportImage:async(n,i)=>{const{images:r}=e(),u=r.find(m=>m.id===n);u&&await Au(u,{export:i})},setSearchQuery:n=>t({searchQuery:n}),setSortBy:n=>t({sortBy:n}),setSortDirection:n=>t({sortDirection}),getFilteredAndSortedImages:()=>{const{images:n,searchQuery:i,sortBy:r,sortDirection:u,tags:m}=e();let l=n;return i&&(l=new bs(n,{keys:["file.name","tags"],threshold:.3}).search(i).map(h=>h.item)),[...l].sort((s,h)=>{let f=0;switch(r){case"name":f=s.file.name.localeCompare(h.file.name);break;case"date":f=s.file.lastModified-h.file.lastModified;break;case"size":f=s.file.size-h.file.size;break}return u==="asc"?f:-f})}})),oO=()=>Math.random().toString(36).substring(2)+Date.now().toString(36);function lO(){const t=yn(u=>u.addImage),e=B.useCallback(async u=>{const m=async l=>{try{const s=URL.createObjectURL(l),h={id:oO(),file:l,preview:s,tags:[],editHistory:[],filters:{brightness:100,contrast:100,saturation:100,vintage:0,dramatic:0,vibrant:0}};t(h),Ee.success(`Successfully uploaded ${l.name}`)}catch{Ee.error(`Failed to upload ${l.name}`)}};for(const l of u)await m(l)},[t]),{getRootProps:n,getInputProps:i,isDragActive:r}=Ox({onDrop:e,accept:{"image/*":[".png",".jpg",".jpeg",".gif",".webp"]}});return N.jsxs("div",{...n(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors
        ${r?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-400"}`,children:[N.jsx("input",{...i()}),N.jsx(fk,{className:"mx-auto h-12 w-12 text-gray-400"}),N.jsx("p",{className:"mt-2 text-sm text-gray-600",children:r?"Drop the images here...":"Drag & drop images here, or click to select files"}),N.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Supports PNG, JPG, JPEG, GIF, and WebP"})]})}function cO(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}function kc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const wh=t=>Array.isArray(t);function _w(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Da(t){return typeof t=="string"||Array.isArray(t)}function Zg(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ap(t,e,n,i){if(typeof e=="function"){const[r,u]=Zg(i);e=e(n!==void 0?n:t.custom,r,u)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,u]=Zg(i);e=e(n!==void 0?n:t.custom,r,u)}return e}function Pc(t,e,n){const i=t.getProps();return ap(i,e,n!==void 0?n:i.custom,t)}const op=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lp=["initial",...op],Ga=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tr=new Set(Ga),Hn=t=>t*1e3,Wn=t=>t/1e3,uO={type:"spring",stiffness:500,damping:25,restSpeed:10},fO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),hO={type:"keyframes",duration:.8},dO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pO=(t,{keyframes:e})=>e.length>2?hO:Tr.has(t)?t.startsWith("scale")?fO(e[1]):uO:dO;function cp(t,e){return t?t[e]||t.default||t:void 0}const mO={skipAnimations:!1,useManualTiming:!1},gO=t=>t!==null;function Oc(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(gO),u=e&&n!=="loop"&&e%2===1?0:r.length-1;return!u||i===void 0?r[u]:i}const _t=t=>t;function vO(t){let e=new Set,n=new Set,i=!1,r=!1;const u=new WeakSet;let m={delta:0,timestamp:0,isProcessing:!1};function l(h){u.has(h)&&(s.schedule(h),t()),h(m)}const s={schedule:(h,f=!1,a=!1)=>{const c=a&&i?e:n;return f&&u.add(h),c.has(h)||c.add(h),h},cancel:h=>{n.delete(h),u.delete(h)},process:h=>{if(m=h,i){r=!0;return}i=!0,[e,n]=[n,e],n.clear(),e.forEach(l),i=!1,r&&(r=!1,s.process(h))}};return s}const So=["read","resolveKeyframes","update","preRender","render","postRender"],yO=40;function Tw(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},u=()=>n=!0,m=So.reduce((g,y)=>(g[y]=vO(u),g),{}),{read:l,resolveKeyframes:s,update:h,preRender:f,render:a,postRender:o}=m,c=()=>{const g=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,yO),1),r.timestamp=g,r.isProcessing=!0,l.process(r),s.process(r),h.process(r),f.process(r),a.process(r),o.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(c))},d=()=>{n=!0,i=!0,r.isProcessing||t(c)};return{schedule:So.reduce((g,y)=>{const x=m[y];return g[y]=(w,b=!1,S=!1)=>(n||d(),x.schedule(w,b,S)),g},{}),cancel:g=>{for(let y=0;y<So.length;y++)m[So[y]].cancel(g)},state:r,steps:m}}const{schedule:Ie,cancel:Ii,state:ht,steps:Nu}=Tw(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),kw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,xO=1e-7,wO=12;function bO(t,e,n,i,r){let u,m,l=0;do m=e+(n-e)/2,u=kw(m,i,r)-t,u>0?n=m:e=m;while(Math.abs(u)>xO&&++l<wO);return m}function Ya(t,e,n,i){if(t===e&&n===i)return _t;const r=u=>bO(u,0,1,t,n);return u=>u===0||u===1?u:kw(r(u),e,i)}const Pw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Ow=t=>e=>1-t(1-e),Ew=Ya(.33,1.53,.69,.99),up=Ow(Ew),Aw=Pw(up),Mw=t=>(t*=2)<1?.5*up(t):.5*(2-Math.pow(2,-10*(t-1))),fp=t=>1-Math.sin(Math.acos(t)),Dw=Ow(fp),Iw=Pw(fp),Lw=t=>/^0[^.\s]+$/u.test(t);function SO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Lw(t):!0}let bh=_t;const Fw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Rw=t=>e=>typeof e=="string"&&e.startsWith(t),jw=Rw("--"),CO=Rw("var(--"),hp=t=>CO(t)?_O.test(t.split("/*")[0].trim()):!1,_O=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,TO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kO(t){const e=TO.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function Nw(t,e,n=1){const[i,r]=kO(t);if(!i)return;const u=window.getComputedStyle(e).getPropertyValue(i);if(u){const m=u.trim();return Fw(m)?parseFloat(m):m}return hp(r)?Nw(r,e,n+1):r}const Zn=(t,e,n)=>n>e?e:n<t?t:n,Ss={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ia={...Ss,transform:t=>Zn(0,1,t)},Co={...Ss,default:1},Xa=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),oi=Xa("deg"),An=Xa("%"),ge=Xa("px"),PO=Xa("vh"),OO=Xa("vw"),ev={...An,parse:t=>An.parse(t)/100,transform:t=>An.transform(t*100)},EO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),tv=t=>t===Ss||t===ge,nv=(t,e)=>parseFloat(t.split(", ")[e]),iv=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return nv(r[1],e);{const u=i.match(/^matrix\((.+)\)$/u);return u?nv(u[1],t):0}},AO=new Set(["x","y","z"]),MO=Ga.filter(t=>!AO.has(t));function DO(t){const e=[];return MO.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const hs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:iv(4,13),y:iv(5,14)};hs.translateX=hs.x;hs.translateY=hs.y;const Bw=t=>e=>e.test(t),IO={test:t=>t==="auto",parse:t=>t},Vw=[Ss,ge,An,oi,OO,PO,IO],rv=t=>Vw.find(Bw(t)),cr=new Set;let Sh=!1,Ch=!1;function zw(){if(Ch){const t=Array.from(cr).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=DO(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([u,m])=>{var l;(l=i.getValue(u))===null||l===void 0||l.set(m)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Ch=!1,Sh=!1,cr.forEach(t=>t.complete()),cr.clear()}function Uw(){cr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ch=!0)})}function LO(){Uw(),zw()}class dp{constructor(e,n,i,r,u,m=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=u,this.isAsync=m}scheduleResolve(){this.isScheduled=!0,this.isAsync?(cr.add(this),Sh||(Sh=!0,Ie.read(Uw),Ie.resolveKeyframes(zw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let u=0;u<e.length;u++)if(e[u]===null)if(u===0){const m=r==null?void 0:r.get(),l=e[e.length-1];if(m!==void 0)e[0]=m;else if(i&&n){const s=i.readValue(n,l);s!=null&&(e[0]=s)}e[0]===void 0&&(e[0]=l),r&&m===void 0&&r.set(e[0])}else e[u]=e[u-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),cr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,cr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const oa=t=>Math.round(t*1e5)/1e5,pp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FO(t){return t==null}const RO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,mp=(t,e)=>n=>!!(typeof n=="string"&&RO.test(n)&&n.startsWith(t)||e&&!FO(n)&&Object.prototype.hasOwnProperty.call(n,e)),Hw=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,u,m,l]=i.match(pp);return{[t]:parseFloat(r),[e]:parseFloat(u),[n]:parseFloat(m),alpha:l!==void 0?parseFloat(l):1}},jO=t=>Zn(0,255,t),Bu={...Ss,transform:t=>Math.round(jO(t))},sr={test:mp("rgb","red"),parse:Hw("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Bu.transform(t)+", "+Bu.transform(e)+", "+Bu.transform(n)+", "+oa(Ia.transform(i))+")"};function NO(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const _h={test:mp("#"),parse:NO,transform:sr.transform},Wr={test:mp("hsl","hue"),parse:Hw("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+An.transform(oa(e))+", "+An.transform(oa(n))+", "+oa(Ia.transform(i))+")"},bt={test:t=>sr.test(t)||_h.test(t)||Wr.test(t),parse:t=>sr.test(t)?sr.parse(t):Wr.test(t)?Wr.parse(t):_h.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?sr.transform(t):Wr.transform(t)},BO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function VO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(pp))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(BO))===null||n===void 0?void 0:n.length)||0)>0}const Ww="number",$w="color",zO="var",UO="var(",sv="${}",HO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function La(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let u=0;const l=e.replace(HO,s=>(bt.test(s)?(i.color.push(u),r.push($w),n.push(bt.parse(s))):s.startsWith(UO)?(i.var.push(u),r.push(zO),n.push(s)):(i.number.push(u),r.push(Ww),n.push(parseFloat(s))),++u,sv)).split(sv);return{values:n,split:l,indexes:i,types:r}}function Gw(t){return La(t).values}function Yw(t){const{split:e,types:n}=La(t),i=e.length;return r=>{let u="";for(let m=0;m<i;m++)if(u+=e[m],r[m]!==void 0){const l=n[m];l===Ww?u+=oa(r[m]):l===$w?u+=bt.transform(r[m]):u+=r[m]}return u}}const WO=t=>typeof t=="number"?0:t;function $O(t){const e=Gw(t);return Yw(t)(e.map(WO))}const Li={test:VO,parse:Gw,createTransformer:Yw,getAnimatableNone:$O},GO=new Set(["brightness","contrast","saturate","opacity"]);function YO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(pp)||[];if(!i)return t;const r=n.replace(i,"");let u=GO.has(e)?1:0;return i!==n&&(u*=100),e+"("+u+r+")"}const XO=/\b([a-z-]*)\(.*?\)/gu,Th={...Li,getAnimatableNone:t=>{const e=t.match(XO);return e?e.map(YO).join(" "):t}},KO={borderWidth:ge,borderTopWidth:ge,borderRightWidth:ge,borderBottomWidth:ge,borderLeftWidth:ge,borderRadius:ge,radius:ge,borderTopLeftRadius:ge,borderTopRightRadius:ge,borderBottomRightRadius:ge,borderBottomLeftRadius:ge,width:ge,maxWidth:ge,height:ge,maxHeight:ge,top:ge,right:ge,bottom:ge,left:ge,padding:ge,paddingTop:ge,paddingRight:ge,paddingBottom:ge,paddingLeft:ge,margin:ge,marginTop:ge,marginRight:ge,marginBottom:ge,marginLeft:ge,backgroundPositionX:ge,backgroundPositionY:ge},qO={rotate:oi,rotateX:oi,rotateY:oi,rotateZ:oi,scale:Co,scaleX:Co,scaleY:Co,scaleZ:Co,skew:oi,skewX:oi,skewY:oi,distance:ge,translateX:ge,translateY:ge,translateZ:ge,x:ge,y:ge,z:ge,perspective:ge,transformPerspective:ge,opacity:Ia,originX:ev,originY:ev,originZ:ge},av={...Ss,transform:Math.round},gp={...KO,...qO,zIndex:av,size:ge,fillOpacity:Ia,strokeOpacity:Ia,numOctaves:av},QO={...gp,color:bt,backgroundColor:bt,outlineColor:bt,fill:bt,stroke:bt,borderColor:bt,borderTopColor:bt,borderRightColor:bt,borderBottomColor:bt,borderLeftColor:bt,filter:Th,WebkitFilter:Th},vp=t=>QO[t];function Xw(t,e){let n=vp(t);return n!==Th&&(n=Li),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const JO=new Set(["auto","none","0"]);function ZO(t,e,n){let i=0,r;for(;i<t.length&&!r;){const u=t[i];typeof u=="string"&&!JO.has(u)&&La(u).values.length&&(r=t[i]),i++}if(r&&n)for(const u of e)t[u]=Xw(n,r)}class Kw extends dp{constructor(e,n,i,r,u){super(e,n,i,r,u,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let s=0;s<e.length;s++){let h=e[s];if(typeof h=="string"&&(h=h.trim(),hp(h))){const f=Nw(h,n.current);f!==void 0&&(e[s]=f),s===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!EO.has(i)||e.length!==2)return;const[r,u]=e,m=rv(r),l=rv(u);if(m!==l)if(tv(m)&&tv(l))for(let s=0;s<e.length;s++){const h=e[s];typeof h=="string"&&(e[s]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)SO(e[r])&&i.push(r);i.length&&ZO(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hs[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const u=n.getValue(i);u&&u.jump(this.measuredOrigin,!1);const m=r.length-1,l=r[m];r[m]=hs[i](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([s,h])=>{n.getValue(s).set(h)}),this.resolveNoneKeyframes()}}function yp(t){return typeof t=="function"}let Yo;function eE(){Yo=void 0}const Mn={now:()=>(Yo===void 0&&Mn.set(ht.isProcessing||mO.useManualTiming?ht.timestamp:performance.now()),Yo),set:t=>{Yo=t,queueMicrotask(eE)}},ov=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Li.test(t)||t==="0")&&!t.startsWith("url("));function tE(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function nE(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const u=t[t.length-1],m=ov(r,e),l=ov(u,e);return!m||!l?!1:tE(t)||(n==="spring"||yp(n))&&i}const iE=40;class qw{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:u=0,repeatType:m="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Mn.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:u,repeatType:m,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iE?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&LO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Mn.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:u,delay:m,onComplete:l,onUpdate:s,isGenerator:h}=this.options;if(!h&&!nE(e,i,r,u))if(m)this.options.duration=0;else{s==null||s(Oc(e,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ds=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},Qw=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let u=0;u<r;u++)i+=t(ds(0,r-1,u))+", ";return`linear(${i.substring(0,i.length-2)})`};function Jw(t,e){return e?t*(1e3/e):0}const rE=5;function Zw(t,e,n){const i=Math.max(e-rE,0);return Jw(n-t(i),e-i)}const Ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Vu=.001;function sE({duration:t=Ge.duration,bounce:e=Ge.bounce,velocity:n=Ge.velocity,mass:i=Ge.mass}){let r,u,m=1-e;m=Zn(Ge.minDamping,Ge.maxDamping,m),t=Zn(Ge.minDuration,Ge.maxDuration,Wn(t)),m<1?(r=h=>{const f=h*m,a=f*t,o=f-n,c=kh(h,m),d=Math.exp(-a);return Vu-o/c*d},u=h=>{const a=h*m*t,o=a*n+n,c=Math.pow(m,2)*Math.pow(h,2)*t,d=Math.exp(-a),v=kh(Math.pow(h,2),m);return(-r(h)+Vu>0?-1:1)*((o-c)*d)/v}):(r=h=>{const f=Math.exp(-h*t),a=(h-n)*t+1;return-Vu+f*a},u=h=>{const f=Math.exp(-h*t),a=(n-h)*(t*t);return f*a});const l=5/t,s=oE(r,u,l);if(t=Hn(t),isNaN(s))return{stiffness:Ge.stiffness,damping:Ge.damping,duration:t};{const h=Math.pow(s,2)*i;return{stiffness:h,damping:m*2*Math.sqrt(i*h),duration:t}}}const aE=12;function oE(t,e,n){let i=n;for(let r=1;r<aE;r++)i=i-t(i)/e(i);return i}function kh(t,e){return t*Math.sqrt(1-e*e)}const Ph=2e4;function eb(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Ph;)e+=n,i=t.next(e);return e>=Ph?1/0:e}const lE=["duration","bounce"],cE=["stiffness","damping","mass"];function lv(t,e){return e.some(n=>t[n]!==void 0)}function uE(t){let e={velocity:Ge.velocity,stiffness:Ge.stiffness,damping:Ge.damping,mass:Ge.mass,isResolvedFromDuration:!1,...t};if(!lv(t,cE)&&lv(t,lE))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,u=2*Zn(.05,1,1-t.bounce)*Math.sqrt(r);e={...e,mass:Ge.mass,stiffness:r,damping:u}}else{const n=sE(t);e={...e,...n,mass:Ge.mass},e.isResolvedFromDuration=!0}return e}function tb(t=Ge.visualDuration,e=Ge.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const u=n.keyframes[0],m=n.keyframes[n.keyframes.length-1],l={done:!1,value:u},{stiffness:s,damping:h,mass:f,duration:a,velocity:o,isResolvedFromDuration:c}=uE({...n,velocity:-Wn(n.velocity||0)}),d=o||0,v=h/(2*Math.sqrt(s*f)),p=m-u,g=Wn(Math.sqrt(s/f)),y=Math.abs(p)<5;i||(i=y?Ge.restSpeed.granular:Ge.restSpeed.default),r||(r=y?Ge.restDelta.granular:Ge.restDelta.default);let x;if(v<1){const b=kh(g,v);x=S=>{const _=Math.exp(-v*g*S);return m-_*((d+v*g*p)/b*Math.sin(b*S)+p*Math.cos(b*S))}}else if(v===1)x=b=>m-Math.exp(-g*b)*(p+(d+g*p)*b);else{const b=g*Math.sqrt(v*v-1);x=S=>{const _=Math.exp(-v*g*S),C=Math.min(b*S,300);return m-_*((d+v*g*p)*Math.sinh(C)+b*p*Math.cosh(C))/b}}const w={calculatedDuration:c&&a||null,next:b=>{const S=x(b);if(c)l.done=b>=a;else{let _=0;v<1&&(_=b===0?Hn(d):Zw(x,b,S));const C=Math.abs(_)<=i,T=Math.abs(m-S)<=r;l.done=C&&T}return l.value=l.done?m:S,l},toString:()=>{const b=Math.min(eb(w),Ph),S=Qw(_=>w.next(b*_).value,b,30);return b+"ms "+S}};return w}function cv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:u=500,modifyTarget:m,min:l,max:s,restDelta:h=.5,restSpeed:f}){const a=t[0],o={done:!1,value:a},c=C=>l!==void 0&&C<l||s!==void 0&&C>s,d=C=>l===void 0?s:s===void 0||Math.abs(l-C)<Math.abs(s-C)?l:s;let v=n*e;const p=a+v,g=m===void 0?p:m(p);g!==p&&(v=g-a);const y=C=>-v*Math.exp(-C/i),x=C=>g+y(C),w=C=>{const T=y(C),O=x(C);o.done=Math.abs(T)<=h,o.value=o.done?g:O};let b,S;const _=C=>{c(o.value)&&(b=C,S=tb({keyframes:[o.value,d(o.value)],velocity:Zw(x,C,o.value),damping:r,stiffness:u,restDelta:h,restSpeed:f}))};return _(0),{calculatedDuration:null,next:C=>{let T=!1;return!S&&b===void 0&&(T=!0,w(C),_(C)),b!==void 0&&C>=b?S.next(C-b):(!T&&w(C),o)}}}const fE=Ya(.42,0,1,1),hE=Ya(0,0,.58,1),nb=Ya(.42,0,.58,1),dE=t=>Array.isArray(t)&&typeof t[0]!="number",xp=t=>Array.isArray(t)&&typeof t[0]=="number",uv={linear:_t,easeIn:fE,easeInOut:nb,easeOut:hE,circIn:fp,circInOut:Iw,circOut:Dw,backIn:up,backInOut:Aw,backOut:Ew,anticipate:Mw},fv=t=>{if(xp(t)){bh(t.length===4);const[e,n,i,r]=t;return Ya(e,n,i,r)}else if(typeof t=="string")return bh(uv[t]!==void 0),uv[t];return t},pE=(t,e)=>n=>e(t(n)),$n=(...t)=>t.reduce(pE),Ue=(t,e,n)=>t+(e-t)*n;function zu(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mE({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,u=0,m=0;if(!e)r=u=m=n;else{const l=n<.5?n*(1+e):n+e-n*e,s=2*n-l;r=zu(s,l,t+1/3),u=zu(s,l,t),m=zu(s,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(u*255),blue:Math.round(m*255),alpha:i}}function Nl(t,e){return n=>n>0?e:t}const Uu=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},gE=[_h,sr,Wr],vE=t=>gE.find(e=>e.test(t));function hv(t){const e=vE(t);if(!e)return!1;let n=e.parse(t);return e===Wr&&(n=mE(n)),n}const dv=(t,e)=>{const n=hv(t),i=hv(e);if(!n||!i)return Nl(t,e);const r={...n};return u=>(r.red=Uu(n.red,i.red,u),r.green=Uu(n.green,i.green,u),r.blue=Uu(n.blue,i.blue,u),r.alpha=Ue(n.alpha,i.alpha,u),sr.transform(r))},Oh=new Set(["none","hidden"]);function yE(t,e){return Oh.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function xE(t,e){return n=>Ue(t,e,n)}function wp(t){return typeof t=="number"?xE:typeof t=="string"?hp(t)?Nl:bt.test(t)?dv:SE:Array.isArray(t)?ib:typeof t=="object"?bt.test(t)?dv:wE:Nl}function ib(t,e){const n=[...t],i=n.length,r=t.map((u,m)=>wp(u)(u,e[m]));return u=>{for(let m=0;m<i;m++)n[m]=r[m](u);return n}}function wE(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=wp(t[r])(t[r],e[r]));return r=>{for(const u in i)n[u]=i[u](r);return n}}function bE(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let u=0;u<e.values.length;u++){const m=e.types[u],l=t.indexes[m][r[m]],s=(n=t.values[l])!==null&&n!==void 0?n:0;i[u]=s,r[m]++}return i}const SE=(t,e)=>{const n=Li.createTransformer(e),i=La(t),r=La(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Oh.has(t)&&!r.values.length||Oh.has(e)&&!i.values.length?yE(t,e):$n(ib(bE(i,r),r.values),n):Nl(t,e)};function rb(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ue(t,e,n):wp(t)(t,e)}function CE(t,e,n){const i=[],r=n||rb,u=t.length-1;for(let m=0;m<u;m++){let l=r(t[m],t[m+1]);if(e){const s=Array.isArray(e)?e[m]||_t:e;l=$n(s,l)}i.push(l)}return i}function _E(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const u=t.length;if(bh(u===e.length),u===1)return()=>e[0];if(u===2&&t[0]===t[1])return()=>e[1];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const m=CE(e,i,r),l=m.length,s=h=>{let f=0;if(l>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const a=ds(t[f],t[f+1],h);return m[f](a)};return n?h=>s(Zn(t[0],t[u-1],h)):s}function TE(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=ds(0,e,i);t.push(Ue(n,1,r))}}function kE(t){const e=[0];return TE(e,t.length-1),e}function PE(t,e){return t.map(n=>n*e)}function OE(t,e){return t.map(()=>e||nb).splice(0,t.length-1)}function Bl({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=dE(i)?i.map(fv):fv(i),u={done:!1,value:e[0]},m=PE(n&&n.length===e.length?n:kE(e),t),l=_E(m,e,{ease:Array.isArray(r)?r:OE(e,r)});return{calculatedDuration:t,next:s=>(u.value=l(s),u.done=s>=t,u)}}const EE=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ie.update(e,!0),stop:()=>Ii(e),now:()=>ht.isProcessing?ht.timestamp:Mn.now()}},AE={decay:cv,inertia:cv,tween:Bl,keyframes:Bl,spring:tb},ME=t=>t/100;class bp extends qw{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:s}=this.options;s&&s()};const{name:n,motionValue:i,element:r,keyframes:u}=this.options,m=(r==null?void 0:r.KeyframeResolver)||dp,l=(s,h)=>this.onKeyframesResolved(s,h);this.resolver=new m(u,l,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:u,velocity:m=0}=this.options,l=yp(n)?n:AE[n]||Bl;let s,h;l!==Bl&&typeof e[0]!="number"&&(s=$n(ME,rb(e[0],e[1])),e=[0,100]);const f=l({...this.options,keyframes:e});u==="mirror"&&(h=l({...this.options,keyframes:[...e].reverse(),velocity:-m})),f.calculatedDuration===null&&(f.calculatedDuration=eb(f));const{calculatedDuration:a}=f,o=a+r,c=o*(i+1)-r;return{generator:f,mirroredGenerator:h,mapPercentToKeyframes:s,calculatedDuration:a,resolvedDuration:o,totalDuration:c}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:r,generator:u,mirroredGenerator:m,mapPercentToKeyframes:l,keyframes:s,calculatedDuration:h,totalDuration:f,resolvedDuration:a}=i;if(this.startTime===null)return u.next(0);const{delay:o,repeat:c,repeatType:d,repeatDelay:v,onUpdate:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-o*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>f;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let x=this.currentTime,w=u;if(c){const C=Math.min(this.currentTime,f)/a;let T=Math.floor(C),O=C%1;!O&&C>=1&&(O=1),O===1&&T--,T=Math.min(T,c+1),!!(T%2)&&(d==="reverse"?(O=1-O,v&&(O-=v/a)):d==="mirror"&&(w=m)),x=Zn(0,1,O)*a}const b=y?{done:!1,value:s[0]}:w.next(x);l&&(b.value=l(b.value));let{done:S}=b;!y&&h!==null&&(S=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return _&&r!==void 0&&(b.value=Oc(s,this.options,r)),p&&p(b.value),_&&this.finish(),b}get duration(){const{resolved:e}=this;return e?Wn(e.calculatedDuration):0}get time(){return Wn(this.currentTime)}set time(e){e=Hn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Wn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=EE,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(u=>this.tick(u))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const DE=new Set(["opacity","clipPath","filter","transform"]);function Sp(t){let e;return()=>(e===void 0&&(e=t()),e)}const IE={linearEasing:void 0};function LE(t,e){const n=Sp(t);return()=>{var i;return(i=IE[e])!==null&&i!==void 0?i:n()}}const Vl=LE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function sb(t){return!!(typeof t=="function"&&Vl()||!t||typeof t=="string"&&(t in Eh||Vl())||xp(t)||Array.isArray(t)&&t.every(sb))}const Ys=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Eh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ys([0,.65,.55,1]),circOut:Ys([.55,0,1,.45]),backIn:Ys([.31,.01,.66,-.59]),backOut:Ys([.33,1.53,.69,.99])};function ab(t,e){if(t)return typeof t=="function"&&Vl()?Qw(t,e):xp(t)?Ys(t):Array.isArray(t)?t.map(n=>ab(n,e)||Eh.easeOut):Eh[t]}function FE(t,e,n,{delay:i=0,duration:r=300,repeat:u=0,repeatType:m="loop",ease:l="easeInOut",times:s}={}){const h={[e]:n};s&&(h.offset=s);const f=ab(l,r);return Array.isArray(f)&&(h.easing=f),t.animate(h,{delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:u+1,direction:m==="reverse"?"alternate":"normal"})}function pv(t,e){t.timeline=e,t.onfinish=null}const RE=Sp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zl=10,jE=2e4;function NE(t){return yp(t.type)||t.type==="spring"||!sb(t.ease)}function BE(t,e){const n=new bp({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let u=0;for(;!i.done&&u<jE;)i=n.sample(u),r.push(i.value),u+=zl;return{times:void 0,keyframes:r,duration:u-zl,ease:"linear"}}const ob={anticipate:Mw,backInOut:Aw,circInOut:Iw};function VE(t){return t in ob}class mv extends qw{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:u}=this.options;this.resolver=new Kw(u,(m,l)=>this.onKeyframesResolved(m,l),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){var i;let{duration:r=300,times:u,ease:m,type:l,motionValue:s,name:h,startTime:f}=this.options;if(!(!((i=s.owner)===null||i===void 0)&&i.current))return!1;if(typeof m=="string"&&Vl()&&VE(m)&&(m=ob[m]),NE(this.options)){const{onComplete:o,onUpdate:c,motionValue:d,element:v,...p}=this.options,g=BE(e,p);e=g.keyframes,e.length===1&&(e[1]=e[0]),r=g.duration,u=g.times,m=g.ease,l="keyframes"}const a=FE(s.owner.current,h,e,{...this.options,duration:r,times:u,ease:m});return a.startTime=f??this.calcStartTime(),this.pendingTimeline?(pv(a,this.pendingTimeline),this.pendingTimeline=void 0):a.onfinish=()=>{const{onComplete:o}=this.options;s.set(Oc(e,this.options,n)),o&&o(),this.cancel(),this.resolveFinishedPromise()},{animation:a,duration:r,times:u,type:l,ease:m,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Wn(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Wn(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=Hn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return _t;const{animation:i}=n;pv(i,e)}return _t}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:u,ease:m,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:f,onComplete:a,element:o,...c}=this.options,d=new bp({...c,keyframes:i,duration:r,type:u,ease:m,times:l,isGenerator:!0}),v=Hn(this.time);h.setWithVelocity(d.sample(v-zl).value,d.sample(v).value,zl)}const{onStop:s}=this.options;s&&s(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:u,damping:m,type:l}=e;return RE()&&i&&DE.has(i)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!r&&u!=="mirror"&&m!==0&&l!=="inertia"}}const zE=Sp(()=>window.ScrollTimeline!==void 0);class UE{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>zE()&&r.attachTimeline?r.attachTimeline(e):n(r));return()=>{i.forEach((r,u)=>{r&&r(),this.animations[u].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function HE({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:u,repeatType:m,repeatDelay:l,from:s,elapsed:h,...f}){return!!Object.keys(f).length}const Cp=(t,e,n,i={},r,u)=>m=>{const l=cp(i,t)||{},s=l.delay||i.delay||0;let{elapsed:h=0}=i;h=h-Hn(s);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:o=>{e.set(o),l.onUpdate&&l.onUpdate(o)},onComplete:()=>{m(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:u?void 0:r};HE(l)||(f={...f,...pO(t,f)}),f.duration&&(f.duration=Hn(f.duration)),f.repeatDelay&&(f.repeatDelay=Hn(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let a=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(a=!0)),a&&!u&&e.get()!==void 0){const o=Oc(f.keyframes,l);if(o!==void 0)return Ie.update(()=>{f.onUpdate(o),f.onComplete()}),new UE([])}return!u&&mv.supports(f)?new mv(f):new bp(f)},WE=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),$E=t=>wh(t)?t[t.length-1]||0:t;function _p(t,e){t.indexOf(e)===-1&&t.push(e)}function Tp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class kp{constructor(){this.subscriptions=[]}add(e){return _p(this.subscriptions,e),()=>Tp(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let u=0;u<r;u++){const m=this.subscriptions[u];m&&m(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gv=30,GE=t=>!isNaN(parseFloat(t));class YE{constructor(e,n={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const u=Mn.now();this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=GE(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new kp);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,gv);return Jw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fa(t,e){return new YE(t,e)}function XE(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Fa(n))}function KE(t,e){const n=Pc(t,e);let{transitionEnd:i={},transition:r={},...u}=n||{};u={...u,...i};for(const m in u){const l=$E(u[m]);XE(t,m,l)}}const Pp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),qE="framerAppearId",lb="data-"+Pp(qE);function cb(t){return t.props[lb]}const Ct=t=>!!(t&&t.getVelocity);function QE(t){return!!(Ct(t)&&t.add)}function Ah(t,e){const n=t.getValue("willChange");if(QE(n))return n.add(e)}function JE({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function ub(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var u;let{transition:m=t.getDefaultTransition(),transitionEnd:l,...s}=e;i&&(m=i);const h=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const a in s){const o=t.getValue(a,(u=t.latestValues[a])!==null&&u!==void 0?u:null),c=s[a];if(c===void 0||f&&JE(f,a))continue;const d={delay:n,...cp(m||{},a)};let v=!1;if(window.MotionHandoffAnimation){const g=cb(t);if(g){const y=window.MotionHandoffAnimation(g,a,Ie);y!==null&&(d.startTime=y,v=!0)}}Ah(t,a),o.start(Cp(a,o,c,t.shouldReduceMotion&&Tr.has(a)?{type:!1}:d,t,v));const p=o.animation;p&&h.push(p)}return l&&Promise.all(h).then(()=>{Ie.update(()=>{l&&KE(t,l)})}),h}function Mh(t,e,n={}){var i;const r=Pc(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:u=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(u=n.transitionOverride);const m=r?()=>Promise.all(ub(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:a,staggerDirection:o}=u;return ZE(t,e,f+h,a,o,n)}:()=>Promise.resolve(),{when:s}=u;if(s){const[h,f]=s==="beforeChildren"?[m,l]:[l,m];return h().then(()=>f())}else return Promise.all([m(),l(n.delay)])}function ZE(t,e,n=0,i=0,r=1,u){const m=[],l=(t.variantChildren.size-1)*i,s=r===1?(h=0)=>h*i:(h=0)=>l-h*i;return Array.from(t.variantChildren).sort(eA).forEach((h,f)=>{h.notify("AnimationStart",e),m.push(Mh(h,e,{...u,delay:n+s(f)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(m)}function eA(t,e){return t.sortNodePosition(e)}function tA(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(u=>Mh(t,u,n));i=Promise.all(r)}else if(typeof e=="string")i=Mh(t,e,n);else{const r=typeof e=="function"?Pc(t,e,n.custom):e;i=Promise.all(ub(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const nA=lp.length;function fb(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fb(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<nA;n++){const i=lp[n],r=t.props[i];(Da(r)||r===!1)&&(e[i]=r)}return e}const iA=[...op].reverse(),rA=op.length;function sA(t){return e=>Promise.all(e.map(({animation:n,options:i})=>tA(t,n,i)))}function aA(t){let e=sA(t),n=vv(),i=!0;const r=s=>(h,f)=>{var a;const o=Pc(t,f,s==="exit"?(a=t.presenceContext)===null||a===void 0?void 0:a.custom:void 0);if(o){const{transition:c,transitionEnd:d,...v}=o;h={...h,...v,...d}}return h};function u(s){e=s(t)}function m(s){const{props:h}=t,f=fb(t.parent)||{},a=[],o=new Set;let c={},d=1/0;for(let p=0;p<rA;p++){const g=iA[p],y=n[g],x=h[g]!==void 0?h[g]:f[g],w=Da(x),b=g===s?y.isActive:null;b===!1&&(d=p);let S=x===f[g]&&x!==h[g]&&w;if(S&&i&&t.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...c},!y.isActive&&b===null||!x&&!y.prevProp||kc(x)||typeof x=="boolean")continue;const _=oA(y.prevProp,x);let C=_||g===s&&y.isActive&&!S&&w||p>d&&w,T=!1;const O=Array.isArray(x)?x:[x];let L=O.reduce(r(g),{});b===!1&&(L={});const{prevResolvedValues:j={}}=y,H={...j,...L},F=A=>{C=!0,o.has(A)&&(T=!0,o.delete(A)),y.needsAnimating[A]=!0;const U=t.getValue(A);U&&(U.liveStyle=!1)};for(const A in H){const U=L[A],k=j[A];if(c.hasOwnProperty(A))continue;let E=!1;wh(U)&&wh(k)?E=!_w(U,k):E=U!==k,E?U!=null?F(A):o.add(A):U!==void 0&&o.has(A)?F(A):y.protectedKeys[A]=!0}y.prevProp=x,y.prevResolvedValues=L,y.isActive&&(c={...c,...L}),i&&t.blockInitialAnimation&&(C=!1),C&&(!(S&&_)||T)&&a.push(...O.map(A=>({animation:A,options:{type:g}})))}if(o.size){const p={};o.forEach(g=>{const y=t.getBaseTarget(g),x=t.getValue(g);x&&(x.liveStyle=!0),p[g]=y??null}),a.push({animation:p})}let v=!!a.length;return i&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(v=!1),i=!1,v?e(a):Promise.resolve()}function l(s,h){var f;if(n[s].isActive===h)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(o=>{var c;return(c=o.animationState)===null||c===void 0?void 0:c.setActive(s,h)}),n[s].isActive=h;const a=m(s);for(const o in n)n[o].protectedKeys={};return a}return{animateChanges:m,setActive:l,setAnimateFunction:u,getState:()=>n,reset:()=>{n=vv(),i=!0}}}function oA(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_w(e,t):!1}function Wi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vv(){return{animate:Wi(!0),whileInView:Wi(),whileHover:Wi(),whileTap:Wi(),whileDrag:Wi(),whileFocus:Wi(),exit:Wi()}}class Vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class lA extends Vi{constructor(e){super(e),e.animationState||(e.animationState=aA(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();kc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let cA=0;class uA extends Vi{constructor(){super(...arguments),this.id=cA++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const fA={animation:{Feature:lA},exit:{Feature:uA}},hb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Ec(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const hA=t=>e=>hb(e)&&t(e,Ec(e));function zn(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Gn(t,e,n,i){return zn(t,e,hA(n),i)}const yv=(t,e)=>Math.abs(t-e);function dA(t,e){const n=yv(t.x,e.x),i=yv(t.y,e.y);return Math.sqrt(n**2+i**2)}class db{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:u=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const a=Wu(this.lastMoveEventInfo,this.history),o=this.startEvent!==null,c=dA(a.offset,{x:0,y:0})>=3;if(!o&&!c)return;const{point:d}=a,{timestamp:v}=ht;this.history.push({...d,timestamp:v});const{onStart:p,onMove:g}=this.handlers;o||(p&&p(this.lastMoveEvent,a),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,a)},this.handlePointerMove=(a,o)=>{this.lastMoveEvent=a,this.lastMoveEventInfo=Hu(o,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(a,o)=>{this.end();const{onEnd:c,onSessionEnd:d,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Wu(a.type==="pointercancel"?this.lastMoveEventInfo:Hu(o,this.transformPagePoint),this.history);this.startEvent&&c&&c(a,p),d&&d(a,p)},!hb(e))return;this.dragSnapToOrigin=u,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const m=Ec(e),l=Hu(m,this.transformPagePoint),{point:s}=l,{timestamp:h}=ht;this.history=[{...s,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,Wu(l,this.history)),this.removeListeners=$n(Gn(this.contextWindow,"pointermove",this.handlePointerMove),Gn(this.contextWindow,"pointerup",this.handlePointerUp),Gn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ii(this.updatePoint)}}function Hu(t,e){return e?{point:e(t.point)}:t}function xv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wu({point:t},e){return{point:t,delta:xv(t,pb(e)),offset:xv(t,pA(e)),velocity:mA(e,.1)}}function pA(t){return t[0]}function pb(t){return t[t.length-1]}function mA(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=pb(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Hn(e)));)n--;if(!i)return{x:0,y:0};const u=Wn(r.timestamp-i.timestamp);if(u===0)return{x:0,y:0};const m={x:(r.x-i.x)/u,y:(r.y-i.y)/u};return m.x===1/0&&(m.x=0),m.y===1/0&&(m.y=0),m}function mb(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const wv=mb("dragHorizontal"),bv=mb("dragVertical");function gb(t){let e=!1;if(t==="y")e=bv();else if(t==="x")e=wv();else{const n=wv(),i=bv();n&&i?e=()=>{n(),i()}:(n&&n(),i&&i())}return e}function vb(){const t=gb(!0);return t?(t(),!1):!0}function $r(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const yb=1e-4,gA=1-yb,vA=1+yb,xb=.01,yA=0-xb,xA=0+xb;function Xt(t){return t.max-t.min}function wA(t,e,n){return Math.abs(t-e)<=n}function Sv(t,e,n,i=.5){t.origin=i,t.originPoint=Ue(e.min,e.max,t.origin),t.scale=Xt(n)/Xt(e),t.translate=Ue(n.min,n.max,t.origin)-t.originPoint,(t.scale>=gA&&t.scale<=vA||isNaN(t.scale))&&(t.scale=1),(t.translate>=yA&&t.translate<=xA||isNaN(t.translate))&&(t.translate=0)}function la(t,e,n,i){Sv(t.x,e.x,n.x,i?i.originX:void 0),Sv(t.y,e.y,n.y,i?i.originY:void 0)}function Cv(t,e,n){t.min=n.min+e.min,t.max=t.min+Xt(e)}function bA(t,e,n){Cv(t.x,e.x,n.x),Cv(t.y,e.y,n.y)}function _v(t,e,n){t.min=e.min-n.min,t.max=t.min+Xt(e)}function ca(t,e,n){_v(t.x,e.x,n.x),_v(t.y,e.y,n.y)}function SA(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Ue(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Ue(n,t,i.max):Math.min(t,n)),t}function Tv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CA(t,{top:e,left:n,bottom:i,right:r}){return{x:Tv(t.x,n,r),y:Tv(t.y,e,i)}}function kv(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function _A(t,e){return{x:kv(t.x,e.x),y:kv(t.y,e.y)}}function TA(t,e){let n=.5;const i=Xt(t),r=Xt(e);return r>i?n=ds(e.min,e.max-i,t.min):i>r&&(n=ds(t.min,t.max-r,e.min)),Zn(0,1,n)}function kA(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Dh=.35;function PA(t=Dh){return t===!1?t=0:t===!0&&(t=Dh),{x:Pv(t,"left","right"),y:Pv(t,"top","bottom")}}function Pv(t,e,n){return{min:Ov(t,e),max:Ov(t,n)}}function Ov(t,e){return typeof t=="number"?t:t[e]||0}const Ev=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gr=()=>({x:Ev(),y:Ev()}),Av=()=>({min:0,max:0}),qe=()=>({x:Av(),y:Av()});function Zt(t){return[t("x"),t("y")]}function wb({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function OA({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function EA(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function $u(t){return t===void 0||t===1}function Ih({scale:t,scaleX:e,scaleY:n}){return!$u(t)||!$u(e)||!$u(n)}function Yi(t){return Ih(t)||bb(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function bb(t){return Mv(t.x)||Mv(t.y)}function Mv(t){return t&&t!=="0%"}function Ul(t,e,n){const i=t-n,r=e*i;return n+r}function Dv(t,e,n,i,r){return r!==void 0&&(t=Ul(t,r,i)),Ul(t,n,i)+e}function Lh(t,e=0,n=1,i,r){t.min=Dv(t.min,e,n,i,r),t.max=Dv(t.max,e,n,i,r)}function Sb(t,{x:e,y:n}){Lh(t.x,e.translate,e.scale,e.originPoint),Lh(t.y,n.translate,n.scale,n.originPoint)}const Iv=.999999999999,Lv=1.0000000000001;function AA(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let u,m;for(let l=0;l<r;l++){u=n[l],m=u.projectionDelta;const{visualElement:s}=u.options;s&&s.props.style&&s.props.style.display==="contents"||(i&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Xr(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),m&&(e.x*=m.x.scale,e.y*=m.y.scale,Sb(t,m)),i&&Yi(u.latestValues)&&Xr(t,u.latestValues))}e.x<Lv&&e.x>Iv&&(e.x=1),e.y<Lv&&e.y>Iv&&(e.y=1)}function Yr(t,e){t.min=t.min+e,t.max=t.max+e}function Fv(t,e,n,i,r=.5){const u=Ue(t.min,t.max,r);Lh(t,e,n,u,i)}function Xr(t,e){Fv(t.x,e.x,e.scaleX,e.scale,e.originX),Fv(t.y,e.y,e.scaleY,e.scale,e.originY)}function Cb(t,e){return wb(EA(t.getBoundingClientRect(),e))}function MA(t,e,n){const i=Cb(t,n),{scroll:r}=e;return r&&(Yr(i.x,r.offset.x),Yr(i.y,r.offset.y)),i}const _b=({current:t})=>t?t.ownerDocument.defaultView:null,DA=new WeakMap;class IA{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:a}=this.getProps();a?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ec(f,"page").point)},u=(f,a)=>{const{drag:o,dragPropagation:c,onDragStart:d}=this.getProps();if(o&&!c&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=gb(o),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zt(p=>{let g=this.getAxisMotionValue(p).get()||0;if(An.test(g)){const{projection:y}=this.visualElement;if(y&&y.layout){const x=y.layout.layoutBox[p];x&&(g=Xt(x)*(parseFloat(g)/100))}}this.originPoint[p]=g}),d&&Ie.postRender(()=>d(f,a)),Ah(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},m=(f,a)=>{const{dragPropagation:o,dragDirectionLock:c,onDirectionLock:d,onDrag:v}=this.getProps();if(!o&&!this.openGlobalLock)return;const{offset:p}=a;if(c&&this.currentDirection===null){this.currentDirection=LA(p),this.currentDirection!==null&&d&&d(this.currentDirection);return}this.updateAxis("x",a.point,p),this.updateAxis("y",a.point,p),this.visualElement.render(),v&&v(f,a)},l=(f,a)=>this.stop(f,a),s=()=>Zt(f=>{var a;return this.getAnimationState(f)==="paused"&&((a=this.getAxisMotionValue(f).animation)===null||a===void 0?void 0:a.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new db(e,{onSessionStart:r,onStart:u,onMove:m,onSessionEnd:l,resumeAnimation:s},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:_b(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:u}=this.getProps();u&&Ie.postRender(()=>u(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!_o(e,r,this.currentDirection))return;const u=this.getAxisMotionValue(e);let m=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(m=SA(m,this.constraints[e],this.elastic[e])),u.set(m)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,u=this.constraints;n&&$r(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=CA(r.layoutBox,n):this.constraints=!1,this.elastic=PA(i),u!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zt(m=>{this.constraints!==!1&&this.getAxisMotionValue(m)&&(this.constraints[m]=kA(r.layoutBox[m],this.constraints[m]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!$r(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const u=MA(i,r.root,this.visualElement.getTransformPagePoint());let m=_A(r.layout.layoutBox,u);if(n){const l=n(OA(m));this.hasMutatedConstraints=!!l,l&&(m=wb(l))}return m}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:u,dragSnapToOrigin:m,onDragTransitionEnd:l}=this.getProps(),s=this.constraints||{},h=Zt(f=>{if(!_o(f,n,this.currentDirection))return;let a=s&&s[f]||{};m&&(a={min:0,max:0});const o=r?200:1e6,c=r?40:1e7,d={type:"inertia",velocity:i?e[f]:0,bounceStiffness:o,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...u,...a};return this.startAxisValueAnimation(f,d)});return Promise.all(h).then(l)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Ah(this.visualElement,e),i.start(Cp(e,i,0,n,this.visualElement,!1))}stopAnimation(){Zt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Zt(n=>{const{drag:i}=this.getProps();if(!_o(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,u=this.getAxisMotionValue(n);if(r&&r.layout){const{min:m,max:l}=r.layout.layoutBox[n];u.set(e[n]-Ue(m,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!$r(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Zt(m=>{const l=this.getAxisMotionValue(m);if(l&&this.constraints!==!1){const s=l.get();r[m]=TA({min:s,max:s},this.constraints[m])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Zt(m=>{if(!_o(m,e,null))return;const l=this.getAxisMotionValue(m),{min:s,max:h}=this.constraints[m];l.set(Ue(s,h,r[m]))})}addListeners(){if(!this.visualElement.current)return;DA.set(this.visualElement,this);const e=this.visualElement.current,n=Gn(e,"pointerdown",s=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(s)}),i=()=>{const{dragConstraints:s}=this.getProps();$r(s)&&s.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,u=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ie.read(i);const m=zn(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:s,hasLayoutChanged:h})=>{this.isDragging&&h&&(Zt(f=>{const a=this.getAxisMotionValue(f);a&&(this.originPoint[f]+=s[f].translate,a.set(a.get()+s[f].translate))}),this.visualElement.render())});return()=>{m(),n(),u(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:u=!1,dragElastic:m=Dh,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:u,dragElastic:m,dragMomentum:l}}}function _o(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function LA(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class FA extends Vi{constructor(e){super(e),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new IA(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const Rv=t=>(e,n)=>{t&&Ie.postRender(()=>t(e,n))};class RA extends Vi{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(e){this.session=new db(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_b(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Rv(e),onStart:Rv(n),onMove:i,onEnd:(u,m)=>{delete this.session,r&&Ie.postRender(()=>r(u,m))}}}mount(){this.removePointerDownListener=Gn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ac=B.createContext(null);function jA(){const t=B.useContext(Ac);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,r=B.useId();B.useEffect(()=>i(r),[]);const u=B.useCallback(()=>n&&n(r),[r,n]);return!e&&n?[!1,u]:[!0]}const Op=B.createContext({}),Tb=B.createContext({}),Xo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function jv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ns={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ge.test(t))t=parseFloat(t);else return t;const n=jv(t,e.target.x),i=jv(t,e.target.y);return`${n}% ${i}%`}},NA={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Li.parse(t);if(r.length>5)return i;const u=Li.createTransformer(t),m=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,s=n.y.scale*e.y;r[0+m]/=l,r[1+m]/=s;const h=Ue(l,s,.5);return typeof r[2+m]=="number"&&(r[2+m]/=h),typeof r[3+m]=="number"&&(r[3+m]/=h),u(r)}},Hl={};function BA(t){Object.assign(Hl,t)}const{schedule:Ep,cancel:_F}=Tw(queueMicrotask,!1);class VA extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:u}=e;BA(zA),u&&(n.group&&n.group.add(u),i&&i.register&&r&&i.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),Xo.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:u}=this.props,m=i.projection;return m&&(m.isPresent=u,r||e.layoutDependency!==n||n===void 0?m.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?m.promote():m.relegate()||Ie.postRender(()=>{const l=m.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ep.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kb(t){const[e,n]=jA(),i=B.useContext(Op);return N.jsx(VA,{...t,layoutGroup:i,switchLayoutGroup:B.useContext(Tb),isPresent:e,safeToRemove:n})}const zA={borderRadius:{...Ns,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ns,borderTopRightRadius:Ns,borderBottomLeftRadius:Ns,borderBottomRightRadius:Ns,boxShadow:NA},Pb=["TopLeft","TopRight","BottomLeft","BottomRight"],UA=Pb.length,Nv=t=>typeof t=="string"?parseFloat(t):t,Bv=t=>typeof t=="number"||ge.test(t);function HA(t,e,n,i,r,u){r?(t.opacity=Ue(0,n.opacity!==void 0?n.opacity:1,WA(i)),t.opacityExit=Ue(e.opacity!==void 0?e.opacity:1,0,$A(i))):u&&(t.opacity=Ue(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let m=0;m<UA;m++){const l=`border${Pb[m]}Radius`;let s=Vv(e,l),h=Vv(n,l);if(s===void 0&&h===void 0)continue;s||(s=0),h||(h=0),s===0||h===0||Bv(s)===Bv(h)?(t[l]=Math.max(Ue(Nv(s),Nv(h),i),0),(An.test(h)||An.test(s))&&(t[l]+="%")):t[l]=h}(e.rotate||n.rotate)&&(t.rotate=Ue(e.rotate||0,n.rotate||0,i))}function Vv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const WA=Ob(0,.5,Dw),$A=Ob(.5,.95,_t);function Ob(t,e,n){return i=>i<t?0:i>e?1:n(ds(t,e,i))}function zv(t,e){t.min=e.min,t.max=e.max}function Jt(t,e){zv(t.x,e.x),zv(t.y,e.y)}function Uv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Hv(t,e,n,i,r){return t-=e,t=Ul(t,1/n,i),r!==void 0&&(t=Ul(t,1/r,i)),t}function GA(t,e=0,n=1,i=.5,r,u=t,m=t){if(An.test(e)&&(e=parseFloat(e),e=Ue(m.min,m.max,e/100)-m.min),typeof e!="number")return;let l=Ue(u.min,u.max,i);t===u&&(l-=e),t.min=Hv(t.min,e,n,l,r),t.max=Hv(t.max,e,n,l,r)}function Wv(t,e,[n,i,r],u,m){GA(t,e[n],e[i],e[r],e.scale,u,m)}const YA=["x","scaleX","originX"],XA=["y","scaleY","originY"];function $v(t,e,n,i){Wv(t.x,e,YA,n?n.x:void 0,i?i.x:void 0),Wv(t.y,e,XA,n?n.y:void 0,i?i.y:void 0)}function Gv(t){return t.translate===0&&t.scale===1}function Eb(t){return Gv(t.x)&&Gv(t.y)}function Yv(t,e){return t.min===e.min&&t.max===e.max}function KA(t,e){return Yv(t.x,e.x)&&Yv(t.y,e.y)}function Xv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Ab(t,e){return Xv(t.x,e.x)&&Xv(t.y,e.y)}function Kv(t){return Xt(t.x)/Xt(t.y)}function qv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class qA{constructor(){this.members=[]}add(e){_p(this.members,e),e.scheduleRender()}remove(e){if(Tp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const u=this.members[r];if(u.isPresent!==!1){i=u;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QA(t,e,n){let i="";const r=t.x.translate/e.x,u=t.y.translate/e.y,m=(n==null?void 0:n.z)||0;if((r||u||m)&&(i=`translate3d(${r}px, ${u}px, ${m}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:a,rotateY:o,skewX:c,skewY:d}=n;h&&(i=`perspective(${h}px) ${i}`),f&&(i+=`rotate(${f}deg) `),a&&(i+=`rotateX(${a}deg) `),o&&(i+=`rotateY(${o}deg) `),c&&(i+=`skewX(${c}deg) `),d&&(i+=`skewY(${d}deg) `)}const l=t.x.scale*e.x,s=t.y.scale*e.y;return(l!==1||s!==1)&&(i+=`scale(${l}, ${s})`),i||"none"}const JA=(t,e)=>t.depth-e.depth;class ZA{constructor(){this.children=[],this.isDirty=!1}add(e){_p(this.children,e),this.isDirty=!0}remove(e){Tp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JA),this.isDirty=!1,this.children.forEach(e)}}function Ko(t){const e=Ct(t)?t.get():t;return WE(e)?e.toValue():e}function eM(t,e){const n=Mn.now(),i=({timestamp:r})=>{const u=r-n;u>=e&&(Ii(i),t(u-e))};return Ie.read(i,!0),()=>Ii(i)}function tM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function nM(t,e,n){const i=Ct(t)?t:Fa(t);return i.start(Cp("",i,e,n)),i.animation}const Xi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Xs=typeof window<"u"&&window.MotionDebug!==void 0,Gu=["","X","Y","Z"],iM={visibility:"hidden"},Qv=1e3;let rM=0;function Yu(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function Mb(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=cb(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:u}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ie,!(r||u))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&Mb(i)}function Db({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(m={},l=e==null?void 0:e()){this.id=rM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Xs&&(Xi.totalNodes=Xi.resolvedTargetDeltas=Xi.recalculatedProjection=0),this.nodes.forEach(oM),this.nodes.forEach(hM),this.nodes.forEach(dM),this.nodes.forEach(lM),Xs&&window.MotionDebug.record(Xi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=m,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let s=0;s<this.path.length;s++)this.path[s].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZA)}addEventListener(m,l){return this.eventHandlers.has(m)||this.eventHandlers.set(m,new kp),this.eventHandlers.get(m).add(l)}notifyListeners(m,...l){const s=this.eventHandlers.get(m);s&&s.notify(...l)}hasListeners(m){return this.eventHandlers.has(m)}mount(m,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=tM(m),this.instance=m;const{layoutId:s,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(m),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(h||s)&&(this.isLayoutDirty=!0),t){let a;const o=()=>this.root.updateBlockedByResize=!1;t(m,()=>{this.root.updateBlockedByResize=!0,a&&a(),a=eM(o,250),Xo.hasAnimatedSinceResize&&(Xo.hasAnimatedSinceResize=!1,this.nodes.forEach(Zv))})}s&&this.root.registerSharedNode(s,this),this.options.animate!==!1&&f&&(s||h)&&this.addEventListener("didUpdate",({delta:a,hasLayoutChanged:o,hasRelativeTargetChanged:c,layout:d})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||f.getDefaultTransition()||yM,{onLayoutAnimationStart:p,onLayoutAnimationComplete:g}=f.getProps(),y=!this.targetLayout||!Ab(this.targetLayout,d)||c,x=!o&&c;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||o&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(a,x);const w={...cp(v,"layout"),onPlay:p,onComplete:g};(f.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else o||Zv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=d})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const m=this.getStack();m&&m.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ii(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pM),this.animationId++)}getTransformTemplate(){const{visualElement:m}=this.options;return m&&m.getProps().transformTemplate}willUpdate(m=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Mb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const a=this.path[f];a.shouldResetTransform=!0,a.updateScroll("snapshot"),a.options.layoutRoot&&a.willUpdate(!1)}const{layoutId:l,layout:s}=this.options;if(l===void 0&&!s)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),m&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jv);return}this.isUpdating||this.nodes.forEach(uM),this.isUpdating=!1,this.nodes.forEach(fM),this.nodes.forEach(sM),this.nodes.forEach(aM),this.clearAllSnapshots();const l=Mn.now();ht.delta=Zn(0,1e3/60,l-ht.timestamp),ht.timestamp=l,ht.isProcessing=!0,Nu.update.process(ht),Nu.preRender.process(ht),Nu.render.process(ht),ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ep.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cM),this.sharedNodes.forEach(mM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let s=0;s<this.path.length;s++)this.path[s].updateScroll();const m=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,m?m.layoutBox:void 0)}updateScroll(m="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===m&&(l=!1),l){const s=i(this.instance);this.scroll={animationId:this.root.animationId,phase:m,isRoot:s,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:s}}}resetTransform(){if(!r)return;const m=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Eb(this.projectionDelta),s=this.getTransformTemplate(),h=s?s(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;m&&(l||Yi(this.latestValues)||f)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(m=!0){const l=this.measurePageBox();let s=this.removeElementScroll(l);return m&&(s=this.removeTransform(s)),xM(s),{animationId:this.root.animationId,measuredBox:l,layoutBox:s,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:l}=this.options;if(!l)return qe();const s=l.measureViewportBox();if(!(((m=this.scroll)===null||m===void 0?void 0:m.wasRoot)||this.path.some(wM))){const{scroll:f}=this.root;f&&(Yr(s.x,f.offset.x),Yr(s.y,f.offset.y))}return s}removeElementScroll(m){var l;const s=qe();if(Jt(s,m),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return s;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:a,options:o}=f;f!==this.root&&a&&o.layoutScroll&&(a.wasRoot&&Jt(s,m),Yr(s.x,a.offset.x),Yr(s.y,a.offset.y))}return s}applyTransform(m,l=!1){const s=qe();Jt(s,m);for(let h=0;h<this.path.length;h++){const f=this.path[h];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Xr(s,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Yi(f.latestValues)&&Xr(s,f.latestValues)}return Yi(this.latestValues)&&Xr(s,this.latestValues),s}removeTransform(m){const l=qe();Jt(l,m);for(let s=0;s<this.path.length;s++){const h=this.path[s];if(!h.instance||!Yi(h.latestValues))continue;Ih(h.latestValues)&&h.updateSnapshot();const f=qe(),a=h.measurePageBox();Jt(f,a),$v(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Yi(this.latestValues)&&$v(l,this.latestValues),l}setTargetDelta(m){this.targetDelta=m,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(m){this.options={...this.options,...m,crossfade:m.crossfade!==void 0?m.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(m=!1){var l;const s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==s;if(!(m||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:a,layoutId:o}=this.options;if(!(!this.layout||!(a||o))){if(this.resolvedRelativeTargetAt=ht.timestamp,!this.targetDelta&&!this.relativeTarget){const c=this.getClosestProjectingParent();c&&c.layout&&this.animationProgress!==1?(this.relativeParent=c,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),ca(this.relativeTargetOrigin,this.layout.layoutBox,c.layout.layoutBox),Jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=qe(),this.targetWithTransforms=qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bA(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Jt(this.target,this.layout.layoutBox),Sb(this.target,this.targetDelta)):Jt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const c=this.getClosestProjectingParent();c&&!!c.resumingFrom==!!this.resumingFrom&&!c.options.layoutScroll&&c.target&&this.animationProgress!==1?(this.relativeParent=c,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),ca(this.relativeTargetOrigin,this.target,c.target),Jt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Xs&&Xi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ih(this.parent.latestValues)||bb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const l=this.getLead(),s=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty)&&(h=!1),s&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ht.timestamp&&(h=!1),h)return;const{layout:f,layoutId:a}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||a))return;Jt(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,c=this.treeScale.y;AA(this.layoutCorrected,this.treeScale,this.path,s),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=qe());const{target:d}=l;if(!d){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Uv(this.prevProjectionDelta.x,this.projectionDelta.x),Uv(this.prevProjectionDelta.y,this.projectionDelta.y)),la(this.projectionDelta,this.layoutCorrected,d,this.latestValues),(this.treeScale.x!==o||this.treeScale.y!==c||!qv(this.projectionDelta.x,this.prevProjectionDelta.x)||!qv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",d)),Xs&&Xi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(m=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),m){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gr(),this.projectionDelta=Gr(),this.projectionDeltaWithTransform=Gr()}setAnimationOrigin(m,l=!1){const s=this.snapshot,h=s?s.latestValues:{},f={...this.latestValues},a=Gr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const o=qe(),c=s?s.source:void 0,d=this.layout?this.layout.source:void 0,v=c!==d,p=this.getStack(),g=!p||p.members.length<=1,y=!!(v&&!g&&this.options.crossfade===!0&&!this.path.some(vM));this.animationProgress=0;let x;this.mixTargetDelta=w=>{const b=w/1e3;e0(a.x,m.x,b),e0(a.y,m.y,b),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ca(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gM(this.relativeTarget,this.relativeTargetOrigin,o,b),x&&KA(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=qe()),Jt(x,this.relativeTarget)),v&&(this.animationValues=f,HA(f,h,this.latestValues,b,y,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(m){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ii(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{Xo.hasAnimatedSinceResize=!0,this.currentAnimation=nM(0,Qv,{...m,onUpdate:l=>{this.mixTargetDelta(l),m.onUpdate&&m.onUpdate(l)},onComplete:()=>{m.onComplete&&m.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const m=this.getStack();m&&m.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Qv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const m=this.getLead();let{targetWithTransforms:l,target:s,layout:h,latestValues:f}=m;if(!(!l||!s||!h)){if(this!==m&&this.layout&&h&&Ib(this.options.animationType,this.layout.layoutBox,h.layoutBox)){s=this.target||qe();const a=Xt(this.layout.layoutBox.x);s.x.min=m.target.x.min,s.x.max=s.x.min+a;const o=Xt(this.layout.layoutBox.y);s.y.min=m.target.y.min,s.y.max=s.y.min+o}Jt(l,s),Xr(l,f),la(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(m,l){this.sharedNodes.has(m)||this.sharedNodes.set(m,new qA),this.sharedNodes.get(m).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const m=this.getStack();return m?m.lead===this:!0}getLead(){var m;const{layoutId:l}=this.options;return l?((m=this.getStack())===null||m===void 0?void 0:m.lead)||this:this}getPrevLead(){var m;const{layoutId:l}=this.options;return l?(m=this.getStack())===null||m===void 0?void 0:m.prevLead:void 0}getStack(){const{layoutId:m}=this.options;if(m)return this.root.sharedNodes.get(m)}promote({needsReset:m,transition:l,preserveFollowOpacity:s}={}){const h=this.getStack();h&&h.promote(this,s),m&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const m=this.getStack();return m?m.relegate(this):!1}resetSkewAndRotation(){const{visualElement:m}=this.options;if(!m)return;let l=!1;const{latestValues:s}=m;if((s.z||s.rotate||s.rotateX||s.rotateY||s.rotateZ||s.skewX||s.skewY)&&(l=!0),!l)return;const h={};s.z&&Yu("z",m,h,this.animationValues);for(let f=0;f<Gu.length;f++)Yu(`rotate${Gu[f]}`,m,h,this.animationValues),Yu(`skew${Gu[f]}`,m,h,this.animationValues);m.render();for(const f in h)m.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);m.scheduleRender()}getProjectionStyles(m){var l,s;if(!this.instance||this.isSVG)return;if(!this.isVisible)return iM;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Ko(m==null?void 0:m.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Ko(m==null?void 0:m.pointerEvents)||""),this.hasProjected&&!Yi(this.latestValues)&&(v.transform=f?f({},""):"none",this.hasProjected=!1),v}const o=a.animationValues||a.latestValues;this.applyTransformsToTarget(),h.transform=QA(this.projectionDeltaWithTransform,this.treeScale,o),f&&(h.transform=f(o,h.transform));const{x:c,y:d}=this.projectionDelta;h.transformOrigin=`${c.origin*100}% ${d.origin*100}% 0`,a.animationValues?h.opacity=a===this?(s=(l=o.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&s!==void 0?s:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:h.opacity=a===this?o.opacity!==void 0?o.opacity:"":o.opacityExit!==void 0?o.opacityExit:0;for(const v in Hl){if(o[v]===void 0)continue;const{correct:p,applyTo:g}=Hl[v],y=h.transform==="none"?o[v]:p(o[v],a);if(g){const x=g.length;for(let w=0;w<x;w++)h[g[w]]=y}else h[v]=y}return this.options.layoutId&&(h.pointerEvents=a===this?Ko(m==null?void 0:m.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(m=>{var l;return(l=m.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Jv),this.root.sharedNodes.clear()}}}function sM(t){t.updateLayout()}function aM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:u}=t.options,m=n.source!==t.layout.source;u==="size"?Zt(a=>{const o=m?n.measuredBox[a]:n.layoutBox[a],c=Xt(o);o.min=i[a].min,o.max=o.min+c}):Ib(u,n.layoutBox,i)&&Zt(a=>{const o=m?n.measuredBox[a]:n.layoutBox[a],c=Xt(i[a]);o.max=o.min+c,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[a].max=t.relativeTarget[a].min+c)});const l=Gr();la(l,i,n.layoutBox);const s=Gr();m?la(s,t.applyTransform(r,!0),n.measuredBox):la(s,i,n.layoutBox);const h=!Eb(l);let f=!1;if(!t.resumeFrom){const a=t.getClosestProjectingParent();if(a&&!a.resumeFrom){const{snapshot:o,layout:c}=a;if(o&&c){const d=qe();ca(d,n.layoutBox,o.layoutBox);const v=qe();ca(v,i,c.layoutBox),Ab(d,v)||(f=!0),a.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=d,t.relativeParent=a)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:s,layoutDelta:l,hasLayoutChanged:h,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function oM(t){Xs&&Xi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function lM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function cM(t){t.clearSnapshot()}function Jv(t){t.clearMeasurements()}function uM(t){t.isLayoutDirty=!1}function fM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Zv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function hM(t){t.resolveTargetDelta()}function dM(t){t.calcProjection()}function pM(t){t.resetSkewAndRotation()}function mM(t){t.removeLeadSnapshot()}function e0(t,e,n){t.translate=Ue(e.translate,0,n),t.scale=Ue(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function t0(t,e,n,i){t.min=Ue(e.min,n.min,i),t.max=Ue(e.max,n.max,i)}function gM(t,e,n,i){t0(t.x,e.x,n.x,i),t0(t.y,e.y,n.y,i)}function vM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const yM={duration:.45,ease:[.4,0,.1,1]},n0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),i0=n0("applewebkit/")&&!n0("chrome/")?Math.round:_t;function r0(t){t.min=i0(t.min),t.max=i0(t.max)}function xM(t){r0(t.x),r0(t.y)}function Ib(t,e,n){return t==="position"||t==="preserve-aspect"&&!wA(Kv(e),Kv(n),.2)}function wM(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const bM=Db({attachResizeListener:(t,e)=>zn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xu={current:void 0},Lb=Db({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Xu.current){const t=new bM({});t.mount(window),t.setOptions({layoutScroll:!0}),Xu.current=t}return Xu.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),SM={pan:{Feature:RA},drag:{Feature:FA,ProjectionNode:Lb,MeasureLayout:kb}};function s0(t,e){const n=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",r=(u,m)=>{if(u.pointerType==="touch"||vb())return;const l=t.getProps();t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",e);const s=l[i];s&&Ie.postRender(()=>s(u,m))};return Gn(t.current,n,r,{passive:!t.getProps()[i]})}class CM extends Vi{mount(){this.unmount=$n(s0(this.node,!0),s0(this.node,!1))}unmount(){}}class _M extends Vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$n(zn(this.node.current,"focus",()=>this.onFocus()),zn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Fb=(t,e)=>e?t===e?!0:Fb(t,e.parentElement):!1;function Ku(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Ec(n))}class TM extends Vi{constructor(){super(...arguments),this.removeStartListeners=_t,this.removeEndListeners=_t,this.removeAccessibleListeners=_t,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),u=Gn(window,"pointerup",(l,s)=>{if(!this.checkPressEnd())return;const{onTap:h,onTapCancel:f,globalTapTarget:a}=this.node.getProps(),o=!a&&!Fb(this.node.current,l.target)?f:h;o&&Ie.update(()=>o(l,s))},{passive:!(i.onTap||i.onPointerUp)}),m=Gn(window,"pointercancel",(l,s)=>this.cancelPress(l,s),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=$n(u,m),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=u=>{if(u.key!=="Enter"||this.isPressing)return;const m=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ku("up",(s,h)=>{const{onTap:f}=this.node.getProps();f&&Ie.postRender(()=>f(s,h))})};this.removeEndListeners(),this.removeEndListeners=zn(this.node.current,"keyup",m),Ku("down",(l,s)=>{this.startPress(l,s)})},n=zn(this.node.current,"keydown",e),i=()=>{this.isPressing&&Ku("cancel",(u,m)=>this.cancelPress(u,m))},r=zn(this.node.current,"blur",i);this.removeAccessibleListeners=$n(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ie.postRender(()=>i(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!vb()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ie.postRender(()=>i(e,n))}mount(){const e=this.node.getProps(),n=Gn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=zn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=$n(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Fh=new WeakMap,qu=new WeakMap,kM=t=>{const e=Fh.get(t.target);e&&e(t)},PM=t=>{t.forEach(kM)};function OM({root:t,...e}){const n=t||document;qu.has(n)||qu.set(n,{});const i=qu.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(PM,{root:t,...e})),i[r]}function EM(t,e,n){const i=OM(e);return Fh.set(t,n),i.observe(t),()=>{Fh.delete(t),i.unobserve(t)}}const AM={some:0,all:1};class MM extends Vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:u}=e,m={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:AM[r]},l=s=>{const{isIntersecting:h}=s;if(this.isInView===h||(this.isInView=h,u&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:a}=this.node.getProps(),o=h?f:a;o&&o(s)};return EM(this.node.current,m,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(DM(e,n))&&this.startObserver()}unmount(){}}function DM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const IM={inView:{Feature:MM},tap:{Feature:TM},focus:{Feature:_M},hover:{Feature:CM}},LM={layout:{ProjectionNode:Lb,MeasureLayout:kb}},Ap=B.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Mc=B.createContext({}),Mp=typeof window<"u",Rb=Mp?B.useLayoutEffect:B.useEffect,jb=B.createContext({strict:!1});function FM(t,e,n,i,r){var u,m;const{visualElement:l}=B.useContext(Mc),s=B.useContext(jb),h=B.useContext(Ac),f=B.useContext(Ap).reducedMotion,a=B.useRef();i=i||s.renderer,!a.current&&i&&(a.current=i(t,{visualState:e,parent:l,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const o=a.current,c=B.useContext(Tb);o&&!o.projection&&r&&(o.type==="html"||o.type==="svg")&&RM(a.current,n,r,c);const d=B.useRef(!1);B.useInsertionEffect(()=>{o&&d.current&&o.update(n,h)});const v=n[lb],p=B.useRef(!!v&&!(!((u=window.MotionHandoffIsComplete)===null||u===void 0)&&u.call(window,v))&&((m=window.MotionHasOptimisedAnimation)===null||m===void 0?void 0:m.call(window,v)));return Rb(()=>{o&&(d.current=!0,window.MotionIsMounted=!0,o.updateFeatures(),Ep.render(o.render),p.current&&o.animationState&&o.animationState.animateChanges())}),B.useEffect(()=>{o&&(!p.current&&o.animationState&&o.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,v)}),p.current=!1))}),o}function RM(t,e,n,i){const{layoutId:r,layout:u,drag:m,dragConstraints:l,layoutScroll:s,layoutRoot:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Nb(t.parent)),t.projection.setOptions({layoutId:r,layout:u,alwaysMeasureLayout:!!m||l&&$r(l),visualElement:t,animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:s,layoutRoot:h})}function Nb(t){if(t)return t.options.allowProjection!==!1?t.projection:Nb(t.parent)}function jM(t,e,n){return B.useCallback(i=>{i&&t.mount&&t.mount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):$r(n)&&(n.current=i))},[e])}function Dc(t){return kc(t.animate)||lp.some(e=>Da(t[e]))}function Bb(t){return!!(Dc(t)||t.variants)}function NM(t,e){if(Dc(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Da(n)?n:void 0,animate:Da(i)?i:void 0}}return t.inherit!==!1?e:{}}function BM(t){const{initial:e,animate:n}=NM(t,B.useContext(Mc));return B.useMemo(()=>({initial:e,animate:n}),[a0(e),a0(n)])}function a0(t){return Array.isArray(t)?t.join(" "):t}const o0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ps={};for(const t in o0)ps[t]={isEnabled:e=>o0[t].some(n=>!!e[n])};function VM(t){for(const e in t)ps[e]={...ps[e],...t[e]}}const zM=Symbol.for("motionComponentSymbol");function UM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){t&&VM(t);function u(l,s){let h;const f={...B.useContext(Ap),...l,layoutId:HM(l)},{isStatic:a}=f,o=BM(l),c=i(l,a);if(!a&&Mp){WM();const d=$M(f);h=d.MeasureLayout,o.visualElement=FM(r,c,f,e,d.ProjectionNode)}return N.jsxs(Mc.Provider,{value:o,children:[h&&o.visualElement?N.jsx(h,{visualElement:o.visualElement,...f}):null,n(r,l,jM(c,o.visualElement,s),c,a,o.visualElement)]})}const m=B.forwardRef(u);return m[zM]=r,m}function HM({layoutId:t}){const e=B.useContext(Op).id;return e&&t!==void 0?e+"-"+t:t}function WM(t,e){B.useContext(jb).strict}function $M(t){const{drag:e,layout:n}=ps;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const GM=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Dp(t){return typeof t!="string"||t.includes("-")?!1:!!(GM.indexOf(t)>-1||/[A-Z]/u.test(t))}function Vb(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const u in n)t.style.setProperty(u,n[u])}const zb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ub(t,e,n,i){Vb(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(zb.has(r)?r:Pp(r),e.attrs[r])}function Hb(t,{layout:e,layoutId:n}){return Tr.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Hl[t]||t==="opacity")}function Ip(t,e,n){var i;const{style:r}=t,u={};for(const m in r)(Ct(r[m])||e.style&&Ct(e.style[m])||Hb(m,t)||((i=n==null?void 0:n.getValue(m))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(u[m]=r[m]);return u}function Wb(t,e,n){const i=Ip(t,e,n);for(const r in t)if(Ct(t[r])||Ct(e[r])){const u=Ga.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[u]=t[r]}return i}function Lp(t){const e=B.useRef(null);return e.current===null&&(e.current=t()),e.current}function YM({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},i,r,u){const m={latestValues:XM(i,r,u,t),renderState:e()};return n&&(m.mount=l=>n(i,l,m)),m}const $b=t=>(e,n)=>{const i=B.useContext(Mc),r=B.useContext(Ac),u=()=>YM(t,e,i,r);return n?u():Lp(u)};function XM(t,e,n,i){const r={},u=i(t,{});for(const o in u)r[o]=Ko(u[o]);let{initial:m,animate:l}=t;const s=Dc(t),h=Bb(t);e&&h&&!s&&t.inherit!==!1&&(m===void 0&&(m=e.initial),l===void 0&&(l=e.animate));let f=n?n.initial===!1:!1;f=f||m===!1;const a=f?l:m;if(a&&typeof a!="boolean"&&!kc(a)){const o=Array.isArray(a)?a:[a];for(let c=0;c<o.length;c++){const d=ap(t,o[c]);if(d){const{transitionEnd:v,transition:p,...g}=d;for(const y in g){let x=g[y];if(Array.isArray(x)){const w=f?x.length-1:0;x=x[w]}x!==null&&(r[y]=x)}for(const y in v)r[y]=v[y]}}}return r}const Fp=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Gb=()=>({...Fp(),attrs:{}}),Yb=(t,e)=>e&&typeof t=="number"?e.transform(t):t,KM={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qM=Ga.length;function QM(t,e,n){let i="",r=!0;for(let u=0;u<qM;u++){const m=Ga[u],l=t[m];if(l===void 0)continue;let s=!0;if(typeof l=="number"?s=l===(m.startsWith("scale")?1:0):s=parseFloat(l)===0,!s||n){const h=Yb(l,gp[m]);if(!s){r=!1;const f=KM[m]||m;i+=`${f}(${h}) `}n&&(e[m]=h)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Rp(t,e,n){const{style:i,vars:r,transformOrigin:u}=t;let m=!1,l=!1;for(const s in e){const h=e[s];if(Tr.has(s)){m=!0;continue}else if(jw(s)){r[s]=h;continue}else{const f=Yb(h,gp[s]);s.startsWith("origin")?(l=!0,u[s]=f):i[s]=f}}if(e.transform||(m||n?i.transform=QM(e,t.transform,n):i.transform&&(i.transform="none")),l){const{originX:s="50%",originY:h="50%",originZ:f=0}=u;i.transformOrigin=`${s} ${h} ${f}`}}function l0(t,e,n){return typeof t=="string"?t:ge.transform(e+n*t)}function JM(t,e,n){const i=l0(e,t.x,t.width),r=l0(n,t.y,t.height);return`${i} ${r}`}const ZM={offset:"stroke-dashoffset",array:"stroke-dasharray"},e3={offset:"strokeDashoffset",array:"strokeDasharray"};function t3(t,e,n=1,i=0,r=!0){t.pathLength=1;const u=r?ZM:e3;t[u.offset]=ge.transform(-i);const m=ge.transform(e),l=ge.transform(n);t[u.array]=`${m} ${l}`}function jp(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:u,pathLength:m,pathSpacing:l=1,pathOffset:s=0,...h},f,a){if(Rp(t,h,a),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:o,style:c,dimensions:d}=t;o.transform&&(d&&(c.transform=o.transform),delete o.transform),d&&(r!==void 0||u!==void 0||c.transform)&&(c.transformOrigin=JM(d,r!==void 0?r:.5,u!==void 0?u:.5)),e!==void 0&&(o.x=e),n!==void 0&&(o.y=n),i!==void 0&&(o.scale=i),m!==void 0&&t3(o,m,l,s,!1)}const Np=t=>typeof t=="string"&&t.toLowerCase()==="svg",n3={useVisualState:$b({scrapeMotionValuesFromProps:Wb,createRenderState:Gb,onMount:(t,e,{renderState:n,latestValues:i})=>{Ie.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ie.render(()=>{jp(n,i,Np(e.tagName),t.transformTemplate),Ub(e,n)})}})},i3={useVisualState:$b({scrapeMotionValuesFromProps:Ip,createRenderState:Fp})};function Xb(t,e,n){for(const i in e)!Ct(e[i])&&!Hb(i,n)&&(t[i]=e[i])}function r3({transformTemplate:t},e){return B.useMemo(()=>{const n=Fp();return Rp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function s3(t,e){const n=t.style||{},i={};return Xb(i,n,t),Object.assign(i,r3(t,e)),i}function a3(t,e){const n={},i=s3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const o3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||o3.has(t)}let Kb=t=>!Wl(t);function l3(t){t&&(Kb=e=>e.startsWith("on")?!Wl(e):t(e))}try{l3(require("@emotion/is-prop-valid").default)}catch{}function c3(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(Kb(r)||n===!0&&Wl(r)||!e&&!Wl(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function u3(t,e,n,i){const r=B.useMemo(()=>{const u=Gb();return jp(u,e,Np(i),t.transformTemplate),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};Xb(u,t.style,t),r.style={...u,...r.style}}return r}function f3(t=!1){return(n,i,r,{latestValues:u},m)=>{const s=(Dp(n)?u3:a3)(i,u,m,n),h=c3(i,typeof n=="string",t),f=n!==B.Fragment?{...h,...s,ref:r}:{},{children:a}=i,o=B.useMemo(()=>Ct(a)?a.get():a,[a]);return B.createElement(n,{...f,children:o})}}function h3(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const m={...Dp(i)?n3:i3,preloadedFeatures:t,useRender:f3(r),createVisualElement:e,Component:i};return UM(m)}}const Rh={current:null},qb={current:!1};function d3(){if(qb.current=!0,!!Mp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rh.current=t.matches;t.addListener(e),e()}else Rh.current=!1}function p3(t,e,n){for(const i in e){const r=e[i],u=n[i];if(Ct(r))t.addValue(i,r);else if(Ct(u))t.addValue(i,Fa(r,{owner:t}));else if(u!==r)if(t.hasValue(i)){const m=t.getValue(i);m.liveStyle===!0?m.jump(r):m.hasAnimated||m.set(r)}else{const m=t.getStaticValue(i);t.addValue(i,Fa(m!==void 0?m:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const c0=new WeakMap,m3=[...Vw,bt,Li],g3=t=>m3.find(Bw(t)),u0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class v3{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:u,visualState:m},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const o=Mn.now();this.renderScheduledAt<o&&(this.renderScheduledAt=o,Ie.render(this.render,!1,!0))};const{latestValues:s,renderState:h}=m;this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!u,this.isControllingVariants=Dc(n),this.isVariantNode=Bb(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...a}=this.scrapeMotionValuesFromProps(n,{},this);for(const o in a){const c=a[o];s[o]!==void 0&&Ct(c)&&c.set(s[o],!1)}}mount(e){this.current=e,c0.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),qb.current||d3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){c0.delete(this.current),this.projection&&this.projection.unmount(),Ii(this.notifyUpdate),Ii(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Tr.has(e),r=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);let m;window.MotionCheckAppearSync&&(m=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),u(),m&&m(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ps){const n=ps[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const u=this.features[e];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<u0.length;i++){const r=u0[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const u="on"+r,m=e[u];m&&(this.propEventSubscriptions[r]=this.on(r,m))}this.prevMotionValues=p3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Fa(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Fw(r)||Lw(r))?r=parseFloat(r):!g3(r)&&Li.test(n)&&(r=Xw(e,n)),this.setBaseTarget(e,Ct(r)?r.get():r)),Ct(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const m=ap(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);m&&(r=m[e])}if(i&&r!==void 0)return r;const u=this.getBaseTargetFromProps(this.props,e);return u!==void 0&&!Ct(u)?u:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new kp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Qb extends v3{constructor(){super(...arguments),this.KeyframeResolver=Kw}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}}function y3(t){return window.getComputedStyle(t)}class x3 extends Qb{constructor(){super(...arguments),this.type="html",this.renderInstance=Vb}readValueFromInstance(e,n){if(Tr.has(n)){const i=vp(n);return i&&i.default||0}else{const i=y3(e),r=(jw(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Cb(e,n)}build(e,n,i){Rp(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Ip(e,n,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ct(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class w3 extends Qb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qe}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Tr.has(n)){const i=vp(n);return i&&i.default||0}return n=zb.has(n)?n:Pp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return Wb(e,n,i)}build(e,n,i){jp(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){Ub(e,n,i,r)}mount(e){this.isSVGTag=Np(e.tagName),super.mount(e)}}const b3=(t,e)=>Dp(t)?new w3(e):new x3(e,{allowProjection:t!==B.Fragment}),S3=h3({...fA,...IM,...SM,...LM},b3),gn=cO(S3);class C3 extends B.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function _3({children:t,isPresent:e}){const n=B.useId(),i=B.useRef(null),r=B.useRef({width:0,height:0,top:0,left:0}),{nonce:u}=B.useContext(Ap);return B.useInsertionEffect(()=>{const{width:m,height:l,top:s,left:h}=r.current;if(e||!i.current||!m||!l)return;i.current.dataset.motionPopId=n;const f=document.createElement("style");return u&&(f.nonce=u),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${l}px !important;
            top: ${s}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),N.jsx(C3,{isPresent:e,childRef:i,sizeRef:r,children:B.cloneElement(t,{ref:i})})}const T3=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:u,mode:m})=>{const l=Lp(k3),s=B.useId(),h=B.useCallback(a=>{l.set(a,!0);for(const o of l.values())if(!o)return;i&&i()},[l,i]),f=B.useMemo(()=>({id:s,initial:e,isPresent:n,custom:r,onExitComplete:h,register:a=>(l.set(a,!1),()=>l.delete(a))}),u?[Math.random(),h]:[n,h]);return B.useMemo(()=>{l.forEach((a,o)=>l.set(o,!1))},[n]),B.useEffect(()=>{!n&&!l.size&&i&&i()},[n]),m==="popLayout"&&(t=N.jsx(_3,{isPresent:n,children:t})),N.jsx(Ac.Provider,{value:f,children:t})};function k3(){return new Map}const To=t=>t.key||"";function f0(t){const e=[];return B.Children.forEach(t,n=>{B.isValidElement(n)&&e.push(n)}),e}const Ic=({children:t,exitBeforeEnter:e,custom:n,initial:i=!0,onExitComplete:r,presenceAffectsLayout:u=!0,mode:m="sync"})=>{const l=B.useMemo(()=>f0(t),[t]),s=l.map(To),h=B.useRef(!0),f=B.useRef(l),a=Lp(()=>new Map),[o,c]=B.useState(l),[d,v]=B.useState(l);Rb(()=>{h.current=!1,f.current=l;for(let y=0;y<d.length;y++){const x=To(d[y]);s.includes(x)?a.delete(x):a.get(x)!==!0&&a.set(x,!1)}},[d,s.length,s.join("-")]);const p=[];if(l!==o){let y=[...l];for(let x=0;x<d.length;x++){const w=d[x],b=To(w);s.includes(b)||(y.splice(x,0,w),p.push(w))}m==="wait"&&p.length&&(y=p),v(f0(y)),c(l);return}const{forceRender:g}=B.useContext(Op);return N.jsx(N.Fragment,{children:d.map(y=>{const x=To(y),w=l===d||s.includes(x),b=()=>{if(a.has(x))a.set(x,!0);else return;let S=!0;a.forEach(_=>{_||(S=!1)}),S&&(g==null||g(),v(f.current),r&&r())};return N.jsx(T3,{isPresent:w,initial:!h.current||i?void 0:!1,custom:w?void 0:n,presenceAffectsLayout:u,mode:m,onExitComplete:w?void 0:b,children:y},x)})})};function xr(t){"@babel/helpers - typeof";return xr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(t)}function P3(t,e){if(xr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(xr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jb(t){var e=P3(t,"string");return xr(e)=="symbol"?e:e+""}function Ks(t,e,n){return(e=Jb(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function me(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h0(Object(n),!0).forEach(function(i){Ks(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function O3(t){if(Array.isArray(t))return t}function E3(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,u,m,l=[],s=!0,h=!1;try{if(u=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=u.call(n)).done)&&(l.push(i.value),l.length!==e);s=!0);}catch(f){h=!0,r=f}finally{try{if(!s&&n.return!=null&&(m=n.return(),Object(m)!==m))return}finally{if(h)throw r}}return l}}function jh(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function Zb(t,e){if(t){if(typeof t=="string")return jh(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jh(t,e):void 0}}function A3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yn(t,e){return O3(t)||E3(t,e)||Zb(t,e)||A3()}function M3(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}function ni(t,e){if(t==null)return{};var n,i,r=M3(t,e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(i=0;i<u.length;i++)n=u[i],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var D3=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function I3(t){var e=t.defaultInputValue,n=e===void 0?"":e,i=t.defaultMenuIsOpen,r=i===void 0?!1:i,u=t.defaultValue,m=u===void 0?null:u,l=t.inputValue,s=t.menuIsOpen,h=t.onChange,f=t.onInputChange,a=t.onMenuClose,o=t.onMenuOpen,c=t.value,d=ni(t,D3),v=B.useState(l!==void 0?l:n),p=Yn(v,2),g=p[0],y=p[1],x=B.useState(s!==void 0?s:r),w=Yn(x,2),b=w[0],S=w[1],_=B.useState(c!==void 0?c:m),C=Yn(_,2),T=C[0],O=C[1],L=B.useCallback(function(U,k){typeof h=="function"&&h(U,k),O(U)},[h]),j=B.useCallback(function(U,k){var E;typeof f=="function"&&(E=f(U,k)),y(E!==void 0?E:U)},[f]),H=B.useCallback(function(){typeof o=="function"&&o(),S(!0)},[o]),F=B.useCallback(function(){typeof a=="function"&&a(),S(!1)},[a]),V=l!==void 0?l:g,I=s!==void 0?s:b,A=c!==void 0?c:T;return me(me({},d),{},{inputValue:V,menuIsOpen:I,onChange:L,onInputChange:j,onMenuClose:F,onMenuOpen:H,value:A})}function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ve.apply(null,arguments)}function L3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d0(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Jb(i.key),i)}}function F3(t,e,n){return e&&d0(t.prototype,e),n&&d0(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nh(t,e){return Nh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Nh(t,e)}function R3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nh(t,e)}function $l(t){return $l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$l(t)}function eS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eS=function(){return!!t})()}function j3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N3(t,e){if(e&&(xr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j3(t)}function B3(t){var e=eS();return function(){var n,i=$l(t);if(e){var r=$l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return N3(this,n)}}function V3(t){if(Array.isArray(t))return jh(t)}function z3(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bp(t){return V3(t)||z3(t)||Zb(t)||U3()}var H3=!1;function W3(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function $3(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var G3=function(){function t(n){var i=this;this._insertTag=function(r){var u;i.tags.length===0?i.insertionPoint?u=i.insertionPoint.nextSibling:i.prepend?u=i.container.firstChild:u=i.before:u=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,u),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!H3:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($3(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var u=W3(r);try{u.insertRule(i,u.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var r;return(r=i.parentNode)==null?void 0:r.removeChild(i)}),this.tags=[],this.ctr=0},t}(),wt="-ms-",Gl="-moz-",ke="-webkit-",tS="comm",Vp="rule",zp="decl",Y3="@import",nS="@keyframes",X3="@layer",K3=Math.abs,Lc=String.fromCharCode,q3=Object.assign;function Q3(t,e){return dt(t,0)^45?(((e<<2^dt(t,0))<<2^dt(t,1))<<2^dt(t,2))<<2^dt(t,3):0}function iS(t){return t.trim()}function J3(t,e){return(t=e.exec(t))?t[0]:t}function Pe(t,e,n){return t.replace(e,n)}function Bh(t,e){return t.indexOf(e)}function dt(t,e){return t.charCodeAt(e)|0}function Ra(t,e,n){return t.slice(e,n)}function _n(t){return t.length}function Up(t){return t.length}function ko(t,e){return e.push(t),t}function Z3(t,e){return t.map(e).join("")}var Fc=1,ms=1,rS=0,Bt=0,et=0,Cs="";function Rc(t,e,n,i,r,u,m){return{value:t,root:e,parent:n,type:i,props:r,children:u,line:Fc,column:ms,length:m,return:""}}function Bs(t,e){return q3(Rc("",null,null,"",null,null,0),t,{length:-t.length},e)}function eD(){return et}function tD(){return et=Bt>0?dt(Cs,--Bt):0,ms--,et===10&&(ms=1,Fc--),et}function Gt(){return et=Bt<rS?dt(Cs,Bt++):0,ms++,et===10&&(ms=1,Fc++),et}function Dn(){return dt(Cs,Bt)}function qo(){return Bt}function Ka(t,e){return Ra(Cs,t,e)}function ja(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sS(t){return Fc=ms=1,rS=_n(Cs=t),Bt=0,[]}function aS(t){return Cs="",t}function Qo(t){return iS(Ka(Bt-1,Vh(t===91?t+2:t===40?t+1:t)))}function nD(t){for(;(et=Dn())&&et<33;)Gt();return ja(t)>2||ja(et)>3?"":" "}function iD(t,e){for(;--e&&Gt()&&!(et<48||et>102||et>57&&et<65||et>70&&et<97););return Ka(t,qo()+(e<6&&Dn()==32&&Gt()==32))}function Vh(t){for(;Gt();)switch(et){case t:return Bt;case 34:case 39:t!==34&&t!==39&&Vh(et);break;case 40:t===41&&Vh(t);break;case 92:Gt();break}return Bt}function rD(t,e){for(;Gt()&&t+et!==57;)if(t+et===84&&Dn()===47)break;return"/*"+Ka(e,Bt-1)+"*"+Lc(t===47?t:Gt())}function sD(t){for(;!ja(Dn());)Gt();return Ka(t,Bt)}function aD(t){return aS(Jo("",null,null,null,[""],t=sS(t),0,[0],t))}function Jo(t,e,n,i,r,u,m,l,s){for(var h=0,f=0,a=m,o=0,c=0,d=0,v=1,p=1,g=1,y=0,x="",w=r,b=u,S=i,_=x;p;)switch(d=y,y=Gt()){case 40:if(d!=108&&dt(_,a-1)==58){Bh(_+=Pe(Qo(y),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:_+=Qo(y);break;case 9:case 10:case 13:case 32:_+=nD(d);break;case 92:_+=iD(qo()-1,7);continue;case 47:switch(Dn()){case 42:case 47:ko(oD(rD(Gt(),qo()),e,n),s);break;default:_+="/"}break;case 123*v:l[h++]=_n(_)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:p=0;case 59+f:g==-1&&(_=Pe(_,/\f/g,"")),c>0&&_n(_)-a&&ko(c>32?m0(_+";",i,n,a-1):m0(Pe(_," ","")+";",i,n,a-2),s);break;case 59:_+=";";default:if(ko(S=p0(_,e,n,h,f,r,l,x,w=[],b=[],a),u),y===123)if(f===0)Jo(_,e,S,S,w,u,a,l,b);else switch(o===99&&dt(_,3)===110?100:o){case 100:case 108:case 109:case 115:Jo(t,S,S,i&&ko(p0(t,S,S,0,0,r,l,x,r,w=[],a),b),r,b,a,l,i?w:b);break;default:Jo(_,S,S,S,[""],b,0,l,b)}}h=f=c=0,v=g=1,x=_="",a=m;break;case 58:a=1+_n(_),c=d;default:if(v<1){if(y==123)--v;else if(y==125&&v++==0&&tD()==125)continue}switch(_+=Lc(y),y*v){case 38:g=f>0?1:(_+="\f",-1);break;case 44:l[h++]=(_n(_)-1)*g,g=1;break;case 64:Dn()===45&&(_+=Qo(Gt())),o=Dn(),f=a=_n(x=_+=sD(qo())),y++;break;case 45:d===45&&_n(_)==2&&(v=0)}}return u}function p0(t,e,n,i,r,u,m,l,s,h,f){for(var a=r-1,o=r===0?u:[""],c=Up(o),d=0,v=0,p=0;d<i;++d)for(var g=0,y=Ra(t,a+1,a=K3(v=m[d])),x=t;g<c;++g)(x=iS(v>0?o[g]+" "+y:Pe(y,/&\f/g,o[g])))&&(s[p++]=x);return Rc(t,e,n,r===0?Vp:l,s,h,f)}function oD(t,e,n){return Rc(t,e,n,tS,Lc(eD()),Ra(t,2,-2),0)}function m0(t,e,n,i){return Rc(t,e,n,zp,Ra(t,0,i),Ra(t,i+1,-1),i)}function ns(t,e){for(var n="",i=Up(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function lD(t,e,n,i){switch(t.type){case X3:if(t.children.length)break;case Y3:case zp:return t.return=t.return||t.value;case tS:return"";case nS:return t.return=t.value+"{"+ns(t.children,i)+"}";case Vp:t.value=t.props.join(",")}return _n(n=ns(t.children,i))?t.return=t.value+"{"+n+"}":""}function cD(t){var e=Up(t);return function(n,i,r,u){for(var m="",l=0;l<e;l++)m+=t[l](n,i,r,u)||"";return m}}function uD(t){return function(e){e.root||(e=e.return)&&t(e)}}function fD(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var hD=function(e,n,i){for(var r=0,u=0;r=u,u=Dn(),r===38&&u===12&&(n[i]=1),!ja(u);)Gt();return Ka(e,Bt)},dD=function(e,n){var i=-1,r=44;do switch(ja(r)){case 0:r===38&&Dn()===12&&(n[i]=1),e[i]+=hD(Bt-1,n,i);break;case 2:e[i]+=Qo(r);break;case 4:if(r===44){e[++i]=Dn()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=Lc(r)}while(r=Gt());return e},pD=function(e,n){return aS(dD(sS(e),n))},g0=new WeakMap,mD=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!g0.get(i))&&!r){g0.set(e,!0);for(var u=[],m=pD(n,u),l=i.props,s=0,h=0;s<m.length;s++)for(var f=0;f<l.length;f++,h++)e.props[h]=u[s]?m[s].replace(/&\f/g,l[f]):l[f]+" "+m[s]}}},gD=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function oS(t,e){switch(Q3(t,e)){case 5103:return ke+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ke+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return ke+t+Gl+t+wt+t+t;case 6828:case 4268:return ke+t+wt+t+t;case 6165:return ke+t+wt+"flex-"+t+t;case 5187:return ke+t+Pe(t,/(\w+).+(:[^]+)/,ke+"box-$1$2"+wt+"flex-$1$2")+t;case 5443:return ke+t+wt+"flex-item-"+Pe(t,/flex-|-self/,"")+t;case 4675:return ke+t+wt+"flex-line-pack"+Pe(t,/align-content|flex-|-self/,"")+t;case 5548:return ke+t+wt+Pe(t,"shrink","negative")+t;case 5292:return ke+t+wt+Pe(t,"basis","preferred-size")+t;case 6060:return ke+"box-"+Pe(t,"-grow","")+ke+t+wt+Pe(t,"grow","positive")+t;case 4554:return ke+Pe(t,/([^-])(transform)/g,"$1"+ke+"$2")+t;case 6187:return Pe(Pe(Pe(t,/(zoom-|grab)/,ke+"$1"),/(image-set)/,ke+"$1"),t,"")+t;case 5495:case 3959:return Pe(t,/(image-set\([^]*)/,ke+"$1$`$1");case 4968:return Pe(Pe(t,/(.+:)(flex-)?(.*)/,ke+"box-pack:$3"+wt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ke+t+t;case 4095:case 3583:case 4068:case 2532:return Pe(t,/(.+)-inline(.+)/,ke+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_n(t)-1-e>6)switch(dt(t,e+1)){case 109:if(dt(t,e+4)!==45)break;case 102:return Pe(t,/(.+:)(.+)-([^]+)/,"$1"+ke+"$2-$3$1"+Gl+(dt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~Bh(t,"stretch")?oS(Pe(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(dt(t,e+1)!==115)break;case 6444:switch(dt(t,_n(t)-3-(~Bh(t,"!important")&&10))){case 107:return Pe(t,":",":"+ke)+t;case 101:return Pe(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ke+(dt(t,14)===45?"inline-":"")+"box$3$1"+ke+"$2$3$1"+wt+"$2box$3")+t}break;case 5936:switch(dt(t,e+11)){case 114:return ke+t+wt+Pe(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return ke+t+wt+Pe(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return ke+t+wt+Pe(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return ke+t+wt+t+t}return t}var vD=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case zp:e.return=oS(e.value,e.length);break;case nS:return ns([Bs(e,{value:Pe(e.value,"@","@"+ke)})],r);case Vp:if(e.length)return Z3(e.props,function(u){switch(J3(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ns([Bs(e,{props:[Pe(u,/:(read-\w+)/,":"+Gl+"$1")]})],r);case"::placeholder":return ns([Bs(e,{props:[Pe(u,/:(plac\w+)/,":"+ke+"input-$1")]}),Bs(e,{props:[Pe(u,/:(plac\w+)/,":"+Gl+"$1")]}),Bs(e,{props:[Pe(u,/:(plac\w+)/,wt+"input-$1")]})],r)}return""})}},yD=[vD],xD=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(v){var p=v.getAttribute("data-emotion");p.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var r=e.stylisPlugins||yD,u={},m,l=[];m=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var p=v.getAttribute("data-emotion").split(" "),g=1;g<p.length;g++)u[p[g]]=!0;l.push(v)});var s,h=[mD,gD];{var f,a=[lD,uD(function(v){f.insert(v)})],o=cD(h.concat(r,a)),c=function(p){return ns(aD(p),o)};s=function(p,g,y,x){f=y,c(p?p+"{"+g.styles+"}":g.styles),x&&(d.inserted[g.name]=!0)}}var d={key:n,sheet:new G3({key:n,container:m,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:u,registered:{},insert:s};return d.sheet.hydrate(l),d},lS={exports:{}},De={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ut=typeof Symbol=="function"&&Symbol.for,Hp=ut?Symbol.for("react.element"):60103,Wp=ut?Symbol.for("react.portal"):60106,jc=ut?Symbol.for("react.fragment"):60107,Nc=ut?Symbol.for("react.strict_mode"):60108,Bc=ut?Symbol.for("react.profiler"):60114,Vc=ut?Symbol.for("react.provider"):60109,zc=ut?Symbol.for("react.context"):60110,$p=ut?Symbol.for("react.async_mode"):60111,Uc=ut?Symbol.for("react.concurrent_mode"):60111,Hc=ut?Symbol.for("react.forward_ref"):60112,Wc=ut?Symbol.for("react.suspense"):60113,wD=ut?Symbol.for("react.suspense_list"):60120,$c=ut?Symbol.for("react.memo"):60115,Gc=ut?Symbol.for("react.lazy"):60116,bD=ut?Symbol.for("react.block"):60121,SD=ut?Symbol.for("react.fundamental"):60117,CD=ut?Symbol.for("react.responder"):60118,_D=ut?Symbol.for("react.scope"):60119;function Qt(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Hp:switch(t=t.type,t){case $p:case Uc:case jc:case Bc:case Nc:case Wc:return t;default:switch(t=t&&t.$$typeof,t){case zc:case Hc:case Gc:case $c:case Vc:return t;default:return e}}case Wp:return e}}}function cS(t){return Qt(t)===Uc}De.AsyncMode=$p;De.ConcurrentMode=Uc;De.ContextConsumer=zc;De.ContextProvider=Vc;De.Element=Hp;De.ForwardRef=Hc;De.Fragment=jc;De.Lazy=Gc;De.Memo=$c;De.Portal=Wp;De.Profiler=Bc;De.StrictMode=Nc;De.Suspense=Wc;De.isAsyncMode=function(t){return cS(t)||Qt(t)===$p};De.isConcurrentMode=cS;De.isContextConsumer=function(t){return Qt(t)===zc};De.isContextProvider=function(t){return Qt(t)===Vc};De.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hp};De.isForwardRef=function(t){return Qt(t)===Hc};De.isFragment=function(t){return Qt(t)===jc};De.isLazy=function(t){return Qt(t)===Gc};De.isMemo=function(t){return Qt(t)===$c};De.isPortal=function(t){return Qt(t)===Wp};De.isProfiler=function(t){return Qt(t)===Bc};De.isStrictMode=function(t){return Qt(t)===Nc};De.isSuspense=function(t){return Qt(t)===Wc};De.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===jc||t===Uc||t===Bc||t===Nc||t===Wc||t===wD||typeof t=="object"&&t!==null&&(t.$$typeof===Gc||t.$$typeof===$c||t.$$typeof===Vc||t.$$typeof===zc||t.$$typeof===Hc||t.$$typeof===SD||t.$$typeof===CD||t.$$typeof===_D||t.$$typeof===bD)};De.typeOf=Qt;lS.exports=De;var TD=lS.exports,uS=TD,kD={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},PD={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},fS={};fS[uS.ForwardRef]=kD;fS[uS.Memo]=PD;var OD=!0;function ED(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):r&&(i+=r+" ")}),i}var hS=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||OD===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},AD=function(e,n,i){hS(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var u=n;do e.insert(n===u?"."+r:"",u,e.sheet,!0),u=u.next;while(u!==void 0)}};function MD(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var DD={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ID=!1,LD=/[A-Z]|^ms/g,FD=/_EMO_([^_]+?)_([^]*?)_EMO_/g,dS=function(e){return e.charCodeAt(1)===45},v0=function(e){return e!=null&&typeof e!="boolean"},Qu=fD(function(t){return dS(t)?t:t.replace(LD,"-$&").toLowerCase()}),y0=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(FD,function(i,r,u){return Tn={name:r,styles:u,next:Tn},r})}return DD[e]!==1&&!dS(e)&&typeof n=="number"&&n!==0?n+"px":n},RD="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Na(t,e,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return Tn={name:r.name,styles:r.styles,next:Tn},r.name;var u=n;if(u.styles!==void 0){var m=u.next;if(m!==void 0)for(;m!==void 0;)Tn={name:m.name,styles:m.styles,next:Tn},m=m.next;var l=u.styles+";";return l}return jD(t,e,n)}case"function":{if(t!==void 0){var s=Tn,h=n(t);return Tn=s,Na(t,e,h)}break}}var f=n;return f}function jD(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=Na(t,e,n[r])+";";else for(var u in n){var m=n[u];if(typeof m!="object"){var l=m;v0(l)&&(i+=Qu(u)+":"+y0(u,l)+";")}else{if(u==="NO_COMPONENT_SELECTOR"&&ID)throw new Error(RD);if(Array.isArray(m)&&typeof m[0]=="string"&&e==null)for(var s=0;s<m.length;s++)v0(m[s])&&(i+=Qu(u)+":"+y0(u,m[s])+";");else{var h=Na(t,e,m);switch(u){case"animation":case"animationName":{i+=Qu(u)+":"+h+";";break}default:i+=u+"{"+h+"}"}}}}return i}var x0=/label:\s*([^\s;{]+)\s*(;|$)/g,Tn;function pS(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,r="";Tn=void 0;var u=t[0];if(u==null||u.raw===void 0)i=!1,r+=Na(n,e,u);else{var m=u;r+=m[0]}for(var l=1;l<t.length;l++)if(r+=Na(n,e,t[l]),i){var s=u;r+=s[l]}x0.lastIndex=0;for(var h="",f;(f=x0.exec(r))!==null;)h+="-"+f[1];var a=MD(r)+h;return{name:a,styles:r,next:Tn}}var ND=function(e){return e()},BD=am.useInsertionEffect?am.useInsertionEffect:!1,VD=BD||ND,zD=!1,mS=B.createContext(typeof HTMLElement<"u"?xD({key:"css"}):null);mS.Provider;var UD=function(e){return B.forwardRef(function(n,i){var r=B.useContext(mS);return e(n,r,i)})},HD=B.createContext({}),Gp={}.hasOwnProperty,zh="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",WD=function(e,n){var i={};for(var r in n)Gp.call(n,r)&&(i[r]=n[r]);return i[zh]=e,i},$D=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return hS(n,i,r),VD(function(){return AD(n,i,r)}),null},GD=UD(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=t[zh],u=[i],m="";typeof t.className=="string"?m=ED(e.registered,u,t.className):t.className!=null&&(m=t.className+" ");var l=pS(u,void 0,B.useContext(HD));m+=e.key+"-"+l.name;var s={};for(var h in t)Gp.call(t,h)&&h!=="css"&&h!==zh&&!zD&&(s[h]=t[h]);return s.className=m,n&&(s.ref=n),B.createElement(B.Fragment,null,B.createElement($D,{cache:e,serialized:l,isStringTag:typeof r=="string"}),B.createElement(r,s))}),YD=GD,pe=function(e,n){var i=arguments;if(n==null||!Gp.call(n,"css"))return B.createElement.apply(void 0,i);var r=i.length,u=new Array(r);u[0]=YD,u[1]=WD(e,n);for(var m=2;m<r;m++)u[m]=i[m];return B.createElement.apply(null,u)};function Yp(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return pS(e)}var XD=function(){var e=Yp.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function KD(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const qD=Math.min,QD=Math.max,Yl=Math.round,Po=Math.floor,Xl=t=>({x:t,y:t});function JD(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function Yc(){return typeof window<"u"}function gS(t){return yS(t)?(t.nodeName||"").toLowerCase():"#document"}function ei(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function vS(t){var e;return(e=(yS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function yS(t){return Yc()?t instanceof Node||t instanceof ei(t).Node:!1}function ZD(t){return Yc()?t instanceof Element||t instanceof ei(t).Element:!1}function Xp(t){return Yc()?t instanceof HTMLElement||t instanceof ei(t).HTMLElement:!1}function w0(t){return!Yc()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ei(t).ShadowRoot}function xS(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Kp(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function e4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function t4(t){return["html","body","#document"].includes(gS(t))}function Kp(t){return ei(t).getComputedStyle(t)}function n4(t){if(gS(t)==="html")return t;const e=t.assignedSlot||t.parentNode||w0(t)&&t.host||vS(t);return w0(e)?e.host:e}function wS(t){const e=n4(t);return t4(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xp(e)&&xS(e)?e:wS(e)}function Kl(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=wS(t),u=r===((i=t.ownerDocument)==null?void 0:i.body),m=ei(r);if(u){const l=Uh(m);return e.concat(m,m.visualViewport||[],xS(r)?r:[],l&&n?Kl(l):[])}return e.concat(r,Kl(r,[],n))}function Uh(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function i4(t){const e=Kp(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Xp(t),u=r?t.offsetWidth:n,m=r?t.offsetHeight:i,l=Yl(n)!==u||Yl(i)!==m;return l&&(n=u,i=m),{width:n,height:i,$:l}}function qp(t){return ZD(t)?t:t.contextElement}function b0(t){const e=qp(t);if(!Xp(e))return Xl(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:u}=i4(e);let m=(u?Yl(n.width):n.width)/i,l=(u?Yl(n.height):n.height)/r;return(!m||!Number.isFinite(m))&&(m=1),(!l||!Number.isFinite(l))&&(l=1),{x:m,y:l}}const r4=Xl(0);function s4(t){const e=ei(t);return!e4()||!e.visualViewport?r4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function a4(t,e,n){return!1}function S0(t,e,n,i){e===void 0&&(e=!1);const r=t.getBoundingClientRect(),u=qp(t);let m=Xl(1);e&&(m=b0(t));const l=a4()?s4(u):Xl(0);let s=(r.left+l.x)/m.x,h=(r.top+l.y)/m.y,f=r.width/m.x,a=r.height/m.y;if(u){const o=ei(u),c=i;let d=o,v=Uh(d);for(;v&&i&&c!==d;){const p=b0(v),g=v.getBoundingClientRect(),y=Kp(v),x=g.left+(v.clientLeft+parseFloat(y.paddingLeft))*p.x,w=g.top+(v.clientTop+parseFloat(y.paddingTop))*p.y;s*=p.x,h*=p.y,f*=p.x,a*=p.y,s+=x,h+=w,d=ei(v),v=Uh(d)}}return JD({width:f,height:a,x:s,y:h})}function o4(t,e){let n=null,i;const r=vS(t);function u(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function m(l,s){l===void 0&&(l=!1),s===void 0&&(s=1),u();const{left:h,top:f,width:a,height:o}=t.getBoundingClientRect();if(l||e(),!a||!o)return;const c=Po(f),d=Po(r.clientWidth-(h+a)),v=Po(r.clientHeight-(f+o)),p=Po(h),y={rootMargin:-c+"px "+-d+"px "+-v+"px "+-p+"px",threshold:QD(0,qD(1,s))||1};let x=!0;function w(b){const S=b[0].intersectionRatio;if(S!==s){if(!x)return m();S?m(!1,S):i=setTimeout(()=>{m(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(w,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(t)}return m(!0),u}function l4(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:u=!0,elementResize:m=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:s=!1}=i,h=qp(t),f=r||u?[...h?Kl(h):[],...Kl(e)]:[];f.forEach(g=>{r&&g.addEventListener("scroll",n,{passive:!0}),u&&g.addEventListener("resize",n)});const a=h&&l?o4(h,n):null;let o=-1,c=null;m&&(c=new ResizeObserver(g=>{let[y]=g;y&&y.target===h&&c&&(c.unobserve(e),cancelAnimationFrame(o),o=requestAnimationFrame(()=>{var x;(x=c)==null||x.observe(e)})),n()}),h&&!s&&c.observe(h),c.observe(e));let d,v=s?S0(t):null;s&&p();function p(){const g=S0(t);v&&(g.x!==v.x||g.y!==v.y||g.width!==v.width||g.height!==v.height)&&n(),v=g,d=requestAnimationFrame(p)}return n(),()=>{var g;f.forEach(y=>{r&&y.removeEventListener("scroll",n),u&&y.removeEventListener("resize",n)}),a==null||a(),(g=c)==null||g.disconnect(),c=null,s&&cancelAnimationFrame(d)}}var Hh=B.useLayoutEffect,c4=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],ql=function(){};function u4(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function f4(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var u=[].concat(i);if(e&&t)for(var m in e)e.hasOwnProperty(m)&&e[m]&&u.push("".concat(u4(t,m)));return u.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var C0=function(e){return w4(e)?e.filter(Boolean):xr(e)==="object"&&e!==null?[e]:[]},bS=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=ni(e,c4);return me({},n)},Xe=function(e,n,i){var r=e.cx,u=e.getStyles,m=e.getClassNames,l=e.className;return{css:u(n,e),className:r(i??{},m(n,e),l)}};function Xc(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function h4(t){return Xc(t)?window.innerHeight:t.clientHeight}function SS(t){return Xc(t)?window.pageYOffset:t.scrollTop}function Ql(t,e){if(Xc(t)){window.scrollTo(0,e);return}t.scrollTop=e}function d4(t){var e=getComputedStyle(t),n=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var r=t;r=r.parentElement;)if(e=getComputedStyle(r),!(n&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return r;return document.documentElement}function p4(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function Oo(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ql,r=SS(t),u=e-r,m=10,l=0;function s(){l+=m;var h=p4(l,r,u,n);Ql(t,h),l<n?window.requestAnimationFrame(s):i(t)}s()}function _0(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=e.offsetHeight/3;i.bottom+r>n.bottom?Ql(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+r,t.scrollHeight)):i.top-r<n.top&&Ql(t,Math.max(e.offsetTop-r,0))}function m4(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function T0(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function g4(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var CS=!1,v4={get passive(){return CS=!0}},Eo=typeof window<"u"?window:{};Eo.addEventListener&&Eo.removeEventListener&&(Eo.addEventListener("p",ql,v4),Eo.removeEventListener("p",ql,!1));var y4=CS;function x4(t){return t!=null}function w4(t){return Array.isArray(t)}function Ao(t,e,n){return t?e:n}var b4=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var u=Object.entries(e).filter(function(m){var l=Yn(m,1),s=l[0];return!i.includes(s)});return u.reduce(function(m,l){var s=Yn(l,2),h=s[0],f=s[1];return m[h]=f,m},{})},S4=["children","innerProps"],C4=["children","innerProps"];function _4(t){var e=t.maxHeight,n=t.menuEl,i=t.minHeight,r=t.placement,u=t.shouldScroll,m=t.isFixedPosition,l=t.controlHeight,s=d4(n),h={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return h;var f=s.getBoundingClientRect(),a=f.height,o=n.getBoundingClientRect(),c=o.bottom,d=o.height,v=o.top,p=n.offsetParent.getBoundingClientRect(),g=p.top,y=m?window.innerHeight:h4(s),x=SS(s),w=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),S=g-b,_=y-v,C=S+x,T=a-x-v,O=c-y+x+w,L=x+v-b,j=160;switch(r){case"auto":case"bottom":if(_>=d)return{placement:"bottom",maxHeight:e};if(T>=d&&!m)return u&&Oo(s,O,j),{placement:"bottom",maxHeight:e};if(!m&&T>=i||m&&_>=i){u&&Oo(s,O,j);var H=m?_-w:T-w;return{placement:"bottom",maxHeight:H}}if(r==="auto"||m){var F=e,V=m?S:C;return V>=i&&(F=Math.min(V-w-l,e)),{placement:"top",maxHeight:F}}if(r==="bottom")return u&&Ql(s,O),{placement:"bottom",maxHeight:e};break;case"top":if(S>=d)return{placement:"top",maxHeight:e};if(C>=d&&!m)return u&&Oo(s,L,j),{placement:"top",maxHeight:e};if(!m&&C>=i||m&&S>=i){var I=e;return(!m&&C>=i||m&&S>=i)&&(I=m?S-b:C-b),u&&Oo(s,L,j),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(r,'".'))}return h}function T4(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var _S=function(e){return e==="auto"?"bottom":e},k4=function(e,n){var i,r=e.placement,u=e.theme,m=u.borderRadius,l=u.spacing,s=u.colors;return me((i={label:"menu"},Ks(i,T4(r),"100%"),Ks(i,"position","absolute"),Ks(i,"width","100%"),Ks(i,"zIndex",1),i),n?{}:{backgroundColor:s.neutral0,borderRadius:m,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},TS=B.createContext(null),P4=function(e){var n=e.children,i=e.minMenuHeight,r=e.maxMenuHeight,u=e.menuPlacement,m=e.menuPosition,l=e.menuShouldScrollIntoView,s=e.theme,h=B.useContext(TS)||{},f=h.setPortalPlacement,a=B.useRef(null),o=B.useState(r),c=Yn(o,2),d=c[0],v=c[1],p=B.useState(null),g=Yn(p,2),y=g[0],x=g[1],w=s.spacing.controlHeight;return Hh(function(){var b=a.current;if(b){var S=m==="fixed",_=l&&!S,C=_4({maxHeight:r,menuEl:b,minHeight:i,placement:u,shouldScroll:_,isFixedPosition:S,controlHeight:w});v(C.maxHeight),x(C.placement),f==null||f(C.placement)}},[r,u,m,l,i,f,w]),n({ref:a,placerProps:me(me({},e),{},{placement:y||_S(u),maxHeight:d})})},O4=function(e){var n=e.children,i=e.innerRef,r=e.innerProps;return pe("div",ve({},Xe(e,"menu",{menu:!0}),{ref:i},r),n)},E4=O4,A4=function(e,n){var i=e.maxHeight,r=e.theme.spacing.baseUnit;return me({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:r,paddingTop:r})},M4=function(e){var n=e.children,i=e.innerProps,r=e.innerRef,u=e.isMulti;return pe("div",ve({},Xe(e,"menuList",{"menu-list":!0,"menu-list--is-multi":u}),{ref:r},i),n)},kS=function(e,n){var i=e.theme,r=i.spacing.baseUnit,u=i.colors;return me({textAlign:"center"},n?{}:{color:u.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},D4=kS,I4=kS,L4=function(e){var n=e.children,i=n===void 0?"No options":n,r=e.innerProps,u=ni(e,S4);return pe("div",ve({},Xe(me(me({},u),{},{children:i,innerProps:r}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),r),i)},F4=function(e){var n=e.children,i=n===void 0?"Loading...":n,r=e.innerProps,u=ni(e,C4);return pe("div",ve({},Xe(me(me({},u),{},{children:i,innerProps:r}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),r),i)},R4=function(e){var n=e.rect,i=e.offset,r=e.position;return{left:n.left,position:r,top:i,width:n.width,zIndex:1}},j4=function(e){var n=e.appendTo,i=e.children,r=e.controlElement,u=e.innerProps,m=e.menuPlacement,l=e.menuPosition,s=B.useRef(null),h=B.useRef(null),f=B.useState(_S(m)),a=Yn(f,2),o=a[0],c=a[1],d=B.useMemo(function(){return{setPortalPlacement:c}},[]),v=B.useState(null),p=Yn(v,2),g=p[0],y=p[1],x=B.useCallback(function(){if(r){var _=m4(r),C=l==="fixed"?0:window.pageYOffset,T=_[o]+C;(T!==(g==null?void 0:g.offset)||_.left!==(g==null?void 0:g.rect.left)||_.width!==(g==null?void 0:g.rect.width))&&y({offset:T,rect:_})}},[r,l,o,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);Hh(function(){x()},[x]);var w=B.useCallback(function(){typeof h.current=="function"&&(h.current(),h.current=null),r&&s.current&&(h.current=l4(r,s.current,x,{elementResize:"ResizeObserver"in window}))},[r,x]);Hh(function(){w()},[w]);var b=B.useCallback(function(_){s.current=_,w()},[w]);if(!n&&l!=="fixed"||!g)return null;var S=pe("div",ve({ref:b},Xe(me(me({},e),{},{offset:g.offset,position:l,rect:g.rect}),"menuPortal",{"menu-portal":!0}),u),i);return pe(TS.Provider,{value:d},n?lx.createPortal(S,n):S)},N4=function(e){var n=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},B4=function(e){var n=e.children,i=e.innerProps,r=e.isDisabled,u=e.isRtl;return pe("div",ve({},Xe(e,"container",{"--is-disabled":r,"--is-rtl":u}),i),n)},V4=function(e,n){var i=e.theme.spacing,r=e.isMulti,u=e.hasValue,m=e.selectProps.controlShouldRenderValue;return me({alignItems:"center",display:r&&u&&m?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},z4=function(e){var n=e.children,i=e.innerProps,r=e.isMulti,u=e.hasValue;return pe("div",ve({},Xe(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":u}),i),n)},U4=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},H4=function(e){var n=e.children,i=e.innerProps;return pe("div",ve({},Xe(e,"indicatorsContainer",{indicators:!0}),i),n)},k0,W4=["size"],$4=["innerProps","isRtl","size"],G4={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},PS=function(e){var n=e.size,i=ni(e,W4);return pe("svg",ve({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:G4},i))},Qp=function(e){return pe(PS,ve({size:20},e),pe("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},OS=function(e){return pe(PS,ve({size:20},e),pe("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},ES=function(e,n){var i=e.isFocused,r=e.theme,u=r.spacing.baseUnit,m=r.colors;return me({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?m.neutral60:m.neutral20,padding:u*2,":hover":{color:i?m.neutral80:m.neutral40}})},Y4=ES,X4=function(e){var n=e.children,i=e.innerProps;return pe("div",ve({},Xe(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||pe(OS,null))},K4=ES,q4=function(e){var n=e.children,i=e.innerProps;return pe("div",ve({},Xe(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||pe(Qp,null))},Q4=function(e,n){var i=e.isDisabled,r=e.theme,u=r.spacing.baseUnit,m=r.colors;return me({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?m.neutral10:m.neutral20,marginBottom:u*2,marginTop:u*2})},J4=function(e){var n=e.innerProps;return pe("span",ve({},n,Xe(e,"indicatorSeparator",{"indicator-separator":!0})))},Z4=XD(k0||(k0=KD([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),e5=function(e,n){var i=e.isFocused,r=e.size,u=e.theme,m=u.colors,l=u.spacing.baseUnit;return me({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?m.neutral60:m.neutral20,padding:l*2})},Ju=function(e){var n=e.delay,i=e.offset;return pe("span",{css:Yp({animation:"".concat(Z4," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},t5=function(e){var n=e.innerProps,i=e.isRtl,r=e.size,u=r===void 0?4:r,m=ni(e,$4);return pe("div",ve({},Xe(me(me({},m),{},{innerProps:n,isRtl:i,size:u}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),pe(Ju,{delay:0,offset:i}),pe(Ju,{delay:160,offset:!0}),pe(Ju,{delay:320,offset:!i}))},n5=function(e,n){var i=e.isDisabled,r=e.isFocused,u=e.theme,m=u.colors,l=u.borderRadius,s=u.spacing;return me({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:s.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?m.neutral5:m.neutral0,borderColor:i?m.neutral10:r?m.primary:m.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(m.primary):void 0,"&:hover":{borderColor:r?m.primary:m.neutral30}})},i5=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,u=e.innerRef,m=e.innerProps,l=e.menuIsOpen;return pe("div",ve({ref:u},Xe(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":r,"control--menu-is-open":l}),m,{"aria-disabled":i||void 0}),n)},r5=i5,s5=["data"],a5=function(e,n){var i=e.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},o5=function(e){var n=e.children,i=e.cx,r=e.getStyles,u=e.getClassNames,m=e.Heading,l=e.headingProps,s=e.innerProps,h=e.label,f=e.theme,a=e.selectProps;return pe("div",ve({},Xe(e,"group",{group:!0}),s),pe(m,ve({},l,{selectProps:a,theme:f,getStyles:r,getClassNames:u,cx:i}),h),pe("div",null,n))},l5=function(e,n){var i=e.theme,r=i.colors,u=i.spacing;return me({label:"group",cursor:"default",display:"block"},n?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:u.baseUnit*3,paddingRight:u.baseUnit*3,textTransform:"uppercase"})},c5=function(e){var n=bS(e);n.data;var i=ni(n,s5);return pe("div",ve({},Xe(e,"groupHeading",{"group-heading":!0}),i))},u5=o5,f5=["innerRef","isDisabled","isHidden","inputClassName"],h5=function(e,n){var i=e.isDisabled,r=e.value,u=e.theme,m=u.spacing,l=u.colors;return me(me({visibility:i?"hidden":"visible",transform:r?"translateZ(0)":""},d5),n?{}:{margin:m.baseUnit/2,paddingBottom:m.baseUnit/2,paddingTop:m.baseUnit/2,color:l.neutral80})},AS={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},d5={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":me({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},AS)},p5=function(e){return me({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},AS)},m5=function(e){var n=e.cx,i=e.value,r=bS(e),u=r.innerRef,m=r.isDisabled,l=r.isHidden,s=r.inputClassName,h=ni(r,f5);return pe("div",ve({},Xe(e,"input",{"input-container":!0}),{"data-value":i||""}),pe("input",ve({className:n({input:!0},s),ref:u,style:p5(l),disabled:m},h)))},g5=m5,v5=function(e,n){var i=e.theme,r=i.spacing,u=i.borderRadius,m=i.colors;return me({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:m.neutral10,borderRadius:u/2,margin:r.baseUnit/2})},y5=function(e,n){var i=e.theme,r=i.borderRadius,u=i.colors,m=e.cropWithEllipsis;return me({overflow:"hidden",textOverflow:m||m===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:r/2,color:u.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},x5=function(e,n){var i=e.theme,r=i.spacing,u=i.borderRadius,m=i.colors,l=e.isFocused;return me({alignItems:"center",display:"flex"},n?{}:{borderRadius:u/2,backgroundColor:l?m.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:m.dangerLight,color:m.danger}})},MS=function(e){var n=e.children,i=e.innerProps;return pe("div",i,n)},w5=MS,b5=MS;function S5(t){var e=t.children,n=t.innerProps;return pe("div",ve({role:"button"},n),e||pe(Qp,{size:14}))}var C5=function(e){var n=e.children,i=e.components,r=e.data,u=e.innerProps,m=e.isDisabled,l=e.removeProps,s=e.selectProps,h=i.Container,f=i.Label,a=i.Remove;return pe(h,{data:r,innerProps:me(me({},Xe(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":m})),u),selectProps:s},pe(f,{data:r,innerProps:me({},Xe(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:s},n),pe(a,{data:r,innerProps:me(me({},Xe(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},l),selectProps:s}))},_5=C5,T5=function(e,n){var i=e.isDisabled,r=e.isFocused,u=e.isSelected,m=e.theme,l=m.spacing,s=m.colors;return me({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:u?s.primary:r?s.primary25:"transparent",color:i?s.neutral20:u?s.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:u?s.primary:s.primary50}})},k5=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,u=e.isSelected,m=e.innerRef,l=e.innerProps;return pe("div",ve({},Xe(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":r,"option--is-selected":u}),{ref:m,"aria-disabled":i},l),n)},P5=k5,O5=function(e,n){var i=e.theme,r=i.spacing,u=i.colors;return me({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:u.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},E5=function(e){var n=e.children,i=e.innerProps;return pe("div",ve({},Xe(e,"placeholder",{placeholder:!0}),i),n)},A5=E5,M5=function(e,n){var i=e.isDisabled,r=e.theme,u=r.spacing,m=r.colors;return me({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?m.neutral40:m.neutral80,marginLeft:u.baseUnit/2,marginRight:u.baseUnit/2})},D5=function(e){var n=e.children,i=e.isDisabled,r=e.innerProps;return pe("div",ve({},Xe(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),r),n)},I5=D5,L5={ClearIndicator:q4,Control:r5,DropdownIndicator:X4,DownChevron:OS,CrossIcon:Qp,Group:u5,GroupHeading:c5,IndicatorsContainer:H4,IndicatorSeparator:J4,Input:g5,LoadingIndicator:t5,Menu:E4,MenuList:M4,MenuPortal:j4,LoadingMessage:F4,NoOptionsMessage:L4,MultiValue:_5,MultiValueContainer:w5,MultiValueLabel:b5,MultiValueRemove:S5,Option:P5,Placeholder:A5,SelectContainer:B4,SingleValue:I5,ValueContainer:z4},F5=function(e){return me(me({},L5),e.components)},P0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function R5(t,e){return!!(t===e||P0(t)&&P0(e))}function j5(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!R5(t[n],e[n]))return!1;return!0}function N5(t,e){e===void 0&&(e=j5);var n=null;function i(){for(var r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var m=t.apply(this,r);return n={lastResult:m,lastArgs:r,lastThis:this},m}return i.clear=function(){n=null},i}var B5={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},V5=function(e){return pe("span",ve({css:B5},e))},O0=V5,z5={guidance:function(e){var n=e.isSearchable,i=e.isMulti,r=e.tabSelectsValue,u=e.context,m=e.isInitialFocus;switch(u){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(r?", press Tab to select the option and exit the menu":"",".");case"input":return m?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,i=e.label,r=i===void 0?"":i,u=e.labels,m=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return m?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var n=e.context,i=e.focused,r=e.options,u=e.label,m=u===void 0?"":u,l=e.selectValue,s=e.isDisabled,h=e.isSelected,f=e.isAppleDevice,a=function(v,p){return v&&v.length?"".concat(v.indexOf(p)+1," of ").concat(v.length):""};if(n==="value"&&l)return"value ".concat(m," focused, ").concat(a(l,i),".");if(n==="menu"&&f){var o=s?" disabled":"",c="".concat(h?" selected":"").concat(o);return"".concat(m).concat(c,", ").concat(a(r,i),".")}return""},onFilter:function(e){var n=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},U5=function(e){var n=e.ariaSelection,i=e.focusedOption,r=e.focusedValue,u=e.focusableOptions,m=e.isFocused,l=e.selectValue,s=e.selectProps,h=e.id,f=e.isAppleDevice,a=s.ariaLiveMessages,o=s.getOptionLabel,c=s.inputValue,d=s.isMulti,v=s.isOptionDisabled,p=s.isSearchable,g=s.menuIsOpen,y=s.options,x=s.screenReaderStatus,w=s.tabSelectsValue,b=s.isLoading,S=s["aria-label"],_=s["aria-live"],C=B.useMemo(function(){return me(me({},z5),a||{})},[a]),T=B.useMemo(function(){var V="";if(n&&C.onChange){var I=n.option,A=n.options,U=n.removedValue,k=n.removedValues,E=n.value,R=function(X){return Array.isArray(X)?null:X},D=U||I||R(E),W=D?o(D):"",M=A||k||void 0,P=M?M.map(o):[],z=me({isDisabled:D&&v(D,l),label:W,labels:P},n);V=C.onChange(z)}return V},[n,C,v,l,o]),O=B.useMemo(function(){var V="",I=i||r,A=!!(i&&l&&l.includes(i));if(I&&C.onFocus){var U={focused:I,label:o(I),isDisabled:v(I,l),isSelected:A,options:u,context:I===i?"menu":"value",selectValue:l,isAppleDevice:f};V=C.onFocus(U)}return V},[i,r,o,v,C,u,l,f]),L=B.useMemo(function(){var V="";if(g&&y.length&&!b&&C.onFilter){var I=x({count:u.length});V=C.onFilter({inputValue:c,resultsMessage:I})}return V},[u,c,g,C,y,x,b]),j=(n==null?void 0:n.action)==="initial-input-focus",H=B.useMemo(function(){var V="";if(C.guidance){var I=r?"value":g?"menu":"input";V=C.guidance({"aria-label":S,context:I,isDisabled:i&&v(i,l),isMulti:d,isSearchable:p,tabSelectsValue:w,isInitialFocus:j})}return V},[S,i,r,d,v,p,g,C,l,w,j]),F=pe(B.Fragment,null,pe("span",{id:"aria-selection"},T),pe("span",{id:"aria-focused"},O),pe("span",{id:"aria-results"},L),pe("span",{id:"aria-guidance"},H));return pe(B.Fragment,null,pe(O0,{id:h},j&&F),pe(O0,{"aria-live":_,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},m&&!j&&F))},H5=U5,Wh=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],W5=new RegExp("["+Wh.map(function(t){return t.letters}).join("")+"]","g"),DS={};for(var Zu=0;Zu<Wh.length;Zu++)for(var ef=Wh[Zu],tf=0;tf<ef.letters.length;tf++)DS[ef.letters[tf]]=ef.base;var IS=function(e){return e.replace(W5,function(n){return DS[n]})},$5=N5(IS),E0=function(e){return e.replace(/^\s+|\s+$/g,"")},G5=function(e){return"".concat(e.label," ").concat(e.value)},Y5=function(e){return function(n,i){if(n.data.__isNew__)return!0;var r=me({ignoreCase:!0,ignoreAccents:!0,stringify:G5,trim:!0,matchFrom:"any"},e),u=r.ignoreCase,m=r.ignoreAccents,l=r.stringify,s=r.trim,h=r.matchFrom,f=s?E0(i):i,a=s?E0(l(n)):l(n);return u&&(f=f.toLowerCase(),a=a.toLowerCase()),m&&(f=$5(f),a=IS(a)),h==="start"?a.substr(0,f.length)===f:a.indexOf(f)>-1}},X5=["innerRef"];function K5(t){var e=t.innerRef,n=ni(t,X5),i=b4(n,"onExited","in","enter","exit","appear");return pe("input",ve({ref:e},i,{css:Yp({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var q5=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function Q5(t){var e=t.isEnabled,n=t.onBottomArrive,i=t.onBottomLeave,r=t.onTopArrive,u=t.onTopLeave,m=B.useRef(!1),l=B.useRef(!1),s=B.useRef(0),h=B.useRef(null),f=B.useCallback(function(p,g){if(h.current!==null){var y=h.current,x=y.scrollTop,w=y.scrollHeight,b=y.clientHeight,S=h.current,_=g>0,C=w-b-x,T=!1;C>g&&m.current&&(i&&i(p),m.current=!1),_&&l.current&&(u&&u(p),l.current=!1),_&&g>C?(n&&!m.current&&n(p),S.scrollTop=w,T=!0,m.current=!0):!_&&-g>x&&(r&&!l.current&&r(p),S.scrollTop=0,T=!0,l.current=!0),T&&q5(p)}},[n,i,r,u]),a=B.useCallback(function(p){f(p,p.deltaY)},[f]),o=B.useCallback(function(p){s.current=p.changedTouches[0].clientY},[]),c=B.useCallback(function(p){var g=s.current-p.changedTouches[0].clientY;f(p,g)},[f]),d=B.useCallback(function(p){if(p){var g=y4?{passive:!1}:!1;p.addEventListener("wheel",a,g),p.addEventListener("touchstart",o,g),p.addEventListener("touchmove",c,g)}},[c,o,a]),v=B.useCallback(function(p){p&&(p.removeEventListener("wheel",a,!1),p.removeEventListener("touchstart",o,!1),p.removeEventListener("touchmove",c,!1))},[c,o,a]);return B.useEffect(function(){if(e){var p=h.current;return d(p),function(){v(p)}}},[e,d,v]),function(p){h.current=p}}var A0=["boxSizing","height","overflow","paddingRight","position"],M0={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function D0(t){t.cancelable&&t.preventDefault()}function I0(t){t.stopPropagation()}function L0(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function F0(){return"ontouchstart"in window||navigator.maxTouchPoints}var R0=!!(typeof window<"u"&&window.document&&window.document.createElement),Vs=0,Or={capture:!1,passive:!1};function J5(t){var e=t.isEnabled,n=t.accountForScrollbars,i=n===void 0?!0:n,r=B.useRef({}),u=B.useRef(null),m=B.useCallback(function(s){if(R0){var h=document.body,f=h&&h.style;if(i&&A0.forEach(function(d){var v=f&&f[d];r.current[d]=v}),i&&Vs<1){var a=parseInt(r.current.paddingRight,10)||0,o=document.body?document.body.clientWidth:0,c=window.innerWidth-o+a||0;Object.keys(M0).forEach(function(d){var v=M0[d];f&&(f[d]=v)}),f&&(f.paddingRight="".concat(c,"px"))}h&&F0()&&(h.addEventListener("touchmove",D0,Or),s&&(s.addEventListener("touchstart",L0,Or),s.addEventListener("touchmove",I0,Or))),Vs+=1}},[i]),l=B.useCallback(function(s){if(R0){var h=document.body,f=h&&h.style;Vs=Math.max(Vs-1,0),i&&Vs<1&&A0.forEach(function(a){var o=r.current[a];f&&(f[a]=o)}),h&&F0()&&(h.removeEventListener("touchmove",D0,Or),s&&(s.removeEventListener("touchstart",L0,Or),s.removeEventListener("touchmove",I0,Or)))}},[i]);return B.useEffect(function(){if(e){var s=u.current;return m(s),function(){l(s)}}},[e,m,l]),function(s){u.current=s}}var Z5=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},eI={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function tI(t){var e=t.children,n=t.lockEnabled,i=t.captureEnabled,r=i===void 0?!0:i,u=t.onBottomArrive,m=t.onBottomLeave,l=t.onTopArrive,s=t.onTopLeave,h=Q5({isEnabled:r,onBottomArrive:u,onBottomLeave:m,onTopArrive:l,onTopLeave:s}),f=J5({isEnabled:n}),a=function(c){h(c),f(c)};return pe(B.Fragment,null,n&&pe("div",{onClick:Z5,css:eI}),e(a))}var nI={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},iI=function(e){var n=e.name,i=e.onFocus;return pe("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:i,css:nI,value:"",onChange:function(){}})},rI=iI;function Jp(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function sI(){return Jp(/^iPhone/i)}function LS(){return Jp(/^Mac/i)}function aI(){return Jp(/^iPad/i)||LS()&&navigator.maxTouchPoints>1}function oI(){return sI()||aI()}function lI(){return LS()||oI()}var cI=function(e){return e.label},uI=function(e){return e.label},fI=function(e){return e.value},hI=function(e){return!!e.isDisabled},dI={clearIndicator:K4,container:N4,control:n5,dropdownIndicator:Y4,group:a5,groupHeading:l5,indicatorsContainer:U4,indicatorSeparator:Q4,input:h5,loadingIndicator:e5,loadingMessage:I4,menu:k4,menuList:A4,menuPortal:R4,multiValue:v5,multiValueLabel:y5,multiValueRemove:x5,noOptionsMessage:D4,option:T5,placeholder:O5,singleValue:M5,valueContainer:V4},pI={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},mI=4,FS=4,gI=38,vI=FS*2,yI={baseUnit:FS,controlHeight:gI,menuGutter:vI},nf={borderRadius:mI,colors:pI,spacing:yI},xI={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:T0(),captureMenuScroll:!T0(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:Y5(),formatGroupLabel:cI,getOptionLabel:uI,getOptionValue:fI,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:hI,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!g4(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function j0(t,e,n,i){var r=NS(t,e,n),u=BS(t,e,n),m=jS(t,e),l=Jl(t,e);return{type:"option",data:e,isDisabled:r,isSelected:u,label:m,value:l,index:i}}function Zo(t,e){return t.options.map(function(n,i){if("options"in n){var r=n.options.map(function(m,l){return j0(t,m,e,l)}).filter(function(m){return B0(t,m)});return r.length>0?{type:"group",data:n,options:r,index:i}:void 0}var u=j0(t,n,e,i);return B0(t,u)?u:void 0}).filter(x4)}function RS(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,Bp(n.options.map(function(i){return i.data}))):e.push(n.data),e},[])}function N0(t,e){return t.reduce(function(n,i){return i.type==="group"?n.push.apply(n,Bp(i.options.map(function(r){return{data:r.data,id:"".concat(e,"-").concat(i.index,"-").concat(r.index)}}))):n.push({data:i.data,id:"".concat(e,"-").concat(i.index)}),n},[])}function wI(t,e){return RS(Zo(t,e))}function B0(t,e){var n=t.inputValue,i=n===void 0?"":n,r=e.data,u=e.isSelected,m=e.label,l=e.value;return(!zS(t)||!u)&&VS(t,{label:m,value:l,data:r},i)}function bI(t,e){var n=t.focusedValue,i=t.selectValue,r=i.indexOf(n);if(r>-1){var u=e.indexOf(n);if(u>-1)return n;if(r<e.length)return e[r]}return null}function SI(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var rf=function(e,n){var i,r=(i=e.find(function(u){return u.data===n}))===null||i===void 0?void 0:i.id;return r||null},jS=function(e,n){return e.getOptionLabel(n)},Jl=function(e,n){return e.getOptionValue(n)};function NS(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function BS(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var i=Jl(t,e);return n.some(function(r){return Jl(t,r)===i})}function VS(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var zS=function(e){var n=e.hideSelectedOptions,i=e.isMulti;return n===void 0?i:n},CI=1,US=function(t){R3(n,t);var e=B3(n);function n(i){var r;if(L3(this,n),r=e.call(this,i),r.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.isAppleDevice=lI(),r.controlRef=null,r.getControlRef=function(s){r.controlRef=s},r.focusedOptionRef=null,r.getFocusedOptionRef=function(s){r.focusedOptionRef=s},r.menuListRef=null,r.getMenuListRef=function(s){r.menuListRef=s},r.inputRef=null,r.getInputRef=function(s){r.inputRef=s},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(s,h){var f=r.props,a=f.onChange,o=f.name;h.name=o,r.ariaOnChange(s,h),a(s,h)},r.setValue=function(s,h,f){var a=r.props,o=a.closeMenuOnSelect,c=a.isMulti,d=a.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:d}),o&&(r.setState({inputIsHiddenAfterUpdate:!c}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(s,{action:h,option:f})},r.selectOption=function(s){var h=r.props,f=h.blurInputOnSelect,a=h.isMulti,o=h.name,c=r.state.selectValue,d=a&&r.isOptionSelected(s,c),v=r.isOptionDisabled(s,c);if(d){var p=r.getOptionValue(s);r.setValue(c.filter(function(g){return r.getOptionValue(g)!==p}),"deselect-option",s)}else if(!v)a?r.setValue([].concat(Bp(c),[s]),"select-option",s):r.setValue(s,"select-option");else{r.ariaOnChange(s,{action:"select-option",option:s,name:o});return}f&&r.blurInput()},r.removeValue=function(s){var h=r.props.isMulti,f=r.state.selectValue,a=r.getOptionValue(s),o=f.filter(function(d){return r.getOptionValue(d)!==a}),c=Ao(h,o,o[0]||null);r.onChange(c,{action:"remove-value",removedValue:s}),r.focusInput()},r.clearValue=function(){var s=r.state.selectValue;r.onChange(Ao(r.props.isMulti,[],null),{action:"clear",removedValues:s})},r.popValue=function(){var s=r.props.isMulti,h=r.state.selectValue,f=h[h.length-1],a=h.slice(0,h.length-1),o=Ao(s,a,a[0]||null);f&&r.onChange(o,{action:"pop-value",removedValue:f})},r.getFocusedOptionId=function(s){return rf(r.state.focusableOptionsWithIds,s)},r.getFocusableOptionsWithIds=function(){return N0(Zo(r.props,r.state.selectValue),r.getElementId("option"))},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var s=arguments.length,h=new Array(s),f=0;f<s;f++)h[f]=arguments[f];return f4.apply(void 0,[r.props.classNamePrefix].concat(h))},r.getOptionLabel=function(s){return jS(r.props,s)},r.getOptionValue=function(s){return Jl(r.props,s)},r.getStyles=function(s,h){var f=r.props.unstyled,a=dI[s](h,f);a.boxSizing="border-box";var o=r.props.styles[s];return o?o(a,h):a},r.getClassNames=function(s,h){var f,a;return(f=(a=r.props.classNames)[s])===null||f===void 0?void 0:f.call(a,h)},r.getElementId=function(s){return"".concat(r.state.instancePrefix,"-").concat(s)},r.getComponents=function(){return F5(r.props)},r.buildCategorizedOptions=function(){return Zo(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return RS(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(s,h){r.setState({ariaSelection:me({value:s},h)})},r.onMenuMouseDown=function(s){s.button===0&&(s.stopPropagation(),s.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(s){r.blockOptionHover=!1},r.onControlMouseDown=function(s){if(!s.defaultPrevented){var h=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?s.target.tagName!=="INPUT"&&s.target.tagName!=="TEXTAREA"&&r.onMenuClose():h&&r.openMenu("first"):(h&&(r.openAfterFocus=!0),r.focusInput()),s.target.tagName!=="INPUT"&&s.target.tagName!=="TEXTAREA"&&s.preventDefault()}},r.onDropdownIndicatorMouseDown=function(s){if(!(s&&s.type==="mousedown"&&s.button!==0)&&!r.props.isDisabled){var h=r.props,f=h.isMulti,a=h.menuIsOpen;r.focusInput(),a?(r.setState({inputIsHiddenAfterUpdate:!f}),r.onMenuClose()):r.openMenu("first"),s.preventDefault()}},r.onClearIndicatorMouseDown=function(s){s&&s.type==="mousedown"&&s.button!==0||(r.clearValue(),s.preventDefault(),r.openAfterFocus=!1,s.type==="touchend"?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(s){typeof r.props.closeMenuOnScroll=="boolean"?s.target instanceof HTMLElement&&Xc(s.target)&&r.props.onMenuClose():typeof r.props.closeMenuOnScroll=="function"&&r.props.closeMenuOnScroll(s)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(s){var h=s.touches,f=h&&h.item(0);f&&(r.initialTouchX=f.clientX,r.initialTouchY=f.clientY,r.userIsDragging=!1)},r.onTouchMove=function(s){var h=s.touches,f=h&&h.item(0);if(f){var a=Math.abs(f.clientX-r.initialTouchX),o=Math.abs(f.clientY-r.initialTouchY),c=5;r.userIsDragging=a>c||o>c}},r.onTouchEnd=function(s){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(s.target)&&r.menuListRef&&!r.menuListRef.contains(s.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(s){r.userIsDragging||r.onControlMouseDown(s)},r.onClearIndicatorTouchEnd=function(s){r.userIsDragging||r.onClearIndicatorMouseDown(s)},r.onDropdownIndicatorTouchEnd=function(s){r.userIsDragging||r.onDropdownIndicatorMouseDown(s)},r.handleInputChange=function(s){var h=r.props.inputValue,f=s.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(f,{action:"input-change",prevInputValue:h}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(s){r.props.onFocus&&r.props.onFocus(s),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(s){var h=r.props.inputValue;if(r.menuListRef&&r.menuListRef.contains(document.activeElement)){r.inputRef.focus();return}r.props.onBlur&&r.props.onBlur(s),r.onInputChange("",{action:"input-blur",prevInputValue:h}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1})},r.onOptionHover=function(s){if(!(r.blockOptionHover||r.state.focusedOption===s)){var h=r.getFocusableOptions(),f=h.indexOf(s);r.setState({focusedOption:s,focusedOptionId:f>-1?r.getFocusedOptionId(s):null})}},r.shouldHideSelectedOptions=function(){return zS(r.props)},r.onValueInputFocus=function(s){s.preventDefault(),s.stopPropagation(),r.focus()},r.onKeyDown=function(s){var h=r.props,f=h.isMulti,a=h.backspaceRemovesValue,o=h.escapeClearsValue,c=h.inputValue,d=h.isClearable,v=h.isDisabled,p=h.menuIsOpen,g=h.onKeyDown,y=h.tabSelectsValue,x=h.openMenuOnFocus,w=r.state,b=w.focusedOption,S=w.focusedValue,_=w.selectValue;if(!v&&!(typeof g=="function"&&(g(s),s.defaultPrevented))){switch(r.blockOptionHover=!0,s.key){case"ArrowLeft":if(!f||c)return;r.focusValue("previous");break;case"ArrowRight":if(!f||c)return;r.focusValue("next");break;case"Delete":case"Backspace":if(c)return;if(S)r.removeValue(S);else{if(!a)return;f?r.popValue():d&&r.clearValue()}break;case"Tab":if(r.isComposing||s.shiftKey||!p||!y||!b||x&&r.isOptionSelected(b,_))return;r.selectOption(b);break;case"Enter":if(s.keyCode===229)break;if(p){if(!b||r.isComposing)return;r.selectOption(b);break}return;case"Escape":p?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:c}),r.onMenuClose()):d&&o&&r.clearValue();break;case" ":if(c)return;if(!p){r.openMenu("first");break}if(!b)return;r.selectOption(b);break;case"ArrowUp":p?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":p?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!p)return;r.focusOption("pageup");break;case"PageDown":if(!p)return;r.focusOption("pagedown");break;case"Home":if(!p)return;r.focusOption("first");break;case"End":if(!p)return;r.focusOption("last");break;default:return}s.preventDefault()}},r.state.instancePrefix="react-select-"+(r.props.instanceId||++CI),r.state.selectValue=C0(i.value),i.menuIsOpen&&r.state.selectValue.length){var u=r.getFocusableOptionsWithIds(),m=r.buildFocusableOptions(),l=m.indexOf(r.state.selectValue[0]);r.state.focusableOptionsWithIds=u,r.state.focusedOption=m[l],r.state.focusedOptionId=rf(u,m[l])}return r}return F3(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&_0(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var u=this.props,m=u.isDisabled,l=u.menuIsOpen,s=this.state.isFocused;(s&&!m&&r.isDisabled||s&&l&&!r.menuIsOpen)&&this.focusInput(),s&&m&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!s&&!m&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(_0(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,u){this.props.onInputChange(r,u)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var u=this,m=this.state,l=m.selectValue,s=m.isFocused,h=this.buildFocusableOptions(),f=r==="first"?0:h.length-1;if(!this.props.isMulti){var a=h.indexOf(l[0]);a>-1&&(f=a)}this.scrollToFocusedOptionOnUpdate=!(s&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:h[f],focusedOptionId:this.getFocusedOptionId(h[f])},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(r){var u=this.state,m=u.selectValue,l=u.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var s=m.indexOf(l);l||(s=-1);var h=m.length-1,f=-1;if(m.length){switch(r){case"previous":s===0?f=0:s===-1?f=h:f=s-1;break;case"next":s>-1&&s<h&&(f=s+1);break}this.setState({inputIsHidden:f!==-1,focusedValue:m[f]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,m=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var s=0,h=l.indexOf(m);m||(h=-1),r==="up"?s=h>0?h-1:l.length-1:r==="down"?s=(h+1)%l.length:r==="pageup"?(s=h-u,s<0&&(s=0)):r==="pagedown"?(s=h+u,s>l.length-1&&(s=l.length-1)):r==="last"&&(s=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[s],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[s])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(nf):me(me({},nf),this.props.theme):nf}},{key:"getCommonProps",value:function(){var r=this.clearValue,u=this.cx,m=this.getStyles,l=this.getClassNames,s=this.getValue,h=this.selectOption,f=this.setValue,a=this.props,o=a.isMulti,c=a.isRtl,d=a.options,v=this.hasValue();return{clearValue:r,cx:u,getStyles:m,getClassNames:l,getValue:s,hasValue:v,isMulti:o,isRtl:c,options:d,selectOption:h,selectProps:a,setValue:f,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,u=r.isClearable,m=r.isMulti;return u===void 0?m:u}},{key:"isOptionDisabled",value:function(r,u){return NS(this.props,r,u)}},{key:"isOptionSelected",value:function(r,u){return BS(this.props,r,u)}},{key:"filterOption",value:function(r,u){return VS(this.props,r,u)}},{key:"formatOptionLabel",value:function(r,u){if(typeof this.props.formatOptionLabel=="function"){var m=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(r,{context:u,inputValue:m,selectValue:l})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var r=this.props,u=r.isDisabled,m=r.isSearchable,l=r.inputId,s=r.inputValue,h=r.tabIndex,f=r.form,a=r.menuIsOpen,o=r.required,c=this.getComponents(),d=c.Input,v=this.state,p=v.inputIsHidden,g=v.ariaSelection,y=this.commonProps,x=l||this.getElementId("input"),w=me(me(me({"aria-autocomplete":"list","aria-expanded":a,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":o,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},a&&{"aria-controls":this.getElementId("listbox")}),!m&&{"aria-readonly":!0}),this.hasValue()?(g==null?void 0:g.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return m?B.createElement(d,ve({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:x,innerRef:this.getInputRef,isDisabled:u,isHidden:p,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:h,form:f,type:"text",value:s},w)):B.createElement(K5,ve({id:x,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:ql,onFocus:this.onInputFocus,disabled:u,tabIndex:h,inputMode:"none",form:f,value:""},w))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,u=this.getComponents(),m=u.MultiValue,l=u.MultiValueContainer,s=u.MultiValueLabel,h=u.MultiValueRemove,f=u.SingleValue,a=u.Placeholder,o=this.commonProps,c=this.props,d=c.controlShouldRenderValue,v=c.isDisabled,p=c.isMulti,g=c.inputValue,y=c.placeholder,x=this.state,w=x.selectValue,b=x.focusedValue,S=x.isFocused;if(!this.hasValue()||!d)return g?null:B.createElement(a,ve({},o,{key:"placeholder",isDisabled:v,isFocused:S,innerProps:{id:this.getElementId("placeholder")}}),y);if(p)return w.map(function(C,T){var O=C===b,L="".concat(r.getOptionLabel(C),"-").concat(r.getOptionValue(C));return B.createElement(m,ve({},o,{components:{Container:l,Label:s,Remove:h},isFocused:O,isDisabled:v,key:L,index:T,removeProps:{onClick:function(){return r.removeValue(C)},onTouchEnd:function(){return r.removeValue(C)},onMouseDown:function(H){H.preventDefault()}},data:C}),r.formatOptionLabel(C,"value"))});if(g)return null;var _=w[0];return B.createElement(f,ve({},o,{data:_,isDisabled:v}),this.formatOptionLabel(_,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),u=r.ClearIndicator,m=this.commonProps,l=this.props,s=l.isDisabled,h=l.isLoading,f=this.state.isFocused;if(!this.isClearable()||!u||s||!this.hasValue()||h)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return B.createElement(u,ve({},m,{innerProps:a,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),u=r.LoadingIndicator,m=this.commonProps,l=this.props,s=l.isDisabled,h=l.isLoading,f=this.state.isFocused;if(!u||!h)return null;var a={"aria-hidden":"true"};return B.createElement(u,ve({},m,{innerProps:a,isDisabled:s,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),u=r.DropdownIndicator,m=r.IndicatorSeparator;if(!u||!m)return null;var l=this.commonProps,s=this.props.isDisabled,h=this.state.isFocused;return B.createElement(m,ve({},l,{isDisabled:s,isFocused:h}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),u=r.DropdownIndicator;if(!u)return null;var m=this.commonProps,l=this.props.isDisabled,s=this.state.isFocused,h={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return B.createElement(u,ve({},m,{innerProps:h,isDisabled:l,isFocused:s}))}},{key:"renderMenu",value:function(){var r=this,u=this.getComponents(),m=u.Group,l=u.GroupHeading,s=u.Menu,h=u.MenuList,f=u.MenuPortal,a=u.LoadingMessage,o=u.NoOptionsMessage,c=u.Option,d=this.commonProps,v=this.state.focusedOption,p=this.props,g=p.captureMenuScroll,y=p.inputValue,x=p.isLoading,w=p.loadingMessage,b=p.minMenuHeight,S=p.maxMenuHeight,_=p.menuIsOpen,C=p.menuPlacement,T=p.menuPosition,O=p.menuPortalTarget,L=p.menuShouldBlockScroll,j=p.menuShouldScrollIntoView,H=p.noOptionsMessage,F=p.onMenuScrollToTop,V=p.onMenuScrollToBottom;if(!_)return null;var I=function(W,M){var P=W.type,z=W.data,$=W.isDisabled,X=W.isSelected,Y=W.label,J=W.value,ie=v===z,re=$?void 0:function(){return r.onOptionHover(z)},q=$?void 0:function(){return r.selectOption(z)},G="".concat(r.getElementId("option"),"-").concat(M),Q={id:G,onClick:q,onMouseMove:re,onMouseOver:re,tabIndex:-1,role:"option","aria-selected":r.isAppleDevice?void 0:X};return B.createElement(c,ve({},d,{innerProps:Q,data:z,isDisabled:$,isSelected:X,key:G,label:Y,type:P,value:J,isFocused:ie,innerRef:ie?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(W.data,"menu"))},A;if(this.hasOptions())A=this.getCategorizedOptions().map(function(D){if(D.type==="group"){var W=D.data,M=D.options,P=D.index,z="".concat(r.getElementId("group"),"-").concat(P),$="".concat(z,"-heading");return B.createElement(m,ve({},d,{key:z,data:W,options:M,Heading:l,headingProps:{id:$,data:D.data},label:r.formatGroupLabel(D.data)}),D.options.map(function(X){return I(X,"".concat(P,"-").concat(X.index))}))}else if(D.type==="option")return I(D,"".concat(D.index))});else if(x){var U=w({inputValue:y});if(U===null)return null;A=B.createElement(a,d,U)}else{var k=H({inputValue:y});if(k===null)return null;A=B.createElement(o,d,k)}var E={minMenuHeight:b,maxMenuHeight:S,menuPlacement:C,menuPosition:T,menuShouldScrollIntoView:j},R=B.createElement(P4,ve({},d,E),function(D){var W=D.ref,M=D.placerProps,P=M.placement,z=M.maxHeight;return B.createElement(s,ve({},d,E,{innerRef:W,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove},isLoading:x,placement:P}),B.createElement(tI,{captureEnabled:g,onTopArrive:F,onBottomArrive:V,lockEnabled:L},function($){return B.createElement(h,ve({},d,{innerRef:function(Y){r.getMenuListRef(Y),$(Y)},innerProps:{role:"listbox","aria-multiselectable":d.isMulti,id:r.getElementId("listbox")},isLoading:x,maxHeight:z,focusedOption:v}),A)}))});return O||T==="fixed"?B.createElement(f,ve({},d,{appendTo:O,controlElement:this.controlRef,menuPlacement:C,menuPosition:T}),R):R}},{key:"renderFormField",value:function(){var r=this,u=this.props,m=u.delimiter,l=u.isDisabled,s=u.isMulti,h=u.name,f=u.required,a=this.state.selectValue;if(f&&!this.hasValue()&&!l)return B.createElement(rI,{name:h,onFocus:this.onValueInputFocus});if(!(!h||l))if(s)if(m){var o=a.map(function(v){return r.getOptionValue(v)}).join(m);return B.createElement("input",{name:h,type:"hidden",value:o})}else{var c=a.length>0?a.map(function(v,p){return B.createElement("input",{key:"i-".concat(p),name:h,type:"hidden",value:r.getOptionValue(v)})}):B.createElement("input",{name:h,type:"hidden",value:""});return B.createElement("div",null,c)}else{var d=a[0]?this.getOptionValue(a[0]):"";return B.createElement("input",{name:h,type:"hidden",value:d})}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,u=this.state,m=u.ariaSelection,l=u.focusedOption,s=u.focusedValue,h=u.isFocused,f=u.selectValue,a=this.getFocusableOptions();return B.createElement(H5,ve({},r,{id:this.getElementId("live-region"),ariaSelection:m,focusedOption:l,focusedValue:s,isFocused:h,selectValue:f,focusableOptions:a,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var r=this.getComponents(),u=r.Control,m=r.IndicatorsContainer,l=r.SelectContainer,s=r.ValueContainer,h=this.props,f=h.className,a=h.id,o=h.isDisabled,c=h.menuIsOpen,d=this.state.isFocused,v=this.commonProps=this.getCommonProps();return B.createElement(l,ve({},v,{className:f,innerProps:{id:a,onKeyDown:this.onKeyDown},isDisabled:o,isFocused:d}),this.renderLiveRegion(),B.createElement(u,ve({},v,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:o,isFocused:d,menuIsOpen:c}),B.createElement(s,ve({},v,{isDisabled:o}),this.renderPlaceholderOrValue(),this.renderInput()),B.createElement(m,ve({},v,{isDisabled:o}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,u){var m=u.prevProps,l=u.clearFocusValueOnUpdate,s=u.inputIsHiddenAfterUpdate,h=u.ariaSelection,f=u.isFocused,a=u.prevWasFocused,o=u.instancePrefix,c=r.options,d=r.value,v=r.menuIsOpen,p=r.inputValue,g=r.isMulti,y=C0(d),x={};if(m&&(d!==m.value||c!==m.options||v!==m.menuIsOpen||p!==m.inputValue)){var w=v?wI(r,y):[],b=v?N0(Zo(r,y),"".concat(o,"-option")):[],S=l?bI(u,y):null,_=SI(u,w),C=rf(b,_);x={selectValue:y,focusedOption:_,focusedOptionId:C,focusableOptionsWithIds:b,focusedValue:S,clearFocusValueOnUpdate:!1}}var T=s!=null&&r!==m?{inputIsHidden:s,inputIsHiddenAfterUpdate:void 0}:{},O=h,L=f&&a;return f&&!L&&(O={value:Ao(g,y,y[0]||null),options:y,action:"initial-input-focus"},L=!a),(h==null?void 0:h.action)==="initial-input-focus"&&(O=null),me(me(me({},x),T),{},{prevProps:r,ariaSelection:O,prevWasFocused:L})}}]),n}(B.Component);US.defaultProps=xI;var _I=B.forwardRef(function(t,e){var n=I3(t);return B.createElement(US,ve({ref:e},n))}),$h=_I;function TI(){const{tags:t,addTag:e,images:n,updateImage:i}=yn(),[r,u]=B.useState(""),[m,l]=B.useState("Other"),s=["Nature","People","Objects","Other"],h=()=>{if(!r.trim())return;const a={value:r.toLowerCase(),label:r,category:m,children:[]};e(a),u("")},f=a=>{a.key==="Enter"&&h()};return N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsx("div",{className:"flex-1",children:N.jsx("input",{type:"text",value:r,onChange:a=>u(a.target.value),onKeyPress:f,placeholder:"Create new tag...",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})}),N.jsx("select",{value:m,onChange:a=>l(a.target.value),className:"px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:s.map(a=>N.jsx("option",{value:a,children:a},a))}),N.jsxs("button",{onClick:h,className:"flex items-center px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600",children:[N.jsx(Dx,{className:"h-4 w-4 mr-1"}),"Add Tag"]})]}),N.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(a=>N.jsxs("div",{className:"flex items-center px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full",children:[N.jsx(Rx,{className:"h-4 w-4 mr-1"}),N.jsx("span",{children:a.label}),N.jsx("span",{className:"ml-2 px-2 py-0.5 bg-purple-200 dark:bg-purple-800 rounded-full text-xs",children:a.category})]},a.value))}),N.jsx($h,{isMulti:!0,options:t,className:"w-full",placeholder:"Filter by tags...",formatGroupLabel:a=>N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsx("span",{children:a.label}),N.jsx("span",{className:"bg-gray-200 rounded-full px-2 py-1 text-xs",children:a.options.length})]})})]})}function kI(){const{setSearchQuery:t,setSortBy:e,setSortDirection:n,sortBy:i,sortDirection:r}=yn(),u=[{value:"name",label:"Name"},{value:"date",label:"Date"},{value:"size",label:"Size"}],m=[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}];return N.jsxs("div",{className:"flex space-x-4 items-center",children:[N.jsxs("div",{className:"relative",children:[N.jsx(Ix,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),N.jsx("input",{type:"text",placeholder:"Search images...",onChange:l=>t(l.target.value),className:"pl-10 pr-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),N.jsx($h,{options:u,value:u.find(l=>l.value===i),onChange:l=>l&&e(l.value),placeholder:"Sort by...",className:"w-40",classNamePrefix:"select"}),N.jsx($h,{options:m,value:m.find(l=>l.value===r),onChange:l=>l&&n(l.value),placeholder:"Direction...",className:"w-40",classNamePrefix:"select"})]})}function xn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function wr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const HS=6048e5,PI=864e5;let OI={};function Kc(){return OI}function Ba(t,e){var l,s,h,f;const n=Kc(),i=(e==null?void 0:e.weekStartsOn)??((s=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:s.weekStartsOn)??n.weekStartsOn??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,r=xn(t),u=r.getDay(),m=(u<i?7:0)+u-i;return r.setDate(r.getDate()-m),r.setHours(0,0,0,0),r}function Zl(t){return Ba(t,{weekStartsOn:1})}function WS(t){const e=xn(t),n=e.getFullYear(),i=wr(t,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const r=Zl(i),u=wr(t,0);u.setFullYear(n,0,4),u.setHours(0,0,0,0);const m=Zl(u);return e.getTime()>=r.getTime()?n+1:e.getTime()>=m.getTime()?n:n-1}function V0(t){const e=xn(t);return e.setHours(0,0,0,0),e}function z0(t){const e=xn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function EI(t,e){const n=V0(t),i=V0(e),r=+n-z0(n),u=+i-z0(i);return Math.round((r-u)/PI)}function AI(t){const e=WS(t),n=wr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Zl(n)}function MI(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function DI(t){if(!MI(t)&&typeof t!="number")return!1;const e=xn(t);return!isNaN(Number(e))}function II(t){const e=xn(t),n=wr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const LI={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},FI=(t,e,n)=>{let i;const r=LI[t];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};function sf(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const RI={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jI={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},NI={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BI={date:sf({formats:RI,defaultWidth:"full"}),time:sf({formats:jI,defaultWidth:"full"}),dateTime:sf({formats:NI,defaultWidth:"full"})},VI={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zI=(t,e,n,i)=>VI[t];function zs(t){return(e,n)=>{const i=n!=null&&n.context?String(n.context):"standalone";let r;if(i==="formatting"&&t.formattingValues){const m=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):m;r=t.formattingValues[l]||t.formattingValues[m]}else{const m=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;r=t.values[l]||t.values[m]}const u=t.argumentCallback?t.argumentCallback(e):e;return r[u]}}const UI={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},HI={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},WI={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$I={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},GI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},YI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XI=(t,e)=>{const n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},KI={ordinalNumber:XI,era:zs({values:UI,defaultWidth:"wide"}),quarter:zs({values:HI,defaultWidth:"wide",argumentCallback:t=>t-1}),month:zs({values:WI,defaultWidth:"wide"}),day:zs({values:$I,defaultWidth:"wide"}),dayPeriod:zs({values:GI,defaultWidth:"wide",formattingValues:YI,defaultFormattingWidth:"wide"})};function Us(t){return(e,n={})=>{const i=n.width,r=i&&t.matchPatterns[i]||t.matchPatterns[t.defaultMatchWidth],u=e.match(r);if(!u)return null;const m=u[0],l=i&&t.parsePatterns[i]||t.parsePatterns[t.defaultParseWidth],s=Array.isArray(l)?QI(l,a=>a.test(m)):qI(l,a=>a.test(m));let h;h=t.valueCallback?t.valueCallback(s):s,h=n.valueCallback?n.valueCallback(h):h;const f=e.slice(m.length);return{value:h,rest:f}}}function qI(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function QI(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function JI(t){return(e,n={})=>{const i=e.match(t.matchPattern);if(!i)return null;const r=i[0],u=e.match(t.parsePattern);if(!u)return null;let m=t.valueCallback?t.valueCallback(u[0]):u[0];m=n.valueCallback?n.valueCallback(m):m;const l=e.slice(r.length);return{value:m,rest:l}}}const ZI=/^(\d+)(th|st|nd|rd)?/i,eL=/\d+/i,tL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nL={any:[/^b/i,/^(a|c)/i]},iL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rL={any:[/1/i,/2/i,/3/i,/4/i]},sL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fL={ordinalNumber:JI({matchPattern:ZI,parsePattern:eL,valueCallback:t=>parseInt(t,10)}),era:Us({matchPatterns:tL,defaultMatchWidth:"wide",parsePatterns:nL,defaultParseWidth:"any"}),quarter:Us({matchPatterns:iL,defaultMatchWidth:"wide",parsePatterns:rL,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Us({matchPatterns:sL,defaultMatchWidth:"wide",parsePatterns:aL,defaultParseWidth:"any"}),day:Us({matchPatterns:oL,defaultMatchWidth:"wide",parsePatterns:lL,defaultParseWidth:"any"}),dayPeriod:Us({matchPatterns:cL,defaultMatchWidth:"any",parsePatterns:uL,defaultParseWidth:"any"})},hL={code:"en-US",formatDistance:FI,formatLong:BI,formatRelative:zI,localize:KI,match:fL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function dL(t){const e=xn(t);return EI(e,II(e))+1}function pL(t){const e=xn(t),n=+Zl(e)-+AI(e);return Math.round(n/HS)+1}function $S(t,e){var f,a,o,c;const n=xn(t),i=n.getFullYear(),r=Kc(),u=(e==null?void 0:e.firstWeekContainsDate)??((a=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:a.firstWeekContainsDate)??r.firstWeekContainsDate??((c=(o=r.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??1,m=wr(t,0);m.setFullYear(i+1,0,u),m.setHours(0,0,0,0);const l=Ba(m,e),s=wr(t,0);s.setFullYear(i,0,u),s.setHours(0,0,0,0);const h=Ba(s,e);return n.getTime()>=l.getTime()?i+1:n.getTime()>=h.getTime()?i:i-1}function mL(t,e){var l,s,h,f;const n=Kc(),i=(e==null?void 0:e.firstWeekContainsDate)??((s=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:s.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,r=$S(t,e),u=wr(t,0);return u.setFullYear(r,0,i),u.setHours(0,0,0,0),Ba(u,e)}function gL(t,e){const n=xn(t),i=+Ba(n,e)-+mL(n,e);return Math.round(i/HS)+1}function Ae(t,e){const n=t<0?"-":"",i=Math.abs(t).toString().padStart(e,"0");return n+i}const ai={y(t,e){const n=t.getFullYear(),i=n>0?n:1-n;return Ae(e==="yy"?i%100:i,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ae(n+1,2)},d(t,e){return Ae(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ae(t.getHours()%12||12,e.length)},H(t,e){return Ae(t.getHours(),e.length)},m(t,e){return Ae(t.getMinutes(),e.length)},s(t,e){return Ae(t.getSeconds(),e.length)},S(t,e){const n=e.length,i=t.getMilliseconds(),r=Math.trunc(i*Math.pow(10,n-3));return Ae(r,e.length)}},Er={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},U0={G:function(t,e,n){const i=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const i=t.getFullYear(),r=i>0?i:1-i;return n.ordinalNumber(r,{unit:"year"})}return ai.y(t,e)},Y:function(t,e,n,i){const r=$S(t,i),u=r>0?r:1-r;if(e==="YY"){const m=u%100;return Ae(m,2)}return e==="Yo"?n.ordinalNumber(u,{unit:"year"}):Ae(u,e.length)},R:function(t,e){const n=WS(t);return Ae(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ae(n,e.length)},Q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Ae(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,e,n){const i=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Ae(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,e,n){const i=t.getMonth();switch(e){case"M":case"MM":return ai.M(t,e);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,e,n){const i=t.getMonth();switch(e){case"L":return String(i+1);case"LL":return Ae(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,e,n,i){const r=gL(t,i);return e==="wo"?n.ordinalNumber(r,{unit:"week"}):Ae(r,e.length)},I:function(t,e,n){const i=pL(t);return e==="Io"?n.ordinalNumber(i,{unit:"week"}):Ae(i,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ai.d(t,e)},D:function(t,e,n){const i=dL(t);return e==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):Ae(i,e.length)},E:function(t,e,n){const i=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,e,n,i){const r=t.getDay(),u=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(u);case"ee":return Ae(u,2);case"eo":return n.ordinalNumber(u,{unit:"day"});case"eee":return n.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(r,{width:"short",context:"formatting"});case"eeee":default:return n.day(r,{width:"wide",context:"formatting"})}},c:function(t,e,n,i){const r=t.getDay(),u=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(u);case"cc":return Ae(u,e.length);case"co":return n.ordinalNumber(u,{unit:"day"});case"ccc":return n.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(r,{width:"narrow",context:"standalone"});case"cccccc":return n.day(r,{width:"short",context:"standalone"});case"cccc":default:return n.day(r,{width:"wide",context:"standalone"})}},i:function(t,e,n){const i=t.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Ae(r,e.length);case"io":return n.ordinalNumber(r,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,e,n){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(t,e,n){const i=t.getHours();let r;switch(i===12?r=Er.noon:i===0?r=Er.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(t,e,n){const i=t.getHours();let r;switch(i>=17?r=Er.evening:i>=12?r=Er.afternoon:i>=4?r=Er.morning:r=Er.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let i=t.getHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return ai.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ai.H(t,e)},K:function(t,e,n){const i=t.getHours()%12;return e==="Ko"?n.ordinalNumber(i,{unit:"hour"}):Ae(i,e.length)},k:function(t,e,n){let i=t.getHours();return i===0&&(i=24),e==="ko"?n.ordinalNumber(i,{unit:"hour"}):Ae(i,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ai.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ai.s(t,e)},S:function(t,e){return ai.S(t,e)},X:function(t,e,n){const i=t.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return W0(i);case"XXXX":case"XX":return Ki(i);case"XXXXX":case"XXX":default:return Ki(i,":")}},x:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"x":return W0(i);case"xxxx":case"xx":return Ki(i);case"xxxxx":case"xxx":default:return Ki(i,":")}},O:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+H0(i,":");case"OOOO":default:return"GMT"+Ki(i,":")}},z:function(t,e,n){const i=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+H0(i,":");case"zzzz":default:return"GMT"+Ki(i,":")}},t:function(t,e,n){const i=Math.trunc(t.getTime()/1e3);return Ae(i,e.length)},T:function(t,e,n){const i=t.getTime();return Ae(i,e.length)}};function H0(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Math.trunc(i/60),u=i%60;return u===0?n+String(r):n+String(r)+e+Ae(u,2)}function W0(t,e){return t%60===0?(t>0?"-":"+")+Ae(Math.abs(t)/60,2):Ki(t,e)}function Ki(t,e=""){const n=t>0?"-":"+",i=Math.abs(t),r=Ae(Math.trunc(i/60),2),u=Ae(i%60,2);return n+r+e+u}const $0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},GS=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vL=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],i=n[1],r=n[2];if(!r)return $0(t,e);let u;switch(i){case"P":u=e.dateTime({width:"short"});break;case"PP":u=e.dateTime({width:"medium"});break;case"PPP":u=e.dateTime({width:"long"});break;case"PPPP":default:u=e.dateTime({width:"full"});break}return u.replace("{{date}}",$0(i,e)).replace("{{time}}",GS(r,e))},yL={p:GS,P:vL},xL=/^D+$/,wL=/^Y+$/,bL=["D","DD","YY","YYYY"];function SL(t){return xL.test(t)}function CL(t){return wL.test(t)}function _L(t,e,n){const i=TL(t,e,n);if(console.warn(i),bL.includes(t))throw new RangeError(i)}function TL(t,e,n){const i=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${i} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OL=/^'([^]*?)'?$/,EL=/''/g,AL=/[a-zA-Z]/;function YS(t,e,n){var f,a,o,c;const i=Kc(),r=i.locale??hL,u=i.firstWeekContainsDate??((a=(f=i.locale)==null?void 0:f.options)==null?void 0:a.firstWeekContainsDate)??1,m=i.weekStartsOn??((c=(o=i.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??0,l=xn(t);if(!DI(l))throw new RangeError("Invalid time value");let s=e.match(PL).map(d=>{const v=d[0];if(v==="p"||v==="P"){const p=yL[v];return p(d,r.formatLong)}return d}).join("").match(kL).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const v=d[0];if(v==="'")return{isToken:!1,value:ML(d)};if(U0[v])return{isToken:!0,value:d};if(v.match(AL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(s=r.localize.preprocessor(l,s));const h={firstWeekContainsDate:u,weekStartsOn:m,locale:r};return s.map(d=>{if(!d.isToken)return d.value;const v=d.value;(CL(v)||SL(v))&&_L(v,e,String(t));const p=U0[v[0]];return p(l,v,r.localize,h)}).join("")}function ML(t){const e=t.match(OL);return e?e[1].replace(EL,"'"):t}function DL(){const{selectedImage:t,images:e}=yn(),n=e.find(m=>m.id===t),i=(n==null?void 0:n.editHistory)||[],r=m=>{switch(m){case"filter":return N.jsx(Lx,{className:"h-4 w-4"});case"rotate":return N.jsx(Yd,{className:"h-4 w-4"});case"annotation":return N.jsx(Ax,{className:"h-4 w-4"});case"shape":return N.jsx(Fx,{className:"h-4 w-4"});case"text":return N.jsx(jx,{className:"h-4 w-4"});default:return N.jsx(ku,{className:"h-4 w-4"})}},u=m=>typeof m=="number"?Math.round(m*100)/100:m;return N.jsxs("div",{className:"mt-6",children:[N.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[N.jsx(ku,{className:"h-5 w-5 mr-2"}),"Edit History"]}),N.jsx(Ic,{mode:"popLayout",children:i.length>0?N.jsx("div",{className:"space-y-2",children:i.map((m,l)=>N.jsxs(gn.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2},className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[N.jsxs("div",{className:"flex items-center space-x-3",children:[N.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-full",children:r(m.type)}),N.jsxs("div",{children:[N.jsx("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:m.description}),m.params&&N.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:Object.entries(m.params).map(([s,h])=>`${s}: ${u(h)}`).join(", ")})]})]}),N.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:YS(m.timestamp,"HH:mm:ss")})]},m.id))}):N.jsxs(gn.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-6 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[N.jsx(ku,{className:"h-8 w-8 mx-auto text-gray-400 mb-2"}),N.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No edits yet. Start editing to see your history!"})]})})]})}function IL({canvas:t}){const{selectedImage:e,images:n,updateImage:i,addEditAction:r}=yn(),u=n.find(o=>o.id===e),[m,l]=B.useState({brightness:100,contrast:100,saturation:100,sepia:0,blur:0,sharpen:0,noise:0,vignette:0,vintage:0,dramatic:0,vibrant:0,preset:""});B.useEffect(()=>{u!=null&&u.filters&&l(u.filters)},[u]);const s=async o=>{if(!t||!e)return;const c=t.backgroundImage;if(c){if(c.filters=[],o.brightness!==100&&c.filters.push(new fabric.Image.filters.Brightness({brightness:(o.brightness-100)/100})),o.contrast!==100&&c.filters.push(new fabric.Image.filters.Contrast({contrast:o.contrast/100})),o.saturation!==100&&c.filters.push(new fabric.Image.filters.Saturation({saturation:o.saturation/100})),o.blur>0&&c.filters.push(new fabric.Image.filters.Blur({blur:o.blur/10})),o.noise>0&&c.filters.push(new fabric.Image.filters.Noise({noise:o.noise})),o.sharpen>0&&c.filters.push(new fabric.Image.filters.Convolute({matrix:[0,-1,0,-1,5,-1,0,-1,0]})),o.vintage>0){const d=o.vintage/100;c.filters.push(new fabric.Image.filters.Sepia,new fabric.Image.filters.Contrast({contrast:1.1}),new fabric.Image.filters.Noise({noise:25*d}))}if(o.dramatic>0){const d=o.dramatic/100;c.filters.push(new fabric.Image.filters.Contrast({contrast:1+d}),new fabric.Image.filters.Brightness({brightness:-.1*d}))}if(o.vibrant>0){const d=o.vibrant/100;c.filters.push(new fabric.Image.filters.Saturation({saturation:1+d}),new fabric.Image.filters.Contrast({contrast:1.1}))}c.applyFilters(),t.renderAll()}},h=async(o,c)=>{const d={...m,[o]:c};l(d),await s(d),r(e,{id:Date.now().toString(),type:"filter",timestamp:Date.now(),description:`Adjusted ${o} filter`,params:{[o]:c}}),i(e,{filters:d})},f=async()=>{if(!t||!e)return;const o={brightness:100,contrast:100,saturation:100,sepia:0,blur:0,sharpen:0,noise:0,vignette:0,vintage:0,dramatic:0,vibrant:0,preset:""};l(o),await s(o),r(e,{id:Date.now().toString(),type:"filter",timestamp:Date.now(),description:"Reset all filters"}),i(e,{filters:o}),Ee.success("Filters reset successfully")},a=[{name:"brightness",label:"Brightness",min:0,max:200,step:1},{name:"contrast",label:"Contrast",min:0,max:200,step:1},{name:"saturation",label:"Saturation",min:0,max:200,step:1},{name:"blur",label:"Blur",min:0,max:100,step:1},{name:"noise",label:"Noise",min:0,max:100,step:1},{name:"sharpen",label:"Sharpen",min:0,max:100,step:1},{name:"vintage",label:"Vintage",min:0,max:100,step:1},{name:"dramatic",label:"Dramatic",min:0,max:100,step:1},{name:"vibrant",label:"Vibrant",min:0,max:100,step:1}];return N.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:N.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[N.jsx(Lx,{className:"h-5 w-5 mr-2"}),"Image Filters"]}),N.jsxs("button",{onClick:f,className:"flex items-center px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[N.jsx(Yd,{className:"h-4 w-4 mr-1"}),"Reset Filters"]})]}),N.jsx("div",{className:"space-y-4",children:a.map(({name:o,label:c,min:d,max:v,step:p})=>N.jsxs(gn.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{duration:.2},children:[N.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[N.jsx("label",{className:"text-gray-700 dark:text-gray-300",children:c}),N.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:m[o]})]}),N.jsxs("div",{className:"relative",children:[N.jsx("input",{type:"range",min:d,max:v,step:p,value:m[o],onChange:g=>h(o,Number(g.target.value)),className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer"}),N.jsx("div",{className:"absolute left-0 top-0 h-2 bg-purple-500 rounded-l-lg pointer-events-none",style:{width:`${(m[o]-d)/(v-d)*100}%`}})]})]},o))})]})})}function qc(){return(qc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function XS(t,e){if(t==null)return{};var n,i,r={},u=Object.keys(t);for(i=0;i<u.length;i++)e.indexOf(n=u[i])>=0||(r[n]=t[n]);return r}function Gh(t){var e=B.useRef(t),n=B.useRef(function(i){e.current&&e.current(i)});return e.current=t,n.current}var Va=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},ua=function(t){return"touches"in t},Yh=function(t){return t&&t.ownerDocument.defaultView||self},G0=function(t,e,n){var i=t.getBoundingClientRect(),r=ua(e)?function(u,m){for(var l=0;l<u.length;l++)if(u[l].identifier===m)return u[l];return u[0]}(e.touches,n):e;return{left:Va((r.pageX-(i.left+Yh(t).pageXOffset))/i.width),top:Va((r.pageY-(i.top+Yh(t).pageYOffset))/i.height)}},Y0=function(t){!ua(t)&&t.preventDefault()},KS=we.memo(function(t){var e=t.onMove,n=t.onKey,i=XS(t,["onMove","onKey"]),r=B.useRef(null),u=Gh(e),m=Gh(n),l=B.useRef(null),s=B.useRef(!1),h=B.useMemo(function(){var c=function(p){Y0(p),(ua(p)?p.touches.length>0:p.buttons>0)&&r.current?u(G0(r.current,p,l.current)):v(!1)},d=function(){return v(!1)};function v(p){var g=s.current,y=Yh(r.current),x=p?y.addEventListener:y.removeEventListener;x(g?"touchmove":"mousemove",c),x(g?"touchend":"mouseup",d)}return[function(p){var g=p.nativeEvent,y=r.current;if(y&&(Y0(g),!function(w,b){return b&&!ua(w)}(g,s.current)&&y)){if(ua(g)){s.current=!0;var x=g.changedTouches||[];x.length&&(l.current=x[0].identifier)}y.focus(),u(G0(y,g,l.current)),v(!0)}},function(p){var g=p.which||p.keyCode;g<37||g>40||(p.preventDefault(),m({left:g===39?.05:g===37?-.05:0,top:g===40?.05:g===38?-.05:0}))},v]},[m,u]),f=h[0],a=h[1],o=h[2];return B.useEffect(function(){return o},[o]),we.createElement("div",qc({},i,{onTouchStart:f,onMouseDown:f,className:"react-colorful__interactive",ref:r,onKeyDown:a,tabIndex:0,role:"slider"}))}),Zp=function(t){return t.filter(Boolean).join(" ")},qS=function(t){var e=t.color,n=t.left,i=t.top,r=i===void 0?.5:i,u=Zp(["react-colorful__pointer",t.className]);return we.createElement("div",{className:u,style:{top:100*r+"%",left:100*n+"%"}},we.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},pt=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},LL=function(t){return BL(Xh(t))},Xh=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?pt(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?pt(parseInt(t.substring(6,8),16)/255,2):1}},FL=function(t){return NL(jL(t))},RL=function(t){var e=t.s,n=t.v,i=t.a,r=(200-e)*n/100;return{h:pt(t.h),s:pt(r>0&&r<200?e*n/100/(r<=100?r:200-r)*100:0),l:pt(r/2),a:pt(i,2)}},Kh=function(t){var e=RL(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},jL=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var u=Math.floor(e),m=i*(1-n),l=i*(1-(e-u)*n),s=i*(1-(1-e+u)*n),h=u%6;return{r:pt(255*[i,l,m,m,s,i][h]),g:pt(255*[s,i,i,l,m,m][h]),b:pt(255*[m,m,s,i,i,l][h]),a:pt(r,2)}},Mo=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},NL=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,u=r<1?Mo(pt(255*r)):"";return"#"+Mo(e)+Mo(n)+Mo(i)+u},BL=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,u=Math.max(e,n,i),m=u-Math.min(e,n,i),l=m?u===e?(n-i)/m:u===n?2+(i-e)/m:4+(e-n)/m:0;return{h:pt(60*(l<0?l+6:l)),s:pt(u?m/u*100:0),v:pt(u/255*100),a:r}},VL=we.memo(function(t){var e=t.hue,n=t.onChange,i=Zp(["react-colorful__hue",t.className]);return we.createElement("div",{className:i},we.createElement(KS,{onMove:function(r){n({h:360*r.left})},onKey:function(r){n({h:Va(e+360*r.left,0,360)})},"aria-label":"Hue","aria-valuenow":pt(e),"aria-valuemax":"360","aria-valuemin":"0"},we.createElement(qS,{className:"react-colorful__hue-pointer",left:e/360,color:Kh({h:e,s:100,v:100,a:1})})))}),zL=we.memo(function(t){var e=t.hsva,n=t.onChange,i={backgroundColor:Kh({h:e.h,s:100,v:100,a:1})};return we.createElement("div",{className:"react-colorful__saturation",style:i},we.createElement(KS,{onMove:function(r){n({s:100*r.left,v:100-100*r.top})},onKey:function(r){n({s:Va(e.s+100*r.left,0,100),v:Va(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+pt(e.s)+"%, Brightness "+pt(e.v)+"%"},we.createElement(qS,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:Kh(e)})))}),QS=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0},UL=function(t,e){return t.toLowerCase()===e.toLowerCase()||QS(Xh(t),Xh(e))};function HL(t,e,n){var i=Gh(n),r=B.useState(function(){return t.toHsva(e)}),u=r[0],m=r[1],l=B.useRef({color:e,hsva:u});B.useEffect(function(){if(!t.equal(e,l.current.color)){var h=t.toHsva(e);l.current={hsva:h,color:e},m(h)}},[e,t]),B.useEffect(function(){var h;QS(u,l.current.hsva)||t.equal(h=t.fromHsva(u),l.current.color)||(l.current={hsva:u,color:h},i(h))},[u,t,i]);var s=B.useCallback(function(h){m(function(f){return Object.assign({},f,h)})},[]);return[u,s]}var WL=typeof window<"u"?B.useLayoutEffect:B.useEffect,$L=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},X0=new Map,GL=function(t){WL(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!X0.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,X0.set(e,n);var i=$L();i&&n.setAttribute("nonce",i),e.head.appendChild(n)}},[])},YL=function(t){var e=t.className,n=t.colorModel,i=t.color,r=i===void 0?n.defaultColor:i,u=t.onChange,m=XS(t,["className","colorModel","color","onChange"]),l=B.useRef(null);GL(l);var s=HL(n,r,u),h=s[0],f=s[1],a=Zp(["react-colorful",e]);return we.createElement("div",qc({},m,{ref:l,className:a}),we.createElement(zL,{hsva:h,onChange:f}),we.createElement(VL,{hue:h.h,onChange:f,className:"react-colorful__last-control"}))},XL={defaultColor:"000",toHsva:LL,fromHsva:function(t){return FL({h:t.h,s:t.s,v:t.v,a:1})},equal:UL},KL=function(t){return we.createElement(YL,qc({},t,{colorModel:XL}))};function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qh.apply(null,arguments)}var JS=["shift","alt","meta","mod","ctrl"],qL={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function xi(t){return(t&&qL[t]||t||"").trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function QL(t){return JS.includes(t)}function af(t,e){return e===void 0&&(e=","),t.split(e)}function of(t,e,n){e===void 0&&(e="+");var i=t.toLocaleLowerCase().split(e).map(function(m){return xi(m)}),r={alt:i.includes("alt"),ctrl:i.includes("ctrl")||i.includes("control"),shift:i.includes("shift"),meta:i.includes("meta"),mod:i.includes("mod")},u=i.filter(function(m){return!JS.includes(m)});return qh({},r,{keys:u,description:n,hotkey:t})}(function(){typeof document<"u"&&(document.addEventListener("keydown",function(t){t.key!==void 0&&ZS([xi(t.key),xi(t.code)])}),document.addEventListener("keyup",function(t){t.key!==void 0&&eC([xi(t.key),xi(t.code)])})),typeof window<"u"&&window.addEventListener("blur",function(){wi.clear()})})();var wi=new Set;function em(t){return Array.isArray(t)}function JL(t,e){e===void 0&&(e=",");var n=em(t)?t:t.split(e);return n.every(function(i){return wi.has(i.trim().toLowerCase())})}function ZS(t){var e=Array.isArray(t)?t:[t];wi.has("meta")&&wi.forEach(function(n){return!QL(n)&&wi.delete(n.toLowerCase())}),e.forEach(function(n){return wi.add(n.toLowerCase())})}function eC(t){var e=Array.isArray(t)?t:[t];t==="meta"?wi.clear():e.forEach(function(n){return wi.delete(n.toLowerCase())})}function ZL(t,e,n){(typeof n=="function"&&n(t,e)||n===!0)&&t.preventDefault()}function eF(t,e,n){return typeof n=="function"?n(t,e):n===!0||n===void 0}function tF(t){return tC(t,["input","textarea","select"])}function tC(t,e){e===void 0&&(e=!1);var n=t.target,i=t.composed,r=null;return nF(n)&&i?r=t.composedPath()[0]&&t.composedPath()[0].tagName:r=n&&n.tagName,em(e)?!!(r&&e&&e.some(function(u){var m;return u.toLowerCase()===((m=r)==null?void 0:m.toLowerCase())})):!!(r&&e&&e)}function nF(t){return!!t.tagName&&!t.tagName.startsWith("-")&&t.tagName.includes("-")}function iF(t,e){return t.length===0&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):e?t.some(function(n){return e.includes(n)})||t.includes("*"):!0}var rF=function(e,n,i){i===void 0&&(i=!1);var r=n.alt,u=n.meta,m=n.mod,l=n.shift,s=n.ctrl,h=n.keys,f=e.key,a=e.code,o=e.ctrlKey,c=e.metaKey,d=e.shiftKey,v=e.altKey,p=xi(a),g=f.toLowerCase();if(!(h!=null&&h.includes(p))&&!(h!=null&&h.includes(g))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(p))return!1;if(!i){if(r===!v&&g!=="alt"||l===!d&&g!=="shift")return!1;if(m){if(!c&&!o)return!1}else if(u===!c&&g!=="meta"&&g!=="os"||s===!o&&g!=="ctrl"&&g!=="control")return!1}return h&&h.length===1&&(h.includes(g)||h.includes(p))?!0:h?JL(h):!h},sF=B.createContext(void 0),aF=function(){return B.useContext(sF)};function nC(t,e){return t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(t).length===Object.keys(e).length&&Object.keys(t).reduce(function(n,i){return n&&nC(t[i],e[i])},!0):t===e}var oF=B.createContext({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),lF=function(){return B.useContext(oF)};function cF(t){var e=B.useRef(void 0);return nC(e.current,t)||(e.current=t),e.current}var K0=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},uF=typeof window<"u"?B.useLayoutEffect:B.useEffect;function lf(t,e,n,i){var r=B.useState(null),u=r[0],m=r[1],l=B.useRef(!1),s=n instanceof Array?i instanceof Array?void 0:i:n,h=em(t)?t.join(s==null?void 0:s.splitKey):t,f=n instanceof Array?n:i instanceof Array?i:void 0,a=B.useCallback(e,f??[]),o=B.useRef(a);f?o.current=a:o.current=e;var c=cF(s),d=lF(),v=d.enabledScopes,p=aF();return uF(function(){if(!((c==null?void 0:c.enabled)===!1||!iF(v,c==null?void 0:c.scopes))){var g=function(S,_){var C;if(_===void 0&&(_=!1),!(tF(S)&&!tC(S,c==null?void 0:c.enableOnFormTags))){if(u!==null){var T=u.getRootNode();if((T instanceof Document||T instanceof ShadowRoot)&&T.activeElement!==u&&!u.contains(T.activeElement)){K0(S);return}}(C=S.target)!=null&&C.isContentEditable&&!(c!=null&&c.enableOnContentEditable)||af(h,c==null?void 0:c.splitKey).forEach(function(O){var L,j=of(O,c==null?void 0:c.combinationKey);if(rF(S,j,c==null?void 0:c.ignoreModifiers)||(L=j.keys)!=null&&L.includes("*")){if(c!=null&&c.ignoreEventWhen!=null&&c.ignoreEventWhen(S)||_&&l.current)return;if(ZL(S,j,c==null?void 0:c.preventDefault),!eF(S,j,c==null?void 0:c.enabled)){K0(S);return}o.current(S,j),_||(l.current=!0)}})}},y=function(S){S.key!==void 0&&(ZS(xi(S.code)),((c==null?void 0:c.keydown)===void 0&&(c==null?void 0:c.keyup)!==!0||c!=null&&c.keydown)&&g(S))},x=function(S){S.key!==void 0&&(eC(xi(S.code)),l.current=!1,c!=null&&c.keyup&&g(S,!0))},w=u||(s==null?void 0:s.document)||document;return w.addEventListener("keyup",x),w.addEventListener("keydown",y),p&&af(h,c==null?void 0:c.splitKey).forEach(function(b){return p.addHotkey(of(b,c==null?void 0:c.combinationKey,c==null?void 0:c.description))}),function(){w.removeEventListener("keyup",x),w.removeEventListener("keydown",y),p&&af(h,c==null?void 0:c.splitKey).forEach(function(b){return p.removeHotkey(of(b,c==null?void 0:c.combinationKey,c==null?void 0:c.description))})}}},[u,h,c,v]),m}function fF({canvas:t}){const{selectedImage:e,addEditAction:n}=yn(),[i,r]=B.useState("#000000"),[u,m]=B.useState(!1),[l,s]=B.useState(5),[h,f]=B.useState("draw"),[a,o]=B.useState([]),[c,d]=B.useState([]),[v,p]=B.useState(0);B.useEffect(()=>{if(t)return t.isDrawingMode=h==="draw"||h==="eraser",h==="draw"?(t.freeDrawingBrush=new it.fabric.PencilBrush(t),t.freeDrawingBrush.color=i,t.freeDrawingBrush.width=l):h==="eraser"&&(t.freeDrawingBrush=new it.fabric.EraserBrush(t),t.freeDrawingBrush.width=l),t.on("object:added",()=>{const T=JSON.stringify(t.toJSON());o(O=>[...O,T]),d([]),e&&n(e,{id:Date.now().toString(),type:"annotation",timestamp:Date.now(),description:`Added ${h} annotation`,params:{tool:h,color:i,brushSize:l}})}),()=>{t.off("object:added")}},[h,i,l,t,e,n]),lf("ctrl+z",()=>g(),[a]),lf("ctrl+y",()=>y(),[c]),lf("delete",()=>{if(t){const T=t.getActiveObject();T&&(t.remove(T),t.renderAll(),e&&n(e,{id:Date.now().toString(),type:"annotation",timestamp:Date.now(),description:"Removed annotation"}))}},[t,e]);const g=()=>{if(!t||a.length<=1)return;const T=a[a.length-1],O=a[a.length-2];O&&t.loadFromJSON(O,()=>{t.renderAll(),o(L=>L.slice(0,-1)),d(L=>[...L,T]),e&&n(e,{id:Date.now().toString(),type:"undo",timestamp:Date.now(),description:"Undo action"})})},y=()=>{if(!t||c.length===0)return;const T=c[c.length-1];T&&t.loadFromJSON(T,()=>{t.renderAll(),d(O=>O.slice(0,-1)),o(O=>[...O,T]),e&&n(e,{id:Date.now().toString(),type:"redo",timestamp:Date.now(),description:"Redo action"})})},x=T=>{if(!t)return;const L=(v+90)%360;p(L);const j=t.backgroundImage;j&&(j.rotate(L),t.renderAll(),e&&n(e,{id:Date.now().toString(),type:"rotate",timestamp:Date.now(),description:"Rotated image clockwise",params:{angle:L}}))},w=T=>{if(!t)return;const O=t.backgroundImage;O&&(T==="horizontal"?O.flipX=!O.flipX:O.flipY=!O.flipY,t.renderAll(),e&&n(e,{id:Date.now().toString(),type:"flip",timestamp:Date.now(),description:`Flipped image ${T}`,params:{direction:T}}))},b=T=>{if(!t)return;let O;T==="rect"?O=new it.fabric.Rect({left:100,top:100,width:100,height:100,fill:"transparent",stroke:i,strokeWidth:2}):O=new it.fabric.Circle({left:100,top:100,radius:50,fill:"transparent",stroke:i,strokeWidth:2}),t.add(O),t.setActiveObject(O),t.renderAll(),e&&n(e,{id:Date.now().toString(),type:"shape",timestamp:Date.now(),description:`Added ${T} shape`,params:{type:T,color:i}})},S=()=>{if(!t)return;const T=new it.fabric.IText("Double click to edit",{left:100,top:100,fontFamily:"Arial",fill:i,fontSize:20});t.add(T),t.setActiveObject(T),t.renderAll(),e&&n(e,{id:Date.now().toString(),type:"text",timestamp:Date.now(),description:"Added text",params:{color:i,fontSize:20}})},_=[{id:"draw",icon:Ax,label:"Draw"},{id:"rect",icon:Fx,label:"Rectangle"},{id:"circle",icon:GT,label:"Circle"},{id:"text",icon:jx,label:"Text"},{id:"eraser",icon:XT,label:"Eraser"}],C=[{icon:Yd,label:"Rotate Right",action:()=>x()},{icon:qT,label:"Flip H",action:()=>w("horizontal")},{icon:QT,label:"Flip V",action:()=>w("vertical")}];return N.jsx("div",{className:"space-y-4",children:N.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[N.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:_.map(({id:T,icon:O,label:L})=>N.jsxs("button",{onClick:()=>{f(T),T==="rect"&&b("rect"),T==="circle"&&b("circle"),T==="text"&&S()},className:`p-2 rounded flex flex-col items-center ${h===T?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[N.jsx(O,{className:"h-5 w-5"}),N.jsx("span",{className:"text-xs mt-1",children:L})]},T))}),N.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:C.map(({icon:T,label:O,action:L})=>N.jsxs("button",{onClick:L,className:"p-2 rounded flex flex-col items-center bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:[N.jsx(T,{className:"h-5 w-5"}),N.jsx("span",{className:"text-xs mt-1",children:O})]},O))}),(h==="draw"||h==="eraser")&&N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Size"}),N.jsx("input",{type:"range",min:"1",max:"50",value:l,onChange:T=>s(Number(T.target.value)),className:"w-full"})]}),h==="draw"&&N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),N.jsxs("div",{className:"relative",children:[N.jsx("button",{onClick:()=>m(!u),className:"w-full h-10 rounded border",style:{backgroundColor:i}}),u&&N.jsx("div",{className:"absolute z-10 mt-2",children:N.jsx(KL,{color:i,onChange:r})})]})]})]}),N.jsxs("div",{className:"mt-4 flex space-x-2",children:[N.jsx("button",{onClick:g,disabled:a.length<=1,className:"flex-1 py-2 px-4 bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50",children:N.jsx(uk,{className:"h-4 w-4 mx-auto"})}),N.jsx("button",{onClick:y,disabled:c.length===0,className:"flex-1 py-2 px-4 bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50",children:N.jsx(ak,{className:"h-4 w-4 mx-auto"})})]})]})})}function hF({image:t}){const[e,n]=B.useState(null),[i,r]=B.useState(null),[u,m]=B.useState(.8),[l,s]=B.useState("jpeg"),[h,f]=B.useState(!1),a=t.file.size,o=async()=>{f(!0);try{const p={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,initialQuality:u,fileType:`image/${l}`},g=await xt(t.file,p);n(g.size),r(URL.createObjectURL(g))}catch(p){console.error("Error compressing image:",p)}f(!1)},c=()=>{if(i){const p=`${t.file.name.split(".")[0]}_compressed.${l}`;Wx.saveAs(i,p)}},d=p=>{if(p===0)return"0 Bytes";const g=1024,y=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(p)/Math.log(g));return parseFloat((p/Math.pow(g,x)).toFixed(2))+" "+y[x]},v=e?((a-e)/a*100).toFixed(1):null;return N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[N.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Image Compression"}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{children:[N.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Quality (",Math.round(u*100),"%)"]}),N.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:u,onChange:p=>m(Number(p.target.value)),className:"w-full"})]}),N.jsxs("div",{children:[N.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Format"}),N.jsxs("select",{value:l,onChange:p=>s(p.target.value),className:"w-full p-2 border rounded",children:[N.jsx("option",{value:"jpeg",children:"JPEG"}),N.jsx("option",{value:"png",children:"PNG"}),N.jsx("option",{value:"webp",children:"WebP"})]})]}),N.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[N.jsxs("div",{children:["Original Size: ",d(a)]}),e&&N.jsxs("div",{children:["Compressed: ",d(e)]})]}),v&&N.jsxs("div",{className:"bg-green-50 dark:bg-green-900 text-green-700 dark:text-green-300 px-3 py-2 rounded",children:["Reduced by ",v,"%"]}),N.jsxs("div",{className:"flex space-x-2",children:[N.jsxs("button",{onClick:o,disabled:h,className:"flex-1 flex items-center justify-center px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50",children:[h?N.jsx(lh,{className:"h-4 w-4 animate-spin mr-2"}):N.jsx(lh,{className:"h-4 w-4 mr-2"}),"Compress"]}),i&&N.jsxs("button",{onClick:c,className:"flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:[N.jsx(YT,{className:"h-4 w-4 mr-2"}),"Download"]})]})]})]}),i&&N.jsxs("div",{className:"mt-4",children:[N.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview"}),N.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[N.jsxs("div",{children:[N.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Original"}),N.jsx("img",{src:t.preview,alt:"Original",className:"w-full rounded"})]}),N.jsxs("div",{children:[N.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Compressed"}),N.jsx("img",{src:i,alt:"Compressed",className:"w-full rounded"})]})]})]})]})}var dF=function(t,e){var n=B.useRef(function(){});B.useEffect(function(){n.current=t}),B.useEffect(function(){if(e!==null){var i=setInterval(function(){return n.current()},e||0);return function(){return clearInterval(i)}}},[e])};function pF({image:t}){const[e,n]=B.useState(!1),[i,r]=B.useState(1e3),[u,m]=B.useState(0),[l,s]=B.useState([]),[h,f]=B.useState(null);dF(()=>{u<100?m(o=>Math.min(o+10,100)):n(!1)},e?i:null),B.useEffect(()=>{(async()=>{var p;const d=(p=(await fetch(t.preview)).body)==null?void 0:p.getReader(),v=[];if(d)for(;;){const{done:g,value:y}=await d.read();if(g)break;v.push(y),s([...v])}})()},[t]),B.useEffect(()=>{if(l.length>0){const o=new Blob(l,{type:"image/jpeg"});f(URL.createObjectURL(o))}},[l]);const a=()=>{u>=100&&m(0),n(!e)};return N.jsx("div",{className:"space-y-4",children:N.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[N.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[N.jsx(lh,{className:"h-5 w-5 mr-2"}),"Progressive Streaming"]}),N.jsxs("div",{className:"flex items-center justify-between mb-4",children:[N.jsx("button",{onClick:a,className:"flex items-center px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600",children:e?N.jsxs(N.Fragment,{children:[N.jsx(rk,{className:"h-4 w-4 mr-2"}),"Pause"]}):N.jsxs(N.Fragment,{children:[N.jsx(Mx,{className:"h-4 w-4 mr-2"}),"Play"]})}),N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsx(ok,{className:"h-4 w-4 text-gray-500"}),N.jsx("input",{type:"number",value:i,onChange:o=>r(Number(o.target.value)),className:"w-20 px-2 py-1 border rounded",min:"100",max:"5000",step:"100"}),N.jsx("span",{className:"text-sm text-gray-500",children:"ms"})]})]}),N.jsxs("div",{className:"space-y-2",children:[N.jsxs("div",{className:"flex justify-between text-sm",children:[N.jsx("span",{children:"Loading Quality"}),N.jsxs("span",{children:[u,"%"]})]}),N.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded overflow-hidden",children:N.jsx(gn.div,{className:"h-full bg-purple-500",initial:{width:0},animate:{width:`${u}%`},transition:{duration:.3}})})]}),N.jsx(Ic,{mode:"wait",children:N.jsx(gn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-4 aspect-video bg-gray-100 dark:bg-gray-900 rounded-lg overflow-hidden",children:N.jsx("img",{src:h||t.preview,alt:"Preview",className:"w-full h-full object-contain",style:{filter:`blur(${(100-u)/10}px)`,transition:"filter 0.3s ease-out"}})},u)})]})})}function mF({image:t}){const{tags:e,addTag:n,updateImage:i}=yn(),[r,u]=B.useState(""),[m,l]=B.useState("Other"),[s,h]=B.useState(new Set(["Nature"])),[f,a]=B.useState(""),o=t.tags,c=["Nature","People","Objects","Other"],d=()=>{if(!r.trim())return;const x={value:r.toLowerCase(),label:r,category:m};n(x),i(t.id,{tags:[...o,x.value]}),u("")},v=x=>{i(t.id,{tags:o.filter(w=>w!==x)})},p=x=>{const w=new Set(s);w.has(x)?w.delete(x):w.add(x),h(w)},g=e.reduce((x,w)=>(x[w.category]||(x[w.category]=[]),x[w.category].push(w),x),{});e.filter(x=>x.label.toLowerCase().includes(f.toLowerCase())||x.category.toLowerCase().includes(f.toLowerCase()));const y=e.map(x=>({...x,count:o.filter(w=>w===x.value).length})).sort((x,w)=>w.count-x.count);return N.jsx("div",{className:"space-y-4",children:N.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg",children:[N.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[N.jsx(ck,{className:"h-5 w-5 mr-2"}),"Image Tags"]}),N.jsxs("div",{className:"space-y-4",children:[N.jsxs("div",{className:"flex space-x-2",children:[N.jsx("input",{type:"text",value:r,onChange:x=>u(x.target.value),onKeyPress:x=>x.key==="Enter"&&d(),placeholder:"Add new tag...",className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),N.jsx("select",{value:m,onChange:x=>l(x.target.value),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500",children:c.map(x=>N.jsx("option",{value:x,children:x},x))}),N.jsx("button",{onClick:d,className:"p-2 rounded-lg bg-purple-500 text-white hover:bg-purple-600",children:N.jsx(Dx,{className:"h-5 w-5"})})]}),N.jsx("div",{className:"space-y-2",children:N.jsx("input",{type:"text",value:f,onChange:x=>a(x.target.value),placeholder:"Search tags...",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500"})}),N.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(x=>{const w=e.find(b=>b.value===x);return N.jsxs(gn.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"flex items-center bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 px-2 py-1 rounded-lg",children:[N.jsx(ZT,{className:"h-3 w-3 mr-1"}),N.jsx("span",{className:"text-sm",children:(w==null?void 0:w.label)||x}),N.jsx("button",{onClick:()=>v(x),className:"ml-1 p-1 rounded-full hover:bg-purple-200 dark:hover:bg-purple-800",children:N.jsx(Xd,{className:"h-3 w-3"})})]},x)})}),N.jsxs("div",{className:"mt-6 space-y-2",children:[N.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Categories"}),c.map(x=>{var w,b;return N.jsxs("div",{className:"space-y-1",children:[N.jsxs("button",{onClick:()=>p(x),className:"flex items-center w-full text-left p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[s.has(x)?N.jsx(WT,{className:"h-4 w-4 mr-2"}):N.jsx(Ex,{className:"h-4 w-4 mr-2"}),N.jsx("span",{children:x}),N.jsx("span",{className:"ml-auto text-sm text-gray-500",children:((w=g[x])==null?void 0:w.length)||0})]}),N.jsx(Ic,{children:s.has(x)&&N.jsx(gn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"ml-6 space-y-1",children:(b=g[x])==null?void 0:b.map(S=>N.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:[N.jsx("span",{className:"text-sm",children:S.label}),N.jsxs("span",{className:"text-xs text-gray-500",children:[o.filter(_=>_===S.value).length," uses"]})]},S.value))})})]},x)})]}),N.jsxs("div",{className:"mt-6",children:[N.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Popular Tags"}),N.jsx("div",{className:"space-y-2",children:y.slice(0,5).map(({label:x,count:w,category:b})=>N.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[N.jsxs("div",{className:"flex items-center",children:[N.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${b==="Nature"?"bg-green-500":b==="People"?"bg-blue-500":b==="Objects"?"bg-yellow-500":"bg-gray-500"}`}),N.jsx("span",{className:"text-sm",children:x})]}),N.jsxs("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:[w," ",w===1?"use":"uses"]})]},x))})]})]})]})})}function tm({image:t,mode:e="edit",onSave:n,onClose:i,isBatchMode:r}){const{updateImage:u}=yn(),[m,l]=B.useState(null),s=B.useRef(null),h=B.useRef(null),[f,a]=B.useState(e==="compress"?"compression":e==="stream"?"stream":"annotations"),[o,c]=B.useState(!1),[d,v]=B.useState(!0);B.useEffect(()=>{if(s.current&&h.current){const y=new it.fabric.Canvas(s.current,{preserveObjectStacking:!0,width:h.current.clientWidth-(d?320:0),height:h.current.clientHeight});it.fabric.Image.fromURL(t.preview,w=>{const b=h.current.clientWidth-(d?320:0),S=h.current.clientHeight,_=Math.min(b/w.width,S/w.height);w.scale(_),y.setDimensions({width:b,height:S}),y.setBackgroundImage(w,y.renderAll.bind(y),{originX:"center",originY:"center",left:b/2,top:S/2})}),l(y);const x=()=>{if(h.current){const w=h.current.clientWidth-(d?320:0),b=h.current.clientHeight;y.setDimensions({width:w,height:b}),y.renderAll()}};return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x),y.dispose()}}},[t,d]);const p=async()=>{if(m)try{const x={preview:m.toDataURL({format:"png",quality:1}),editHistory:[...t.editHistory,{id:Date.now().toString(),type:"save",timestamp:Date.now(),description:"Saved canvas state"}]};n?n(x):await u(t.id,x),Ee.success("Changes saved successfully")}catch{Ee.error("Failed to save changes")}},g=[{id:"annotations",label:"Annotations"},{id:"filters",label:"Filters"},{id:"compression",label:"Compression"},{id:"stream",label:"Stream"},{id:"tags",label:"Tags"}];return N.jsxs("div",{ref:h,className:`${r?"":"fixed inset-0"} bg-white dark:bg-gray-800 z-50 flex flex-col`,children:[N.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[N.jsxs("div",{className:"flex items-center justify-between p-4",children:[N.jsxs("div",{className:"flex items-center space-x-4",children:[i&&N.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:N.jsx(Xd,{className:"h-5 w-5"})}),N.jsxs("h2",{className:"text-lg font-semibold",children:["Editing ",t.file.name]})]}),N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsx("button",{onClick:()=>v(!d),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:N.jsx(ik,{className:"h-5 w-5"})}),N.jsx("button",{onClick:()=>c(!o),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:N.jsx(tk,{className:"h-5 w-5"})}),N.jsx("button",{onClick:p,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600",children:"Save Changes"})]})]}),N.jsx("div",{className:"flex px-4",children:g.map(({id:y,label:x})=>N.jsx("button",{onClick:()=>a(y),className:`px-4 py-2 border-b-2 font-medium ${f===y?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:x},y))})]}),N.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[N.jsx("div",{className:"flex-1 overflow-auto",children:N.jsx("canvas",{ref:s,className:"w-full h-full"})}),d&&N.jsxs("div",{className:"w-80 border-l border-gray-200 dark:border-gray-700 overflow-y-auto p-4",children:[f==="filters"&&N.jsx(IL,{canvas:m}),f==="annotations"&&N.jsx(fF,{canvas:m}),f==="compression"&&N.jsx(hF,{image:t}),f==="stream"&&N.jsx(pF,{image:t}),f==="tags"&&N.jsx(mF,{image:t}),N.jsx(DL,{image:t})]})]})]})}function gF({selectedImages:t,mode:e,onClose:n}){const{images:i,updateImage:r}=yn(),[u,m]=B.useState(0),s=i.filter(o=>t.includes(o.id))[u],h=()=>{m(o=>Math.min(o+1,t.length-1))},f=()=>{m(o=>Math.max(o-1,0))},a=async o=>{s&&(await r(s.id,o),u<t.length-1&&h())};return N.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center",children:N.jsxs("div",{className:"relative w-full h-full max-w-7xl mx-auto p-4",children:[N.jsx("button",{onClick:n,className:"absolute top-4 right-4 z-50 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",children:N.jsx(Xd,{className:"h-6 w-6"})}),N.jsxs("div",{className:"flex items-center justify-between h-full",children:[N.jsx("button",{onClick:f,disabled:u===0,className:"p-2 bg-white rounded-full shadow-lg disabled:opacity-50 hover:bg-gray-100",children:N.jsx($T,{className:"h-6 w-6"})}),N.jsx("div",{className:"flex-1 mx-4 h-full",children:N.jsx(Ic,{mode:"wait",children:N.jsx(gn.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"h-full",children:s&&N.jsx(tm,{image:s,onSave:a,mode:e,isBatchMode:!0})},s==null?void 0:s.id)})}),N.jsx("button",{onClick:h,disabled:u===t.length-1,className:"p-2 bg-white rounded-full shadow-lg disabled:opacity-50 hover:bg-gray-100",children:N.jsx(Ex,{className:"h-6 w-6"})})]}),N.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-white rounded-lg shadow-lg px-4 py-2",children:N.jsxs("span",{className:"font-medium",children:["Image ",u+1," of ",t.length]})})]})})}function vF(){const[t,e]=B.useState("grid"),{getFilteredAndSortedImages:n,setSelectedImage:i}=yn(),[r,u]=B.useState([]),[m,l]=B.useState(!1),[s,h]=B.useState(!1),[f,a]=B.useState(null),[o,c]=B.useState(null),d=n(),v=(w,b)=>{c(w),a(b),h(!0)},p=w=>{u(b=>b.includes(w)?b.filter(S=>S!==w):[...b,w])},g=w=>{a(w),l(!0)},y=[{icon:HT,label:"Select All",action:()=>u(d.map(w=>w.id))},{icon:JT,label:"Grid View",action:()=>e("grid"),active:t==="grid"},{icon:ek,label:"List View",action:()=>e("list"),active:t==="list"}],x=[{icon:sk,label:"Edit",action:w=>v(w,"edit")},{icon:Rx,label:"Tag",action:w=>v(w,"edit")},{icon:Mx,label:"Stream",action:w=>v(w,"stream")},{icon:KT,label:"Compress",action:w=>v(w,"compress")}];return N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("div",{className:"flex space-x-4",children:y.map(({icon:w,label:b,action:S,active:_})=>N.jsxs("button",{onClick:S,className:`flex items-center p-2 rounded hover:bg-purple-100 dark:hover:bg-purple-900 ${_?"bg-purple-100 dark:bg-purple-900":""}`,title:b,children:[N.jsx(w,{className:"h-5 w-5"}),N.jsx("span",{className:"ml-2 text-sm",children:b})]},b))}),N.jsx(kI,{})]}),N.jsx(TI,{}),N.jsx(gn.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:`grid gap-4 ${t==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:d.map(w=>N.jsxs(gn.div,{variants:{hidden:{opacity:0,y:20},show:{opacity:1,y:0}},className:`relative group ${t==="grid"?"aspect-square":"h-40"}`,children:[N.jsx("div",{className:"absolute top-2 left-2 z-10",children:N.jsx("input",{type:"checkbox",checked:r.includes(w.id),onChange:()=>p(w.id),className:"h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500"})}),N.jsxs("div",{className:"relative h-full",children:[N.jsx("img",{src:w.preview,alt:"",className:`w-full h-full rounded-lg object-cover ${r.includes(w.id)?"ring-2 ring-purple-500":""}`}),N.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-b-lg",children:N.jsx("div",{className:"flex justify-around",children:x.map(({icon:b,label:S,action:_})=>N.jsxs("button",{onClick:C=>{C.stopPropagation(),_(w.id)},className:"flex flex-col items-center p-1 text-white hover:text-purple-300 transition-colors",children:[N.jsx(b,{className:"h-4 w-4 mb-1"}),N.jsx("span",{className:"text-xs",children:S})]},S))})})]}),N.jsx("div",{className:"mt-2",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsxs("div",{className:"flex flex-wrap gap-1",children:[w.tags.slice(0,3).map(b=>N.jsx("span",{className:"text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 px-2 py-1 rounded",children:b},b)),w.tags.length>3&&N.jsxs("span",{className:"text-xs bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:["+",w.tags.length-3]})]}),w.editHistory.length>0&&N.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Edited ",YS(w.editHistory[w.editHistory.length-1].timestamp,"MMM d, HH:mm")]})]})})]},w.id))}),d.length===0&&N.jsxs("div",{className:"text-center py-12",children:[N.jsx(Ix,{className:"mx-auto h-12 w-12 text-gray-400"}),N.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"No images found. Upload some images to get started!"})]}),r.length>0&&N.jsxs("div",{className:"fixed bottom-4 right-4 flex space-x-2",children:[N.jsxs("button",{onClick:()=>g("edit"),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600",children:["Edit All (",r.length,")"]}),N.jsxs("button",{onClick:()=>g("compress"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:["Compress All (",r.length,")"]}),N.jsxs("button",{onClick:()=>g("stream"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:["Stream All (",r.length,")"]}),N.jsx("button",{onClick:()=>u([]),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Clear Selection"})]}),m&&f&&N.jsx(gF,{selectedImages:r,mode:f,onClose:()=>{l(!1),a(null)}}),s&&o&&f&&N.jsx(tm,{image:d.find(w=>w.id===o),mode:f,onClose:()=>{h(!1),c(null),a(null)}})]})}function yF(){const[t,e]=B.useState(()=>localStorage.getItem("theme")||"light");return B.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.classList.toggle("dark",t==="dark")},[t]),{theme:t,toggleTheme:()=>{e(i=>i==="light"?"dark":"light")}}}function xF(){const t=yn(i=>i.selectedImage),{theme:e,toggleTheme:n}=yF();return N.jsxs("div",{className:`min-h-screen transition-colors duration-200 ${e==="dark"?"bg-gray-900 text-white":"bg-pink-50 text-gray-900"}`,children:[N.jsx("nav",{className:`${e==="dark"?"bg-gray-800":"bg-white"} shadow-md p-4`,children:N.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[N.jsx("h1",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:"ImagerML"}),N.jsxs("div",{className:"flex items-center space-x-4",children:[N.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e==="dark"?N.jsx(lk,{className:"h-5 w-5"}):N.jsx(nk,{className:"h-5 w-5"})}),N.jsx("button",{className:"px-4 py-2 rounded-md bg-purple-500 text-white hover:bg-purple-600 transition-colors",children:"Gallery View"}),N.jsx("button",{className:"px-4 py-2 rounded-md bg-purple-500 text-white hover:bg-purple-600 transition-colors",children:"ImagerML Editor"})]})]})}),N.jsxs("main",{className:"container mx-auto p-4",children:[N.jsxs("div",{className:`${e==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6 mb-8`,children:[N.jsx("h2",{className:"text-lg text-center mb-4",children:"ImagerML is an all-in-one platform for image uploading, editing, tagging, compressing, streaming filtering, and management with real-time collaboration and easy saving."}),N.jsx(lO,{})]}),t?N.jsx(tm,{}):N.jsx(vF,{})]}),N.jsx(U_,{position:"bottom-right",theme:e})]})}cx(document.getElementById("root")).render(N.jsx(B.StrictMode,{children:N.jsx(xF,{})}));
